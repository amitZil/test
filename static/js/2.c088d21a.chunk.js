(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,i){"use strict";e.exports=i(33)},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,"a",function(){return r})},function(e,t,i){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r="function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}var o=i(7);function a(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(o.a)(e):t}i.d(t,"a",function(){return a})},function(e,t,i){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}i.d(t,"a",function(){return r})},function(e,t,i){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";var n=!0,r="Invariant failed";t.a=function(e,t){if(!e)throw n?new Error(r):new Error(r+": "+(t||""))}},function(e,t,i){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(34)},function(e,t,i){"use strict";var n=i(3);function r(e){return"/"===e.charAt(0)}function o(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e&&e.split("/")||[],n=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),l=a||s;if(e&&r(e)?n=i:i.length&&(n.pop(),n=n.concat(i)),!n.length)return"/";var c=void 0;if(n.length){var h=n[n.length-1];c="."===h||".."===h||""===h}else c=!1;for(var d=0,p=n.length;p>=0;p--){var u=n[p];"."===u?o(n,p):".."===u?(o(n,p),d++):d&&(o(n,p),d--)}if(!l)for(;d--;d)n.unshift("..");!l||""===n[0]||n[0]&&r(n[0])||n.unshift("");var f=n.join("/");return c&&"/"!==f.substr(-1)&&(f+="/"),f},s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var l=function e(t,i){if(t===i)return!0;if(null==t||null==i)return!1;if(Array.isArray(t))return Array.isArray(i)&&t.length===i.length&&t.every(function(t,n){return e(t,i[n])});var n="undefined"===typeof t?"undefined":s(t);if(n!==("undefined"===typeof i?"undefined":s(i)))return!1;if("object"===n){var r=t.valueOf(),o=i.valueOf();if(r!==t||o!==i)return e(r,o);var a=Object.keys(t),l=Object.keys(i);return a.length===l.length&&a.every(function(n){return e(t[n],i[n])})}return!1},c=i(8);function h(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function p(e,t){return function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)}(e,t)?e.substr(t.length):e}function u(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function f(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function g(e,t,i,r){var o;"string"===typeof e?(o=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(i=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e)).state=t:(void 0===(o=Object(n.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(o.key=i),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var o="function"===typeof e?e(t,i):e;"string"===typeof o?"function"===typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach(function(e){return e.apply(void 0,i)})}}}i.d(t,"a",function(){return C}),i.d(t,"b",function(){return T}),i.d(t,"d",function(){return L}),i.d(t,"c",function(){return g}),i.d(t,"f",function(){return m}),i.d(t,"e",function(){return f});var v=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var w="popstate",x="hashchange";function S(){try{return window.history.state||{}}catch(e){return{}}}function C(e){void 0===e&&(e={}),v||Object(c.a)(!1);var t=window.history,i=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,d=void 0===l?b:l,m=o.keyLength,C=void 0===m?6:m,P=e.basename?u(h(e.basename)):"";function E(e){var t=e||{},i=t.key,n=t.state,r=window.location,o=r.pathname+r.search+r.hash;return P&&(o=p(o,P)),g(o,n,i)}function O(){return Math.random().toString(36).substr(2,C)}var M=y();function T(e){Object(n.a)(_,e),_.length=t.length,M.notifyListeners(_.location,_.action)}function A(e){(function(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")})(e)||k(E(e.state))}function L(){k(E(S()))}var D=!1;function k(e){if(D)D=!1,T();else{M.confirmTransitionTo(e,"POP",d,function(t){t?T({action:"POP",location:e}):function(e){var t=_.location,i=R.indexOf(t.key);-1===i&&(i=0);var n=R.indexOf(e.key);-1===n&&(n=0);var r=i-n;r&&(D=!0,j(r))}(e)})}}var I=E(S()),R=[I.key];function N(e){return P+f(e)}function j(e){t.go(e)}var z=0;function H(e){1===(z+=e)&&1===e?(window.addEventListener(w,A),r&&window.addEventListener(x,L)):0===z&&(window.removeEventListener(w,A),r&&window.removeEventListener(x,L))}var B=!1;var _={length:t.length,action:"POP",location:I,createHref:N,push:function(e,n){var r=g(e,n,O(),_.location);M.confirmTransitionTo(r,"PUSH",d,function(e){if(e){var n=N(r),o=r.key,a=r.state;if(i)if(t.pushState({key:o,state:a},null,n),s)window.location.href=n;else{var l=R.indexOf(_.location.key),c=R.slice(0,-1===l?0:l+1);c.push(r.key),R=c,T({action:"PUSH",location:r})}else window.location.href=n}})},replace:function(e,n){var r=g(e,n,O(),_.location);M.confirmTransitionTo(r,"REPLACE",d,function(e){if(e){var n=N(r),o=r.key,a=r.state;if(i)if(t.replaceState({key:o,state:a},null,n),s)window.location.replace(n);else{var l=R.indexOf(_.location.key);-1!==l&&(R[l]=r.key),T({action:"REPLACE",location:r})}else window.location.replace(n)}})},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=M.setPrompt(e);return B||(H(1),B=!0),function(){return B&&(B=!1,H(-1)),t()}},listen:function(e){var t=M.appendListener(e);return H(1),function(){H(-1),t()}}};return _}var P="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:h},slash:{encodePath:h,decodePath:h}};function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function M(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)}function T(e){void 0===e&&(e={}),v||Object(c.a)(!1);var t=window.history,i=(window.navigator.userAgent.indexOf("Firefox"),e),r=i.getUserConfirmation,o=void 0===r?b:r,a=i.hashType,s=void 0===a?"slash":a,l=e.basename?u(h(e.basename)):"",d=E[s],w=d.encodePath,x=d.decodePath;function S(){var e=x(O());return l&&(e=p(e,l)),g(e)}var C=y();function T(e){Object(n.a)(_,e),_.length=t.length,C.notifyListeners(_.location,_.action)}var A=!1,L=null;function D(){var e=O(),t=w(e);if(e!==t)M(t);else{var i=S(),n=_.location;if(!A&&m(n,i))return;if(L===f(i))return;L=null,function(e){if(A)A=!1,T();else{C.confirmTransitionTo(e,"POP",o,function(t){t?T({action:"POP",location:e}):function(e){var t=_.location,i=N.lastIndexOf(f(t));-1===i&&(i=0);var n=N.lastIndexOf(f(e));-1===n&&(n=0);var r=i-n;r&&(A=!0,j(r))}(e)})}}(i)}}var k=O(),I=w(k);k!==I&&M(I);var R=S(),N=[f(R)];function j(e){t.go(e)}var z=0;function H(e){1===(z+=e)&&1===e?window.addEventListener(P,D):0===z&&window.removeEventListener(P,D)}var B=!1;var _={length:t.length,action:"POP",location:R,createHref:function(e){return"#"+w(l+f(e))},push:function(e,t){var i=g(e,void 0,void 0,_.location);C.confirmTransitionTo(i,"PUSH",o,function(e){if(e){var t=f(i),n=w(l+t);if(O()!==n){L=t,function(e){window.location.hash=e}(n);var r=N.lastIndexOf(f(_.location)),o=N.slice(0,-1===r?0:r+1);o.push(t),N=o,T({action:"PUSH",location:i})}else T()}})},replace:function(e,t){var i=g(e,void 0,void 0,_.location);C.confirmTransitionTo(i,"REPLACE",o,function(e){if(e){var t=f(i),n=w(l+t);O()!==n&&(L=t,M(n));var r=N.indexOf(f(_.location));-1!==r&&(N[r]=t),T({action:"REPLACE",location:i})}})},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return B||(H(1),B=!0),function(){return B&&(B=!1,H(-1)),t()}},listen:function(e){var t=C.appendListener(e);return H(1),function(){H(-1),t()}}};return _}function A(e,t,i){return Math.min(Math.max(e,t),i)}function L(e){void 0===e&&(e={});var t=e,i=t.getUserConfirmation,r=t.initialEntries,o=void 0===r?["/"]:r,a=t.initialIndex,s=void 0===a?0:a,l=t.keyLength,c=void 0===l?6:l,h=y();function d(e){Object(n.a)(w,e),w.length=w.entries.length,h.notifyListeners(w.location,w.action)}function p(){return Math.random().toString(36).substr(2,c)}var u=A(s,0,o.length-1),m=o.map(function(e){return g(e,void 0,"string"===typeof e?p():e.key||p())}),v=f;function b(e){var t=A(w.index+e,0,w.entries.length-1),n=w.entries[t];h.confirmTransitionTo(n,"POP",i,function(e){e?d({action:"POP",location:n,index:t}):d()})}var w={length:m.length,action:"POP",location:m[u],index:u,entries:m,createHref:v,push:function(e,t){var n=g(e,t,p(),w.location);h.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t=w.index+1,i=w.entries.slice(0);i.length>t?i.splice(t,i.length-t,n):i.push(n),d({action:"PUSH",location:n,index:t,entries:i})}})},replace:function(e,t){var n=g(e,t,p(),w.location);h.confirmTransitionTo(n,"REPLACE",i,function(e){e&&(w.entries[w.index]=n,d({action:"REPLACE",location:n}))})},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),h.setPrompt(e)},listen:function(e){return h.appendListener(e)}};return w}},function(e,t,i){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i(11),r=i(0),o=i.n(r),a=i(13),s=i(10),l=(i(16),i(3)),c=i(15),h=i(8),d=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).history=Object(s.a)(t.props),t}return Object(n.a)(t,e),t.prototype.render=function(){return o.a.createElement(a.b,{history:this.history,children:this.props.children})},t}(o.a.Component);o.a.Component;o.a.Component},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(20),a=i.n(o),s=i(16),l=i.n(s),c=i(25),h=i.n(c),d=1073741823;var p=r.a.createContext||function(e,t){var i,r,o="__create-react-context-"+h()()+"__",s=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(i,n){e=i,t.forEach(function(t){return t(e,n)})}}}(t.props.value),t}a()(i,e);var n=i.prototype;return n.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i,n=this.props.value,r=e.value;((o=n)===(a=r)?0!==o||1/o===1/a:o!==o&&a!==a)?i=0:(i="function"===typeof t?t(n,r):d,0!==(i|=0)&&this.emitter.set(e.value,i))}var o,a},n.render=function(){return this.props.children},i}(n.Component);s.childContextTypes=((i={})[o]=l.a.object.isRequired,i);var c=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,i){0!==((0|e.observedBits)&i)&&e.setState({value:e.getValue()})},e}a()(i,t);var n=i.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?d:t},n.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?d:e},n.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},n.getValue=function(){return this.context[o]?this.context[o].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(n.Component);return c.contextTypes=((r={})[o]=l.a.object,r),{Provider:s,Consumer:c}},u=i(11),f=i(10),g=i(8),m=i(21),y=i.n(m),v=i(3),b=(i(24),i(15)),w=i(26),x=i.n(w);i.d(t,"a",function(){return T}),i.d(t,"b",function(){return C}),i.d(t,"c",function(){return R}),i.d(t,"e",function(){return M}),i.d(t,"f",function(){return N}),i.d(t,"d",function(){return S});var S=function(e){var t=p();return t.displayName=e,t}("Router"),C=function(e){function t(t){var i;return(i=e.call(this,t)||this).state={location:t.history.location},i._isMounted=!1,i._pendingLocation=null,t.staticContext||(i.unlisten=t.history.listen(function(e){i._isMounted?i.setState({location:e}):i._pendingLocation=e})),i}Object(u.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=t.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&this.unlisten()},i.render=function(){return r.a.createElement(S.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(r.a.Component);r.a.Component;r.a.Component;var P={},E=1e4,O=0;function M(e,t){void 0===t&&(t={}),"string"===typeof t&&(t={path:t});var i=t,n=i.path,r=i.exact,o=void 0!==r&&r,a=i.strict,s=void 0!==a&&a,l=i.sensitive,c=void 0!==l&&l;return[].concat(n).reduce(function(t,i){if(!i)return null;if(t)return t;var n=function(e,t){var i=""+t.end+t.strict+t.sensitive,n=P[i]||(P[i]={});if(n[e])return n[e];var r=[],o={regexp:y()(e,r,t),keys:r};return O<E&&(n[e]=o,O++),o}(i,{end:o,strict:s,sensitive:c}),r=n.regexp,a=n.keys,l=r.exec(e);if(!l)return null;var h=l[0],d=l.slice(1),p=e===h;return o&&!p?null:{path:i,url:"/"===i&&""===h?"/":h,isExact:p,params:a.reduce(function(e,t,i){return e[t.name]=d[i],e},{})}},null)}var T=function(e){function t(){return e.apply(this,arguments)||this}return Object(u.a)(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(S.Consumer,null,function(t){t||Object(g.a)(!1);var i=e.props.location||t.location,n=e.props.computedMatch?e.props.computedMatch:e.props.path?M(i.pathname,e.props):t.match,o=Object(v.a)({},t,{location:i,match:n}),a=e.props,s=a.children,l=a.component,c=a.render;(Array.isArray(s)&&0===s.length&&(s=null),"function"===typeof s)&&(void 0===(s=s(o))&&(s=null));return r.a.createElement(S.Provider,{value:o},s&&!function(e){return 0===r.a.Children.count(e)}(s)?s:o.match?l?r.a.createElement(l,o):c?c(o):null:null)})},t}(r.a.Component);function A(e){return"/"===e.charAt(0)?e:"/"+e}function L(e,t){if(!e)return t;var i=A(e);return 0!==t.pathname.indexOf(i)?t:Object(v.a)({},t,{pathname:t.pathname.substr(i.length)})}function D(e){return"string"===typeof e?e:Object(f.e)(e)}function k(e){return function(){Object(g.a)(!1)}}function I(){}r.a.Component;var R=function(e){function t(){return e.apply(this,arguments)||this}return Object(u.a)(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(S.Consumer,null,function(t){t||Object(g.a)(!1);var i,n,o=e.props.location||t.location;return r.a.Children.forEach(e.props.children,function(e){if(null==n&&r.a.isValidElement(e)){i=e;var a=e.props.path||e.props.from;n=a?M(o.pathname,Object(v.a)({},e.props,{path:a})):t.match}}),n?r.a.cloneElement(i,{location:o,computedMatch:n}):null})},t}(r.a.Component);function N(e){var t="withRouter("+(e.displayName||e.name)+")",i=function(t){var i=t.wrappedComponentRef,n=Object(b.a)(t,["wrappedComponentRef"]);return r.a.createElement(S.Consumer,null,function(t){return t||Object(g.a)(!1),r.a.createElement(e,Object(v.a)({},n,t,{ref:i}))})};return i.displayName=t,i.WrappedComponent=e,x()(i,e)}},function(e,t,i){!function(e,t,i,n){"use strict";var r=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.moduleName="layer",t}(t.ComplexBase),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.propertyName="layers",t.moduleName="layers",t}(t.ComplexBase),s=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.moduleName="customCursor",t}(t.ComplexBase),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.propertyName="customCursor",t.moduleName="customCursors",t}(t.ComplexBase),h=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.moduleName="connector",t}(t.ComplexBase),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.propertyName="connectors",t.moduleName="connectors",t}(t.ComplexBase),u=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.moduleName="connectorAnnotation",t}(t.ComplexBase),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.propertyName="annotations",t.moduleName="connectorAnnotations",t}(t.ComplexBase),m=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.moduleName="node",t}(t.ComplexBase),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.propertyName="nodes",t.moduleName="nodes",t}(t.ComplexBase),b=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.moduleName="nodeAnnotation",t}(t.ComplexBase),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.propertyName="annotations",t.moduleName="nodeAnnotations",t}(t.ComplexBase),S=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t.moduleName="port",t}(t.ComplexBase),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t.propertyName="ports",t.moduleName="ports",t}(t.ComplexBase),E=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={layers:"layer",customCursors:"customCursor",connectors:{connector:{connectorAnnotations:"connectorAnnotation"}},nodes:{node:{nodeAnnotations:"nodeAnnotation",ports:"port"}}},i.immediateRender=!0,i}return E(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return i.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(n.Diagram);t.applyMixins(O,[t.ComponentBase,i.PureComponent]);var M=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.moduleName="palette",t}(t.ComplexBase),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.propertyName="palettes",t.moduleName="palettes",t}(t.ComplexBase),L=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),D=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={palettes:"palette"},i.immediateRender=!0,i}return L(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return i.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(n.SymbolPalette);t.applyMixins(D,[t.ComponentBase,i.PureComponent]);var k=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.immediateRender=!0,i}return k(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return i.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(n.Overview);t.applyMixins(I,[t.ComponentBase,i.PureComponent]),e.Inject=t.Inject,e.LayerDirective=o,e.LayersDirective=a,e.CustomCursorDirective=l,e.CustomCursorsDirective=c,e.ConnectorDirective=d,e.ConnectorsDirective=p,e.ConnectorAnnotationDirective=f,e.ConnectorAnnotationsDirective=g,e.NodeDirective=y,e.NodesDirective=v,e.NodeAnnotationDirective=w,e.NodeAnnotationsDirective=x,e.PortDirective=C,e.PortsDirective=P,e.DiagramComponent=O,e.PaletteDirective=T,e.PalettesDirective=A,e.SymbolPaletteComponent=D,e.OverviewComponent=I,Object.keys(n).forEach(function(t){e[t]=n[t]}),Object.defineProperty(e,"__esModule",{value:!0})}(t,i(57),i(0),i(56))},function(e,t,i){"use strict";function n(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}i.d(t,"a",function(){return n})},function(e,t,i){e.exports=i(51)()},function(e,t,i){"use strict";var n=i(40),r=i(44),o=i(48),a=i(49),s=i(50);function l(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function c(e,t){return t.decode?a(e):e}function h(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){var t=(e=h(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function u(e,t){var i=function(e){var t;switch(e.arrayFormat){case"index":return function(e,i,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=i):n[e]=i};case"bracket":return function(e,i,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],i):n[e]=[i]:n[e]=i};case"comma":return function(e,t,i){var n="string"===typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;i[e]=n};default:return function(e,t,i){void 0!==i[e]?i[e]=[].concat(i[e],t):i[e]=t}}}(t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},t)),r=Object.create(null);if("string"!==typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var o=!0,a=!1,l=void 0;try{for(var h,d=e.split("&")[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){var u=h.value,f=s(u.replace(/\+/g," "),"="),g=n(f,2),m=g[0];b=void 0===(b=g[1])?null:c(b,t),i(c(m,t),b,r)}}catch(C){a=!0,l=C}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}for(var y=0,v=Object.keys(r);y<v.length;y++){var b;m=v[y];if("object"===typeof(b=r[m])&&null!==b)for(var w=0,x=Object.keys(b);w<x.length;w++){var S=x[w];b[S]=p(b[S],t)}else r[m]=p(b,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(function(e,t){var i=r[t];return Boolean(i)&&"object"===typeof i&&!Array.isArray(i)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"===typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(i):e[t]=i,e},Object.create(null))}t.extract=d,t.parse=u,t.stringify=function(e,t){if(!e)return"";var i=function(e){switch(e.arrayFormat){case"index":return function(t){return function(i,n){var o=i.length;return void 0===n?i:[].concat(r(i),null===n?[[l(t,e),"[",o,"]"].join("")]:[[l(t,e),"[",l(o,e),"]=",l(n,e)].join("")])}};case"bracket":return function(t){return function(i,n){return void 0===n?i:[].concat(r(i),null===n?[[l(t,e),"[]"].join("")]:[[l(t,e),"[]=",l(n,e)].join("")])}};case"comma":return function(t){return function(i,n,r){return null===n||void 0===n||0===n.length?i:0===r?[[l(t,e),"=",l(n,e)].join("")]:[[i,l(n,e)].join(",")]}};default:return function(t){return function(i,n){return void 0===n?i:[].concat(r(i),null===n?[l(t,e)]:[[l(t,e),"=",l(n,e)].join("")])}}}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),n=Object.keys(e);return!1!==t.sort&&n.sort(t.sort),n.map(function(n){var r=e[n];return void 0===r?"":null===r?l(n,t):Array.isArray(r)?r.reduce(i(n),[]).join("&"):l(n,t)+"="+l(r,t)}).filter(function(e){return e.length>0}).join("&")},t.parseUrl=function(e,t){return{url:h(e).split("?")[0]||"",query:u(d(e),t)}}},,,function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,i){var n=i(53);e.exports=u,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=p;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var i,n=[],o=0,a=0,s="",h=t&&t.delimiter||"/";null!=(i=r.exec(e));){var d=i[0],p=i[1],u=i.index;if(s+=e.slice(a,u),a=u+d.length,p)s+=p[1];else{var f=e[a],g=i[2],m=i[3],y=i[4],v=i[5],b=i[6],w=i[7];s&&(n.push(s),s="");var x=null!=g&&null!=f&&f!==g,S="+"===b||"*"===b,C="?"===b||"*"===b,P=i[2]||h,E=y||v;n.push({name:m||o++,prefix:g||"",delimiter:P,optional:C,repeat:S,partial:x,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+l(P)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&n.push(s),n}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(t[i]=new RegExp("^(?:"+e[i].pattern+")$"));return function(i,r){for(var o="",s=i||{},l=(r||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var h=e[c];if("string"!==typeof h){var d,p=s[h.name];if(null==p){if(h.optional){h.partial&&(o+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(n(p)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var u=0;u<p.length;u++){if(d=l(p[u]),!t[c].test(d))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===u?h.prefix:h.delimiter)+d}}else{if(d=h.asterisk?encodeURI(p).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):l(p),!t[c].test(d))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+d+'"');o+=h.prefix+d}}else o+=h}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t,i){n(t)||(i=t||i,t=[]);for(var r=(i=i||{}).strict,o=!1!==i.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=l(c);else{var p=l(c.prefix),u="(?:"+c.pattern+")";t.push(c),c.repeat&&(u+="(?:"+p+u+")*"),a+=u=c.optional?c.partial?p+"("+u+")?":"(?:"+p+"("+u+"))?":p+"("+u+")"}}var f=l(i.delimiter||"/"),g=a.slice(-f.length)===f;return r||(a=(g?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":r&&g?"":"(?="+f+"|$)",h(new RegExp("^"+a,d(i)),t)}function u(e,t,i){return n(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):n(e)?function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(u(e[r],t,i).source);return h(new RegExp("(?:"+n.join("|")+")",d(i)),t)}(e,t,i):function(e,t,i){return p(o(e,i),t,i)}(e,t,i)}},function(e,t,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var i,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in i=Object(arguments[l]))r.call(i,c)&&(s[c]=i[c]);if(n){a=n(i);for(var h=0;h<a.length;h++)o.call(i,a[h])&&(s[a[h]]=i[a[h]])}}return s}},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";e.exports=i(54)},function(e,t,i){"use strict";(function(t){var i="__global_unique_id__";e.exports=function(){return t[i]=(t[i]||0)+1}}).call(this,i(23))},function(e,t,i){"use strict";var n=i(24),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(f){var r=u(i);r&&r!==f&&e(t,r,n)}var a=h(i);d&&(a=a.concat(d(i)));for(var s=l(t),g=l(i),m=0;m<a.length;++m){var y=a[m];if(!o[y]&&(!n||!n[y])&&(!g||!g[y])&&(!s||!s[y])){var v=p(i,y);try{c(t,y,v)}catch(b){}}}return t}return t}},function(e,t,i){e.exports=function(){"use strict";var e={CUSTOMFILE:'.custom-file input[type="file"]',CUSTOMFILELABEL:".custom-file-label",FORM:"form",INPUT:"input"},t=function(t){var i="",n=t.parentNode.querySelector(e.CUSTOMFILELABEL);return n&&(i=n.innerHTML),i},i=function(e){if(e.childNodes.length>0)for(var t=[].slice.call(e.childNodes),i=0;i<t.length;i++){var n=t[i];if(3!==n.nodeType)return n}return e},n=function(t){var n=t.bsCustomFileInput.defaultText,r=t.parentNode.querySelector(e.CUSTOMFILELABEL);if(r){var o=i(r);o.innerHTML=n}},r=!!window.File,o=function(e){if(e.hasAttribute("multiple")&&r)return[].slice.call(e.files).map(function(e){return e.name}).join(", ");if(-1!==e.value.indexOf("fakepath")){var t=e.value.split("\\");return t[t.length-1]}return e.value};function a(){var t=this.parentNode.querySelector(e.CUSTOMFILELABEL);if(t){var r=i(t),a=o(this);a.length?r.innerHTML=a:n(this)}}function s(){for(var t=[].slice.call(this.querySelectorAll(e.INPUT)).filter(function(e){return!!e.bsCustomFileInput}),i=0,r=t.length;i<r;i++)n(t[i])}var l={FORMRESET:"reset",INPUTCHANGE:"change"};return{init:function(i,n){void 0===i&&(i=e.CUSTOMFILE),void 0===n&&(n=e.FORM);for(var r=[].slice.call(document.querySelectorAll(i)),o=[].slice.call(document.querySelectorAll(n)),c=0,h=r.length;c<h;c++){var d=r[c];Object.defineProperty(d,"bsCustomFileInput",{value:{defaultText:t(d)},writable:!0}),a.call(d),d.addEventListener(l.INPUTCHANGE,a)}for(var p=0,u=o.length;p<u;p++)o[p].addEventListener(l.FORMRESET,s),Object.defineProperty(o[p],"bsCustomFileInput",{value:!0,writable:!0})},destroy:function(){for(var t=[].slice.call(document.querySelectorAll(e.FORM)).filter(function(e){return!!e.bsCustomFileInput}),i=[].slice.call(document.querySelectorAll(e.INPUT)).filter(function(e){return!!e.bsCustomFileInput}),r=0,o=i.length;r<o;r++){var c=i[r];n(c),c.bsCustomFileInput=void 0,c.removeEventListener(l.INPUTCHANGE,a)}for(var h=0,d=t.length;h<d;h++)t[h].removeEventListener(l.FORMRESET,s),t[h].bsCustomFileInput=void 0}}}()},function(e,t,i){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}i.d(t,"a",function(){return n})},,,,,function(e,t,i){"use strict";var n=i(22),r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t=arguments.length-1,i="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)i+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,i,n,r,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",i)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function x(e,t,i){this.props=e,this.context=t,this.refs=w,this.updater=i||b}function S(){}function C(e,t,i){this.props=e,this.context=t,this.refs=w,this.updater=i||b}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&v("85"),this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=x.prototype;var P=C.prototype=new S;P.constructor=C,n(P,x.prototype),P.isPureReactComponent=!0;var E={current:null},O={current:null},M=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var n=void 0,r={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)M.call(t,n)&&!T.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:s,props:r,_owner:O.current}}function L(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var D=/\/+/g,k=[];function I(e,t,i,n){if(k.length){var r=k.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>k.length&&k.push(e)}function N(e,t,i){return null==e?0:function e(t,i,n,r){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return n(r,t,""===i?"."+j(t,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(t))for(var c=0;c<t.length;c++){var h=i+j(s=t[c],c);l+=e(s,h,n,r)}else if(h=null===t||"object"!==typeof t?null:"function"===typeof(h=y&&t[y]||t["@@iterator"])?h:null,"function"===typeof h)for(t=h.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,h=i+j(s,c++),n,r);else"object"===s&&v("31","[object Object]"===(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return l}(e,"",t,i)}function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function z(e,t){e.func.call(e.context,t,e.count++)}function H(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,n,i,function(e){return e}):null!=e&&(L(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+i)),n.push(e))}function B(e,t,i,n,r){var o="";null!=i&&(o=(""+i).replace(D,"$&/")+"/"),N(e,H,t=I(t,o,n,r)),R(t)}function _(){var e=E.current;return null===e&&v("321"),e}var W={Children:{map:function(e,t,i){if(null==e)return e;var n=[];return B(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;N(e,z,t=I(null,null,t,i)),R(t)},count:function(e){return N(e,function(){return null},null)},toArray:function(e){var t=[];return B(e,t,null,function(e){return e}),t},only:function(e){return L(e)||v("143"),e}},createRef:function(){return{current:null}},Component:x,PureComponent:C,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:u,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return _().useCallback(e,t)},useContext:function(e,t){return _().useContext(e,t)},useEffect:function(e,t){return _().useEffect(e,t)},useImperativeHandle:function(e,t,i){return _().useImperativeHandle(e,t,i)},useDebugValue:function(){},useLayoutEffect:function(e,t){return _().useLayoutEffect(e,t)},useMemo:function(e,t){return _().useMemo(e,t)},useReducer:function(e,t,i){return _().useReducer(e,t,i)},useRef:function(e){return _().useRef(e)},useState:function(e){return _().useState(e)},Fragment:s,StrictMode:l,Suspense:f,createElement:A,cloneElement:function(e,t,i){(null===e||void 0===e)&&v("267",e);var r=void 0,a=n({},e.props),s=e.key,l=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,c=O.current),void 0!==t.key&&(s=""+t.key);var h=void 0;for(r in e.type&&e.type.defaultProps&&(h=e.type.defaultProps),t)M.call(t,r)&&!T.hasOwnProperty(r)&&(a[r]=void 0===t[r]&&void 0!==h?h[r]:t[r])}if(1===(r=arguments.length-2))a.children=i;else if(1<r){h=Array(r);for(var d=0;d<r;d++)h[d]=arguments[d+2];a.children=h}return{$$typeof:o,type:e.type,key:s,ref:l,props:a,_owner:c}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:L,version:"16.8.6",unstable_ConcurrentMode:p,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:E,ReactCurrentOwner:O,assign:n}},F={default:W},Y=F&&W||F;e.exports=Y.default||Y},function(e,t,i){"use strict";var n=i(0),r=i(22),o=i(35);function a(e){for(var t=arguments.length-1,i="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)i+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,i,n,r,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",i)}n||a("227");var s=!1,l=null,c=!1,h=null,d={onError:function(e){s=!0,l=e}};function p(e,t,i,n,r,o,a,c,h){s=!1,l=null,function(e,t,i,n,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(h){this.onError(h)}}.apply(d,arguments)}var u=null,f={};function g(){if(u)for(var e in f){var t=f[e],i=u.indexOf(e);if(-1<i||a("96",e),!y[i])for(var n in t.extractEvents||a("97",e),y[i]=t,i=t.eventTypes){var r=void 0,o=i[n],s=t,l=n;v.hasOwnProperty(l)&&a("99",l),v[l]=o;var c=o.phasedRegistrationNames;if(c){for(r in c)c.hasOwnProperty(r)&&m(c[r],s,l);r=!0}else o.registrationName?(m(o.registrationName,s,l),r=!0):r=!1;r||a("98",n,e)}}}function m(e,t,i){b[e]&&a("100",e),b[e]=t,w[e]=t.eventTypes[i].dependencies}var y=[],v={},b={},w={},x=null,S=null,C=null;function P(e,t,i){var n=e.type||"unknown-event";e.currentTarget=C(i),function(e,t,i,n,r,o,d,u,f){if(p.apply(this,arguments),s){if(s){var g=l;s=!1,l=null}else a("198"),g=void 0;c||(c=!0,h=g)}}(n,t,void 0,e),e.currentTarget=null}function E(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function O(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var M=null;function T(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)P(e,t[n],i[n]);else t&&P(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var A={injectEventPluginOrder:function(e){u&&a("101"),u=Array.prototype.slice.call(e),g()},injectEventPluginsByName:function(e){var t,i=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];f.hasOwnProperty(t)&&f[t]===n||(f[t]&&a("102",t),f[t]=n,i=!0)}i&&g()}};function L(e,t){var i=e.stateNode;if(!i)return null;var n=x(i);if(!n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}return e?null:(i&&"function"!==typeof i&&a("231",t,typeof i),i)}function D(e){if(null!==e&&(M=E(M,e)),e=M,M=null,e&&(O(e,T),M&&a("95"),c))throw e=h,c=!1,h=null,e}var k=Math.random().toString(36).slice(2),I="__reactInternalInstance$"+k,R="__reactEventHandlers$"+k;function N(e){if(e[I])return e[I];for(;!e[I];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[I]).tag||6===e.tag?e:null}function j(e){return!(e=e[I])||5!==e.tag&&6!==e.tag?null:e}function z(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function H(e){return e[R]||null}function B(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function _(e,t,i){(t=L(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=E(i._dispatchListeners,t),i._dispatchInstances=E(i._dispatchInstances,e))}function W(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=B(t);for(t=i.length;0<t--;)_(i[t],"captured",e);for(t=0;t<i.length;t++)_(i[t],"bubbled",e)}}function F(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=L(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=E(i._dispatchListeners,t),i._dispatchInstances=E(i._dispatchInstances,e))}function Y(e){e&&e.dispatchConfig.registrationName&&F(e._targetInst,null,e)}function X(e){O(e,W)}var V=!("undefined"===typeof window||!window.document||!window.document.createElement);function U(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var G={animationend:U("Animation","AnimationEnd"),animationiteration:U("Animation","AnimationIteration"),animationstart:U("Animation","AnimationStart"),transitionend:U("Transition","TransitionEnd")},q={},Z={};function Q(e){if(q[e])return q[e];if(!G[e])return e;var t,i=G[e];for(t in i)if(i.hasOwnProperty(t)&&t in Z)return q[e]=i[t];return e}V&&(Z=document.createElement("div").style,"AnimationEvent"in window||(delete G.animationend.animation,delete G.animationiteration.animation,delete G.animationstart.animation),"TransitionEvent"in window||delete G.transitionend.transition);var K=Q("animationend"),$=Q("animationiteration"),J=Q("animationstart"),ee=Q("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ie=null,ne=null,re=null;function oe(){if(re)return re;var e,t,i=ne,n=i.length,r="value"in ie?ie.value:ie.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===r[o-t];t++);return re=r.slice(e,1<t?1-t:void 0)}function ae(){return!0}function se(){return!1}function le(e,t,i,n){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):"target"===r?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ae:se,this.isPropagationStopped=se,this}function ce(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function he(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=ce,e.release=he}r(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return r(o,i.prototype),i.prototype=o,i.prototype.constructor=i,i.Interface=r({},n.Interface,e),i.extend=n.extend,de(i),i},de(le);var pe=le.extend({data:null}),ue=le.extend({data:null}),fe=[9,13,27,32],ge=V&&"CompositionEvent"in window,me=null;V&&"documentMode"in document&&(me=document.documentMode);var ye=V&&"TextEvent"in window&&!me,ve=V&&(!ge||me&&8<me&&11>=me),be=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xe=!1;function Se(e,t){switch(e){case"keyup":return-1!==fe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ce(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pe=!1;var Ee={eventTypes:we,extractEvents:function(e,t,i,n){var r=void 0,o=void 0;if(ge)e:{switch(e){case"compositionstart":r=we.compositionStart;break e;case"compositionend":r=we.compositionEnd;break e;case"compositionupdate":r=we.compositionUpdate;break e}r=void 0}else Pe?Se(e,i)&&(r=we.compositionEnd):"keydown"===e&&229===i.keyCode&&(r=we.compositionStart);return r?(ve&&"ko"!==i.locale&&(Pe||r!==we.compositionStart?r===we.compositionEnd&&Pe&&(o=oe()):(ne="value"in(ie=n)?ie.value:ie.textContent,Pe=!0)),r=pe.getPooled(r,t,i,n),o?r.data=o:null!==(o=Ce(i))&&(r.data=o),X(r),o=r):o=null,(e=ye?function(e,t){switch(e){case"compositionend":return Ce(t);case"keypress":return 32!==t.which?null:(xe=!0,be);case"textInput":return(e=t.data)===be&&xe?null:e;default:return null}}(e,i):function(e,t){if(Pe)return"compositionend"===e||!ge&&Se(e,t)?(e=oe(),re=ne=ie=null,Pe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ve&&"ko"!==t.locale?null:t.data;default:return null}}(e,i))?((t=ue.getPooled(we.beforeInput,t,i,n)).data=e,X(t)):t=null,null===o?t:null===t?o:[o,t]}},Oe=null,Me=null,Te=null;function Ae(e){if(e=S(e)){"function"!==typeof Oe&&a("280");var t=x(e.stateNode);Oe(e.stateNode,e.type,t)}}function Le(e){Me?Te?Te.push(e):Te=[e]:Me=e}function De(){if(Me){var e=Me,t=Te;if(Te=Me=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function ke(e,t){return e(t)}function Ie(e,t,i){return e(t,i)}function Re(){}var Ne=!1;function je(e,t){if(Ne)return e(t);Ne=!0;try{return ke(e,t)}finally{Ne=!1,(null!==Me||null!==Te)&&(Re(),De())}}var ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function He(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ze[e.type]:"textarea"===t}function Be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function _e(e){if(!V)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function We(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Fe(e){e._valueTracker||(e._valueTracker=function(e){var t=We(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=We(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}var Xe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Xe.hasOwnProperty("ReactCurrentDispatcher")||(Xe.ReactCurrentDispatcher={current:null});var Ve=/^(.*)[\\\/]/,Ue="function"===typeof Symbol&&Symbol.for,Ge=Ue?Symbol.for("react.element"):60103,qe=Ue?Symbol.for("react.portal"):60106,Ze=Ue?Symbol.for("react.fragment"):60107,Qe=Ue?Symbol.for("react.strict_mode"):60108,Ke=Ue?Symbol.for("react.profiler"):60114,$e=Ue?Symbol.for("react.provider"):60109,Je=Ue?Symbol.for("react.context"):60110,et=Ue?Symbol.for("react.concurrent_mode"):60111,tt=Ue?Symbol.for("react.forward_ref"):60112,it=Ue?Symbol.for("react.suspense"):60113,nt=Ue?Symbol.for("react.memo"):60115,rt=Ue?Symbol.for("react.lazy"):60116,ot="function"===typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=ot&&e[ot]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ze:return"Fragment";case qe:return"Portal";case Ke:return"Profiler";case Qe:return"StrictMode";case it:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case Je:return"Context.Consumer";case $e:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case nt:return st(e.type);case rt:if(e=1===e._status?e._result:null)return st(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var n=e._debugOwner,r=e._debugSource,o=st(e.type);i=null,n&&(i=st(n.type)),n=o,o="",r?o=" (at "+r.fileName.replace(Ve,"")+":"+r.lineNumber+")":i&&(o=" (created by "+i+")"),i="\n    in "+(n||"Unknown")+o}t+=i,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ht=Object.prototype.hasOwnProperty,dt={},pt={};function ut(e,t,i,n,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ft[e]=new ut(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ft[t]=new ut(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ft[e]=new ut(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ft[e]=new ut(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ft[e]=new ut(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ft[e]=new ut(e,3,!0,e,null)}),["capture","download"].forEach(function(e){ft[e]=new ut(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){ft[e]=new ut(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){ft[e]=new ut(e,5,!1,e.toLowerCase(),null)});var gt=/[\-:]([a-z])/g;function mt(e){return e[1].toUpperCase()}function yt(e,t,i,n){var r=ft.hasOwnProperty(t)?ft[t]:null;(null!==r?0===r.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!ht.call(pt,e)||!ht.call(dt,e)&&(ct.test(e)?pt[e]=!0:(dt[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}function vt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function wt(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=vt(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xt(e,t){null!=(t=t.checked)&&yt(e,"checked",t,!1)}function St(e,t){xt(e,t);var i=vt(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Pt(e,t.type,i):t.hasOwnProperty("defaultValue")&&Pt(e,t.type,vt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ct(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function Pt(e,t,i){"number"===t&&e.ownerDocument.activeElement===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gt,mt);ft[t]=new ut(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gt,mt);ft[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gt,mt);ft[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){ft[e]=new ut(e,1,!1,e.toLowerCase(),null)});var Et={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ot(e,t,i){return(e=le.getPooled(Et.change,e,t,i)).type="change",Le(i),X(e),e}var Mt=null,Tt=null;function At(e){D(e)}function Lt(e){if(Ye(z(e)))return e}function Dt(e,t){if("change"===e)return t}var kt=!1;function It(){Mt&&(Mt.detachEvent("onpropertychange",Rt),Tt=Mt=null)}function Rt(e){"value"===e.propertyName&&Lt(Tt)&&je(At,e=Ot(Tt,e,Be(e)))}function Nt(e,t,i){"focus"===e?(It(),Tt=i,(Mt=t).attachEvent("onpropertychange",Rt)):"blur"===e&&It()}function jt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Lt(Tt)}function zt(e,t){if("click"===e)return Lt(t)}function Ht(e,t){if("input"===e||"change"===e)return Lt(t)}V&&(kt=_e("input")&&(!document.documentMode||9<document.documentMode));var Bt={eventTypes:Et,_isInputEventSupported:kt,extractEvents:function(e,t,i,n){var r=t?z(t):window,o=void 0,a=void 0,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type?o=Dt:He(r)?kt?o=Ht:(o=jt,a=Nt):(s=r.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=zt),o&&(o=o(e,t)))return Ot(o,i,n);a&&a(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Pt(r,"number",r.value)}},_t=le.extend({view:null,detail:null}),Wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ft(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Wt[e])&&!!t[e]}function Yt(){return Ft}var Xt=0,Vt=0,Ut=!1,Gt=!1,qt=_t.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Yt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Xt;return Xt=e.screenX,Ut?"mousemove"===e.type?e.screenX-t:0:(Ut=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Vt;return Vt=e.screenY,Gt?"mousemove"===e.type?e.screenY-t:0:(Gt=!0,0)}}),Zt=qt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kt={eventTypes:Qt,extractEvents:function(e,t,i,n){var r="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(r&&(i.relatedTarget||i.fromElement)||!o&&!r)return null;if(r=n.window===n?n:(r=n.ownerDocument)?r.defaultView||r.parentWindow:window,o?(o=t,t=(t=i.relatedTarget||i.toElement)?N(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=qt,s=Qt.mouseLeave,l=Qt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Zt,s=Qt.pointerLeave,l=Qt.pointerEnter,c="pointer");var h=null==o?r:z(o);if(r=null==t?r:z(t),(e=a.getPooled(s,o,i,n)).type=c+"leave",e.target=h,e.relatedTarget=r,(i=a.getPooled(l,t,i,n)).type=c+"enter",i.target=r,i.relatedTarget=h,n=t,o&&n)e:{for(r=n,c=0,a=t=o;a;a=B(a))c++;for(a=0,l=r;l;l=B(l))a++;for(;0<c-a;)t=B(t),c--;for(;0<a-c;)r=B(r),a--;for(;c--;){if(t===r||t===r.alternate)break e;t=B(t),r=B(r)}t=null}else t=null;for(r=t,t=[];o&&o!==r&&(null===(c=o.alternate)||c!==r);)t.push(o),o=B(o);for(o=[];n&&n!==r&&(null===(c=n.alternate)||c!==r);)o.push(n),n=B(n);for(n=0;n<t.length;n++)F(t[n],"bubbled",e);for(n=o.length;0<n--;)F(o[n],"captured",i);return[e,i]}};function $t(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Jt=Object.prototype.hasOwnProperty;function ei(e,t){if($t(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!Jt.call(t,i[n])||!$t(e[i[n]],t[i[n]]))return!1;return!0}function ti(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function ii(e){2!==ti(e)&&a("188")}function ni(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=ti(e))&&a("188"),1===t?null:e;for(var i=e,n=t;;){var r=i.return,o=r?r.alternate:null;if(!r||!o)break;if(r.child===o.child){for(var s=r.child;s;){if(s===i)return ii(r),e;if(s===n)return ii(r),t;s=s.sibling}a("188")}if(i.return!==n.return)i=r,n=o;else{s=!1;for(var l=r.child;l;){if(l===i){s=!0,i=r,n=o;break}if(l===n){s=!0,n=r,i=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===i){s=!0,i=o,n=r;break}if(l===n){s=!0,n=o,i=r;break}l=l.sibling}s||a("189")}}i.alternate!==n&&a("190")}return 3!==i.tag&&a("188"),i.stateNode.current===i?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ri=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),oi=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ai=_t.extend({relatedTarget:null});function si(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hi=_t.extend({key:function(e){if(e.key){var t=li[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=si(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ci[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Yt,charCode:function(e){return"keypress"===e.type?si(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?si(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),di=qt.extend({dataTransfer:null}),pi=_t.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Yt}),ui=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),fi=qt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gi=[["abort","abort"],[K,"animationEnd"],[$,"animationIteration"],[J,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],mi={},yi={};function vi(e,t){var i=e[0],n="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[i],isInteractive:t},mi[e]=t,yi[i]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){vi(e,!0)}),gi.forEach(function(e){vi(e,!1)});var bi={eventTypes:mi,isInteractiveTopLevelEventType:function(e){return void 0!==(e=yi[e])&&!0===e.isInteractive},extractEvents:function(e,t,i,n){var r=yi[e];if(!r)return null;switch(e){case"keypress":if(0===si(i))return null;case"keydown":case"keyup":e=hi;break;case"blur":case"focus":e=ai;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=di;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=pi;break;case K:case $:case J:e=ri;break;case ee:e=ui;break;case"scroll":e=_t;break;case"wheel":e=fi;break;case"copy":case"cut":case"paste":e=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Zt;break;default:e=le}return X(t=e.getPooled(r,t,i,n)),t}},wi=bi.isInteractiveTopLevelEventType,xi=[];function Si(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n;for(n=i;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(i),i=N(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=Be(e.nativeEvent);n=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<y.length;s++){var l=y[s];l&&(l=l.extractEvents(n,t,o,r))&&(a=E(a,l))}D(a)}}var Ci=!0;function Pi(e,t){if(!t)return null;var i=(wi(e)?Oi:Mi).bind(null,e);t.addEventListener(e,i,!1)}function Ei(e,t){if(!t)return null;var i=(wi(e)?Oi:Mi).bind(null,e);t.addEventListener(e,i,!0)}function Oi(e,t){Ie(Mi,e,t)}function Mi(e,t){if(Ci){var i=Be(t);if(null===(i=N(i))||"number"!==typeof i.tag||2===ti(i)||(i=null),xi.length){var n=xi.pop();n.topLevelType=e,n.nativeEvent=t,n.targetInst=i,e=n}else e={topLevelType:e,nativeEvent:t,targetInst:i,ancestors:[]};try{je(Si,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>xi.length&&xi.push(e)}}}var Ti={},Ai=0,Li="_reactListenersID"+(""+Math.random()).slice(2);function Di(e){return Object.prototype.hasOwnProperty.call(e,Li)||(e[Li]=Ai++,Ti[e[Li]]={}),Ti[e[Li]]}function ki(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ii(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ri(e,t){var i,n=Ii(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ii(n)}}function Ni(){for(var e=window,t=ki();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=ki((e=t.contentWindow).document)}return t}function ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function zi(e){var t=Ni(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&function e(t,i){return!(!t||!i)&&(t===i||(!t||3!==t.nodeType)&&(i&&3===i.nodeType?e(t,i.parentNode):"contains"in t?t.contains(i):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(i))))}(i.ownerDocument.documentElement,i)){if(null!==n&&ji(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=i.textContent.length,o=Math.min(n.start,r);n=void 0===n.end?o:Math.min(n.end,r),!e.extend&&o>n&&(r=n,n=o,o=r),r=Ri(i,o);var a=Ri(i,n);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hi=V&&"documentMode"in document&&11>=document.documentMode,Bi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},_i=null,Wi=null,Fi=null,Yi=!1;function Xi(e,t){var i=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yi||null==_i||_i!==ki(i)?null:("selectionStart"in(i=_i)&&ji(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},Fi&&ei(Fi,i)?null:(Fi=i,(e=le.getPooled(Bi.select,Wi,e,t)).type="select",e.target=_i,X(e),e))}var Vi={eventTypes:Bi,extractEvents:function(e,t,i,n){var r,o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(r=!o)){e:{o=Di(o),r=w.onSelect;for(var a=0;a<r.length;a++){var s=r[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}r=!o}if(r)return null;switch(o=t?z(t):window,e){case"focus":(He(o)||"true"===o.contentEditable)&&(_i=o,Wi=t,Fi=null);break;case"blur":Fi=Wi=_i=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yi=!1,Xi(i,n);case"selectionchange":if(Hi)break;case"keydown":case"keyup":return Xi(i,n)}return null}};function Ui(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Gi(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+vt(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function qi(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zi(e,t){var i=t.value;null==i&&(i=t.defaultValue,null!=(t=t.children)&&(null!=i&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),i=t),null==i&&(i="")),e._wrapperState={initialValue:vt(i)}}function Qi(e,t){var i=vt(t.value),n=vt(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function Ki(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=H,S=j,C=z,A.injectEventPluginsByName({SimpleEventPlugin:bi,EnterLeaveEventPlugin:Kt,ChangeEventPlugin:Bt,SelectEventPlugin:Vi,BeforeInputEventPlugin:Ee});var $i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ji(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ji(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var tn,nn=void 0,rn=(tn=function(e,t){if(e.namespaceURI!==$i.svg||"innerHTML"in e)e.innerHTML=t;else{for((nn=nn||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=nn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction(function(){return tn(e,t)})}:tn);function on(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var an={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"];function ln(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||an.hasOwnProperty(e)&&an[e]?(""+t).trim():t+"px"}function cn(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=ln(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(an).forEach(function(e){sn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),an[t]=an[e]})});var hn=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(e,t){t&&(hn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!==typeof t.style&&a("62",""))}function pn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function un(e,t){var i=Di(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var n=0;n<t.length;n++){var r=t[n];if(!i.hasOwnProperty(r)||!i[r]){switch(r){case"scroll":Ei("scroll",e);break;case"focus":case"blur":Ei("focus",e),Ei("blur",e),i.blur=!0,i.focus=!0;break;case"cancel":case"close":_e(r)&&Ei(r,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(r)&&Pi(r,e)}i[r]=!0}}}function fn(){}var gn=null,mn=null;function yn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bn="function"===typeof setTimeout?setTimeout:void 0,wn="function"===typeof clearTimeout?clearTimeout:void 0,xn=o.unstable_scheduleCallback,Sn=o.unstable_cancelCallback;function Cn(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Pn(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var En=[],On=-1;function Mn(e){0>On||(e.current=En[On],En[On]=null,On--)}function Tn(e,t){En[++On]=e.current,e.current=t}var An={},Ln={current:An},Dn={current:!1},kn=An;function In(e,t){var i=e.type.contextTypes;if(!i)return An;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Nn(e){Mn(Dn),Mn(Ln)}function jn(e){Mn(Dn),Mn(Ln)}function zn(e,t,i){Ln.current!==An&&a("168"),Tn(Ln,t),Tn(Dn,i)}function Hn(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var o in n=n.getChildContext())o in e||a("108",st(t)||"Unknown",o);return r({},i,n)}function Bn(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||An,kn=Ln.current,Tn(Ln,t),Tn(Dn,Dn.current),!0}function _n(e,t,i){var n=e.stateNode;n||a("169"),i?(t=Hn(e,t,kn),n.__reactInternalMemoizedMergedChildContext=t,Mn(Dn),Mn(Ln),Tn(Ln,t)):Mn(Dn),Tn(Dn,i)}var Wn=null,Fn=null;function Yn(e){return function(t){try{return e(t)}catch(i){}}}function Xn(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Vn(e,t,i,n){return new Xn(e,t,i,n)}function Un(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gn(e,t){var i=e.alternate;return null===i?((i=Vn(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,i.contextDependencies=e.contextDependencies,i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function qn(e,t,i,n,r,o){var s=2;if(n=e,"function"===typeof e)Un(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case Ze:return Zn(i.children,r,o,t);case et:return Qn(i,3|r,o,t);case Qe:return Qn(i,2|r,o,t);case Ke:return(e=Vn(12,i,t,4|r)).elementType=Ke,e.type=Ke,e.expirationTime=o,e;case it:return(e=Vn(13,i,t,r)).elementType=it,e.type=it,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case $e:s=10;break e;case Je:s=9;break e;case tt:s=11;break e;case nt:s=14;break e;case rt:s=16,n=null;break e}a("130",null==e?e:typeof e,"")}return(t=Vn(s,i,t,r)).elementType=e,t.type=n,t.expirationTime=o,t}function Zn(e,t,i,n){return(e=Vn(7,e,n,t)).expirationTime=i,e}function Qn(e,t,i,n){return e=Vn(8,e,n,t),t=0===(1&t)?Qe:et,e.elementType=t,e.type=t,e.expirationTime=i,e}function Kn(e,t,i){return(e=Vn(6,e,null,t)).expirationTime=i,e}function $n(e,t,i){return(t=Vn(4,null!==e.children?e.children:[],e.key,t)).expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jn(e,t){e.didError=!1;var i=e.earliestPendingTime;0===i?e.earliestPendingTime=e.latestPendingTime=t:i<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ir(t,e)}function er(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var i=e.earliestPendingTime,n=e.latestPendingTime;i===t?e.earliestPendingTime=n===t?e.latestPendingTime=0:n:n===t&&(e.latestPendingTime=i),i=e.earliestSuspendedTime,n=e.latestSuspendedTime,0===i?e.earliestSuspendedTime=e.latestSuspendedTime=t:i<t?e.earliestSuspendedTime=t:n>t&&(e.latestSuspendedTime=t),ir(t,e)}function tr(e,t){var i=e.earliestPendingTime;return i>t&&(t=i),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ir(e,t){var i=t.earliestSuspendedTime,n=t.latestSuspendedTime,r=t.earliestPendingTime,o=t.latestPingedTime;0===(r=0!==r?r:o)&&(0===e||n<e)&&(r=n),0!==(e=r)&&i>e&&(e=i),t.nextExpirationTimeToWorkOn=r,t.expirationTime=e}function nr(e,t){if(e&&e.defaultProps)for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}var rr=(new n.Component).refs;function or(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:r({},t,i),e.memoizedState=i,null!==(n=e.updateQueue)&&0===e.expirationTime&&(n.baseState=i)}var ar={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===ti(e)},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=Ss(),r=Qo(n=Za(n,e));r.payload=t,void 0!==i&&null!==i&&(r.callback=i),Ya(),$o(e,r),$a(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=Ss(),r=Qo(n=Za(n,e));r.tag=Xo,r.payload=t,void 0!==i&&null!==i&&(r.callback=i),Ya(),$o(e,r),$a(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=Ss(),n=Qo(i=Za(i,e));n.tag=Vo,void 0!==t&&null!==t&&(n.callback=t),Ya(),$o(e,n),$a(e,i)}};function sr(e,t,i,n,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ei(i,n)||!ei(r,o))}function lr(e,t,i){var n=!1,r=An,o=t.contextType;return"object"===typeof o&&null!==o?o=Fo(o):(r=Rn(t)?kn:Ln.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?In(e,r):An),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ar,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function cr(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&ar.enqueueReplaceState(t,t.state,null)}function hr(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=rr;var o=t.contextType;"object"===typeof o&&null!==o?r.context=Fo(o):(o=Rn(t)?kn:Ln.current,r.context=In(e,o)),null!==(o=e.updateQueue)&&(ia(e,o,i,r,n),r.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(or(e,t,o,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ar.enqueueReplaceState(r,r.state,null),null!==(o=e.updateQueue)&&(ia(e,o,i,r,n),r.state=e.memoizedState)),"function"===typeof r.componentDidMount&&(e.effectTag|=4)}var dr=Array.isArray;function pr(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){i=i._owner;var n=void 0;i&&(1!==i.tag&&a("309"),n=i.stateNode),n||a("147",e);var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=n.refs;t===rr&&(t=n.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}"string"!==typeof e&&a("284"),i._owner||a("290",e)}return e}function ur(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function fr(e){function t(t,i){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t,i){return(e=Gn(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.effectTag=2,i):n:(t.effectTag=2,i):i}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Kn(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){return null!==t&&t.elementType===i.type?((n=r(t,i.props)).ref=pr(e,t,i),n.return=e,n):((n=qn(i.type,i.key,i.props,null,e.mode,n)).ref=pr(e,t,i),n.return=e,n)}function h(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=$n(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function d(e,t,i,n,o){return null===t||7!==t.tag?((t=Zn(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function p(e,t,i){if("string"===typeof t||"number"===typeof t)return(t=Kn(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Ge:return(i=qn(t.type,t.key,t.props,null,e.mode,i)).ref=pr(e,null,t),i.return=e,i;case qe:return(t=$n(t,e.mode,i)).return=e,t}if(dr(t)||at(t))return(t=Zn(t,e.mode,i,null)).return=e,t;ur(e,t)}return null}function u(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case Ge:return i.key===r?i.type===Ze?d(e,t,i.props.children,n,r):c(e,t,i,n):null;case qe:return i.key===r?h(e,t,i,n):null}if(dr(i)||at(i))return null!==r?null:d(e,t,i,n,null);ur(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Ge:return e=e.get(null===n.key?i:n.key)||null,n.type===Ze?d(t,e,n.props.children,r,n.key):c(t,e,n,r);case qe:return h(t,e=e.get(null===n.key?i:n.key)||null,n,r)}if(dr(n)||at(n))return d(t,e=e.get(i)||null,n,r,null);ur(t,n)}return null}function g(r,a,s,l){for(var c=null,h=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=u(r,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(r,d),a=o(y,a,g),null===h?c=y:h.sibling=y,h=y,d=m}if(g===s.length)return i(r,d),c;if(null===d){for(;g<s.length;g++)(d=p(r,s[g],l))&&(a=o(d,a,g),null===h?c=d:h.sibling=d,h=d);return c}for(d=n(r,d);g<s.length;g++)(m=f(d,r,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=o(m,a,g),null===h?c=m:h.sibling=m,h=m);return e&&d.forEach(function(e){return t(r,e)}),c}function m(r,s,l,c){var h=at(l);"function"!==typeof h&&a("150"),null==(l=h.call(l))&&a("151");for(var d=h=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=u(r,g,v.value,c);if(null===b){g||(g=y);break}e&&g&&null===b.alternate&&t(r,g),s=o(b,s,m),null===d?h=b:d.sibling=b,d=b,g=y}if(v.done)return i(r,g),h;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=p(r,v.value,c))&&(s=o(v,s,m),null===d?h=v:d.sibling=v,d=v);return h}for(g=n(r,g);!v.done;m++,v=l.next())null!==(v=f(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=o(v,s,m),null===d?h=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(r,e)}),h}return function(e,n,o,l){var c="object"===typeof o&&null!==o&&o.type===Ze&&null===o.key;c&&(o=o.props.children);var h="object"===typeof o&&null!==o;if(h)switch(o.$$typeof){case Ge:e:{for(h=o.key,c=n;null!==c;){if(c.key===h){if(7===c.tag?o.type===Ze:c.elementType===o.type){i(e,c.sibling),(n=r(c,o.type===Ze?o.props.children:o.props)).ref=pr(e,c,o),n.return=e,e=n;break e}i(e,c);break}t(e,c),c=c.sibling}o.type===Ze?((n=Zn(o.props.children,e.mode,l,o.key)).return=e,e=n):((l=qn(o.type,o.key,o.props,null,e.mode,l)).ref=pr(e,n,o),l.return=e,e=l)}return s(e);case qe:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){i(e,n.sibling),(n=r(n,o.children||[])).return=e,e=n;break e}i(e,n);break}t(e,n),n=n.sibling}(n=$n(o,e.mode,l)).return=e,e=n}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==n&&6===n.tag?(i(e,n.sibling),(n=r(n,o)).return=e,e=n):(i(e,n),(n=Kn(o,e.mode,l)).return=e,e=n),s(e);if(dr(o))return g(e,n,o,l);if(at(o))return m(e,n,o,l);if(h&&ur(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:a("152",(l=e.type).displayName||l.name||"Component")}return i(e,n)}}var gr=fr(!0),mr=fr(!1),yr={},vr={current:yr},br={current:yr},wr={current:yr};function xr(e){return e===yr&&a("174"),e}function Sr(e,t){Tn(wr,t),Tn(br,e),Tn(vr,yr);var i=t.nodeType;switch(i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:en(null,"");break;default:t=en(t=(i=8===i?t.parentNode:t).namespaceURI||null,i=i.tagName)}Mn(vr),Tn(vr,t)}function Cr(e){Mn(vr),Mn(br),Mn(wr)}function Pr(e){xr(wr.current);var t=xr(vr.current),i=en(t,e.type);t!==i&&(Tn(br,e),Tn(vr,i))}function Er(e){br.current===e&&(Mn(vr),Mn(br))}var Or=0,Mr=2,Tr=4,Ar=8,Lr=16,Dr=32,kr=64,Ir=128,Rr=Xe.ReactCurrentDispatcher,Nr=0,jr=null,zr=null,Hr=null,Br=null,_r=null,Wr=null,Fr=0,Yr=null,Xr=0,Vr=!1,Ur=null,Gr=0;function qr(){a("321")}function Zr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!$t(e[i],t[i]))return!1;return!0}function Qr(e,t,i,n,r,o){if(Nr=o,jr=t,Hr=null!==e?e.memoizedState:null,Rr.current=null===Hr?co:ho,t=i(n,r),Vr){do{Vr=!1,Gr+=1,Hr=null!==e?e.memoizedState:null,Wr=Br,Yr=_r=zr=null,Rr.current=ho,t=i(n,r)}while(Vr);Ur=null,Gr=0}return Rr.current=lo,(e=jr).memoizedState=Br,e.expirationTime=Fr,e.updateQueue=Yr,e.effectTag|=Xr,e=null!==zr&&null!==zr.next,Nr=0,Wr=_r=Br=Hr=zr=jr=null,Fr=0,Yr=null,Xr=0,e&&a("300"),t}function Kr(){Rr.current=lo,Nr=0,Wr=_r=Br=Hr=zr=jr=null,Fr=0,Yr=null,Xr=0,Vr=!1,Ur=null,Gr=0}function $r(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===_r?Br=_r=e:_r=_r.next=e,_r}function Jr(){if(null!==Wr)Wr=(_r=Wr).next,Hr=null!==(zr=Hr)?zr.next:null;else{null===Hr&&a("310");var e={memoizedState:(zr=Hr).memoizedState,baseState:zr.baseState,queue:zr.queue,baseUpdate:zr.baseUpdate,next:null};_r=null===_r?Br=e:_r.next=e,Hr=zr.next}return _r}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Jr(),i=t.queue;if(null===i&&a("311"),i.lastRenderedReducer=e,0<Gr){var n=i.dispatch;if(null!==Ur){var r=Ur.get(i);if(void 0!==r){Ur.delete(i);var o=t.memoizedState;do{o=e(o,r.action),r=r.next}while(null!==r);return $t(o,t.memoizedState)||(So=!0),t.memoizedState=o,t.baseUpdate===i.last&&(t.baseState=o),i.lastRenderedState=o,[o,n]}}return[t.memoizedState,n]}n=i.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==n&&(n.next=null),n=s.next):n=null!==n?n.next:null,null!==n){var l=r=null,c=n,h=!1;do{var d=c.expirationTime;d<Nr?(h||(h=!0,l=s,r=o),d>Fr&&(Fr=d)):o=c.eagerReducer===e?c.eagerState:e(o,c.action),s=c,c=c.next}while(null!==c&&c!==n);h||(l=s,r=o),$t(o,t.memoizedState)||(So=!0),t.memoizedState=o,t.baseUpdate=l,t.baseState=r,i.lastRenderedState=o}return[t.memoizedState,i.dispatch]}function io(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===Yr?(Yr={lastEffect:null}).lastEffect=e.next=e:null===(t=Yr.lastEffect)?Yr.lastEffect=e.next=e:(i=t.next,t.next=e,e.next=i,Yr.lastEffect=e),e}function no(e,t,i,n){var r=$r();Xr|=e,r.memoizedState=io(t,i,void 0,void 0===n?null:n)}function ro(e,t,i,n){var r=Jr();n=void 0===n?null:n;var o=void 0;if(null!==zr){var a=zr.memoizedState;if(o=a.destroy,null!==n&&Zr(n,a.deps))return void io(Or,i,o,n)}Xr|=e,r.memoizedState=io(t,i,o,n)}function oo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ao(){}function so(e,t,i){25>Gr||a("301");var n=e.alternate;if(e===jr||null!==n&&n===jr)if(Vr=!0,e={expirationTime:Nr,action:i,eagerReducer:null,eagerState:null,next:null},null===Ur&&(Ur=new Map),void 0===(i=Ur.get(t)))Ur.set(t,e);else{for(t=i;null!==t.next;)t=t.next;t.next=e}else{Ya();var r=Ss(),o={expirationTime:r=Za(r,e),action:i,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)o.next=o;else{var l=s.next;null!==l&&(o.next=l),s.next=o}if(t.last=o,0===e.expirationTime&&(null===n||0===n.expirationTime)&&null!==(n=t.lastRenderedReducer))try{var c=t.lastRenderedState,h=n(c,i);if(o.eagerReducer=n,o.eagerState=h,$t(h,c))return}catch(d){}$a(e,r)}}var lo={readContext:Fo,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr},co={readContext:Fo,useCallback:function(e,t){return $r().memoizedState=[e,void 0===t?null:t],e},useContext:Fo,useEffect:function(e,t){return no(516,Ir|kr,e,t)},useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,no(4,Tr|Dr,oo.bind(null,t,e),i)},useLayoutEffect:function(e,t){return no(4,Tr|Dr,e,t)},useMemo:function(e,t){var i=$r();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=$r();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=so.bind(null,jr,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},$r().memoizedState=e},useState:function(e){var t=$r();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=so.bind(null,jr,e),[t.memoizedState,e]},useDebugValue:ao},ho={readContext:Fo,useCallback:function(e,t){var i=Jr();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Zr(t,n[1])?n[0]:(i.memoizedState=[e,t],e)},useContext:Fo,useEffect:function(e,t){return ro(516,Ir|kr,e,t)},useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,ro(4,Tr|Dr,oo.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ro(4,Tr|Dr,e,t)},useMemo:function(e,t){var i=Jr();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Zr(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)},useReducer:to,useRef:function(){return Jr().memoizedState},useState:function(e){return to(eo)},useDebugValue:ao},po=null,uo=null,fo=!1;function go(e,t){var i=Vn(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function mo(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function yo(e){if(fo){var t=uo;if(t){var i=t;if(!mo(e,t)){if(!(t=Cn(i))||!mo(e,t))return e.effectTag|=2,fo=!1,void(po=e);go(po,i)}po=e,uo=Pn(t)}else e.effectTag|=2,fo=!1,po=e}}function vo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;po=e}function bo(e){if(e!==po)return!1;if(!fo)return vo(e),fo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vn(t,e.memoizedProps))for(t=uo;t;)go(e,t),t=Cn(t);return vo(e),uo=po?Cn(e.stateNode):null,!0}function wo(){uo=po=null,fo=!1}var xo=Xe.ReactCurrentOwner,So=!1;function Co(e,t,i,n){t.child=null===e?mr(t,null,i,n):gr(t,e.child,i,n)}function Po(e,t,i,n,r){i=i.render;var o=t.ref;return Wo(t,r),n=Qr(e,t,i,n,o,r),null===e||So?(t.effectTag|=1,Co(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Io(e,t,r))}function Eo(e,t,i,n,r,o){if(null===e){var a=i.type;return"function"!==typeof a||Un(a)||void 0!==a.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=qn(i.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Oo(e,t,a,n,r,o))}return a=e.child,r<o&&(r=a.memoizedProps,(i=null!==(i=i.compare)?i:ei)(r,n)&&e.ref===t.ref)?Io(e,t,o):(t.effectTag|=1,(e=Gn(a,n)).ref=t.ref,e.return=t,t.child=e)}function Oo(e,t,i,n,r,o){return null!==e&&ei(e.memoizedProps,n)&&e.ref===t.ref&&(So=!1,r<o)?Io(e,t,o):To(e,t,i,n,o)}function Mo(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.effectTag|=128)}function To(e,t,i,n,r){var o=Rn(i)?kn:Ln.current;return o=In(t,o),Wo(t,r),i=Qr(e,t,i,n,o,r),null===e||So?(t.effectTag|=1,Co(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Io(e,t,r))}function Ao(e,t,i,n,r){if(Rn(i)){var o=!0;Bn(t)}else o=!1;if(Wo(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),lr(t,i,n),hr(t,i,n,r),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=Fo(c):c=In(t,c=Rn(i)?kn:Ln.current);var h=i.getDerivedStateFromProps,d="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&cr(t,a,n,c),Go=!1;var p=t.memoizedState;l=a.state=p;var u=t.updateQueue;null!==u&&(ia(t,u,n,a,r),l=t.memoizedState),s!==n||p!==l||Dn.current||Go?("function"===typeof h&&(or(t,i,h,n),l=t.memoizedState),(s=Go||sr(t,i,s,n,p,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:nr(t.type,s),l=a.context,"object"===typeof(c=i.contextType)&&null!==c?c=Fo(c):c=In(t,c=Rn(i)?kn:Ln.current),(d="function"===typeof(h=i.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&cr(t,a,n,c),Go=!1,l=t.memoizedState,p=a.state=l,null!==(u=t.updateQueue)&&(ia(t,u,n,a,r),p=t.memoizedState),s!==n||l!==p||Dn.current||Go?("function"===typeof h&&(or(t,i,h,n),p=t.memoizedState),(h=Go||sr(t,i,s,n,l,p,c))?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=c,n=h):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Lo(e,t,i,n,o,r)}function Lo(e,t,i,n,r,o){Mo(e,t);var a=0!==(64&t.effectTag);if(!n&&!a)return r&&_n(t,i,!1),Io(e,t,o);n=t.stateNode,xo.current=t;var s=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=gr(t,e.child,null,o),t.child=gr(t,null,s,o)):Co(e,t,s,o),t.memoizedState=n.state,r&&_n(t,i,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?zn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zn(0,t.context,!1),Sr(e,t.containerInfo)}function ko(e,t,i){var n=t.mode,r=t.pendingProps,o=t.memoizedState;if(0===(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=r.fallback;e=Zn(null,n,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),n=Zn(s,n,i,null),e.sibling=n,(i=e).return=n.return=t}else i=n=mr(t,null,r.children,i);else null!==e.memoizedState?(s=(n=e.child).sibling,a?(i=r.fallback,r=Gn(n,n.pendingProps),0===(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==n.child&&(r.child=a)),n=r.sibling=Gn(s,i,s.expirationTime),i=r,r.childExpirationTime=0,i.return=n.return=t):i=n=gr(t,n.child,r.children,i)):(s=e.child,a?(a=r.fallback,(r=Zn(null,n,0,null)).child=s,0===(1&t.mode)&&(r.child=null!==t.memoizedState?t.child.child:t.child),(n=r.sibling=Zn(a,n,i,null)).effectTag|=2,i=r,r.childExpirationTime=0,i.return=n.return=t):n=i=gr(t,s,r.children,i)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=i,n}function Io(e,t,i){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<i)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(i=Gn(e=t.child,e.pendingProps,e.expirationTime),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Gn(e,e.pendingProps,e.expirationTime)).return=t;i.sibling=null}return t.child}function Ro(e,t,i){var n=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Dn.current)So=!0;else if(n<i){switch(So=!1,t.tag){case 3:Do(t),wo();break;case 5:Pr(t);break;case 1:Rn(t.type)&&Bn(t);break;case 4:Sr(t,t.stateNode.containerInfo);break;case 10:Bo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=i?ko(e,t,i):null!==(t=Io(e,t,i))?t.sibling:null}return Io(e,t,i)}}else So=!1;switch(t.expirationTime=0,t.tag){case 2:n=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var r=In(t,Ln.current);if(Wo(t,i),r=Qr(null,t,n,e,r,i),t.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,Kr(),Rn(n)){var o=!0;Bn(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null;var s=n.getDerivedStateFromProps;"function"===typeof s&&or(t,n,s,e),r.updater=ar,t.stateNode=r,r._reactInternalFiber=t,hr(t,n,e,i),t=Lo(null,t,n,!0,o,i)}else t.tag=0,Co(null,t,r,i),t=t.child;return t;case 16:switch(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(r),t.type=e,r=t.tag=function(e){if("function"===typeof e)return Un(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===tt)return 11;if(e===nt)return 14}return 2}(e),o=nr(e,o),s=void 0,r){case 0:s=To(null,t,e,o,i);break;case 1:s=Ao(null,t,e,o,i);break;case 11:s=Po(null,t,e,o,i);break;case 14:s=Eo(null,t,e,nr(e.type,o),n,i);break;default:a("306",e,"")}return s;case 0:return n=t.type,r=t.pendingProps,To(e,t,n,r=t.elementType===n?r:nr(n,r),i);case 1:return n=t.type,r=t.pendingProps,Ao(e,t,n,r=t.elementType===n?r:nr(n,r),i);case 3:return Do(t),null===(n=t.updateQueue)&&a("282"),r=null!==(r=t.memoizedState)?r.element:null,ia(t,n,t.pendingProps,null,i),(n=t.memoizedState.element)===r?(wo(),t=Io(e,t,i)):(r=t.stateNode,(r=(null===e||null===e.child)&&r.hydrate)&&(uo=Pn(t.stateNode.containerInfo),po=t,r=fo=!0),r?(t.effectTag|=2,t.child=mr(t,null,n,i)):(Co(e,t,n,i),wo()),t=t.child),t;case 5:return Pr(t),null===e&&yo(t),n=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,vn(n,r)?s=null:null!==o&&vn(n,o)&&(t.effectTag|=16),Mo(e,t),1!==i&&1&t.mode&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Co(e,t,s,i),t=t.child),t;case 6:return null===e&&yo(t),null;case 13:return ko(e,t,i);case 4:return Sr(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=gr(t,null,n,i):Co(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Po(e,t,n,r=t.elementType===n?r:nr(n,r),i);case 7:return Co(e,t,t.pendingProps,i),t.child;case 8:case 12:return Co(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,s=t.memoizedProps,Bo(t,o=r.value),null!==s){var l=s.value;if(0===(o=$t(l,o)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(s.children===r.children&&!Dn.current){t=Io(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.contextDependencies;if(null!==c){s=l.child;for(var h=c.first;null!==h;){if(h.context===n&&0!==(h.observedBits&o)){1===l.tag&&((h=Qo(i)).tag=Vo,$o(l,h)),l.expirationTime<i&&(l.expirationTime=i),null!==(h=l.alternate)&&h.expirationTime<i&&(h.expirationTime=i),h=i;for(var d=l.return;null!==d;){var p=d.alternate;if(d.childExpirationTime<h)d.childExpirationTime=h,null!==p&&p.childExpirationTime<h&&(p.childExpirationTime=h);else{if(!(null!==p&&p.childExpirationTime<h))break;p.childExpirationTime=h}d=d.return}c.expirationTime<i&&(c.expirationTime=i);break}h=h.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Co(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=(o=t.pendingProps).children,Wo(t,i),n=n(r=Fo(r,o.unstable_observedBits)),t.effectTag|=1,Co(e,t,n,i),t.child;case 14:return o=nr(r=t.type,t.pendingProps),Eo(e,t,r,o=nr(r.type,o),n,i);case 15:return Oo(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:nr(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rn(n)?(e=!0,Bn(t)):e=!1,Wo(t,i),lr(t,n,r),hr(t,n,r,i),Lo(null,t,n,!0,e,i)}a("156")}var No={current:null},jo=null,zo=null,Ho=null;function Bo(e,t){var i=e.type._context;Tn(No,i._currentValue),i._currentValue=t}function _o(e){var t=No.current;Mn(No),e.type._context._currentValue=t}function Wo(e,t){jo=e,Ho=zo=null;var i=e.contextDependencies;null!==i&&i.expirationTime>=t&&(So=!0),e.contextDependencies=null}function Fo(e,t){return Ho!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(Ho=e,t=1073741823),t={context:e,observedBits:t,next:null},null===zo?(null===jo&&a("308"),zo=t,jo.contextDependencies={first:t,expirationTime:0}):zo=zo.next=t),e._currentValue}var Yo=0,Xo=1,Vo=2,Uo=3,Go=!1;function qo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Zo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Qo(e){return{expirationTime:e,tag:Yo,payload:null,callback:null,next:null,nextEffect:null}}function Ko(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function $o(e,t){var i=e.alternate;if(null===i){var n=e.updateQueue,r=null;null===n&&(n=e.updateQueue=qo(e.memoizedState))}else n=e.updateQueue,r=i.updateQueue,null===n?null===r?(n=e.updateQueue=qo(e.memoizedState),r=i.updateQueue=qo(i.memoizedState)):n=e.updateQueue=Zo(r):null===r&&(r=i.updateQueue=Zo(n));null===r||n===r?Ko(n,t):null===n.lastUpdate||null===r.lastUpdate?(Ko(n,t),Ko(r,t)):(Ko(n,t),r.lastUpdate=t)}function Jo(e,t){var i=e.updateQueue;null===(i=null===i?e.updateQueue=qo(e.memoizedState):ea(e,i)).lastCapturedUpdate?i.firstCapturedUpdate=i.lastCapturedUpdate=t:(i.lastCapturedUpdate.next=t,i.lastCapturedUpdate=t)}function ea(e,t){var i=e.alternate;return null!==i&&t===i.updateQueue&&(t=e.updateQueue=Zo(t)),t}function ta(e,t,i,n,o,a){switch(i.tag){case Xo:return"function"===typeof(e=i.payload)?e.call(a,n,o):e;case Uo:e.effectTag=-2049&e.effectTag|64;case Yo:if(null===(o="function"===typeof(e=i.payload)?e.call(a,n,o):e)||void 0===o)break;return r({},n,o);case Vo:Go=!0}return n}function ia(e,t,i,n,r){Go=!1;for(var o=(t=ea(e,t)).baseState,a=null,s=0,l=t.firstUpdate,c=o;null!==l;){var h=l.expirationTime;h<r?(null===a&&(a=l,o=c),s<h&&(s=h)):(c=ta(e,0,l,c,i,n),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(h=null,l=t.firstCapturedUpdate;null!==l;){var d=l.expirationTime;d<r?(null===h&&(h=l,null===a&&(o=c)),s<d&&(s=d)):(c=ta(e,0,l,c,i,n),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===h?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===h&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=h,e.expirationTime=s,e.memoizedState=c}function na(e,t,i){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ra(t.firstEffect,i),t.firstEffect=t.lastEffect=null,ra(t.firstCapturedEffect,i),t.firstCapturedEffect=t.lastCapturedEffect=null}function ra(e,t){for(;null!==e;){var i=e.callback;if(null!==i){e.callback=null;var n=t;"function"!==typeof i&&a("191",i),i.call(n)}e=e.nextEffect}}function oa(e,t){return{value:e,source:t,stack:lt(t)}}function aa(e){e.effectTag|=4}var sa=void 0,la=void 0,ca=void 0,ha=void 0;sa=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},la=function(){},ca=function(e,t,i,n,o){var a=e.memoizedProps;if(a!==n){var s=t.stateNode;switch(xr(vr.current),e=null,i){case"input":a=bt(s,a),n=bt(s,n),e=[];break;case"option":a=Ui(s,a),n=Ui(s,n),e=[];break;case"select":a=r({},a,{value:void 0}),n=r({},n,{value:void 0}),e=[];break;case"textarea":a=qi(s,a),n=qi(s,n),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(s.onclick=fn)}dn(i,n),s=i=void 0;var l=null;for(i in a)if(!n.hasOwnProperty(i)&&a.hasOwnProperty(i)&&null!=a[i])if("style"===i){var c=a[i];for(s in c)c.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(b.hasOwnProperty(i)?e||(e=[]):(e=e||[]).push(i,null));for(i in n){var h=n[i];if(c=null!=a?a[i]:void 0,n.hasOwnProperty(i)&&h!==c&&(null!=h||null!=c))if("style"===i)if(c){for(s in c)!c.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in h)h.hasOwnProperty(s)&&c[s]!==h[s]&&(l||(l={}),l[s]=h[s])}else l||(e||(e=[]),e.push(i,l)),l=h;else"dangerouslySetInnerHTML"===i?(h=h?h.__html:void 0,c=c?c.__html:void 0,null!=h&&c!==h&&(e=e||[]).push(i,""+h)):"children"===i?c===h||"string"!==typeof h&&"number"!==typeof h||(e=e||[]).push(i,""+h):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(b.hasOwnProperty(i)?(null!=h&&un(o,i),e||c===h||(e=[])):(e=e||[]).push(i,h))}l&&(e=e||[]).push("style",l),o=e,(t.updateQueue=o)&&aa(t)}},ha=function(e,t,i,n){i!==n&&aa(t)};var da="function"===typeof WeakSet?WeakSet:Set;function pa(e,t){var i=t.source,n=t.stack;null===n&&null!==i&&(n=lt(i)),null!==i&&st(i.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(r){setTimeout(function(){throw r})}}function ua(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(i){qa(e,i)}else t.current=null}function fa(e,t,i){if(null!==(i=null!==(i=i.updateQueue)?i.lastEffect:null)){var n=i=i.next;do{if((n.tag&e)!==Or){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}(n.tag&t)!==Or&&(r=n.create,n.destroy=r()),n=n.next}while(n!==i)}}function ga(e){switch("function"===typeof Fn&&Fn(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var i=t=t.next;do{var n=i.destroy;if(void 0!==n){var r=e;try{n()}catch(o){qa(r,o)}}i=i.next}while(i!==t)}break;case 1:if(ua(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){qa(e,o)}break;case 5:ua(e);break;case 4:va(e)}}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ya(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var i=t;break e}t=t.return}a("160"),i=void 0}var n=t=void 0;switch(i.tag){case 5:t=i.stateNode,n=!1;break;case 3:case 4:t=i.stateNode.containerInfo,n=!0;break;default:a("161")}16&i.effectTag&&(on(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||ma(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.effectTag)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.effectTag)){i=i.stateNode;break e}}for(var r=e;;){if(5===r.tag||6===r.tag)if(i)if(n){var o=t,s=r.stateNode,l=i;8===o.nodeType?o.parentNode.insertBefore(s,l):o.insertBefore(s,l)}else t.insertBefore(r.stateNode,i);else n?(s=t,l=r.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(l,s):(o=s).appendChild(l),null!==(s=s._reactRootContainer)&&void 0!==s||null!==o.onclick||(o.onclick=fn)):t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function va(e){for(var t=e,i=!1,n=void 0,r=void 0;;){if(!i){i=t.return;e:for(;;){switch(null===i&&a("160"),i.tag){case 5:n=i.stateNode,r=!1;break e;case 3:case 4:n=i.stateNode.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(ga(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r?(o=n,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):n.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){n=t.stateNode.containerInfo,r=!0,t.child.return=t,t=t.child;continue}}else if(ga(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(i=!1)}t.sibling.return=t.return,t=t.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:fa(Tr,Ar,t);break;case 1:break;case 5:var i=t.stateNode;if(null!=i){var n=t.memoizedProps;e=null!==e?e.memoizedProps:n;var r=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,i,n,r){e[R]=r,"input"===i&&"radio"===r.type&&null!=r.name&&xt(e,r),pn(i,n),n=pn(i,r);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?cn(e,s):"dangerouslySetInnerHTML"===a?rn(e,s):"children"===a?on(e,s):yt(e,a,s,n)}switch(i){case"input":St(e,r);break;case"textarea":Qi(e,r);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?Gi(e,!!r.multiple,i,!1):t!==!!r.multiple&&(null!=r.defaultValue?Gi(e,!!r.multiple,r.defaultValue,!0):Gi(e,!!r.multiple,r.multiple?[]:"",!1))}}(i,o,r,e,n)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(i=t.memoizedState,n=void 0,e=t,null===i?n=!1:(n=!0,e=t.child,0===i.timedOutAt&&(i.timedOutAt=Ss())),null!==e&&function(e,t){for(var i=e;;){if(5===i.tag){var n=i.stateNode;if(t)n.style.display="none";else{n=i.stateNode;var r=i.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,n.style.display=ln("display",r)}}else if(6===i.tag)i.stateNode.nodeValue=t?"":i.memoizedProps;else{if(13===i.tag&&null!==i.memoizedState){(n=i.child.sibling).return=i,i=n;continue}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}(e,n),null!==(i=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new da),i.forEach(function(e){var i=function(e,t){var i=e.stateNode;null!==i&&i.delete(t),t=Za(t=Ss(),e),null!==(e=Ka(e,t))&&(Jn(e,t),0!==(t=e.expirationTime)&&Cs(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(i,i))})}break;case 17:break;default:a("163")}}var wa="function"===typeof WeakMap?WeakMap:Map;function xa(e,t,i){(i=Qo(i)).tag=Uo,i.payload={element:null};var n=t.value;return i.callback=function(){ks(n),pa(e,t)},i}function Sa(e,t,i){(i=Qo(i)).tag=Uo;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return n(r)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){"function"!==typeof n&&(null===Ha?Ha=new Set([this]):Ha.add(this));var i=t.value,r=t.stack;pa(e,t),this.componentDidCatch(i,{componentStack:null!==r?r:""})}),i}function Ca(e){switch(e.tag){case 1:Rn(e.type)&&Nn();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Cr(),jn(),0!==(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return Er(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return Cr(),null;case 10:return _o(e),null;default:return null}}var Pa=Xe.ReactCurrentDispatcher,Ea=Xe.ReactCurrentOwner,Oa=1073741822,Ma=!1,Ta=null,Aa=null,La=0,Da=-1,ka=!1,Ia=null,Ra=!1,Na=null,ja=null,za=null,Ha=null;function Ba(){if(null!==Ta)for(var e=Ta.return;null!==e;){var t=e;switch(t.tag){case 1:var i=t.type.childContextTypes;null!==i&&void 0!==i&&Nn();break;case 3:Cr(),jn();break;case 5:Er(t);break;case 4:Cr();break;case 10:_o(t)}e=e.return}Aa=null,La=0,Da=-1,ka=!1,Ta=null}function _a(){for(;null!==Ia;){var e=Ia.effectTag;if(16&e&&on(Ia.stateNode,""),128&e){var t=Ia.alternate;null!==t&&(null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null))}switch(14&e){case 2:ya(Ia),Ia.effectTag&=-3;break;case 6:ya(Ia),Ia.effectTag&=-3,ba(Ia.alternate,Ia);break;case 4:ba(Ia.alternate,Ia);break;case 8:va(e=Ia),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Ia=Ia.nextEffect}}function Wa(){for(;null!==Ia;){if(256&Ia.effectTag)e:{var e=Ia.alternate,t=Ia;switch(t.tag){case 0:case 11:case 15:fa(Mr,Or,t);break e;case 1:if(256&t.effectTag&&null!==e){var i=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:nr(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Ia=Ia.nextEffect}}function Fa(e,t){for(;null!==Ia;){var i=Ia.effectTag;if(36&i){var n=Ia.alternate,r=Ia,o=t;switch(r.tag){case 0:case 11:case 15:fa(Lr,Dr,r);break;case 1:var s=r.stateNode;if(4&r.effectTag)if(null===n)s.componentDidMount();else{var l=r.elementType===r.type?n.memoizedProps:nr(r.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(n=r.updateQueue)&&na(0,n,s);break;case 3:if(null!==(n=r.updateQueue)){if(s=null,null!==r.child)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}na(0,n,s)}break;case 5:o=r.stateNode,null===n&&4&r.effectTag&&yn(r.type,r.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&i&&(null!==(r=Ia.ref)&&(o=Ia.stateNode,"function"===typeof r?r(o):r.current=o)),512&i&&(Na=e),Ia=Ia.nextEffect}}function Ya(){null!==ja&&Sn(ja),null!==za&&za()}function Xa(e,t){Ra=Ma=!0,e.current===t&&a("177");var i=e.pendingCommitExpirationTime;0===i&&a("261"),e.pendingCommitExpirationTime=0;var n=t.expirationTime,r=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var i=e.latestPendingTime;0!==i&&(i>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(i=e.earliestSuspendedTime)?Jn(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Jn(e,t)):t>i&&Jn(e,t)}ir(0,e)}(e,r>n?r:n),Ea.current=null,n=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,n=t.firstEffect):n=t:n=t.firstEffect,gn=Ci,mn=function(){var e=Ni();if(ji(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(i&&0!==i.rangeCount){t=i.anchorNode;var n=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch(u){t=null;break e}var o=0,a=-1,s=-1,l=0,c=0,h=e,d=null;t:for(;;){for(var p;h!==t||0!==n&&3!==h.nodeType||(a=o+n),h!==r||0!==i&&3!==h.nodeType||(s=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===t&&++l===n&&(a=o),d===r&&++c===i&&(s=o),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Ci=!1,Ia=n;null!==Ia;){r=!1;var s=void 0;try{Wa()}catch(c){r=!0,s=c}r&&(null===Ia&&a("178"),qa(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Ia=n;null!==Ia;){r=!1,s=void 0;try{_a()}catch(c){r=!0,s=c}r&&(null===Ia&&a("178"),qa(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(zi(mn),mn=null,Ci=!!gn,gn=null,e.current=t,Ia=n;null!==Ia;){r=!1,s=void 0;try{Fa(e,i)}catch(c){r=!0,s=c}r&&(null===Ia&&a("178"),qa(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}if(null!==n&&null!==Na){var l=function(e,t){za=ja=Na=null;var i=rs;rs=!0;do{if(512&t.effectTag){var n=!1,r=void 0;try{var o=t;fa(Ir,Or,o),fa(Or,kr,o)}catch(l){n=!0,r=l}n&&qa(t,r)}t=t.nextEffect}while(null!==t);rs=i,0!==(i=e.expirationTime)&&Cs(e,i),hs||rs||Ts(1073741823,!1)}.bind(null,e,n);ja=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return xn(l)}),za=l}Ma=Ra=!1,"function"===typeof Wn&&Wn(t.stateNode),i=t.expirationTime,0===(t=(t=t.childExpirationTime)>i?t:i)&&(Ha=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Va(e){for(;;){var t=e.alternate,i=e.return,n=e.sibling;if(0===(1024&e.effectTag)){Ta=e;e:{var o=t,s=La,l=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rn(t.type)&&Nn();break;case 3:Cr(),jn(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==o&&null!==o.child||(bo(t),t.effectTag&=-3),la(t);break;case 5:Er(t);var c=xr(wr.current);if(s=t.type,null!==o&&null!=t.stateNode)ca(o,t,s,l,c),o.ref!==t.ref&&(t.effectTag|=128);else if(l){var h=xr(vr.current);if(bo(t)){o=(l=t).stateNode;var d=l.type,p=l.memoizedProps,u=c;switch(o[I]=l,o[R]=p,s=void 0,c=d){case"iframe":case"object":Pi("load",o);break;case"video":case"audio":for(d=0;d<te.length;d++)Pi(te[d],o);break;case"source":Pi("error",o);break;case"img":case"image":case"link":Pi("error",o),Pi("load",o);break;case"form":Pi("reset",o),Pi("submit",o);break;case"details":Pi("toggle",o);break;case"input":wt(o,p),Pi("invalid",o),un(u,"onChange");break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Pi("invalid",o),un(u,"onChange");break;case"textarea":Zi(o,p),Pi("invalid",o),un(u,"onChange")}for(s in dn(c,p),d=null,p)p.hasOwnProperty(s)&&(h=p[s],"children"===s?"string"===typeof h?o.textContent!==h&&(d=["children",h]):"number"===typeof h&&o.textContent!==""+h&&(d=["children",""+h]):b.hasOwnProperty(s)&&null!=h&&un(u,s));switch(c){case"input":Fe(o),Ct(o,p,!0);break;case"textarea":Fe(o),Ki(o);break;case"select":case"option":break;default:"function"===typeof p.onClick&&(o.onclick=fn)}s=d,l.updateQueue=s,(l=null!==s)&&aa(t)}else{p=t,u=s,o=l,d=9===c.nodeType?c:c.ownerDocument,h===$i.html&&(h=Ji(u)),h===$i.html?"script"===u?((o=d.createElement("div")).innerHTML="<script><\/script>",d=o.removeChild(o.firstChild)):"string"===typeof o.is?d=d.createElement(u,{is:o.is}):(d=d.createElement(u),"select"===u&&(u=d,o.multiple?u.multiple=!0:o.size&&(u.size=o.size))):d=d.createElementNS(h,u),(o=d)[I]=p,o[R]=l,sa(o,t,!1,!1),u=o;var f=c,g=pn(d=s,p=l);switch(d){case"iframe":case"object":Pi("load",u),c=p;break;case"video":case"audio":for(c=0;c<te.length;c++)Pi(te[c],u);c=p;break;case"source":Pi("error",u),c=p;break;case"img":case"image":case"link":Pi("error",u),Pi("load",u),c=p;break;case"form":Pi("reset",u),Pi("submit",u),c=p;break;case"details":Pi("toggle",u),c=p;break;case"input":wt(u,p),c=bt(u,p),Pi("invalid",u),un(f,"onChange");break;case"option":c=Ui(u,p);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},c=r({},p,{value:void 0}),Pi("invalid",u),un(f,"onChange");break;case"textarea":Zi(u,p),c=qi(u,p),Pi("invalid",u),un(f,"onChange");break;default:c=p}dn(d,c),h=void 0;var m=d,y=u,v=c;for(h in v)if(v.hasOwnProperty(h)){var w=v[h];"style"===h?cn(y,w):"dangerouslySetInnerHTML"===h?null!=(w=w?w.__html:void 0)&&rn(y,w):"children"===h?"string"===typeof w?("textarea"!==m||""!==w)&&on(y,w):"number"===typeof w&&on(y,""+w):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(b.hasOwnProperty(h)?null!=w&&un(f,h):null!=w&&yt(y,h,w,g))}switch(d){case"input":Fe(u),Ct(u,p,!1);break;case"textarea":Fe(u),Ki(u);break;case"option":null!=p.value&&u.setAttribute("value",""+vt(p.value));break;case"select":(c=u).multiple=!!p.multiple,null!=(u=p.value)?Gi(c,!!p.multiple,u,!1):null!=p.defaultValue&&Gi(c,!!p.multiple,p.defaultValue,!0);break;default:"function"===typeof c.onClick&&(u.onclick=fn)}(l=yn(s,l))&&aa(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:o&&null!=t.stateNode?ha(o,t,o.memoizedProps,l):("string"!==typeof l&&(null===t.stateNode&&a("166")),o=xr(wr.current),xr(vr.current),bo(t)?(s=(l=t).stateNode,o=l.memoizedProps,s[I]=l,(l=s.nodeValue!==o)&&aa(t)):(s=t,(l=(9===o.nodeType?o:o.ownerDocument).createTextNode(l))[I]=t,s.stateNode=l));break;case 11:break;case 13:if(l=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=s,Ta=t;break e}l=null!==l,s=null!==o&&null!==o.memoizedState,null!==o&&!l&&s&&(null!==(o=o.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=o,o.nextEffect=c):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(l||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Cr(),la(t);break;case 10:_o(t);break;case 9:case 14:break;case 17:Rn(t.type)&&Nn();break;case 18:break;default:a("156")}Ta=null}if(t=e,1===La||1!==t.childExpirationTime){for(l=0,s=t.child;null!==s;)(o=s.expirationTime)>l&&(l=o),(c=s.childExpirationTime)>l&&(l=c),s=s.sibling;t.childExpirationTime=l}if(null!==Ta)return Ta;null!==i&&0===(1024&i.effectTag)&&(null===i.firstEffect&&(i.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==i.lastEffect&&(i.lastEffect.nextEffect=e.firstEffect),i.lastEffect=e.lastEffect),1<e.effectTag&&(null!==i.lastEffect?i.lastEffect.nextEffect=e:i.firstEffect=e,i.lastEffect=e))}else{if(null!==(e=Ca(e)))return e.effectTag&=1023,e;null!==i&&(i.firstEffect=i.lastEffect=null,i.effectTag|=1024)}if(null!==n)return n;if(null===i)break;e=i}return null}function Ua(e){var t=Ro(e.alternate,e,La);return e.memoizedProps=e.pendingProps,null===t&&(t=Va(e)),Ea.current=null,t}function Ga(e,t){Ma&&a("243"),Ya(),Ma=!0;var i=Pa.current;Pa.current=lo;var n=e.nextExpirationTimeToWorkOn;n===La&&e===Aa&&null!==Ta||(Ba(),La=n,Ta=Gn((Aa=e).current,null),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(t)for(;null!==Ta&&!Os();)Ta=Ua(Ta);else for(;null!==Ta;)Ta=Ua(Ta)}catch(y){if(Ho=zo=jo=null,Kr(),null===Ta)r=!0,ks(y);else{null===Ta&&a("271");var o=Ta,s=o.return;if(null!==s){e:{var l=e,c=s,h=o,d=y;if(s=La,h.effectTag|=1024,h.firstEffect=h.lastEffect=null,null!==d&&"object"===typeof d&&"function"===typeof d.then){var p=d;d=c;var u=-1,f=-1;do{if(13===d.tag){var g=d.alternate;if(null!==g&&null!==(g=g.memoizedState)){f=10*(1073741822-g.timedOutAt);break}"number"===typeof(g=d.pendingProps.maxDuration)&&(0>=g?u=0:(-1===u||g<u)&&(u=g))}d=d.return}while(null!==d);d=c;do{if((g=13===d.tag)&&(g=void 0!==d.memoizedProps.fallback&&null===d.memoizedState),g){if(null===(c=d.updateQueue)?((c=new Set).add(p),d.updateQueue=c):c.add(p),0===(1&d.mode)){d.effectTag|=64,h.effectTag&=-1957,1===h.tag&&(null===h.alternate?h.tag=17:((s=Qo(1073741823)).tag=Vo,$o(h,s))),h.expirationTime=1073741823;break e}c=s;var m=(h=l).pingCache;null===m?(m=h.pingCache=new wa,g=new Set,m.set(p,g)):void 0===(g=m.get(p))&&(g=new Set,m.set(p,g)),g.has(c)||(g.add(c),h=Qa.bind(null,h,p,c),p.then(h,h)),-1===u?l=1073741823:(-1===f&&(f=10*(1073741822-tr(l,s))-5e3),l=f+u),0<=l&&Da<l&&(Da=l),d.effectTag|=2048,d.expirationTime=s;break e}d=d.return}while(null!==d);d=Error((st(h.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(h))}ka=!0,d=oa(d,h),l=c;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,Jo(l,s=xa(l,d,s));break e;case 1:if(u=d,f=l.type,h=l.stateNode,0===(64&l.effectTag)&&("function"===typeof f.getDerivedStateFromError||null!==h&&"function"===typeof h.componentDidCatch&&(null===Ha||!Ha.has(h)))){l.effectTag|=2048,l.expirationTime=s,Jo(l,s=Sa(l,u,s));break e}}l=l.return}while(null!==l)}Ta=Va(o);continue}r=!0,ks(y)}}break}if(Ma=!1,Pa.current=i,Ho=zo=jo=null,Kr(),r)Aa=null,e.finishedWork=null;else if(null!==Ta)e.finishedWork=null;else{if(null===(i=e.current.alternate)&&a("281"),Aa=null,ka){if(r=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==r&&r<n||0!==o&&o<n||0!==s&&s<n)return er(e,n),void xs(e,i,n,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,n=e.nextExpirationTimeToWorkOn=n,t=e.expirationTime=1073741823,void xs(e,i,n,t,-1)}t&&-1!==Da?(er(e,n),(t=10*(1073741822-tr(e,n)))<Da&&(Da=t),t=10*(1073741822-Ss()),t=Da-t,xs(e,i,n,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=n,e.finishedWork=i)}}function qa(e,t){for(var i=e.return;null!==i;){switch(i.tag){case 1:var n=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ha||!Ha.has(n)))return $o(i,e=Sa(i,e=oa(t,e),1073741823)),void $a(i,1073741823);break;case 3:return $o(i,e=xa(i,e=oa(t,e),1073741823)),void $a(i,1073741823)}i=i.return}3===e.tag&&($o(e,i=xa(e,i=oa(t,e),1073741823)),$a(e,1073741823))}function Za(e,t){var i=o.unstable_getCurrentPriorityLevel(),n=void 0;if(0===(1&t.mode))n=1073741823;else if(Ma&&!Ra)n=La;else{switch(i){case o.unstable_ImmediatePriority:n=1073741823;break;case o.unstable_UserBlockingPriority:n=1073741822-10*(1+((1073741822-e+15)/10|0));break;case o.unstable_NormalPriority:n=1073741822-25*(1+((1073741822-e+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:n=1;break;default:a("313")}null!==Aa&&n===La&&--n}return i===o.unstable_UserBlockingPriority&&(0===ss||n<ss)&&(ss=n),n}function Qa(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),null!==Aa&&La===i?Aa=null:(t=e.earliestSuspendedTime,n=e.latestSuspendedTime,0!==t&&i<=t&&i>=n&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>i)&&(e.latestPingedTime=i),ir(i,e),0!==(i=e.expirationTime)&&Cs(e,i)))}function Ka(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(null===n&&3===e.tag)r=e.stateNode;else for(;null!==n;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t),null===n.return&&3===n.tag){r=n.stateNode;break}n=n.return}return r}function $a(e,t){null!==(e=Ka(e,t))&&(!Ma&&0!==La&&t>La&&Ba(),Jn(e,t),Ma&&!Ra&&Aa===e||Cs(e,e.expirationTime),ys>ms&&(ys=0,a("185")))}function Ja(e,t,i,n,r){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return e(t,i,n,r)})}var es=null,ts=null,is=0,ns=void 0,rs=!1,os=null,as=0,ss=0,ls=!1,cs=null,hs=!1,ds=!1,ps=null,us=o.unstable_now(),fs=1073741822-(us/10|0),gs=fs,ms=50,ys=0,vs=null;function bs(){fs=1073741822-((o.unstable_now()-us)/10|0)}function ws(e,t){if(0!==is){if(t<is)return;null!==ns&&o.unstable_cancelCallback(ns)}is=t,e=o.unstable_now()-us,ns=o.unstable_scheduleCallback(Ms,{timeout:10*(1073741822-t)-e})}function xs(e,t,i,n,r){e.expirationTime=n,0!==r||Os()?0<r&&(e.timeoutHandle=bn(function(e,t,i){e.pendingCommitExpirationTime=i,e.finishedWork=t,bs(),gs=fs,As(e,i)}.bind(null,e,t,i),r)):(e.pendingCommitExpirationTime=i,e.finishedWork=t)}function Ss(){return rs?gs:(Ps(),0!==as&&1!==as||(bs(),gs=fs),gs)}function Cs(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ts?(es=ts=e,e.nextScheduledRoot=e):(ts=ts.nextScheduledRoot=e).nextScheduledRoot=es):t>e.expirationTime&&(e.expirationTime=t),rs||(hs?ds&&(os=e,as=1073741823,Ls(e,1073741823,!1)):1073741823===t?Ts(1073741823,!1):ws(e,t))}function Ps(){var e=0,t=null;if(null!==ts)for(var i=ts,n=es;null!==n;){var r=n.expirationTime;if(0===r){if((null===i||null===ts)&&a("244"),n===n.nextScheduledRoot){es=ts=n.nextScheduledRoot=null;break}if(n===es)es=r=n.nextScheduledRoot,ts.nextScheduledRoot=r,n.nextScheduledRoot=null;else{if(n===ts){(ts=i).nextScheduledRoot=es,n.nextScheduledRoot=null;break}i.nextScheduledRoot=n.nextScheduledRoot,n.nextScheduledRoot=null}n=i.nextScheduledRoot}else{if(r>e&&(e=r,t=n),n===ts)break;if(1073741823===e)break;i=n,n=n.nextScheduledRoot}}os=t,as=e}var Es=!1;function Os(){return!!Es||!!o.unstable_shouldYield()&&(Es=!0)}function Ms(){try{if(!Os()&&null!==es){bs();var e=es;do{var t=e.expirationTime;0!==t&&fs<=t&&(e.nextExpirationTimeToWorkOn=fs),e=e.nextScheduledRoot}while(e!==es)}Ts(0,!0)}finally{Es=!1}}function Ts(e,t){if(Ps(),t)for(bs(),gs=fs;null!==os&&0!==as&&e<=as&&!(Es&&fs>as);)Ls(os,as,fs>as),Ps(),bs(),gs=fs;else for(;null!==os&&0!==as&&e<=as;)Ls(os,as,!1),Ps();if(t&&(is=0,ns=null),0!==as&&ws(os,as),ys=0,vs=null,null!==ps)for(e=ps,ps=null,t=0;t<e.length;t++){var i=e[t];try{i._onComplete()}catch(n){ls||(ls=!0,cs=n)}}if(ls)throw e=cs,cs=null,ls=!1,e}function As(e,t){rs&&a("253"),os=e,as=t,Ls(e,t,!1),Ts(1073741823,!1)}function Ls(e,t,i){if(rs&&a("245"),rs=!0,i){var n=e.finishedWork;null!==n?Ds(e,n,t):(e.finishedWork=null,-1!==(n=e.timeoutHandle)&&(e.timeoutHandle=-1,wn(n)),Ga(e,i),null!==(n=e.finishedWork)&&(Os()?e.finishedWork=n:Ds(e,n,t)))}else null!==(n=e.finishedWork)?Ds(e,n,t):(e.finishedWork=null,-1!==(n=e.timeoutHandle)&&(e.timeoutHandle=-1,wn(n)),Ga(e,i),null!==(n=e.finishedWork)&&Ds(e,n,t));rs=!1}function Ds(e,t,i){var n=e.firstBatch;if(null!==n&&n._expirationTime>=i&&(null===ps?ps=[n]:ps.push(n),n._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===vs?ys++:(vs=e,ys=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Xa(e,t)})}function ks(e){null===os&&a("246"),os.expirationTime=0,ls||(ls=!0,cs=e)}function Is(e,t){var i=hs;hs=!0;try{return e(t)}finally{(hs=i)||rs||Ts(1073741823,!1)}}function Rs(e,t){if(hs&&!ds){ds=!0;try{return e(t)}finally{ds=!1}}return e(t)}function Ns(e,t,i){hs||rs||0===ss||(Ts(ss,!1),ss=0);var n=hs;hs=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return e(t,i)})}finally{(hs=n)||rs||Ts(1073741823,!1)}}function js(e,t,i,n,r){var o=t.current;e:if(i){t:{2===ti(i=i._reactInternalFiber)&&1===i.tag||a("170");var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Rn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===i.tag){var l=i.type;if(Rn(l)){i=Hn(i,l,s);break e}}i=s}else i=An;return null===t.context?t.context=i:t.pendingContext=i,t=r,(r=Qo(n)).payload={element:e},null!==(t=void 0===t?null:t)&&(r.callback=t),Ya(),$o(o,r),$a(o,n),n}function zs(e,t,i,n){var r=t.current;return js(e,t,i,r=Za(Ss(),r),n)}function Hs(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Bs(e){var t=1073741822-25*(1+((1073741822-Ss()+500)/25|0));t>=Oa&&(t=Oa-1),this._expirationTime=Oa=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function _s(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ws(e,t,i){e={current:t=Vn(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:i,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Fs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ys(e,t,i,n,r){var o=i._reactRootContainer;if(o){if("function"===typeof r){var a=r;r=function(){var e=Hs(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,r):o.render(t,r)}else{if(o=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new Ws(e,!1,t)}(i,n),"function"===typeof r){var s=r;r=function(){var e=Hs(o._internalRoot);s.call(e)}}Rs(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,r):o.render(t,r)})}return Hs(o._internalRoot)}function Xs(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Fs(t)||a("200"),function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:qe,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)}Oe=function(e,t,i){switch(t){case"input":if(St(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=H(n);r||a("90"),Ye(n),St(n,r)}}}break;case"textarea":Qi(e,i);break;case"select":null!=(t=i.value)&&Gi(e,!!i.multiple,t,!1)}},Bs.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,i=this._expirationTime,n=new _s;return js(e,t,null,i,n._onCommit),n},Bs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var i=this._expirationTime;if(t!==this){this._hasChildren&&(i=this._expirationTime=t._expirationTime,this.render(this._children));for(var n=null,r=t;r!==this;)n=r,r=r._next;null===n&&a("251"),n._next=r._next,this._next=t,e.firstBatch=this}this._defer=!1,As(e,i),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Bs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},_s.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},_s.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var i=e[t];"function"!==typeof i&&a("191",i),i()}}},Ws.prototype.render=function(e,t){var i=this._internalRoot,n=new _s;return null!==(t=void 0===t?null:t)&&n.then(t),zs(e,i,null,n._onCommit),n},Ws.prototype.unmount=function(e){var t=this._internalRoot,i=new _s;return null!==(e=void 0===e?null:e)&&i.then(e),zs(null,t,null,i._onCommit),i},Ws.prototype.legacy_renderSubtreeIntoContainer=function(e,t,i){var n=this._internalRoot,r=new _s;return null!==(i=void 0===i?null:i)&&r.then(i),zs(t,n,e,r._onCommit),r},Ws.prototype.createBatch=function(){var e=new Bs(this),t=e._expirationTime,i=this._internalRoot,n=i.firstBatch;if(null===n)i.firstBatch=e,e._next=null;else{for(i=null;null!==n&&n._expirationTime>=t;)i=n,n=n._next;e._next=n,null!==i&&(i._next=e)}return e},ke=Is,Ie=Ns,Re=function(){rs||0===ss||(Ts(ss,!1),ss=0)};var Vs={createPortal:Xs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?a("188"):a("268",Object.keys(e))),e=null===(e=ni(t))?null:e.stateNode},hydrate:function(e,t,i){return Fs(t)||a("200"),Ys(null,e,t,!0,i)},render:function(e,t,i){return Fs(t)||a("200"),Ys(null,e,t,!1,i)},unstable_renderSubtreeIntoContainer:function(e,t,i,n){return Fs(i)||a("200"),(null==e||void 0===e._reactInternalFiber)&&a("38"),Ys(e,t,i,!1,n)},unmountComponentAtNode:function(e){return Fs(e)||a("40"),!!e._reactRootContainer&&(Rs(function(){Ys(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Xs.apply(void 0,arguments)},unstable_batchedUpdates:Is,unstable_interactiveUpdates:Ns,flushSync:function(e,t){rs&&a("187");var i=hs;hs=!0;try{return Ja(e,t)}finally{hs=i,Ts(1073741823,!1)}},unstable_createRoot:function(e,t){return Fs(e)||a("299","unstable_createRoot"),new Ws(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=hs;hs=!0;try{Ja(e)}finally{(hs=t)||rs||Ts(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[j,z,H,A.injectEventPluginsByName,v,X,function(e){O(e,Y)},Le,De,Mi,D]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);Wn=Yn(function(e){return t.onCommitFiberRoot(i,e)}),Fn=Yn(function(e){return t.onCommitFiberUnmount(i,e)})}catch(n){}})(r({},e,{overrideProps:null,currentDispatcherRef:Xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ni(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:N,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Us={default:Vs},Gs=Us&&Vs||Us;e.exports=Gs.default||Gs},function(e,t,i){"use strict";e.exports=i(36)},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=null,n=!1,r=3,o=-1,a=-1,s=!1,l=!1;function c(){if(!s){var e=i.expirationTime;l?C():l=!0,S(p,e)}}function h(){var e=i,t=i.next;if(i===t)i=null;else{var n=i.previous;i=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=r,s=a;r=e,a=t;try{var l=n()}finally{r=o,a=s}if("function"===typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===i)i=l.next=l.previous=l;else{n=null,e=i;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==i);null===n?n=i:n===i&&(i=l,c()),(t=n.previous).next=n.previous=l,l.next=n,l.previous=t}}function d(){if(-1===o&&null!==i&&1===i.priorityLevel){s=!0;try{do{h()}while(null!==i&&1===i.priorityLevel)}finally{s=!1,null!==i?c():l=!1}}}function p(e){s=!0;var r=n;n=e;try{if(e)for(;null!==i;){var o=t.unstable_now();if(!(i.expirationTime<=o))break;do{h()}while(null!==i&&i.expirationTime<=o)}else if(null!==i)do{h()}while(null!==i&&!P())}finally{s=!1,n=r,null!==i?c():l=!1,d()}}var u,f,g=Date,m="function"===typeof setTimeout?setTimeout:void 0,y="function"===typeof clearTimeout?clearTimeout:void 0,v="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function w(e){u=v(function(t){y(f),e(t)}),f=m(function(){b(u),e(t.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var x=performance;t.unstable_now=function(){return x.now()}}else t.unstable_now=function(){return g.now()};var S,C,P,E=null;if("undefined"!==typeof window?E=window:"undefined"!==typeof e&&(E=e),E&&E._schedMock){var O=E._schedMock;S=O[0],C=O[1],P=O[2],t.unstable_now=O[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var M=null,T=function(e){if(null!==M)try{M(e)}finally{M=null}};S=function(e){null!==M?setTimeout(S,0,e):(M=e,setTimeout(T,0,!1))},C=function(){M=null},P=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,L=!1,D=-1,k=!1,I=!1,R=0,N=33,j=33;P=function(){return R<=t.unstable_now()};var z=new MessageChannel,H=z.port2;z.port1.onmessage=function(){L=!1;var e=A,i=D;A=null,D=-1;var n=t.unstable_now(),r=!1;if(0>=R-n){if(!(-1!==i&&i<=n))return k||(k=!0,w(B)),A=e,void(D=i);r=!0}if(null!==e){I=!0;try{e(r)}finally{I=!1}}};var B=function e(t){if(null!==A){w(e);var i=t-R+j;i<j&&N<j?(8>i&&(i=8),j=i<N?N:i):N=i,R=t+j,L||(L=!0,H.postMessage(void 0))}else k=!1};S=function(e,t){A=e,D=t,I||0>t?H.postMessage(void 0):k||(k=!0,w(B))},C=function(){A=null,L=!1,D=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,i){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=r,a=o;r=e,o=t.unstable_now();try{return i()}finally{r=n,o=a,d()}},t.unstable_next=function(e){switch(r){case 1:case 2:case 3:var i=3;break;default:i=r}var n=r,a=o;r=i,o=t.unstable_now();try{return e()}finally{r=n,o=a,d()}},t.unstable_scheduleCallback=function(e,n){var a=-1!==o?o:t.unstable_now();if("object"===typeof n&&null!==n&&"number"===typeof n.timeout)n=a+n.timeout;else switch(r){case 1:n=a+-1;break;case 2:n=a+250;break;case 5:n=a+1073741823;break;case 4:n=a+1e4;break;default:n=a+5e3}if(e={callback:e,priorityLevel:r,expirationTime:n,next:null,previous:null},null===i)i=e.next=e.previous=e,c();else{a=null;var s=i;do{if(s.expirationTime>n){a=s;break}s=s.next}while(s!==i);null===a?a=i:a===i&&(i=e,c()),(n=a.previous).next=a.previous=e,e.next=a,e.previous=n}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)i=null;else{e===i&&(i=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var i=r;return function(){var n=r,a=o;r=i,o=t.unstable_now();try{return e.apply(this,arguments)}finally{r=n,o=a,d()}}},t.unstable_getCurrentPriorityLevel=function(){return r},t.unstable_shouldYield=function(){return!n&&(null!==i&&i.expirationTime<a||P())},t.unstable_continueExecution=function(){null!==i&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return i}}).call(this,i(23))},,,,function(e,t,i){var n=i(41),r=i(42),o=i(43);e.exports=function(e,t){return n(e)||r(e,t)||o()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,i){var n=i(45),r=i(46),o=i(47);e.exports=function(e){return n(e)||r(e)||o()}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,i){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())})}},function(e,t,i){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),r=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(r){}if(1===e.length)return e;t=t||1;var i=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(i),o(n))}function a(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(n),i=1;i<t.length;i++)t=(e=o(t,i).join("")).match(n);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var i={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=r.exec(e);n;){try{i[n[0]]=decodeURIComponent(n[0])}catch(t){var o=a(n[0]);o!==n[0]&&(i[n[0]]=o)}n=r.exec(e)}i["%C2"]="\ufffd";for(var s=Object.keys(i),l=0;l<s.length;l++){var c=s[l];e=e.replace(new RegExp(c,"g"),i[c])}return e}(e)}}},function(e,t,i){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var i=e.indexOf(t);return-1===i?[e]:[e.slice(0,i),e.slice(i+t.length)]}},function(e,t,i){"use strict";var n=i(52);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case p:case a:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case h:case u:case c:return e;default:return t}}case m:case g:case o:return t}}}function v(e){return y(e)===p}t.typeOf=y,t.AsyncMode=d,t.ConcurrentMode=p,t.ContextConsumer=h,t.ContextProvider=c,t.Element=r,t.ForwardRef=u,t.Fragment=a,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===p||e===l||e===s||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===c||e.$$typeof===h||e.$$typeof===u)},t.isAsyncMode=function(e){return v(e)||y(e)===d},t.isConcurrentMode=v,t.isContextConsumer=function(e){return y(e)===h},t.isContextProvider=function(e){return y(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return y(e)===u},t.isFragment=function(e){return y(e)===a},t.isLazy=function(e){return y(e)===m},t.isMemo=function(e){return y(e)===g},t.isPortal=function(e){return y(e)===o},t.isProfiler=function(e){return y(e)===l},t.isStrictMode=function(e){return y(e)===s},t.isSuspense=function(e){return y(e)===f}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var n="ej2_instances",r=0;function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function a(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!p(i);r++)i=i[n[r]];return i}function s(e,t,i){var n,r,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?{}:t:d(s[r])&&(s[r]={}),s=s[r];return a}function l(e){return!d(e)&&e.constructor==={}.constructor}function c(e,t){if(!d(t))for(var i=e,n=t,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];d(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!l(n[a])&&!Array.isArray(n[a])?i[a]=n[a]:h(i[a],i[a],n[a],!0)}}function h(e,t,i,n){var r=e||{},o=arguments.length;n&&(o-=1);for(var a=function(e){if(!s[e])return"continue";var t=s[e];Object.keys(t).forEach(function(e){var i,o=r[e],a=t[e];n&&(l(a)||Array.isArray(a))?l(a)?(i=o||{},r[e]=h({},i,a,n)):(i=o||[],r[e]=h([],i,a,n)):r[e]=a})},s=arguments,c=1;c<o;c++)a(c);return r}function d(e){return void 0===e||null===e}function p(e){return"undefined"===typeof e}function u(e){return e+"_"+r++}function f(e,t){return e===t||!(e===document||!e)&&f(e.parentNode,t)}function g(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function m(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function y(){return window&&Object.keys(window).indexOf("Blazor")>=0}function v(e,t){var i="string"===typeof e?document.querySelector(e):e;if(i[n])for(var r=0,o=i[n];r<o.length;r++){var a=o[r];if(a instanceof t)return a}return null}var b=/^(.*?):[ \t]*([^\r\n]*)$/gm,w="GET",x=function(){function e(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():w,this.mode=!!d(i)||i):"object"===typeof e&&(this.options=e,c(this,this.options)),this.type=this.type?this.type.toUpperCase():w,this.contentType=void 0!==this.contentType?this.contentType:n}return e.prototype.send=function(e){var t=this;this.data=d(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise(function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},d(t.onLoad)||(t.httpRequest.onload=t.onLoad),d(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),d(t.onAbort)||(t.httpRequest.onabort=t.onAbort),d(t.onError)||(t.httpRequest.onerror=t.onError),d(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),d(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(d(t.data)?null:t.data)})},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=b.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=b.exec(this.httpRequest.getAllResponseHeaders());return d(i=t[e.toLowerCase()])?null:i},e}(),S=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,r,o){var a,s=e.addOrGetEventData(t);a=o?function(e,t){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){return i=null,e.apply(n,r)},t)}}(n,o):n,r&&(a=a.bind(r));for(var l=i.split(" "),c=0;c<l.length;c++)s.push({name:l[c],listener:n,debounce:a}),t.addEventListener(l[c],a);return a},e.remove=function(t,i,n){for(var r=e.addOrGetEventData(t),o=i.split(" "),a=function(e){var i,a=-1;r&&0!==r.length&&r.some(function(t,r){return t.name===o[e]&&t.listener===n&&(a=r,i=t.debounce,!0)}),-1!==a&&r.splice(a,1),i&&t.removeEventListener(o[e],i)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var i,n;n=h([],n,i=e.addOrGetEventData(t));for(var r=0;r<n.length;r++)t.removeEventListener(n[r].name,n[r].debounce),i.shift()},e.trigger=function(t,i,n){for(var r=0,o=e.addOrGetEventData(t);r<o.length;r++){var a=o[r];a.name===i&&a.debounce.call(this,n)}},e}(),C=/^svg|^path|^g/;function P(e,t){var i=C.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t?i:(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&R(i,t.attrs),i)}function E(e,t){for(var i=M(t),n=0,r=e;n<r.length;n++)for(var o=r[n],a=0,s=i;a<s.length;a++){var l=s[a];o.classList.contains(l)||o.classList.add(l)}return e}function O(e,t){for(var i=M(t),n=0,r=e;n<r.length;n++){var o=r[n];if(""!==o.className)for(var a=0,s=i;a<s.length;a++){var l=s[a];o.classList.remove(l)}}return e}function M(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function T(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function A(e,t,i){for(var n=document.createDocumentFragment(),r=0,o=e;r<o.length;r++){var a=o[r];n.appendChild(a)}return t.insertBefore(n,t.firstElementChild),i&&D(t),e}function L(e,t,i){for(var n=document.createDocumentFragment(),r=0,o=e;r<o.length;r++){var a=o[r];n.appendChild(a)}return t.appendChild(n),i&&D(t),e}function D(e){e.querySelectorAll("script").forEach(function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),k(t)})}function k(e){return e.parentNode.removeChild(e)}function I(e){var t=e.parentNode;S.clearEvents(e),t.removeChild(e)}function R(e,t){for(var i=e,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];i.setAttribute(o,t[o])}return i}function N(e,t){return void 0===t&&(t=document),t.querySelector(e)}function j(e,t){return void 0===t&&(t=document),t.querySelectorAll(e)}function z(e,t){var i=e;if("function"===typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(_(i,t))return i;i=i.parentNode}return null}function H(e,t){void 0!==t&&Object.keys(t).forEach(function(i){e.style[i]=t[i]})}function B(e,t,i){E([e],t),O([e],i)}function _(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var W=function(){function e(e){this.ranArray=[],this.boundedEvents={},d(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!d(t)){var r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:d(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:r,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=a(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var r=a(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(r,t,i,n,0);for(var o=0,s=r;o<s.length;o++){var l=s[o];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,r){var o=this,a=r===e.length-1;if(r<e.length){var s=e[r],l=s.handler.call(s.context,t);if(l&&"function"===typeof l.then){if(!i)return l;l.then(function(l){if(l="string"===typeof l&&o.isJson(l)?JSON.parse(l):l,h(t,t,l,!0),!i||!a)return o.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}).catch(function(e){n&&n.call(s.context,"string"===typeof e&&o.isJson(e)?JSON.parse(e):e)})}else{if(!i||!a)return this.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}}},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),F=new RegExp("]"),Y=function(){function e(e,t){this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.refreshing=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new W(this),p(t)||(this.element="string"===typeof t?document.querySelector(t):t,d(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),p(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,c(this,e),!0!==t&&(c(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(t[r]instanceof Array)for(var o=0,a=t[r];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[r].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.saveChanges=function(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),r=function(i){i.source===window&&"string"===typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),e=r=n=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(e,t,i,n);if(F.test(e)){var l=a(e,this);if(l){if(window.Blazor){var c=l.call(this,t);c&&"function"===typeof c.then?i?c.then(function(e){i&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,i.call(r,e))}).catch(function(e){n&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,n.call(r,e))}):s=c:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,s}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();E([this.element],["e-lib",e]),d(this.element.ej2_instances)?s("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),O([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&O([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();var X=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,V=/msie|trident/i,U=/Trident\/7\./,G=/(ipad|iphone|ipod touch)/i,q=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Z=/android/i,Q=/trident|windows phone|edge/i,K=/(version)[ \/]([\w.]+)/i,$={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var J=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,r=Object.keys($);n<r.length;n++){var o=r[n];if(i=e.userAgent.match($[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(U)){t.name="msie";break}var a=e.userAgent.match(K);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n=window.browserDetails;return"undefined"===typeof n[t]?n[t]=i.test(e.userAgent):n[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return p(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",V)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return p(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return p(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return p(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",X)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",G)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",q)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",Z)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return p(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(p(window.cordova)&&p(window.PhoneGap)&&p(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",Q)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return p(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return p(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return p(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return p(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}();function ee(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=o(n,[e,t,i])),e.properties[t]}function te(e,t,i,n,r,a){for(var s=[],l=i?i.length:0,c=0;c<l;c++){var h=n;if(a&&(h=n(i[c],e)),r){var d=o(h,[e,t,{},!0]);d.setProperties(i[c],!0),s.push(d)}else s.push(o(h,[e,t,i[c],!0]))}return s}function ie(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function ne(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function re(e,t,i){return function(){return ee(this,t,e,i)}}function oe(e,t,i){return function(n){ee(this,t,e,i).setProperties(n)}}function ae(e,t,i){return function(){var n=i({});return this.properties.hasOwnProperty(t)?this.properties[t]:ee(this,t,e,n)}}function se(e,t,i){return function(n){var r=i(n,this);ee(this,t,e,r).setProperties(n)}}function le(e,t,i){return function(){if(!this.properties.hasOwnProperty(t)){var n=te(this,t,e,i,!1);this.properties[t]=n}return this.properties[t]}}function ce(e,t,i){return function(n){var r=te(this,t,e,i,!1),o=te(this,t,n,i,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function he(e,t,i){return function(n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=te(this,t,n,i,!0,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function de(e,t,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(t)){var r=te(this,t,e,n,!1);this.properties[t]=r}return this.properties[t]}}function pe(e){return function(t,i){var n={set:ne(e,i),get:ie(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),be(t,i,"prop",e)}}function ue(e,t){return function(i,n){var r={set:oe(e,n,t),get:re(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),be(i,n,"complexProp",e,t)}}function fe(e){return function(t,i){var n={set:se({},i,e),get:ae({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),be(t,i,"complexProp",{},e)}}function ge(e,t){return function(i,n){var r={set:ce(e,n,t),get:le(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),be(i,n,"colProp",e,t)}}function me(e){return function(t,i){var n={set:he([],i,e),get:de([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),be(t,i,"colProp",{},e)}}function ye(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=a("propName",t);return n&&(i=n+"-"+i),e(a("parentObj",t),i)}(this,t);!1===p(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:ie(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),be(e,t,"event")}}function ve(e){}function be(e,t,i,n,r){p(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:r}),e.propList[i+"Names"].push(t)}var we=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xe=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Se=function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return we(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var r=0,o=Array.prototype.slice.call(j(e,document));r<o.length;r++){var a=o[r];n.element=a,i.delayAnimation(n)}else n.element=e,i.delayAnimation(n)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout(function(){i.applyAnimation(e)},e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,r=0,o=e.duration;e.element.setAttribute("e-animate","true");!function a(s){try{if(s){r=0===r?s:r,e.timeStamp=s+e.timeStamp-r,r=s,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else performance.now(),n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(c){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,c)}}()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},xe([pe("FadeIn")],t.prototype,"name",void 0),xe([pe(400)],t.prototype,"duration",void 0),xe([pe("ease")],t.prototype,"timingFunction",void 0),xe([pe(0)],t.prototype,"delay",void 0),xe([ye()],t.prototype,"progress",void 0),xe([ye()],t.prototype,"begin",void 0),xe([ye()],t.prototype,"end",void 0),xe([ye()],t.prototype,"fail",void 0),t=i=xe([ve],t)}(Y);function Ce(e,t,i){var n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!Te?Function:(e.setAttribute("data-ripple","true"),S.add(e,"mousedown",Pe,{parent:e,rippleOptions:n}),S.add(e,"mouseup",Ee,{parent:e,rippleOptions:n,done:i}),S.add(e,"mouseleave",Oe,{parent:e,rippleOptions:n}),J.isPointer&&S.add(e,"transitionend",Oe,{parent:e,rippleOptions:n}),function(){e.removeAttribute("data-ripple"),S.remove(e,"mousedown",Pe),S.remove(e,"mouseup",Ee),S.remove(e,"mouseleave",Oe),S.remove(e,"transitionend",Oe)})}function Pe(e){var t=e.target,i=this.rippleOptions.selector,n=i?z(t,i):t;if(!(!n||this.rippleOptions&&z(t,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),s=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(a-r.top),Math.abs(a-r.bottom)),c=Math.sqrt(s*s+l*l),h=2*c+"px",d=o-r.left-c,p=a-r.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,h="100%"),n.classList.add("e-ripple");var u=P("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&S.add(n,"mouseleave",Oe,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Ee(e){Me(e,this)}function Oe(e){Me(e,this)}function Me(e,t){var i=t.rippleOptions.duration,n=e.target,r=t.rippleOptions.selector,o=r?z(n,r):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var a=j(".e-ripple-element",o),s=a[a.length-1];s&&(s.style.opacity="0.5"),t.parent!==o&&S.remove(o,"mouseleave",Oe),setTimeout(function(){s&&s.parentNode&&s.parentNode.removeChild(s),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)},i)}}var Te=!1;var Ae,Le,De=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var r=e[n],a=0,l=t;a<l.length;a++){var c=l[a],h=r.member;if(c.prototype.getModuleName()===r.member&&!this.isModuleLoaded(h)){var d=o(c,r.args),p=this.getMemberName(h);r.isProperty?s(p,c,this.parent):s(p,d,this.parent);var u=r;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,i,n=this,r=e.map(function(e){return n.getMemberName(e.member)}),o=0,s=this.loadedModules.filter(function(e){return-1===r.indexOf(e.member)});o<s.length;o++){var l=s[o];l.isProperty||a(l.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(l),1),t=this.parent,i=l.member,delete t[i]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),ke=function(){function e(e,t,i,n){this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",Y),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.setProperties(i,!0),this.isParentArray=n}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(c(this,e),this.updateChange(!1,this.propName),this.clearChanges()):c(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(s(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),s(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i){if(this.controlParent.isRendered&&y()){window&&window.ejsInterop&&window.ejsInterop.childSaveChanges.call(this,e,t,i)}this.controlParent.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e}(),Ie={latn:{_digits:"0123456789",_type:"numeric"}},Re={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},Ne=[0,1,2,3,4,5,6,7,8,9],je=function(){function e(){}return e.getMainObject=function(e,t){return a("main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,r=t||Object.keys(e);n<r.length;n++){var o=r[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(Re);i<n.length;i++){var r=n[i];t[e[r]]=Re[r]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i},e.convertValueParts=function(e,t,i){return e.replace(t,function(e){return i[e]})},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i){var n={},r=this.getDefaultNumberingSystem(e);if(!p(r.nSystem)){var o=a(r.nSystem+"._digits",t);p(o)||(n.numericPair=this.reverseObject(o,Ne),n.numberParseRegex=new RegExp(this.constructRegex(o),"g"),n.numericRegex="["+o[0]+"-"+o[9]+"]",i&&(n.numericRegex=o[0]+"-"+o[9],n.symbolNumberSystem=a("symbols-numberSystem-"+r.nSystem,r.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=r.nSystem))}return n},e.getNumberMapper=function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!p(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=a("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=a("timeSeparator",n.numberSymbols);var o=a(r.nSystem+"._digits",t);if(!p(o))for(var s=0,l=Ne;s<l.length;s++){var c=l[s];n.mapper[c]=o[c]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=Ie,e}(),ze={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},He=["infinity","nan","group","decimal","exponential"],Be=function(){function e(){}return e.numberFormatter=function(e,t,i){var n,r=this,o=h({},t),a={},s={},l=Ae.getDependables(i,e,"",!0);s.numberMapper=je.getNumberMapper(l.parserObject,je.getNumberingSystem(i),!0),s.currencySymbol=Ae.getCurrencySymbol(l.numericObject,o.currency||it),s.percentSymbol=s.numberMapper.numberSymbols.percentSign,s.minusSymbol=s.numberMapper.numberSymbols.minusSign;var c=s.numberMapper.numberSymbols;if(t.format&&!Ae.formatRegex.test(t.format))a=Ae.customFormat(t.format,s,l.numericObject);else{h(o,Ae.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,n=Ae.getSymbolPattern(o.type,s.numberMapper.numberSystem,l.numericObject,o.isAccount),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),p(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),p(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&(n=n.replace(/\u00A4/g,Ae.defaultCurrency));var d=n.split(";");if(a.nData=Ae.getFormatData(d[1]||"-"+d[0],!0,s.currencySymbol),a.pData=Ae.getFormatData(d[0],!1,s.currencySymbol),o.useGrouping&&(o.groupSeparator=c[He[2]],o.groupData=this.getGroupingDetails(d[0])),p(o.minimumFractionDigits)&&(o.minimumFractionDigits=a.nData.minimumFraction),p(o.maximumFractionDigits)){var u=a.nData.maximumFraction;o.maximumFractionDigits=p(u)&&o.isPercent?0:u}var f=o.minimumFractionDigits,g=o.maximumFractionDigits;p(f)||p(g)||f>g&&(o.maximumFractionDigits=f)}return h(a.nData,o),h(a.pData,o),function(e){return isNaN(e)?c[He[1]]:isFinite(e)?r.intNumberFormatter(e,a,s):c[He[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(Ae.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];t.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t},e.checkValueRange=function(e,t,i,n){var r=n?"f":"s",o=0,a=ze["l"+r],s=ze["m"+r];if(p(e)||(this.checkRange(e,a,n),o++),p(t)||(this.checkRange(t,s,n),o++),2===o){if(!(e<t))return!0;g(s+"specified must be less than the"+a)}else i&&1===o&&g("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&g(t+"value must be within the range"+n[0]+"to"+n[1])},e.intNumberFormatter=function(e,t,i){var n;if(!p(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var r="";return n.isPercent&&(e*=100),n.groupOne?r=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[He[4]])),r=r.replace(".",i.numberMapper.numberSymbols[He[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[He[3]]||".",n.groupData.secondary)),r=je.convertValueParts(r,Ae.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},e.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,n,r){for(var o=!d(r)&&0!==r,a=e.split(n),s=a[0],l=s.length,c="";l>t;)c=s.slice(l-t,l)+(c.length?i+c:""),l-=t,o&&(t=r,o=!1);return a[0]=s.slice(0,l)+(c.length?i:"")+c,a.join(n)},e.processFraction=function(e,t,i){var n=(e+"").split(".")[1],r=n?n.length:0;if(t&&r<t){var o="";if(0!==r){o+=e;for(var a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!d(i)&&(r>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var o=0;o<t-r;o++)n="0"+n;i[0]=n}return i.join(".")},e}();!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"},o="sun";e.islamicRegex=/^islamic/;var s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function c(t,i,n,r){var o,s=n||"date";if(-1!==e.basicPatterns.indexOf(t)){if(o=a(s+"Formats."+t,i),"dateTime"===s){var l=a("dateFormats."+t,i),c=a("timeFormats."+t,i);o=o.replace("{1}",l).replace("{0}",c)}}else o=a("dateTimeFormats.availableFormats."+t,i);return p(o)&&"yMd"===t&&(o="M/d/y"),o}function u(t,i,n,r){var o={},s=n||"gregorian";return o.parserObject=je.getMainObject(t,i)||e.defaultObject,r?o.numericObject=a("numbers",o.parserObject):o.dateObject=a("dates.calendars."+s,o.parserObject),o}function f(e,t,i,n){return a(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function g(t){var i=t.match(e.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=e.patternMatcher[r],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function m(i,n,r,o){var a=o?{}:{nlead:"",nend:""},s=i.match(e.customRegex);if(s){o||(a.nlead=y(s[1],r),a.nend=y(s[10],r),a.groupPattern=s[4]);var l=s[7];if(l&&n){var c=l.match(t);d(c)?a.minimumFraction=0:a.minimumFraction=c.length,a.maximumFraction=l.length-1}}return a}function y(t,i){return t?t.replace(e.defaultCurrency,i):""}function v(e,t){return a("currencies."+t+".symbol",e)||a("currencies."+t+".symbol-alt-narrow",e)||"$"}function b(t,n,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);(d(a)||""===a[5]&&"N/A"!==t)&&(o.type=void 0),o.nlead=a[1],o.nend=a[10];var s=a[6];o.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=a[7];if(-1!==s.indexOf("0")&&(o.minimumIntegerDigits=s.length-s.indexOf("0")),d(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),d(n)?h(o,w([o.nlead,o.nend],"%","%")):(h(o,w([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||h(o,w([o.nlead,o.nend],"%",n.percentSymbol))),!d(r)){var c=f(o.type,n.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=n.numberMapper.numberSymbols[i[2]],o.groupData=Be.getGroupingDetails(c.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function w(e,t,i){for(var n={nlead:e[0],nend:e[1]},r=0;r<2;r++){var o=e[r],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){n[l[r]]=o.substr(0,a)+i+o.substr(a+1),n[l[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=c,e.getDependables=u,e.getSymbolPattern=f,e.getProperNumericSkeleton=g,e.getFormatData=m,e.getCurrencySymbol=v,e.customFormat=function(e,t,i){for(var n={},r=e.split(";"),o=["pData","nData","zeroData"],a=0;a<r.length;a++)n[o[a]]=b(r[a],t,i);return d(n.nData)&&(n.nData=h({},n.pData),n.nData.nlead=d(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=w,e.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){var s=u(i,e,t.calendar),l=t.format||c(t.skeleton,s.dateObject,t.type);if(o){if(-1!==(l=l.replace(n,function(e){return r[e]})).indexOf("z")){var h=l.match(/z/g).length,d=void 0,p={timeZone:{}};p.numMapper=je.getNumberMapper(s.parserObject,je.getNumberingSystem(i)),p.timeZone=a("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),g=h<4?"+H;-H":p.timeZone.hourFormat;g=g.replace(/:/g,p.numMapper.timeSeparator),0===f?d=p.timeZone.gmtZeroFormat:(d=Xe.getTimeZoneValue(f,g),d=p.timeZone.gmtFormat.replace(/\{0\}/,d)),l=l.replace(/[z]+/,'"'+d+'"')}l=l.replace(/ $/,"")}return l},e.getActualNumberFormat=function(t,i,n){var r,o,a=u(n,t,"",!0),s={custom:!0},l={},c=(i.format||"").match(e.currencyFormatRegex);if(c){var d={};d.numberMapper=je.getNumberMapper(a.parserObject,je.getNumberingSystem(n),!0);var p=v(a.numericObject,i.currency||it),y=f("currency",d.numberMapper.numberSystem,a.numericObject,/a/i.test(i.format)),b=(y=y.replace(/\u00A4/g,p)).split(";");l.hasNegativePattern=b.length>1,l.nData=m(b[1]||"-"+b[0],!0,p),l.pData=m(b[0],!1,p),c[2]||i.minimumFractionDigits||i.maximumFractionDigits||(r=m(y.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(h(s,g(i.format||"N")),s.custom=!1,o="###0",(s.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||r)&&(s.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=s.fractionDigits),o=function(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var r=i-t,o=0;o<r;o++)e+="#";return e}(o,r||s.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)),i.minimumIntegerDigits&&(o=function(e,t){for(var i=e.split("."),n="",r=0;r<t;r++)n+="0";return i[1]?n+"."+i[1]:n}(o,i.minimumIntegerDigits)),i.useGrouping&&(o=function(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)e=","+i[r-2]+i[r-1]+i[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(o)),"currency"===s.type){var w=o;o=l.pData.nlead+w+l.pData.nend,l.hasNegativePattern&&(o+=";"+l.nData.nlead+w+l.nData.nend)}"percent"===s.type&&(o+=" %")}else o=i.format.replace(/\'/g,'"');return o},e.getWeekData=function(e,t){var i=o,n=a("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||o),s[i]}}(Ae||(Ae={})),function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),r=e.getFullYear(),o=n+1,a=r;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,c=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+i-l-1524,h=c+(l=(s=Math.floor((c-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,d=Math.floor((h-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((h-p)/30.6001);i=h-p-Math.floor(30.6001*u),(n=Math.floor((h-p)/20.6001))>13&&(d+=1,n-=12),n-=1,r=d-4716;var f=c-24e5,g=c-1948084,m=Math.floor(g/10631);g-=10631*m;var y=Math.floor((g-.1335)/(10631/30)),v=30*m+y;g-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),x=0;x<t.length&&!(t[x]>f);x++);var S=x+16260,C=Math.floor((S-1)/12),P=C+1,E=S-12*C,O=f-t[x-1]+1;return(O+"").length>2&&(O=w,E=b,P=v),{year:P,month:E,date:O}},e.toGregorian=function(e,i,n){var r=n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),a=Math.floor((o-1867216.25)/36524.25),s=1524+(a=o+1+a-Math.floor(a/4)),l=Math.floor((s-122.1)/365.25),c=Math.floor(365.25*l),h=Math.floor((s-c)/30.6001),d=s-c-Math.floor(30.6001*h),p=h-(h>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(Le||(Le={}));var _e=/\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|cccc|ccc|G+|z+/gi,We=["sun","mon","tue","wed","thu","fri","sat"],Fe={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate"},Ye={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era"},Xe=function(){function e(){}return e.dateFormat=function(e,t,i){var n=this,r=Ae.getDependables(i,e,t.calendar),o={isIslamic:Ae.islamicRegex.test(t.calendar)},s=t.format||Ae.getResultantPattern(t.skeleton,r.dateObject,t.type);if(o.dateSeperator=Ae.getDateSeparator(r.dateObject),p(s))g("Format options or type given must be invalid");else{o.pattern=s,o.numMapper=je.getNumberMapper(r.parserObject,je.getNumberingSystem(i));for(var l=0,c=s.match(_e)||[];l<c.length;l++){var h=c[l],d=h.length,u=h[0];"K"===u&&(u="h");switch(u){case"E":case"c":o.weekday=r.dateObject[Ae.days]["stand-alone"][Ae.monthIndex[d]];break;case"M":case"L":o.month=r.dateObject[Ae.month]["stand-alone"][Ae.monthIndex[d]];break;case"a":o.designator=a("dayPeriods.format.wide",r.dateObject);break;case"G":var f=d<=3?"eraAbbr":4===d?"eraNames":"eraNarrow";o.era=a("eras."+f,r.dateObject);break;case"z":o.timeZone=a("dates.timeZoneNames",r.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,o)}},e.intDateFormatter=function(e,t){for(var i="",n=t.pattern.match(Ae.dateParseRegex),r=this.getCurrentDateValue(e,t.isIslamic),o=0,a=n;o<a.length;o++){var s=a[o],l=s.length,c=s[0];"K"===c&&(c="h");var h=void 0,p=void 0,u=void 0,f="";switch(c){case"M":case"L":h=r.month,l>2?i+=t.month[h]:p=!0;break;case"E":case"c":i+=t.weekday[We[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":p=!0,h="d"===c?r.date:e[Fe[c]](),"h"===c&&(h=h%12||12);break;case"y":u=!0,f+=r.year,2===l&&(f=f.substr(f.length-2));break;case"a":var g=e.getHours()<12?"am":"pm";i+=t.designator[g];break;case"G":var m=e.getFullYear()<0?0:1,y=t.era[m];d(y)&&(y=t.era[m?0:1]),i+=y||"";break;case"'":i+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var v=e.getTimezoneOffset(),b=l<4?"+H;-H":t.timeZone.hourFormat;b=b.replace(/:/g,t.numMapper.timeSeparator),0===v?i+=t.timeZone.gmtZeroFormat:(u=!0,f=this.getTimeZoneValue(v,b)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;default:i+=s}p&&(u=!0,f=this.checkTwodigitNumber(h,l)),u&&(i+=je.convertValueParts(f,Ae.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?Le.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],r=Math.abs(e);return n.replace(/HH?|mm/g,function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),t)})},e}(),Ve=/^[0-9]*$/,Ue={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth"},Ge=function(){function e(){}return e.dateParser=function(e,t,i){var n,r=this,o=Ae.getDependables(i,e,t.calendar),s=je.getCurrentNumericOptions(o.parserObject,je.getNumberingSystem(i)),l={},c=t.format||Ae.getResultantPattern(t.skeleton,o.dateObject,t.type),h="";if(p(c))g("Format options or type given must be invalid");else{l={isIslamic:Ae.islamicRegex.test(t.calendar),pattern:c,evalposition:{}};for(var u=c.match(Ae.dateParseRegex)||[],f=u.length,m=0,y=0,v=!1,b=s.numericRegex,w=je.getNumberMapper(o.parserObject,je.getNumberingSystem(i)),x=0;x<f;x++){var S=u[x],C=S.length,P="K"===S[0]?"h":S[0],E=void 0,O=void 0,M=Ye[P],T=2===C?"":"?";switch(v&&(m=y,v=!1),P){case"E":case"c":var A=je.reverseObject(o.dateObject[Ae.days]["stand-alone"][Ae.monthIndex[C]]);h+="("+Object.keys(A).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":O=!0,("M"===P||"L"===P)&&C>2?(l[M]=je.reverseObject(o.dateObject.months["stand-alone"][Ae.monthIndex[C]]),h+="("+Object.keys(l[M]).join("|")+")"):(E=!0,h+="("+b+b+T+")"),"h"===P&&(l.hour12=!0);break;case"y":O=E=!0,h+=2===C?"("+b+b+")":"("+b+"{"+C+",})";break;case"a":O=!0,l[M]=je.reverseObject(a("dayPeriods.format.wide",o.dateObject)),h+="("+Object.keys(l[M]).join("|")+")";break;case"G":O=!0;var L=C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow";l[M]=je.reverseObject(a("eras."+L,o.dateObject)),h+="("+Object.keys(l[M]).join("|")+"?)";break;case"z":O=0!==(new Date).getTimezoneOffset(),l[M]=a("dates.timeZoneNames",o.parserObject);var D=l[M],k=(n=C<4)?"+H;-H":D.hourFormat;k=k.replace(/:/g,w.timeSeparator),h+="("+this.parseTimeZoneRegx(k,D,b)+")?",v=!0,y=n?6:12;break;case"'":h+="("+S.replace(/\'/g,"")+")?";break;default:h+="([\\D])"}O&&(l.evalposition[M]={isNumber:E,pos:x+1+m,hourOnly:n}),x!==f-1||d(h)||(l.parserRegex=new RegExp("^"+h+"$"))}}return function(e){var t=r.internalDateParse(e,l,s);if(d(t)||!Object.keys(t).length)return null;if(l.isIslamic){var i={},n=t.year,o=t.day,a=t.month,c=n?n+"":"",h=2===c.length;n&&a&&o&&!h||(i=Le.getHijriDate(new Date)),h&&(n=parseInt((i.year+"").slice(0,2)+c,10));var p=Le.toGregorian(n||i.year,a||i.month,o||i.date);t.year=p.getFullYear(),t.month=p.getMonth()+1,t.day=p.getDate()}return r.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,r=e.designator,o=e.timeZone;if(!p(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,s=["hour","minute","second","month","day"];a<s.length;a++){var l=s[a],c=e[l];if(p(c)&&"day"===l&&i.setDate(1),!p(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[Ue[l]](c);var d=new Date(i.getFullYear(),c+1,0).getDate();i.setDate(h<d?h:d)}else{if("day"===l){var u=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(c<1||c>u)return null}i[Ue[l]](c)}}if(!p(r)){var f=i.getHours();"pm"===r?i.setHours(f+(12===f?0:12)):12===f&&i.setHours(0)}if(!p(o)){var g=o-i.getTimezoneOffset();0!==g&&i.setMinutes(i.getMinutes()+g)}return i},e.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};i.numericRegex;if(d(n))return null;for(var o=0,a=Object.keys(t.evalposition);o<a.length;o++){var s=a[o],l=t.evalposition[s],c=n[l.pos];if(l.isNumber)r[s]=this.internalNumberParser(c,i);else if("timeZone"!==s||p(c))r[s]=t[s][c];else{var h=l.pos,u=void 0,f=n[h+1],g=!p(f);l.hourOnly?u=60*this.getZoneValue(g,f,n[h+4],i):(u=60*this.getZoneValue(g,f,n[h+7],i),u+=this.getZoneValue(g,n[h+4],n[h+10],i)),d(u)||(r[s]=u)}}return t.hour12&&(r.hour12=!0),r},e.internalNumberParser=function(e,t){return e=je.convertValueParts(e,t.numberParseRegex,t.numericPair),Ve.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var n,r,o=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),r=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map(function(e){return o.replace("{0}",e)}),n=r.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,n){var r=e?t:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return e?-o:o},e}(),qe=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,Ze=/,/g,Qe=["minusSign","infinity"],Ke=function(){function e(){}return e.numberParser=function(e,t,i){var n,r=this,o=Ae.getDependables(i,e,"",!0),a={custom:!0};Ae.formatRegex.test(t.format)||!t.format?(h(a,Ae.getProperNumericSkeleton(t.format||"N")),a.custom=!1):h(a,Ae.customFormat(t.format,null,null)),n=je.getCurrentNumericOptions(o.parserObject,je.getNumberingSystem(i),!0),a.symbolRegex=je.getSymbolRegex(Object.keys(n.symbolMatch)),a.infinity=n.symbolNumberSystem[Qe[1]];var s=Ae.getSymbolPattern(a.type,n.numberSystem,o.numericObject,a.isAccount);if(s){var l=(s=s.replace(/\u00A4/g,Ae.defaultCurrency)).split(";");a.nData=Ae.getFormatData(l[1]||"-"+l[0],!0,""),a.pData=Ae.getFormatData(l[0],!0,"")}return function(e){return r.getParsedNumber(e,a,n)}},e.getParsedNumber=function(e,t,i){var n,r,o,a,s,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=je.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=je.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(qe);if(d(c))return NaN;a=c[1],o=c[2];var h=c[5];return s=c[6],r=(n=t.custom?a===t.nData.nlead&&s===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==s.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(Ze,""),h&&(o+=h),l=+o,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l},e}(),$e=new W,Je=!1,et={},tt="en-US",it="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return Xe.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},et)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=it),Be.numberFormatter(this.getCulture(),e||{},et)},e.prototype.getDateParser=function(e){return Ge.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},et)},e.prototype.getNumberParser=function(e){return Ke.numberParser(this.getCulture(),e||{format:"N"},et)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return Ae.getActualDateTimeFormat(this.getCulture(),e,et,t)},e.prototype.getNumberPattern=function(e){return Ae.getActualNumberFormat(this.getCulture(),e,et)},e.prototype.getFirstDayOfWeek=function(){return Ae.getWeekData(this.getCulture(),et)},e.prototype.getCulture=function(){return this.culture||tt}}();var nt,rt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ot=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},at=0,st=0,lt=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isRendered=!1,n.createElement=P,d(n.enableRtl)&&n.setProperties({enableRtl:Je},!0),d(n.locale)&&n.setProperties({locale:tt},!0),n.moduleLoader=new De(n),n.localObserver=new W(n),$e.on("notifyExternalChange",n.detectFunction,n,n.randomId),p(i)||n.appendTo(),n}return rt(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(O([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),$e.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new W(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.appendTo=function(t){if(d(t)||"string"!==typeof t?d(t)||(this.element=t):this.element=document.querySelector(t),!d(this.element)){var i="e-"+this.getModuleName().toLowerCase();E([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=a("ej2_instances",this.element);n&&-1!==n.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.trigger("created")}},t.prototype.renderComplete=function(e){if(y()){window.ejsInterop.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"===typeof e)this.localObserver.on(e,t,i);else for(var n=0,r=e;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);d(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(at=0),nt=this.pageID(location.href),st=history.length,e+"_"+nt+"_"+at++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return nt!==this.pageID(location.href)||st!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,r=e;n<r.length;n++){var o,l=r[n];p(o=a(l,this))||s(l,this.getActualProperties(o),i)}return JSON.stringify(i,function(e,i){return t.getActualProperties(i)})},t.prototype.getActualProperties=function(e){return e instanceof ke?a("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},n=function(n){if(-1===t.indexOf(n)){var o=e[n];if("object"!==typeof o||o instanceof Array)i[n]=o;else{var a=t.filter(function(e){return new RegExp(n+".").test(e)}).map(function(e){return e.replace(n+".","")});i[n]=r.iterateJsonProperties(r.getActualProperties(o),a)}}},r=this,o=0,a=Object.keys(e);o<a.length;o++){n(a[o])}return i},ot([pe(!1)],t.prototype,"enablePersistence",void 0),ot([pe()],t.prototype,"enableRtl",void 0),ot([pe()],t.prototype,"locale",void 0),t=ot([ve],t)}(Y);"undefined"!==typeof window&&window.addEventListener("popstate",function(){at=0});var ct=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ht=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},dt={left:0,top:0,bottom:0,right:0},pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),ht([pe(0)],t.prototype,"left",void 0),ht([pe(0)],t.prototype,"top",void 0),t}(ke),ut=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var i;return ct(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),J.isIE&&E([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return h({},dt)},t.prototype.toggleEvents=function(e){var t;p(this.handle)||(t=N(this.handle,this.element));var i=this.enableTapHold&&J.isDevice&&J.isTouch?this.mobileInitialize:this.initialize;e?S.remove(t||this.element,J.touchStartEvent,i):S.add(t||this.element,J.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)},this.tapHoldThreshold),S.add(document,J.touchMoveEvent,this.removeTapholdTimer,this),S.add(document,J.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),S.remove(document,J.touchMoveEvent,this.removeTapholdTimer),S.remove(document,J.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return d(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),d(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.target=e.currentTarget||t,this.dragProcessStarted=!1,!this.abort||d(z(e.target,this.abort))){this.preventDefault&&!p(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){var n=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(n.left+this.parentScrollX),this.relativeYPosition=i.pageY-(n.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(S.add(document,J.touchMoveEvent,this.intDragStart,this),S.add(document,J.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,S.trigger(document.documentElement,J.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!p(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,n=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var a=z(e.target,this.dragTarget);d(a)||(o=a)}this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e);var s=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(s*s+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||d(c))return;var h=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var u={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:y()?this.bindDragEvents.bind(this):null,dragElement:h};this.trigger("dragStart",u)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var f=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});H(h,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),S.remove(document,J.touchMoveEvent,this.intDragStart),S.remove(document,J.touchEndEvent,this.intDestroy),y()||this.bindDragEvents(h)}}},t.prototype.bindDragEvents=function(e){T(e)?(S.add(document,J.touchMoveEvent,this.intDrag,this),S.add(document,J.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(d(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(p(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var a=this.checkTargetElement(e);a.target&&a.instance?(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a):this.hoverObject&&(this.hoverObject.instance.intOut(e,a.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null);var s=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var l=this.parentClientRect.left,c=this.parentClientRect.top,h=this.getCoordinates(e),u=h.pageX,f=h.pageY,g=this.position.left-this.diffX,m=this.position.top-this.diffY;if(this.dragArea){var y=getComputedStyle(s);if(this.pageX!==u||this.skipDistanceCheck){var v=s.offsetWidth+(parseFloat(y.marginLeft)+parseFloat(y.marginRight));t=this.dragLimit.left+window.pageXOffset>g?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<g+v?g-(g-this.dragLimit.right)+window.pageXOffset-v:g}if(this.pageY!==f||this.skipDistanceCheck){var b=s.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom));i=this.dragLimit.top+window.pageYOffset>m?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<m+b?m-(m-this.dragLimit.bottom)+window.pageYOffset-b:m}}else t=g,i=m;var w=c+this.borderWidth.top,x=l+this.borderWidth.left;this.dragProcessStarted&&(d(i)&&(i=this.prevTop),d(t)&&(t=this.prevLeft));var S=this.getProcessedPositionValue({top:i-w+"px",left:t-x+"px"});H(s,this.getDragPosition(S)),!this.elementInViewport(s)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=u,this.pageY=f}},t.prototype.getDragPosition=function(e){var t=h({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,p(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),S.remove(document,J.touchMoveEvent,this.intDragStart),S.remove(document,J.touchEndEvent,this.intDragStop),S.remove(document,J.touchEndEvent,this.intDestroy),S.remove(document,J.touchMoveEvent,this.intDrag)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.setDragArea=function(){var e,t,i,n=0,r=0;if(i="string"===typeof this.dragArea?N(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();e=o.width?o.width:o.right-o.left,t=o.height?o.height:o.bottom-o.top;for(var a=["Top","Left","Bottom","Right"],s=getComputedStyle(i),l=0;l<a.length;l++){var c=a[l],h=s["border"+c+"Width"],d=s["padding"+c],p=c.toLowerCase();this.borderWidth[p]=isNaN(parseFloat(h))?0:parseFloat(h),this.padding[p]=isNaN(parseFloat(d))?0:parseFloat(d)}n=o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=n+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return f(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.getMousePosition=function(e){var t=this.getCoordinates(e),i=this.clone?t.pageX:t.clientX+window.pageXOffset-this.relativeXPosition,n=this.clone?t.pageY:t.clientY+window.pageYOffset-this.relativeYPosition;return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=P("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!d(t.parentNode)){var n=z(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},ht([ue({},pt)],t.prototype,"cursorAt",void 0),ht([pe(!0)],t.prototype,"clone",void 0),ht([pe()],t.prototype,"dragArea",void 0),ht([ye()],t.prototype,"drag",void 0),ht([ye()],t.prototype,"dragStart",void 0),ht([ye()],t.prototype,"dragStop",void 0),ht([pe(1)],t.prototype,"distance",void 0),ht([pe()],t.prototype,"handle",void 0),ht([pe()],t.prototype,"abort",void 0),ht([pe()],t.prototype,"helper",void 0),ht([pe("default")],t.prototype,"scope",void 0),ht([pe("")],t.prototype,"dragTarget",void 0),ht([pe()],t.prototype,"axis",void 0),ht([pe()],t.prototype,"queryPositionInfo",void 0),ht([pe(!1)],t.prototype,"enableTailMode",void 0),ht([pe(!1)],t.prototype,"skipDistanceCheck",void 0),ht([pe(!0)],t.prototype,"preventDefault",void 0),ht([pe(!1)],t.prototype,"enableAutoScroll",void 0),ht([pe(!1)],t.prototype,"enableTapHold",void 0),ht([pe(750)],t.prototype,"tapHoldThreshold",void 0),t=i=ht([ve],t)}(Y),ft=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},mt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return ft(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){S.add(this.element,J.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&T(r.helper));o&&(i=this.isDropArea(e,r.helper,t),this.accept&&(n=_(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||n.target===t){t.style.display="none";var o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=f(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){S.remove(this.element,J.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},gt([pe()],t.prototype,"accept",void 0),gt([pe("default")],t.prototype,"scope",void 0),gt([ye()],t.prototype,"drop",void 0),gt([ye()],t.prototype,"over",void 0),gt([ye()],t.prototype,"out",void 0),t=gt([ve],t)}(Y),yt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},bt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},wt=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(r.keyConfigs);s<l.length;s++)for(var c=l[s],h=0,d=r.keyConfigs[c].split(",");h<d.length;h++){var p=d[h],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}},r.bind(),r}var i;return yt(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return bt[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},vt([pe({})],t.prototype,"keyConfigs",void 0),vt([pe("keyup")],t.prototype,"eventName",void 0),vt([ye()],t.prototype,"keyAction",void 0),t=i=vt([ve],t)}(Y),xt=function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||tt)}return e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=h(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return d(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={},e}(),St=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ct=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return St(t,e),Ct([pe(50)],t.prototype,"swipeThresholdDistance",void 0),t}(ke),Et=/(Up|Down)/,Ot=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=e.changedTouches?e.changedTouches[0]:e;void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(e)},n.tapHoldThreshold),S.add(n.element,J.touchMoveEvent,n.moveEvent,n),S.add(n.element,J.touchEndEvent,n.endEvent,n),S.add(n.element,J.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=e.changedTouches?e.changedTouches[0]:e;n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=h(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),S.remove(n.element,J.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"===typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=e;e.changedTouches&&(t=e.changedTouches[0]);var i=t.clientX-n.startPoint.clientX,r=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1,n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,s=n.swipeSettings.swipeThresholdDistance;a=h(a,n.defaultArgs,o);var l=!1,c=n.element,d=n.isScrollable(c),p=Et.test(n.movedDirection);(s<n.distanceX&&!p||s<n.distanceY&&p)&&(l=!d||n.checkSwipe(c,p)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!==typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),S.remove(n.element,J.touchMoveEvent,n.moveEvent),S.remove(n.element,J.touchEndEvent,n.endEvent),S.remove(n.element,J.touchCancelEvent,n.cancelEvent)},n.bind(),n}return St(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),J.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){S.add(this.element,J.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){S.remove(this.element,J.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,S.remove(this.element,J.touchMoveEvent,this.moveEvent),S.remove(this.element,J.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),S.remove(this.element,J.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(r*r+o*o)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},Ct([ye()],t.prototype,"tap",void 0),Ct([ye()],t.prototype,"tapHold",void 0),Ct([ye()],t.prototype,"swipe",void 0),Ct([ye()],t.prototype,"scroll",void 0),Ct([pe(350)],t.prototype,"tapThreshold",void 0),Ct([pe(750)],t.prototype,"tapHoldThreshold",void 0),Ct([ue({},Pt)],t.prototype,"swipeSettings",void 0),t=Ct([ve],t)}(Y),Mt=new RegExp("\\n|\\r|\\s\\s+","g"),Tt=new RegExp(/'|"/g),At=new RegExp("if ?\\("),Lt=new RegExp("else if ?\\("),Dt=new RegExp("else"),kt=new RegExp("for ?\\("),It=new RegExp("(/if|/for)"),Rt=new RegExp("\\((.*)\\)",""),Nt=new RegExp("^[0-9]+$","g"),jt=new RegExp("[\\w\"'.\\s+]+","g"),zt=new RegExp('"(.*?)"',"g"),Ht=new RegExp("[\\w\"'@#$.\\s+]+","g"),Bt=new RegExp("\\${([^}]*)}","g"),_t=/^\..*/gm,Wt=/\\/gi,Ft=/\\\\/gi;function Yt(e,t){var i=function(e,t,i){var n=0,r=[],o=e.match(/class="([^\"]+|)\s{2}/g),a="";o&&o.forEach(function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)});return e.replace(Mt,"").replace(zt,"'$1'").replace(Bt,function(e,o,a,s){var l=o.match(Rt);if(l){var c=l[1];if(Lt.test(o))o='";} '+o.replace(l[1],c.replace(jt,function(e){return Xt(e=e.trim(),!Tt.test(e)&&-1===r.indexOf(e),t,r)}))+'{ \n str = str + "';else if(At.test(o))o='"; '+o.replace(l[1],c.replace(Ht,function(e){e=e.trim();return/\@|\$|\#/gm.test(e)&&(e=Vt(e,-1===r.indexOf(e),t,r)+'"]'),_t.test(e)?function(e,t,i,n){return!t||Nt.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!Tt.test(e)&&-1===r.indexOf(e),t,r):Xt(e,!Tt.test(e)&&-1===r.indexOf(e),t,r)}))+'{ \n str = str + "';else if(kt.test(o)){var h=l[1].split(" of ");o='"; '+o.replace(l[1],function(e){return r.push(h[0]),r.push(h[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+Xt(h[1],!0,t,r)+".length; i"+n+"++"})+"{ \n "+h[0]+"= "+Xt(h[1],!0,t,r)+"[i"+n+"]; \n var "+h[0]+"Index=i"+n+'; \n str = str + "'}else{var d=o.split("("),p=i&&i.hasOwnProperty(d[0])?"this.":"global";p=/\./.test(d[0])?"":p;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===p?t+"."+l[1]:l[1]),o='" + '+("global"===p?"":p)+o.replace(c,Xt(l[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==p,t,r))+'+"'}}else Dt.test(o)?o='"; '+o.replace(Dt,'} else { \n str = str + "'):o.match(It)?o=o.replace(It,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(o)?(o.match(Wt)&&(o=Ut(o)),o='"+'+Vt(o,-1===r.indexOf(o),t,r)+'"]+"'):o=o.match(Wt)?'"+'+Vt(o=Ut(o),-1===r.indexOf(o),t,r)+'"]+"':'"+'+Xt(o.replace(/\,/gi,"+"+t+"."),-1===r.indexOf(o),t,r)+'+"';return o})}(e,"data",t);return new Function("data",'var str="'+i+'"; return str;').bind(t)}function Xt(e,t,i,n){return t&&!Nt.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}function Vt(e,t,i,n){return t&&!Nt.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function Ut(e){return e=e.match(Ft)?e:e.replace(Wt,"\\\\")}var Gt=/^[\n\r.]+\<tr|^\<tr/,qt=/^[\n\r.]+\<svg|^\<path|^\<g/,Zt={};function Qt(e,t){var i=Jt.compile(e,t);return function(e,t,n,r,o,a){var s=i(e,t,n);if(window&&window.Blazor&&!o){var l=r+("-"+Math.random().toString(36).substr(2,5));if(Zt[r]||(Zt[r]=[]),d(a))e.BlazorTemplateId=l,Zt[r].push(e);else for(var c=0,h=Object.keys(Zt[r][a]);c<h.length;c++){var p=h[c];"BlazorTemplateId"!==p&&e[p]&&(Zt[r][a][p]=e[p]),"BlazorTemplateId"===p&&(l=Zt[r][a][p])}return"rowTemplate"===n?[P("tr",{id:l,className:"e-blazor-template"})]:[P("div",{id:l,className:"e-blazor-template"})]}return"string"===typeof s?qt.test(s)?P("svg",{innerHTML:s}).childNodes:P(Gt.test(s)?"table":"div",{innerHTML:s}).childNodes:s}}function Kt(e,t,i,n,r){if(window&&window.Blazor){window.ejsInterop.updateTemplate(t,Zt[e],e,i,r),!1!==n&&(Zt[e]=[])}}function $t(e,t,i){var n=document.getElementById(e);if(n)for(var r=n.getElementsByClassName("blazor-inner-template"),o=0;o<r.length;o++){var a=" ";a=d(i)?r[o].getAttribute("data-templateId"):r[i].getAttribute("data-templateId");var s=document.getElementById(a);if(s)for(var l=s.childNodes.length,c=0;c<l;c++)d(i)?r[o].appendChild(s.childNodes[0]):(r[i].appendChild(s.childNodes[0]),o=r.length)}}var Jt={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),Yt(e,t)},e}())).compile},ei=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.isEmpty=function(){return 0===this.height&&0===this.width},e.prototype.clone=function(){return new e(this.width,this.height)},e}(),ti=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ii=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,i){var n={x:0,y:0};return n.x=Math.round(100*(e.x+i*Math.cos(t*Math.PI/180)))/100,n.y=Math.round(100*(e.y+i*Math.sin(t*Math.PI/180)))/100,n},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var i=Math.atan2(t.y-e.y,t.x-e.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,i=0;i<e.length-1;i++)t+=this.distancePoints(e[i],e[i+1]);return t},t.adjustPoint=function(e,t,i,n){var r,o=i?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&i||e.y>t.y&&!i?o.y+=n:o.y-=n:e.y===t.y?e.x<t.x&&i||e.x>t.x&&!i?o.x+=n:o.x-=n:i?(r=this.findAngle(e,t),o=this.transform(e,r,n)):(r=this.findAngle(t,e),o=this.transform(t,r,n)),o},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},ii([pe(0)],t.prototype,"x",void 0),ii([pe(0)],t.prototype,"y",void 0),t}(ke);function ri(e){var t,i=[],n=oi(e);if(n.length>0)for(var r=0;r<n.length;r++){var o=n[r],a="";switch((a=o[0]).toLowerCase()){case"m":for(t=1;t<o.length;t++)i.push({command:a,x:o[t],y:o[t+1]}),t+=1,"m"===a?a="l":"M"===a&&(a="L");break;case"l":case"t":for(t=1;t<o.length;t++)i.push({command:a,x:o[t],y:o[t+1]}),t+=1;break;case"h":for(t=1;t<o.length;t++)i.push({command:a,x:o[t]});break;case"v":for(t=1;t<o.length;t++)i.push({command:a,y:o[t]});break;case"z":i.push({command:a});break;case"c":for(t=1;t<o.length;t++)i.push({command:a,x1:o[t],y1:o[t+1],x2:o[t+2],y2:o[t+3],x:o[t+4],y:o[t+5]}),t+=5;break;case"s":for(t=1;t<o.length;t++)i.push({command:a,x2:o[t],y2:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"q":for(t=1;t<o.length;t++)i.push({command:a,x1:o[t],y1:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"a":for(t=1;t<o.length;t++)i.push({command:a,r1:o[t],r2:o[t+1],angle:o[t+2],largeArc:o[t+3],sweep:o[t+4],x:o[t+5],y:o[t+6]}),t+=6}}return i}function oi(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],r={};t.lastIndex=0;var o=!1;for(r=t.exec(e);r;){if("e"===r[1]){o=!0}else r[1]?("zm"===r[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[r[1].substring(1,2)]):(i.length&&n.push(i),i=[r[1]]),o=!1):(i.length||(i=[]),o||i.push(Number(r[2])),o=!1);r=t.exec(e)}return i.length&&n.push(i),n}function ai(e,t,i){var n,r,o,a="",s=[{x:0+e,y:0},{x:0+i-e,y:0},{x:0+i,y:0+e},{x:0+i,y:0+t-e},{x:0+i-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],l=[{x:0+i,y:0},{x:0+i,y:0+t},{x:0,y:0+t},{x:0,y:0}],c=0;for(a="M"+s[0].x+" "+s[0].y,o=0;o<s.length;o+=2)a+="L"+(n=s[o+1]).x+" "+n.y,r=s[o+2]||s[0],a+="Q"+l[c].x+" "+l[c].y+" "+r.x+" "+r.y,c++;return a}function si(e){var t,i,n="";for(n="M"+e[0].x+" "+e[0].y,i=1;i<e.length;i++)n+="L"+(t=e[i]).x+" "+t.y;return n+="Z"}function li(e){var t,i,n,r,o,a,s,l,c,h,d=[];for(s=0,l=0,h=0,c=e.length;h<c;++h){var p,u=e[h];p=u.command,"y1"in u&&(r=u.y1),"y2"in u&&(a=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"x"in u&&(s=u.x),"y"in u&&(l=u.y);var f=d[d.length-1];switch(p){case"M":d.push({command:"M",x:s,y:l});break;case"L":d.push({command:"L",x0:t,y0:i,x:s,y:l});break;case"H":d.push({command:"L",x0:t,y0:i,x:s,y:i});break;case"V":d.push({command:"L",x0:t,y0:i,x:t,y:l});break;case"C":d.push({command:"C",x0:t,y0:i,x1:n,y1:r,x2:o,y2:a,x:s,y:l});break;case"S":if(f){var g=void 0,m={x:2*t-(g="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:t,y:i}).x,y:2*i-g.y};d.push({command:"C",x0:t,y0:i,x1:m.x,y1:m.y,x2:o,y2:a,x:s,y:l})}break;case"Q":d.push({command:"Q",x0:t,y0:i,x1:n,y1:r,x:s,y:l});break;case"T":if(f){g=void 0,m={x:2*t-(g="Q"===f.command?{x:f.x1,y:f.y1}:{x:t,y:i}).x,y:2*i-g.y};d.push({command:"Q",x0:t,y0:i,x1:m.x,y1:m.y,x:s,y:l})}break;case"A":var y=u;y.command="A",d.push(y);break;case"Z":case"z":d.push({command:"Z"}),s=t,l=i}"M"!==p&&"m"!==p||(s,l),t=s,i=l}return d}function ci(e,t,i,n,r,o,a,s){var l,c,h,d,p,u,f,g,m;for(p=0,u=0,g=0,f=e.length;g<f;++g){var y=e[g],v=y.command;"x"in y&&(p=y.x),"y"in y&&(u=y.y),"y1"in y&&(c=y.y1),"y2"in y&&(d=y.y2),"x1"in y&&(l=y.x1),"x2"in y&&(h=y.x2),n?(void 0!==p&&(p=di(p,t,r,a)),void 0!==u&&(u=di(u,i,o,s)),void 0!==l&&(l=di(l,t,r,a)),void 0!==c&&(c=di(c,i,o,s)),void 0!==h&&(h=di(h,t,r,a)),void 0!==d&&(d=di(d,i,o,s))):(void 0!==p&&(p=Number((p+t).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+t).toFixed(2))),void 0!==c&&(c=Number((c+i).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2)))),(m=hi(y,v,{x:p,y:u,x1:l,y1:c,x2:h,y2:d,r1:y.r1,r2:y.r2},n,t,i))&&(e[g]=m),"M"!==v&&"m"!==v||(p,u)}return ui(e)}function hi(e,t,i,n,r,o){switch(t){case"M":case"L":e.x=i.x,e.y=i.y;break;case"H":e.x=i.x;break;case"V":e.y=i.y;break;case"C":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1,e.x2=i.x2,e.y2=i.y2;break;case"S":e.x=i.x,e.y=i.y,e.x2=i.x2,e.y2=i.y2;break;case"Q":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1;break;case"T":e.x=i.x,e.y=i.y;break;case"A":var a=i.r1,s=i.r2;n&&(i.r1=a*=r,i.r2=s*=o),e.x=i.x,e.y=i.y,e.r1=i.r1,e.r2=i.r2;break;case"z":case"Z":e={command:"Z"}}return e}function di(e,t,i,n){return e!==i?e=n!==i?e*t-(Number(i)*t-Number(i))+(n-Number(i)):Number(e)*t-(Number(i)*t-Number(i)):n!==i&&(e=n),Number(e.toFixed(2))}function pi(e){var t,i,n,r,o,a,s,l,c,h;for(s=0,l=0,h=0,c=e.length;h<c;++h){var d=e[h],p=d.command;if(/[MLHVCSQTA]/.test(p))"x"in d&&(d.x=s=d.x),"y"in d&&(d.y=l=d.y);else{"x1"in d&&(d.x1=n=s+d.x1),"x2"in d&&(d.x2=o=s+d.x2),"y1"in d&&(d.y1=r=l+d.y1),"y2"in d&&(d.y2=a=l+d.y2),"x"in d&&(d.x=s+=d.x),"y"in d&&(d.y=l+=d.y);var u=void 0;switch(p){case"m":case"M":u={command:"M",x:s,y:l};break;case"l":case"L":u={command:"L",x:s,y:l};break;case"h":case"H":u={command:"H",x:s};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:s,y:l,x1:n,y1:r,x2:o,y2:a};break;case"s":case"S":u={command:"S",x:s,y:l,x2:o,y2:a};break;case"q":case"Q":u={command:"Q",x:s,y:l,x1:n,y1:r};break;case"t":case"T":u={command:"T",x:s,y:l};break;case"a":case"A":(u={command:"A",x:s,y:l}).r1=d.r1,u.r2=d.r2,u.angle=d.angle,u.largeArc=d.largeArc,u.sweep=d.sweep;break;case"z":case"Z":u={command:"Z"},s=t,l=i,u=e[h]}u&&(e[h]=u)}"M"!==p&&"m"!==p||(t=s,i=l)}return e}function ui(e){var t,i="";for(t=0;t<e.length;t++)i+=0===t?fi(e[t]):" "+fi(e[t]);return i}function fi(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":var i=e.command,n=e.angle,r=e.largeArc?"1":"0",o=e.sweep?"1":"0";t=i+" "+e.r1+" "+e.r2+" "+n+" "+r+" "+o+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"T":case"t":t=e.command+" "+e.x+" "+e.y}return t}var gi,mi=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),r=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=r-this.y},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.toBounds=function(t){for(var i=new e,n=0,r=t;n<r.length;n++){var o=r[n];i.unitePoint(o)}return i},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}();!function(e){e[e.Identity=0]="Identity",e[e.Translation=1]="Translation",e[e.Scaling=2]="Scaling",e[e.Unknown=4]="Unknown"}(gi||(gi={}));var yi=function(){return function(e,t,i,n,r,o,a){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=r,this.offsetY=o,this.type=a}}();function vi(){return new yi(1,0,0,1,0,0,gi.Identity)}function bi(e,t){var i=function(e,t,i){switch(e.type){case gi.Identity:break;case gi.Translation:t+=e.offsetX,i+=e.offsetY;break;case gi.Scaling:t*=e.m11,i*=e.m22;break;case gi.Translation|gi.Scaling:t*=e.m11,t+=e.offsetX,i*=e.m22,i+=e.offsetY;break;default:var n=i*e.m21+e.offsetX,r=t*e.m12+e.offsetY;t*=e.m11,t+=n,i*=e.m22,i+=r}return{x:t,y:i}}(e,t.x,t.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function wi(e,t){for(var i=[],n=0,r=t;n<r.length;n++){var o=r[n];i.push(bi(e,o))}return i}function xi(e,t,i,n){Pi(e,function(e,t,i){var n=vi(),r=Math.sin(e),o=Math.cos(e),a=t*(1-o)+i*r,s=i*(1-o)-t*r;return n.type=gi.Unknown,Ei(n,o,r,-r,o,a,s),n}(.017453292519943295*(t%=360),i||0,n||0))}function Si(e,t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),Pi(e,function(e,t,i,n){var r=vi();return r.type=i||n?gi.Scaling|gi.Translation:gi.Scaling,Ei(r,e,0,0,t,i-e*i,n-t*n),r}(t,i,n,r))}function Ci(e,t,i){return e.type&gi.Identity?(e.type=gi.Translation,void Ei(e,1,0,0,1,t,i)):e.type&gi.Unknown?(e.offsetX+=t,void(e.offsetY+=i)):(e.offsetX+=t,e.offsetY+=i,void(e.type|=gi.Translation))}function Pi(e,t){var i=e.type,n=t.type;if(n!==gi.Identity){if(i===gi.Identity)return Oi(e,t),void(e.type=t.type);if(n===gi.Translation)return e.offsetX+=t.offsetX,e.offsetY+=t.offsetY,void(i!==gi.Unknown&&(e.type|=gi.Translation));if(i!==gi.Translation){var r=i<<4|n;switch(r){case 34:return e.m11*=t.m11,void(e.m22*=t.m22);case 35:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,void(e.type=gi.Translation|gi.Scaling);case 36:break;default:switch(r){case 50:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX*=t.m11,void(e.offsetY*=t.m22);case 51:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.m11*e.offsetX+t.offsetX,void(e.offsetY=t.m22*e.offsetY+t.offsetY);case 52:break;default:switch(r){case 66:case 67:case 68:break;default:return}}}var o=vi();return Ei(o,e.m11*t.m11+e.m12*t.m21,e.m11*t.m12+e.m12*t.m22,e.m21*t.m11+e.m22*t.m21,e.m21*t.m12+e.m22*t.m22,e.offsetX*t.m11+e.offsetY*t.m21+t.offsetX,e.offsetX*t.m12+e.offsetY*t.m22+t.offsetY),o.m21||o.m12?o.type=gi.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=gi.Scaling),(o.offsetX||o.offsetY)&&(o.type|=gi.Translation),(o.type&(gi.Translation|gi.Scaling))===gi.Identity&&(o.type=gi.Identity),o.type=gi.Scaling|gi.Translation),Oi(e,o),void(e.type=o.type)}var a=e.offsetX,s=e.offsetY;e.offsetX=a*t.m11+s*t.m21+t.offsetX,e.offsetY=a*t.m12+s*t.m22+t.offsetY,n!==gi.Unknown?e.type=gi.Translation|gi.Scaling:e.type=gi.Unknown}}function Ei(e,t,i,n,r,o,a){e.m11=t,e.m12=i,e.m21=n,e.m22=r,e.offsetX=o,e.offsetY=a}function Oi(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}var Mi,Ti,Ai,Li,Di,ki,Ii,Ri,Ni,ji,zi,Hi,Bi,_i,Wi,Fi,Yi,Xi,Vi,Ui,Gi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Zi=function(e){if(e)switch(e.type){case"Linear":return tn;case"Radial":return nn;default:return tn}return tn},Qi=function(){return function(e,t,i,n){this.left=e,this.right=t,this.top=i,this.bottom=n}}(),Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe(0)],t.prototype,"left",void 0),qi([pe(0)],t.prototype,"right",void 0),qi([pe(0)],t.prototype,"top",void 0),qi([pe(0)],t.prototype,"bottom",void 0),t}(ke),$i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe(45)],t.prototype,"angle",void 0),qi([pe(5)],t.prototype,"distance",void 0),qi([pe(.7)],t.prototype,"opacity",void 0),qi([pe("lightgrey")],t.prototype,"color",void 0),t}(ke),Ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),t.prototype.getClassName=function(){return"Stop"},qi([pe("")],t.prototype,"color",void 0),qi([pe(0)],t.prototype,"offset",void 0),qi([pe(1)],t.prototype,"opacity",void 0),t}(ke),en=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([ge([],Ji)],t.prototype,"stops",void 0),qi([pe("None")],t.prototype,"type",void 0),qi([pe("")],t.prototype,"id",void 0),t}(ke),tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe(0)],t.prototype,"x1",void 0),qi([pe(0)],t.prototype,"x2",void 0),qi([pe(0)],t.prototype,"y1",void 0),qi([pe(0)],t.prototype,"y2",void 0),t}(en),nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe(0)],t.prototype,"cx",void 0),qi([pe(0)],t.prototype,"cy",void 0),qi([pe(0)],t.prototype,"fx",void 0),qi([pe(0)],t.prototype,"fy",void 0),qi([pe(50)],t.prototype,"r",void 0),t}(en),rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe("white")],t.prototype,"fill",void 0),qi([pe("black")],t.prototype,"strokeColor",void 0),qi([pe("")],t.prototype,"strokeDashArray",void 0),qi([pe(1)],t.prototype,"strokeWidth",void 0),qi([pe(1)],t.prototype,"opacity",void 0),qi([fe(Zi)],t.prototype,"gradient",void 0),t}(ke),on=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe("transparent")],t.prototype,"fill",void 0),t}(rn),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gi(t,e),qi([pe("black")],t.prototype,"color",void 0),qi([pe("Arial")],t.prototype,"fontFamily",void 0),qi([pe(12)],t.prototype,"fontSize",void 0),qi([pe(!1)],t.prototype,"italic",void 0),qi([pe(!1)],t.prototype,"bold",void 0),qi([pe("CollapseSpace")],t.prototype,"whiteSpace",void 0),qi([pe("WrapWithOverflow")],t.prototype,"textWrapping",void 0),qi([pe("Center")],t.prototype,"textAlign",void 0),qi([pe("None")],t.prototype,"textDecoration",void 0),qi([pe("Wrap")],t.prototype,"textOverflow",void 0),qi([pe("transparent")],t.prototype,"fill",void 0),t}(rn);!function(e){e[e.Visible=1]="Visible",e[e.Hidden=2]="Hidden",e[e.Hover=4]="Hover",e[e.Connect=8]="Connect"}(Mi||(Mi={})),function(e){e[e.None=0]="None",e[e.ShowHorizontalLines=1]="ShowHorizontalLines",e[e.ShowVerticalLines=2]="ShowVerticalLines",e[e.ShowLines=3]="ShowLines",e[e.SnapToHorizontalLines=4]="SnapToHorizontalLines",e[e.SnapToVerticalLines=8]="SnapToVerticalLines",e[e.SnapToLines=12]="SnapToLines",e[e.SnapToObject=16]="SnapToObject",e[e.All=31]="All"}(Ti||(Ti={})),function(e){e[e.None=1]="None",e[e.ConnectorSourceThumb=2]="ConnectorSourceThumb",e[e.ConnectorTargetThumb=4]="ConnectorTargetThumb",e[e.ResizeSouthEast=8]="ResizeSouthEast",e[e.ResizeSouthWest=16]="ResizeSouthWest",e[e.ResizeNorthEast=32]="ResizeNorthEast",e[e.ResizeNorthWest=64]="ResizeNorthWest",e[e.ResizeEast=128]="ResizeEast",e[e.ResizeWest=256]="ResizeWest",e[e.ResizeSouth=512]="ResizeSouth",e[e.ResizeNorth=1024]="ResizeNorth",e[e.Rotate=2048]="Rotate",e[e.UserHandle=4096]="UserHandle",e[e.ToolTip=8192]="ToolTip",e[e.ResizeAll=2046]="ResizeAll",e[e.All=16382]="All"}(Ai||(Ai={})),function(e){e[e.None=1]="None",e[e.Select=2]="Select",e[e.Delete=4]="Delete",e[e.Drag=8]="Drag",e[e.DragSourceEnd=16]="DragSourceEnd",e[e.DragTargetEnd=32]="DragTargetEnd",e[e.DragSegmentThumb=64]="DragSegmentThumb",e[e.AllowDrop=128]="AllowDrop",e[e.Bridging=256]="Bridging",e[e.BridgeObstacle=512]="BridgeObstacle",e[e.InheritBridging=1024]="InheritBridging",e[e.PointerEvents=2048]="PointerEvents",e[e.Tooltip=4096]="Tooltip",e[e.InheritTooltip=8192]="InheritTooltip",e[e.Interaction=4218]="Interaction",e[e.ReadOnly=16384]="ReadOnly",e[e.LineRouting=32768]="LineRouting",e[e.InheritLineRouting=65536]="InheritLineRouting",e[e.Default=77374]="Default"}(Li||(Li={})),function(e){e[e.ReadOnly=2]="ReadOnly",e[e.InheritReadOnly=4]="InheritReadOnly",e[e.Select=8]="Select",e[e.Drag=16]="Drag",e[e.Resize=32]="Resize",e[e.Rotate=64]="Rotate",e[e.Interaction=120]="Interaction",e[e.None=0]="None"}(Di||(Di={})),function(e){e[e.None=0]="None",e[e.Select=2]="Select",e[e.Drag=4]="Drag",e[e.Rotate=8]="Rotate",e[e.Shadow=16]="Shadow",e[e.PointerEvents=32]="PointerEvents",e[e.Delete=64]="Delete",e[e.InConnect=128]="InConnect",e[e.OutConnect=256]="OutConnect",e[e.Individual=512]="Individual",e[e.Expandable=1024]="Expandable",e[e.AllowDrop=2048]="AllowDrop",e[e.Inherit=78]="Inherit",e[e.ResizeNorthEast=4096]="ResizeNorthEast",e[e.ResizeEast=8192]="ResizeEast",e[e.ResizeSouthEast=16384]="ResizeSouthEast",e[e.ResizeSouth=32768]="ResizeSouth",e[e.ResizeSouthWest=65536]="ResizeSouthWest",e[e.ResizeWest=131072]="ResizeWest",e[e.ResizeNorthWest=262144]="ResizeNorthWest",e[e.ResizeNorth=524288]="ResizeNorth",e[e.Resize=1044480]="Resize",e[e.AspectRatio=1048576]="AspectRatio",e[e.HideThumbs=16777216]="HideThumbs",e[e.Tooltip=2097152]="Tooltip",e[e.InheritTooltip=4194304]="InheritTooltip",e[e.ReadOnly=8388608]="ReadOnly",e[e.Default=5240814]="Default"}(ki||(ki={})),function(e){e[e.None=0]="None",e[e.ElementIsPort=2]="ElementIsPort",e[e.ElementIsGroup=4]="ElementIsGroup"}(Ii||(Ii={})),function(e){e[e.Rotate=2]="Rotate",e[e.ConnectorSource=4]="ConnectorSource",e[e.ConnectorTarget=8]="ConnectorTarget",e[e.ResizeNorthEast=16]="ResizeNorthEast",e[e.ResizeEast=32]="ResizeEast",e[e.ResizeSouthEast=64]="ResizeSouthEast",e[e.ResizeSouth=128]="ResizeSouth",e[e.ResizeSouthWest=256]="ResizeSouthWest",e[e.ResizeWest=512]="ResizeWest",e[e.ResizeNorthWest=1024]="ResizeNorthWest",e[e.ResizeNorth=2048]="ResizeNorth",e[e.Default=4094]="Default"}(Ri||(Ri={})),function(e){e[e.None=1]="None",e[e.Bridging=2]="Bridging",e[e.UndoRedo=4]="UndoRedo",e[e.Tooltip=8]="Tooltip",e[e.UserInteraction=16]="UserInteraction",e[e.ApiUpdate=32]="ApiUpdate",e[e.PageEditable=48]="PageEditable",e[e.Zoom=64]="Zoom",e[e.PanX=128]="PanX",e[e.PanY=256]="PanY",e[e.Pan=384]="Pan",e[e.ZoomTextEdit=512]="ZoomTextEdit",e[e.Virtualization=1024]="Virtualization",e[e.LineRouting=2048]="LineRouting",e[e.Default=500]="Default"}(Ni||(Ni={})),function(e){e[e.None=0]="None",e[e.SingleSelect=1]="SingleSelect",e[e.MultipleSelect=2]="MultipleSelect",e[e.ZoomPan=4]="ZoomPan",e[e.DrawOnce=8]="DrawOnce",e[e.ContinuousDraw=16]="ContinuousDraw",e[e.Default=3]="Default"}(ji||(ji={})),function(e){e[e.Self=1]="Self",e[e.Parent=2]="Parent"}(zi||(zi={})),function(e){e[e.Canvas=0]="Canvas",e[e.Svg=1]="Svg"}(Hi||(Hi={})),function(e){e[e.None=0]="None",e[e.Control=1]="Control",e[e.Meta=1]="Meta",e[e.Alt=2]="Alt",e[e.Shift=4]="Shift"}(Bi||(Bi={})),function(e){e[e.None=null]="None",e[e.Number0=0]="Number0",e[e.Number1=1]="Number1",e[e.Number2=2]="Number2",e[e.Number3=3]="Number3",e[e.Number4=4]="Number4",e[e.Number5=5]="Number5",e[e.Number6=6]="Number6",e[e.Number7=7]="Number7",e[e.Number8=8]="Number8",e[e.Number9=9]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Delete=46]="Delete",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.BackSpace=8]="BackSpace",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.Star=56]="Star",e[e.Plus=187]="Plus",e[e.Minus=189]="Minus"}(_i||(_i={})),function(e){e[e.Render=2]="Render",e[e.PublicMethod=4]="PublicMethod",e[e.ToolAction=8]="ToolAction",e[e.UndoRedo=16]="UndoRedo",e[e.TextEdit=32]="TextEdit",e[e.Group=64]="Group",e[e.Clear=128]="Clear",e[e.PreventClearSelection=256]="PreventClearSelection",e[e.Interactions=512]="Interactions",e[e.PreventHistory=1024]="PreventHistory",e[e.PreventIconsUpdate=2048]="PreventIconsUpdate"}(Wi||(Wi={})),function(e){e[e.None=2]="None",e[e.DrawSelectorBorder=4]="DrawSelectorBorder",e[e.PreventRenderSelector=8]="PreventRenderSelector"}(Fi||(Fi={})),function(e){e[e.None=0]="None",e[e.PreventDrag=2]="PreventDrag",e[e.PreventScale=4]="PreventScale",e[e.PreventDataInit=8]="PreventDataInit",e[e.hScrollbarMoved=16]="hScrollbarMoved",e[e.vScrollbarMoved=32]="vScrollbarMoved"}(Yi||(Yi={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"}(Xi||(Xi={})),function(e){e[e.collectionChange=0]="collectionChange",e[e.rotateChange=1]="rotateChange",e[e.positionChange=2]="positionChange",e[e.propertyChange=3]="propertyChange",e[e.selectionChange=4]="selectionChange",e[e.sizeChange=5]="sizeChange",e[e.drop=6]="drop",e[e.sourcePointChange=7]="sourcePointChange",e[e.targetPointChange=8]="targetPointChange",e[e.connectionChange=9]="connectionChange",e[e.animationComplete=10]="animationComplete",e[e.click=11]="click",e[e.doubleClick=12]="doubleClick",e[e.scrollChange=13]="scrollChange",e[e.dragEnter=14]="dragEnter",e[e.dragLeave=15]="dragLeave",e[e.dragOver=16]="dragOver",e[e.textEdit=17]="textEdit",e[e.paletteSelectionChange=18]="paletteSelectionChange",e[e.historyChange=19]="historyChange",e[e.mouseEnter=20]="mouseEnter",e[e.mouseLeave=21]="mouseLeave",e[e.mouseOver=22]="mouseOver",e[e.expandStateChange=23]="expandStateChange",e[e.segmentCollectionChange=24]="segmentCollectionChange",e[e.commandExecute=25]="commandExecute",e[e.historyStateChange=26]="historyStateChange",e[e.onUserHandleMouseDown=27]="onUserHandleMouseDown",e[e.onUserHandleMouseUp=28]="onUserHandleMouseUp",e[e.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",e[e.onUserHandleMouseLeave=30]="onUserHandleMouseLeave"}(Vi||(Vi={})),function(e){e[e.None=1]="None",e[e.Drag=2]="Drag",e[e.Draw=4]="Draw",e[e.InConnect=8]="InConnect",e[e.OutConnect=16]="OutConnect",e[e.Default=24]="Default"}(Ui||(Ui={}));var sn=function(){function e(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=zi.Self|zi.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new ei,this.actualSize=new ei,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new mi(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=Ii.None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return e.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},e.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(e.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),e.prototype.measure=function(e){var t=void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,i=void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new ei(t,i),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},e.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},e.prototype.updateBounds=function(){this.bounds=Eh(this)},e.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new ei).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},e}(),ln=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=new Qi(0,0,0,0),t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return ln(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e){this.desiredBounds=void 0;var i,n,r=void 0;if(this.hasChildren()){for(var o=0;o<this.children.length;o++){"Stretch"!==(i=this.children[o]).horizontalAlignment||e.width||(e.width=i.bounds.width),"Stretch"!==i.verticalAlignment||e.height||(e.height=i.bounds.height);var a="Stretch"===i.horizontalAlignment||"Stretch"===i.verticalAlignment;(this.measureChildren||a||i instanceof t&&void 0!==i.measureChildren)&&i.measure(e),n=this.GetChildrenBounds(i),"Stretch"!==i.horizontalAlignment&&"Stretch"!==i.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=n:this.desiredBounds.uniteRect(n):!this.actualSize||this.actualSize.width||this.actualSize.height||i.preventContainer||"Stretch"!==i.horizontalAlignment||"Stretch"!==i.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=i.bounds:this.desiredBounds.uniteRect(i.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var s={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},l=Hh(this.rotateAngle,void 0,void 0,s);this.desiredBounds.x=l.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=l.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(r=new ei(this.desiredBounds.width,this.desiredBounds.height))}return r=this.validateDesiredSize(r,e),this.stretchChildren(r),this.desiredSize=r,r},t.prototype.arrange=function(e){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var r=0;r<this.children.length;r++){var o=!1;"Stretch"===(i=this.children[r]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&Ii.ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),o=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,o=!0),(o||this.measureChildren||i instanceof t&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var r=n[i];"Stretch"!==r.horizontalAlignment&&void 0!==r.desiredSize.width||(r.desiredSize.width=e.width-r.margin.left-r.margin.right),"Stretch"!==r.verticalAlignment&&void 0!==r.desiredSize.height||(r.desiredSize.height=e.height-r.margin.top-r.margin.bottom),r instanceof t&&r.stretchChildren(r.desiredSize)}},t.prototype.applyPadding=function(e){e.width+=this.padding.left+this.padding.right,e.height+=this.padding.top+this.padding.bottom},t.prototype.findChildOffsetFromCenter=function(e,t){var i=Bh({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2},e);i=Hh(e.rotateAngle,t.x,t.y,i),i=Hh(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),e.offsetX=i.x,e.offsetY=i.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();e.rotateAngle,this.rotateAngle;var i=e.offsetX,n=e.offsetY,r=i-t.width*e.pivot.x,o=n-t.height*e.pivot.y,a=r+t.width,s=o+t.height,l={x:r,y:o},c={x:a,y:o},h={x:r,y:s},d={x:a,y:s};return l=Hh(e.rotateAngle,e.offsetX,e.offsetY,l),c=Hh(e.rotateAngle,e.offsetX,e.offsetY,c),h=Hh(e.rotateAngle,e.offsetX,e.offsetY,h),d=Hh(e.rotateAngle,e.offsetX,e.offsetY,d),0!==this.rotateAngle&&(l=Hh(-this.rotateAngle,void 0,void 0,l),c=Hh(-this.rotateAngle,void 0,void 0,c),h=Hh(-this.rotateAngle,void 0,void 0,h),d=Hh(-this.rotateAngle,void 0,void 0,d)),mi.toBounds([l,c,h,d])},t}(sn),hn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dn=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.isLaneOrientation=!1,t.canConsiderBounds=!0,t.hyperlink={color:"blue"},t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return hn(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!0,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t;return t=this.isDirt&&this.canMeasure?function(e,t,i,n,r){var o,a,s=new ei(0,0),l=function(e,t){var i={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return i.fontSize=e.style.fontSize,i.fontFamily=e.style.fontFamily,i.textOverflow=e.style.textOverflow,i.textDecoration=e.style.textDecoration,i.doWrap=e.doWrap,i.whiteSpace=jh(e.style.whiteSpace,e.style.textWrapping),i.content=e.content,i.textWrapping=e.style.textWrapping,i.breakWord=kh(e.style.textWrapping),i.textAlign=Dh(e.style.textAlign),i.color=e.style.color,i.italic=e.style.italic,i.bold=e.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(e,n);e.childNodes=o=function(e,t,i){var n,r,o=[],a=0,s=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=s[0],a=0;a<s.length;a++)if((r=Ih(n,e))>=e.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:r},n="";else{(n+=s[a+1]||"").indexOf("\n")>-1&&(n=n.replace("\n",""));var l=Ih(n,e);Math.ceil(l)+2>=e.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),a===s.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=function(e,t,i){var n,r,o,a,s=[],l="",c=0,h=0,d="nowrap"!==e.whiteSpace,p=(t||e.content).split("\n");for(c=0;c<p.length;c++)for(n="NoWrap"!==e.textWrapping?p[c].split(" "):p,h=0;h<n.length;h++){l+=((0!==h||1===n.length)&&d&&l.length>0?" ":"")+n[h];var u=Ih(r=l+" "+(n[h+1]||""),e);Math.floor(u)>(i||e.width)-2&&l.length>0?(s[s.length]={text:l,x:0,dy:0,width:r===l?u:l===a?o:Ih(l,e)},l=""):h===n.length-1&&(s[s.length]={text:l,x:0,dy:0,width:u},l=""),a=r,o=u}return s}(e,t,i);else o[o.length]={text:s,x:0,dy:0,width:Ih(s,e)};return o}(l,r,e.isLaneOrientation?n:void 0),e.wrapBounds=a=function(e,t){var i,n,r={x:0,width:0},o=0;for(o=0;o<t.length;o++)i=t[o].width,n=i,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[o].dy=1.2*e.fontSize,t[o].x=i,r?(r.x=Math.min(r.x,i),r.width=Math.max(r.width,n)):r={x:i,width:n};return r}(l,o),s.width=a.width,e.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(s.width=n);return s.height=o.length*e.style.fontSize*1.2,s}(this,this.style,this.content,this.isLaneOrientation?e.height:this.width||e.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new ei(t.width,t.height):this.desiredSize=new ei(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(sn),pn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),un=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.measureChildren=void 0,t}return pn(t,e),t.prototype.measure=function(t){var i=void 0,n=void 0;if(this.hasChildren()){for(var r=0,o=this.children;r<o.length;r++){var a=o[r];a instanceof dn?a.canMeasure&&(t.width=t.width||this.maxWidth||this.minWidth,a.measure(t)):a instanceof dn||a.measure(t);var s=a.desiredSize.clone();0!==a.rotateAngle&&(s=zh(s,a.rotateAngle));var l=s.width+a.margin.right,c=s.height+a.margin.bottom,h=new mi(a.margin.left,a.margin.top,l,c);if(a.float)if(void 0!==a.getAbsolutePosition(s))continue;a instanceof dn&&!(a instanceof dn&&a.canConsiderBounds)||(void 0===n?n=h:n.uniteRect(h))}if(n){var d,p;d=Math.max(n.left,0),p=Math.max(n.top,0),i=new ei(n.width+d,n.height+p)}}return i=e.prototype.validateDesiredSize.call(this,i,t),e.prototype.stretchChildren.call(this,i),i.width+=this.padding.left+this.padding.right,i.height+=this.padding.top+this.padding.bottom,this.desiredSize=i,i},t.prototype.arrange=function(t,i){if(this.outerBounds=new mi,this.hasChildren()){var n,r;n=this.offsetY-t.height*this.pivot.y+this.padding.top,r=this.offsetX-t.width*this.pivot.x+this.padding.left;for(var o=0,a=this.children;o<a.length;o++){var s=a[o];if(0!==(s.transform&zi.Parent)){s.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&Ii.ElementIsGroup)&&(s.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-s.parentTransform:s.parentTransform);var l,c=s.desiredSize.clone(),h=void 0,d=r,p=n;if("Point"===s.relativeMode){var u=s.getAbsolutePosition(t);void 0!==u&&(d+=u.x,p+=u.y)}l={x:(h="Object"===s.relativeMode?this.alignChildBasedOnParent(s,c,t,d,p):this.alignChildBasedOnaPoint(s,d,p)).x+c.width/2,y:h.y+c.height/2},e.prototype.findChildOffsetFromCenter.call(this,s,l)}!i||"Stretch"!==s.horizontalAlignment&&"Stretch"!==s.verticalAlignment?s instanceof dn&&s.canMeasure?(s.arrange(s.desiredSize),this.outerBounds.uniteRect(s.outerBounds)):s instanceof dn||(s.arrange(s.desiredSize),this.outerBounds.uniteRect(s.outerBounds)):s.arrange(t)}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},t.prototype.alignChildBasedOnParent=function(e,t,i,n,r){switch(e.horizontalAlignment){case"Auto":case"Left":n+=e.margin.left;break;case"Right":n+=i.width-t.width-e.margin.right;break;case"Stretch":case"Center":n+=i.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":r+=e.margin.top;break;case"Bottom":r+=i.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":r+=i.height/2-t.height/2}return{x:n,y:r}},t.prototype.alignChildBasedOnaPoint=function(e,t,i){switch(t+=e.margin.left-e.margin.right,i+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":t=t;break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t-=e.desiredSize.width}switch(e.verticalAlignment){case"Auto":case"Top":i=i;break;case"Stretch":case"Center":i-=e.desiredSize.height*e.pivot.y;break;case"Bottom":i-=e.desiredSize.height}return{x:t,y:i}},t}(cn);function fn(e){return gn[e.toString()]}var gn={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},mn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yn=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new mi,t}return mn(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.getPoints=function(){var e=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){e.points=null,e.pointTimer=null},200)),this.points=this.points||function(e){var t,i,n=[];window.measureElement.style.visibility="visible";var r=Qc(window.measureElement.children[2])[0];r.setAttributeNS(null,"d",e.data);var o=e.absoluteBounds,a=Jc(e,o,e);r.setAttributeNS(null,"d",a);var s=r.getTotalLength();for(i=0;i<=s;i+=10)t=r.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n}(this),function(e,t){for(var i=[],n=0,r=t;n<r.length;n++){var o=r[n],a={x:e.offsetX-e.actualSize.width*e.pivot.x+o.x,y:e.offsetY-e.actualSize.height*e.pivot.y+o.y},s=void 0,l=e.rotateAngle+e.parentTransform;l&&xi(s=vi(),l,e.offsetX,e.offsetY),s&&(a=bi(s,a)),i.push(a)}return i}(this,this.points)},t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new mi(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Kc(this.data?this.data:"")),void 0===this.width?this.desiredSize=new ei(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new ei(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new ei(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,i){var n=!1,r="",o=-t.x,a=-t.y,s=[];return i.width===t.width&&i.height===t.height||(o=i.width/Number(t.width?t.width:1),a=i.height/Number(t.height?t.height:1),n=!0),s=pi(s=ri(e)),r=(n||this.isDirt)&&this.transformPath?ci(s,o,a,n,t.x,t.y,0,0):ui(s),n=!1,r},t}(sn),vn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bn=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return vn(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(e,t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[1];i.setAttribute("src",e);var n=i.getBoundingClientRect(),r=n.width,o=n.height;return t=new ei(r,o),window.measureElement.style.visibility="hidden",t}(this.source,this.contentSize),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new ei(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new ei(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(sn),wn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xn=function(e){function t(t,i){var n=e.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=t,n}return wn(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.template=vh(this,!1),this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){if(this.isDirt){var t=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=i;return r.x=i.left-n.left,r.y=i.top-n.top,t.removeChild(e),window.measureElement.style.visibility="hidden",r}(this.template);this.contentSize=new ei,this.contentSize.width=t.width,this.contentSize.height=t.height;var i=t.x,n=t.y;this.templatePosition={x:i,y:n},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var r=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var i=t.getBoundingClientRect();return t.removeChild(e),window.measureElement.style.visibility="hidden",i}(this.template);this.desiredSize=new ei(r.width,r.height)}else this.desiredSize=new ei(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new ei(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(sn),Sn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cn=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Sn(t,e),Cn([pe("")],t.prototype,"id",void 0),Cn([pe("Center")],t.prototype,"horizontalAlignment",void 0),Cn([pe("Center")],t.prototype,"verticalAlignment",void 0),Cn([ue({},Ki)],t.prototype,"margin",void 0),Cn([pe(12)],t.prototype,"width",void 0),Cn([pe(12)],t.prototype,"height",void 0),Cn([ue({},rn)],t.prototype,"style",void 0),Cn([pe("Square")],t.prototype,"shape",void 0),Cn([pe(Mi.Connect)],t.prototype,"visibility",void 0),Cn([pe("")],t.prototype,"pathData",void 0),Cn([pe(Ui.Default)],t.prototype,"constraints",void 0),Cn([pe()],t.prototype,"addInfo",void 0),t}(ke),En=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return Sn(t,e),t.prototype.getClassName=function(){return"PointPort"},Cn([ue({x:.5,y:.5},ni)],t.prototype,"offset",void 0),t}(Pn),On=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mn=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return On(t,e),Mn([pe("blue")],t.prototype,"color",void 0),Mn([pe("")],t.prototype,"content",void 0),Mn([pe("")],t.prototype,"link",void 0),Mn([pe("None")],t.prototype,"textDecoration",void 0),t}(ke),An=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return n.id||(t.parentObj&&t.parentObj.propName&&"phases"===t.parentObj.propName?o.id=t.parentObj.id:o.id=Ch()),o}return On(t,e),Mn([pe("")],t.prototype,"content",void 0),Mn([pe(void 0)],t.prototype,"template",void 0),Mn([pe(!0)],t.prototype,"visibility",void 0),Mn([pe(Di.InheritReadOnly)],t.prototype,"constraints",void 0),Mn([ue(void 0,Tn)],t.prototype,"hyperlink",void 0),Mn([pe("")],t.prototype,"id",void 0),Mn([pe()],t.prototype,"width",void 0),Mn([pe()],t.prototype,"height",void 0),Mn([pe(0)],t.prototype,"rotateAngle",void 0),Mn([ue({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},an)],t.prototype,"style",void 0),Mn([pe("Center")],t.prototype,"horizontalAlignment",void 0),Mn([pe("Center")],t.prototype,"verticalAlignment",void 0),Mn([ue({},Ki)],t.prototype,"margin",void 0),Mn([ue({top:void 0,bottom:void 0,left:void 0,right:void 0},Ki)],t.prototype,"dragLimit",void 0),Mn([pe("Shape")],t.prototype,"type",void 0),Mn([pe()],t.prototype,"addInfo",void 0),t}(ke),Ln=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return On(t,e),t.prototype.getClassName=function(){return"ShapeAnnotation"},Mn([ue({x:.5,y:.5},ni)],t.prototype,"offset",void 0),t}(An),Dn=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return On(t,e),t.prototype.getClassName=function(){return"PathAnnotation"},Mn([pe(.5)],t.prototype,"offset",void 0),Mn([ue({x:0,y:0},ni)],t.prototype,"displacement",void 0),Mn([pe("Center")],t.prototype,"alignment",void 0),Mn([pe(!1)],t.prototype,"segmentAngle",void 0),t}(An);function kn(e){return Nn[e.toString()]}function In(e,t){return"Custom"===e?t.pathData:jn[e]}function Rn(e){var t;switch(e.shape){case"Minus":t="M0,50 L100,50";break;case"Plus":t="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":t="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":t="M0,0 L50,100 L100,0 Z";break;case"Path":t=e.pathData}return t}var Nn={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},jn={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"};function zn(e){return Hn[e.toString()]}var Hn={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"};function Bn(e,t){var i;return i=function(e,t,i,n){var r,o,a=e.sourceWrapper,s=e.targetWrapper,l=e.sourcePortWrapper,c=e.targetPortWrapper,h=[],d={corners:void 0,point:t,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}},p={corners:void 0,point:i,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}};void 0!==a&&void 0!==s&&(r=Ph(a),o=Ph(s),d.corners=a.corners,p.corners=s.corners);if(void 0!==l){var u={x:l.offsetX,y:l.offsetY};d.direction=br(u,r,a.bounds,!1)}if(void 0!==c){var f={x:c.offsetX,y:c.offsetY};p.direction=br(f,o,s.bounds,!1)}if(void 0!==a&&void 0!==s)return void 0!==d.direction&&void 0!==p.direction||(n?function(e,t,i){"LeftToRight"===i?(e.direction=e.direction?e.direction:"Right",t.direction=t.direction?t.direction:"Left"):"RightToLeft"===i?(e.direction=e.direction?e.direction:"Left",t.direction=t.direction?t.direction:"Right"):"TopToBottom"===i?(e.direction=e.direction?e.direction:"Bottom",t.direction=t.direction?t.direction:"Top"):"BottomToTop"===i&&(e.direction=e.direction?e.direction:"Top",t.direction=t.direction?t.direction:"Bottom")}(d,p,n):d.corners.top>p.corners.bottom&&Math.abs(d.corners.top-p.corners.bottom)>d.margin.top+d.margin.bottom?(d.direction=d.direction?d.direction:"Top",p.direction=p.direction?p.direction:"Bottom"):d.corners.bottom<p.corners.top&&Math.abs(d.corners.bottom-p.corners.top)>d.margin.bottom+d.margin.top?(d.direction=d.direction?d.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):d.corners.right<p.corners.left&&Math.abs(d.corners.right-p.corners.left)>d.margin.right+d.margin.left||d.corners.right+13<p.corners.left||p.corners.right>=d.corners.left-13&&d.corners.left>p.corners.left?(d.direction=d.direction?d.direction:"Right",p.direction=p.direction?p.direction:"Left"):d.corners.left>p.corners.right&&Math.abs(d.corners.left-p.corners.right)>d.margin.left+d.margin.right||p.corners.right+13<d.corners.left||d.corners.right>=p.corners.left-13&&d.corners.left<p.corners.left?(d.direction=d.direction?d.direction:"Left",p.direction=p.direction?p.direction:"Right"):a.id!==s.id&&!r.equals(r,o)&&o.containsPoint(r.topCenter,d.margin.top)?(d.direction=d.direction?d.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):(d.direction=d.direction?d.direction:"Top",p.direction=p.direction?p.direction:"Bottom")),function(e,t,i,n,r){var o,a=e.sourceWrapper,s=e.targetWrapper,l=e.sourcePortWrapper,c=e.targetPortWrapper,h=[],d=a.corners,p=s.corners,u=(p.center,{corners:d,point:n,direction:t,margin:{left:5,right:5,bottom:5,top:5}}),f={corners:p,point:r,direction:i,margin:{left:5,right:5,bottom:5,top:5}},g=Qn(a,d,e.sourceWrapper.bounds),m=Qn(s,p,e.targetWrapper.bounds),y=!1;e.sourceWrapper&&e.targetWrapper&&(y=function(e,t,i){for(var n=qn(e,i.sourcePadding),r=qn(t,i.targetPadding),o=0;o<n.length-1;o++)for(var a=n[o],s=0;s<r.length-1;s++){var l=r[s];if(al(a,l).enabled)return!0}return!1}(e.sourceWrapper,e.targetWrapper,e));if(void 0!==l){switch(u.point={x:l.offsetX,y:l.offsetY},u.direction){case"Bottom":case"Top":u.point.y=u.point.y;break;case"Left":case"Right":u.point.x=u.point.x}e.sourcePadding&&!y&&(c&&(f.point={x:c.offsetX,y:c.offsetY}),u.point=Gn(e,u,f,!1))}else"Orthogonal"===e.type?(e.segments&&e.segments.length>0&&e.segments[0].direction&&(u.direction=e.segments[0].direction),u.point=ar(g,u.direction),o=ar(g,xr(u.direction)),u.point=lr(e,a,u.point,o,!1)):u.point=a.corners.center;if(void 0!==c){switch(f.point={x:c.offsetX,y:c.offsetY},f.direction){case"Bottom":case"Top":f.point.y=f.point.y;break;case"Left":case"Right":f.point.x=f.point.x}e.targetPadding&&!y&&(f.point=Gn(e,u,f,!0))}else"Orthogonal"===e.type?(f.point=ar(m,f.direction),o=ar(m,xr(f.direction)),f.point=lr(e,s,f.point,o,!0)):f.point=s.corners.center;if("Orthogonal"!==e.type){var v=void 0,b=void 0;if(Jn(e),void 0===e.sourcePortWrapper){u.point=u.corners.center,e.segments&&e.segments.length>0&&(b=e.segments[0],v=ni.isEmptyPoint(b.point)?void 0:b);var w=void 0!==v?v.point:f.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[0].vector1.angle&&e.segments[0].vector1.distance){var x=Math.max(u.corners.width,u.corners.height);w=ni.transform(u.point,e.segments[0].vector1.angle,x/2)}u.point=y?e.sourceWrapper.bounds.center:lr(e,a,u.point,w,!1)}if(void 0===e.targetPortWrapper){f.point=f.corners.center,e.segments&&e.segments.length>1&&(b=e.segments[e.segments.length-2],v=ni.isEmptyPoint(b.point)?void 0:b);var S=v?v.point:u.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[e.segments.length-1].vector2.angle&&e.segments[e.segments.length-1].vector2.distance){var x=Math.max(u.corners.width,u.corners.height);S=ni.transform(f.point,e.segments[0].vector2.angle,x/2)}f.point=y?e.targetWrapper.bounds.center:lr(e,s,S,f.point,!0)}h=Kn(e,u,f)}else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].direction)h=function(e,t,i,n,r,o,a){var s,l,c,h;Jn(e);for(var d=0;d<e.segments.length;d++){if(l=e.segments[d],n&&t.direction===xr(l.direction)&&(l.direction=t.direction),d>0&&e.segments[d-1].direction===l.direction)d=er(e,d,t);else if(l.direction)t.point=_n(t,e.segments[d]);else{var p=e.segments[d-1];t.point=p.points[p.points.length-1]}if(d===e.segments.length-1)if(ir(e,t),Un(s=void 0===r?tr(e,t,i):Xn(e,t,i),e,t),l.points=[],s.length>=2)for(c=0;c<s.length;c++)l.points.push(s[c]);else h=d;if(void 0!==h&&(h===e.segments.length-1&&(e.segments[h-1].direction=null,e.segments[h-1].length=null),e.segments.splice(h,1)),n&&0===d){var u=Vn(e,n,o);u&&(t.point=u)}}return nr(e,[])}(e,u,f,l,c,a);else{if(!e.segments[0]){var v=new qo(e,"segments",{type:"Orthogonal"},!0);e.segments.push(v)}e.segments[0].points=h=function(e,t,i,n){var r,o=!1;(o=function(e,t){var i=!1;switch(e){case"Left":switch(t){case"Right":case"Bottom":i=!0}break;case"Top":switch(t){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(t){case"Right":i=!0}}return i}(t.direction,i.direction))&&vr(t,i);"Right"===t.direction&&"Left"===i.direction?r=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=(e.targetPortWrapper,Math.round(Math.abs(t.point.y-i.point.y))),s=(Math.round(Math.abs(t.point.x-i.point.x)),{x:Math.max(t.point.x,t.corners.right),y:t.point.y}),l={x:Math.min(i.point.x,i.corners.left),y:i.point.y},c=10;if(n){var h=void 0;h=l,l=s,s=h}t.corners.bottom+c<i.corners.top-c||t.corners.top-c>i.corners.bottom+c||(c=0);t.margin={left:c,right:c,top:c,bottom:c},i.margin={left:c,right:c,top:c,bottom:c},r=0===a&&(t.corners.right<i.corners.left||n&&t.corners.right<i.corners.left)?Xi.One:t.point.x+t.margin.right<i.point.x-i.margin.left?Xi.Three:e.sourceWrapper!==e.targetWrapper&&(Ph(e.sourceWrapper).containsPoint(l)||Ph(e.targetWrapper).containsPoint(s))?Xi.Three:t.corners.bottom<=i.corners.top?Xi.Five:t.corners.top>=i.corners.top?Xi.Five:void 0!==o&&o.offsetY<=i.corners.top||void 0===o&&t.corners.right<=i.corners.top?Xi.Five:(void 0!==o&&o.offsetY>=i.corners.bottom||void 0===o&&(t.corners.right,i.corners.bottom),Xi.Five);return r}(e,t,i,o):"Right"===t.direction&&"Right"===i.direction?r=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=t.point.x-i.point.x,s=t.point.y-i.point.y;i.margin={left:10,right:10,top:10,bottom:10},t.margin={left:10,right:10,top:10,bottom:10},n=t.corners.right>=i.corners.right?void 0!==r&&(r.offsetY<i.corners.top||r.offsetY>i.corners.bottom)||void 0===r&&t.corners.middleRight.y<i.corners.top?Xi.Three:void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom&&t.corners.top>i.corners.bottom||void 0===r&&t.corners.middleRight.y>i.corners.bottom?Xi.Three:void 0!==r&&r.offsetY<i.corners.top&&t.corners.bottom>i.corners.top||void 0===r&&t.corners.middleRight.y>i.corners.bottom?Xi.Three:t.corners.right<i.corners.left||i.corners.right<t.corners.left?Xi.Five:0===a||0===s?Xi.One:Xi.Three:void 0!==o&&t.corners.bottom<o.offsetY||void 0===o&&t.corners.bottom<i.corners.middleRight.y?Xi.Three:void 0!==o&&t.corners.top>o.offsetY||void 0===o&&t.corners.top>i.corners.middleRight.y?Xi.Three:void 0!==o&&(void 0!==r&&r.offsetX<i.corners.left&&r.offsetX!==o.offsetX&&r.offsetY!==o.offsetY&&Math.abs(t.corners.right-i.corners.left)<=20||void 0===r&&t.corners.right<i.corners.left&&t.corners.center.x!==i.corners.center.x&&t.corners.center.y!==i.corners.center.y)?Xi.Three:t.corners.right<i.corners.left?Xi.Five:0===a||0===s?Xi.One:Xi.Three;return n}(e,t,i):"Right"===t.direction&&"Top"===i.direction?r=function(e,t,i,n){var r,o=e.targetPortWrapper,a=e.sourcePortWrapper,s={x:Math.max(t.point.x,t.corners.right),y:t.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(i.margin={left:5,right:5,top:5,bottom:5},t.margin={top:5,bottom:5,left:5,right:5},n){var c=void 0;c=a,a=o,o=c}r=void 0!==a&&a.offsetY<i.corners.top-i.margin.top||void 0===a&&t.corners.bottom<i.corners.top-i.margin.top?t.corners.bottom<i.corners.top?void 0!==o&&t.corners.right+t.margin.right<o.offsetX||void 0===o&&t.corners.right+t.margin.right<i.corners.topCenter.x?Xi.Two:Xi.Four:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.topCenter.x?Xi.Four:Xi.Two:void 0!==a&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-i.corners.top)<=25?Xi.Two:void 0!==o&&Math.abs(o.offsetX-t.corners.topCenter.x)>=25&&t.corners.middleRight.y<o.offsetY?Xi.Two:t.corners.right<i.corners.left?Xi.Four:e.sourceWrapper!==e.targetWrapper&&(Ph(e.sourceWrapper).containsPoint(l)||Ph(e.targetWrapper).containsPoint(s))?Xi.Two:Xi.Four;return r}(e,t,i,o):"Right"===t.direction&&"Bottom"===i.direction?r=function(e,t,i,n){var r;t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o=e.sourcePortWrapper,a=e.targetPortWrapper;Math.max(t.point.x,t.corners.right),t.point.y,i.point.x,Math.max(i.point.y,i.corners.bottom);if(n){var s=void 0;s=o,o=a,a=s}r=void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&t.corners.middleRight.y>i.corners.bottom+i.margin.bottom?t.corners.top>i.corners.bottom?void 0!==a&&t.corners.right+t.margin.right<a.offsetX||void 0===a&&t.corners.right+t.margin.right<i.corners.bottomCenter.x?Xi.Two:Xi.Four:void 0!==a&&t.corners.left>a.offsetX||void 0===a&&t.corners.left>i.corners.bottomCenter.x?Xi.Four:Xi.Two:void 0!==o&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-i.corners.bottom)<=25?Xi.Two:(t.corners.right,i.corners.left,Xi.Four);return r}(e,t,i,o):"Bottom"===t.direction&&"Top"===i.direction?r=function(e,t){var i,n=e.point.x-t.point.x,r=(e.point.y,t.point.y,e.point.x,Math.max(e.point.y,e.corners.bottom),t.point.x,Math.min(t.point.y,t.corners.top),10);e.corners.right+r<t.corners.left-r||e.corners.left-r>t.corners.right+r||(r=0);e.margin={left:r,right:r,top:r,bottom:r},t.margin={left:r,right:r,top:r,bottom:r},i=0===n&&e.corners.bottom<t.corners.top?Xi.One:e.corners.bottom+e.margin.bottom<t.corners.top-t.margin.top?Xi.Three:e.corners.right+e.margin.right<t.corners.left-t.margin.left?Xi.Five:(e.corners.left,e.margin.left,t.corners.right,t.margin.right,Xi.Five);return i}(t,i):"Bottom"===t.direction&&"Bottom"===i.direction?(t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},r=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(i.point.y-i.point.y));n=t.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&t.corners.bottomCenter.x<i.corners.left-i.margin.left?Xi.Three:void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&t.corners.bottomCenter.x>i.corners.right+i.margin.right?Xi.Three:t.corners.bottom<i.corners.top?Xi.Five:0===a||0===s?Xi.One:Xi.Three:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.left?Xi.Three:void 0!==o&&t.corners.right<o.offsetX||void 0===o&&t.corners.right<i.corners.right?Xi.Three:t.corners.top>i.corners.bottom?Xi.Five:0===a||0===s?Xi.One:Xi.Three;return n}(e,t,i)):"Bottom"===t.direction&&"Left"===i.direction?r=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=e.targetPortWrapper;t.point.x,Math.max(t.point.y,t.corners.bottom),Math.min(i.point.x,i.corners.left),i.point.y;if(n){var s=void 0;s=o,o=a,a=s}r=void 0!==o&&o.offsetX<i.corners.left-i.margin.left||void 0===o&&t.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?t.corners.right<i.corners.left?void 0!==a&&t.corners.bottom+t.margin.bottom<a.offsetY||void 0===a&&t.corners.bottom+t.margin.bottom<i.corners.middleLeft.y?Xi.Two:Xi.Four:void 0!==a&&t.corners.top>a.offsetY||void 0===a&&t.corners.top>i.corners.middleLeft.y?Xi.Four:Xi.Two:void 0!==a&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-t.corners.bottom)<=25?Xi.Two:Xi.Four;return r}(e,t,i,o):"Left"===t.direction&&"Left"===i.direction?r=function(e,t,i){var n=e.sourcePortWrapper,r=e.targetPortWrapper;t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(t.point.y-i.point.y));o=t.corners.left<i.corners.left?void 0!==r&&t.corners.bottom+t.margin.bottom<r.offsetY||void 0===r&&t.corners.bottom+t.margin.bottom<i.corners.middleLeft.y?Xi.Three:void 0!==r&&t.corners.top-t.margin.top>r.offsetY||void 0===r&&t.corners.top-t.margin.top>i.corners.middleLeft.y?Xi.Three:t.corners.right<i.corners.left||i.corners.right<t.corners.left?Xi.Five:0===a||0===s?Xi.One:Xi.Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&t.corners.middleLeft.y<i.corners.top?Xi.Three:void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&t.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?Xi.Three:t.corners.left>i.corners.right?Xi.Five:0===a||0===s?Xi.One:Xi.Three;return o}(e,t,i):"Left"===t.direction&&"Top"===i.direction?r=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=e.targetPortWrapper,s={x:Math.min(t.point.x,t.corners.left),y:t.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var c=void 0;c=o,o=a,a=c}r=void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&(t.corners.bottom<i.corners.top-i.margin.top||t.corners.middleLeft.y<i.corners.top-i.margin.top)?t.corners.bottom<i.corners.top?void 0!==a&&t.corners.left-t.margin.left>a.offsetX||void 0===a&&t.corners.left-t.margin.left>i.corners.topCenter.x?Xi.Two:Xi.Four:void 0!==a&&t.corners.right<a.offsetX||void 0===a&&t.corners.right<i.corners.topCenter.x?Xi.Four:Xi.Two:void 0!==o&&Math.abs(t.corners.left-i.corners.right)<=25&&Math.abs(o.offsetY-i.corners.top)<=25?Xi.Two:e.sourceWrapper!==e.targetWrapper&&(Ph(e.sourceWrapper).containsPoint(l)||Ph(e.targetWrapper).containsPoint(s))?Xi.Two:(t.corners.left,i.corners.right,Xi.Four);return r}(e,t,i,o):"Top"===t.direction&&"Top"===i.direction&&(r=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(t.point.y-i.point.y));t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n=t.corners.top<i.corners.top?void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.left?Xi.Three:void 0!==o&&t.corners.right<o.offsetX||void 0===o&&t.corners.right<i.corners.right?Xi.Three:t.corners.bottom<i.corners.top?Xi.Five:0===a||0===s?Xi.One:Xi.Three:void 0!==r&&r.offsetX>i.corners.right||void 0===r&&t.corners.left>i.corners.right?Xi.Three:void 0!==r&&r.offsetX<i.corners.left||void 0===r&&t.corners.bottomRight.x<i.corners.left?Xi.Three:t.corners.top>i.corners.bottom?Xi.Five:0===a||0===s?Xi.One:Xi.Three;return n}(e,t,i));o&&vr(t,i);return function(e,t,i,n,r){var o,a=e.sourceWrapper,s=e.targetWrapper,l=(e.targetPortWrapper,a.corners),c=s.corners,h=20;if((i.direction!==n.direction||t===Xi.Five)&&(i.direction===xr(n.direction)||t===Xi.Three))switch(i.direction){case"Left":l.middleLeft.x>c.middleRight.x&&(h=Math.min(h,(l.middleLeft.x-c.middleRight.x)/2));break;case"Right":l.middleRight.x<c.middleLeft.x&&(h=Math.min(h,(c.middleLeft.x-l.middleRight.x)/2));break;case"Top":l.topCenter.y>c.bottomCenter.y&&(h=Math.min(h,(l.topCenter.y-c.bottomCenter.y)/2));break;case"Bottom":l.bottomCenter.y<c.topCenter.y&&(h=Math.min(h,(c.topCenter.y-l.bottomCenter.y)/2))}if(h=ur(l,i,h),r&&(h=Math.max(h,r)),t===Xi.One&&(o=[i.point,n.point]),t===Xi.Two&&(o=fr(i,n)),t===Xi.Three&&(o=gr(e,i,n,h)),t===Xi.Four){var d=void 0;o=mr(i,n,d,o,h)}return t===Xi.Five&&(o=function(e,t,i){void 0===i&&(i=20);var n,r,o=i,a=e.corners.left-e.margin.left,s=e.corners.right+e.margin.right,l=e.corners.bottom+e.margin.bottom,c=e.corners.top-e.margin.top,h=t.corners.left-t.margin.left,d=t.corners.right+t.margin.right,p=t.corners.bottom+t.margin.bottom,u=t.corners.top-t.margin.top;switch(e.direction){case"Left":(c>u&&c<p||l<p&&l>u)&&a>h&&a<=d&&i>=20&&(o=e.point.x-t.corners.left+o),r=sr(e.point,o,180);break;case"Top":(a>h&&a<d||s<d&&s>h)&&c>u&&c<=p&&i>=20&&(o=e.point.y-t.corners.top+o),r=sr(e.point,o,270);break;case"Right":(c>u&&c<p||l<p&&l>u)&&s<d&&s>=h&&i>=20&&(o=t.corners.right-e.point.x+o),r=sr(e.point,o,0);break;case"Bottom":(a>h&&a<d||s<d&&s>h)&&l<p&&l>=u&&i>=20&&(o=t.corners.bottom-e.point.y+o),r=sr(e.point,o,90)}if(n=[e.point,r],"Top"===e.direction||"Bottom"===e.direction){var f=e.direction;e.direction=r.x>t.point.x?"Left":"Right",e.point=r,n=mr(e,t,f,n)}else{var f=e.direction;e.direction=r.y>t.point.y?"Top":"Bottom",e.point=r,n=mr(e,t,f,n)}return n}(i,n,h)),o}(e,r,t,i,n)}(e,u,f)}return h}(e,d.direction,p.direction,d.point,p.point);Jn(e),(e.sourceWrapper||e.targetWrapper)&&function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=e.sourceWrapper,s=t.point,l={left:0,right:0,top:0,bottom:0},c={x:0,y:0},h="Top";a?(s=i.point,l=t.margin):(a=e.targetWrapper,l=i.margin);if("Orthogonal"===e.type)if(e.segments&&e.segments.length>0&&e.sourceWrapper&&e.segments[0].direction)t.direction=e.segments[0].direction,c=ar(a.corners,t.direction),n=ar(a.corners,xr(t.direction)),c=lr(e,a,c,n,!1);else{var d={corners:null,direction:null,point:s,margin:l},p={corners:null,direction:null,point:null,margin:null};rr(a,d,p,e),c=p.point,h=p.direction}else{var u=void 0;e.segments&&e.segments.length>1&&(u=a===e.sourceWrapper?e.segments[0].point:e.segments[e.segments.length-2].point),c=lr(e,a,a.bounds.center,e.segments&&e.segments.length>1?u:s,a===e.targetWrapper)}a===e.sourceWrapper?(t.direction=t.direction||h,t.point=c,e.sourcePortWrapper&&(t.point={x:r.offsetX,y:r.offsetY},e.sourcePadding&&(t.point=Gn(e,t,i,!1)))):(i.direction=i.direction||h,i.point=c,e.targetPortWrapper&&(i.point={x:o.offsetX,y:o.offsetY},e.targetPadding&&(i.point=Gn(e,t,i,!0))))}(e,d,p);if("Straight"===e.type||"Bezier"===e.type)h=Kn(e,d,p);else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].length&&null!==e.segments[0].direction)h=function(e,t,i,n,r,o,a){var s,l,c,h,d,p=[];if(Jn(e),e.segments.length>0){for(var u=0;u<e.segments.length;u++){var f=e.segments[u];if(0===u&&void 0!==e.sourcePortWrapper&&(h={x:o.offsetX,y:o.offsetY},c=br(h,Ph(n),n.bounds,!1),f.direction===xr(c)&&(f.direction=c)),u>0&&e.segments[u-1].direction===f.direction)u=er(e,u,t);else{var g=e.segments[u-1];t.point=f.direction?_n(t,f):g.points[g.points.length-1]}if(u===e.segments.length-1)if(a||r?e.targetWrapper&&void 0===e.targetPortWrapper?(ir(e,t),l=Fn(e,t,i)):l=Xn(e,t,i):l=Wn(e,t,i),Un(l,e,t),f.points=[],l.length>=2)for(s=0;s<l.length;s++)f.points.push(l[s]);else d=u;if(o&&0===u){var m=Vn(e,o,n);m&&(t.point=m)}}void 0!==d&&(d===e.segments.length-1&&(e.segments[d-1].direction=null,e.segments[d-1].length=null),e.segments.splice(d,1)),p=nr(e,p)}return p}(e,d,p,a,s,l,c);else{var g=void 0;d.direction?g=ur(a.bounds,d,20):d.direction=p.direction?void 0!==e.targetPortWrapper?p.direction:xr(p.direction):ni.direction(d.point,p.point),e.segments[0].points=h=gr(e,d,p,g)}return h}(e,"Straight"!==e.type&&e.sourceWrapper?e.sourceWrapper.corners.center:function(e){var t;if(e.sourcePortWrapper){var i=e.sourcePortWrapper,n=e.sourceWrapper,r={x:i.offsetX,y:i.offsetY};br(r,Ph(n),n.bounds,!1);t=r}else if(e.sourceID&&e.sourceWrapper)if(e.targetWrapper){var o=e.sourceWrapper.corners.center,a=e.targetWrapper.corners.center;t=lr(e,e.sourceWrapper,o,a,!1)}else t=e.sourcePoint;else t=e.sourcePoint;return t}(e),e.targetPoint,t),cr(e,i[0],!1),cr(e,i[i.length-1],!0),i}function _n(e,t){var i,n,r;return e.direction=t.direction,t.points=[],t.points.push(e.point),r="Left"===t.direction||"Top"===t.direction?-t.length:t.length,n="Left"===t.direction||"Right"===t.direction?0:90,i=sr(e.point,r,n),t.points.push(i),i}function Wn(e,t,i){var n,r,o,a;(t.corners=e.sourceWrapper?e.sourceWrapper.corners:void 0,e.sourcePortWrapper)&&(o=br({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Ph(e.sourceWrapper),e.sourceWrapper.bounds,!1),!t.corners||"Bottom"!==t.direction&&"Top"!==t.direction?!t.corners||"Left"!==t.direction&&"Right"!==t.direction||i.point.y>t.corners.top&&i.point.y<t.corners.bottom&&(r=t.point.x>i.point.x?"Left":"Right"):i.point.x>t.corners.left&&i.point.x<t.corners.right&&(r=t.point.y>i.point.y?"Top":"Bottom"));e.sourcePortWrapper&&o===xr(r)?(("Left"===o||"Right"===o)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.center.y&&i.point.y>=t.corners.top&&i.point.y<=t.corners.center.y?(t.direction="Top",a=t.point.y-t.corners.top+20):("Left"===o||"Right"===o)&&t.point.y>t.corners.center.y&&t.point.y<=t.corners.bottom&&i.point.y>t.corners.center.y&&i.point.y<=t.corners.bottom?(t.direction="Bottom",a=t.corners.bottom-t.point.y+20):("Top"===o||"Bottom"===o)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.center.x&&i.point.x>=t.corners.left&&i.point.x<=t.corners.center.x?(t.direction="Left",a=t.point.x-t.corners.left+20):("Top"===o||"Bottom"===o)&&t.point.x<=t.corners.right&&t.point.x>t.corners.center.x&&i.point.x<=t.corners.right&&i.point.x<t.corners.center.x&&(t.direction="Right",a=t.corners.right-t.point.x+20),t.direction&&a&&(n=gr(e,t,i,a,!0))):(t.direction=r||$n(t.direction,t.point,i.point),n=fr(t,i));return n}function Fn(e,t,i){var n;i.corners=e.targetWrapper.corners,rr(e.targetWrapper,t,i,e);var r=$n(i.direction,t.point,i.point);t.direction!==i.direction||"Left"!==t.direction&&"Right"!==t.direction?(t.direction=r,n=fr(t,i)):(t.direction=r,n=gr(e,t,i,e.targetWrapper.width/2+20),t.point=n[1],rr(e.targetWrapper,t,i,e),n=gr(e,t,i));return n}function Yn(e,t,i){var n,r,o;i.corners=e.targetWrapper.corners,"Left"!==t.direction&&"Right"!==t.direction?i.corners.center.y!==t.point.y||i.corners.left<=t.point.x&&t.point.x<=i.corners.right?i.corners.center.y===t.point.y&&"Bottom"===e.segments[e.segments.length-2].direction||i.corners.center.y>t.point.y&&t.point.y>=i.corners.top?(r="Top",o=t.point.y-i.corners.top+20):i.corners.center.y===t.point.y&&"Top"===e.segments[e.segments.length-2].direction||i.corners.center.y<t.point.y&&t.point.y<=i.corners.bottom?(r="Bottom",o=i.corners.bottom-t.point.y+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.top<=t.point.y&&t.point.y<=t.corners.bottom&&(r=t.direction,o=t.point.y>i.point.y?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):(r="Top",o=i.corners.height/2+20):i.corners.center.x!==t.point.x||i.corners.top<t.point.y&&t.point.y<=i.corners.bottom?i.corners.center.x===t.point.x&&"Right"===e.segments[e.segments.length-2].direction||i.corners.center.x>t.point.x&&t.point.x>=i.corners.left?(r="Left",o=t.point.x-i.corners.left+20):i.corners.center.x===t.point.x&&"Left"===e.segments[e.segments.length-2].direction||i.corners.center.x<=t.point.x&&t.point.x<=i.corners.right?(r="Right",o=i.corners.right-t.point.x+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.left<=t.point.x&&t.point.x<=t.corners.right&&(r=t.direction,o=t.point.x>i.point.x?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20):(r="Left",o=i.corners.width/2+20);var a="Left"===r||"Top"===r?-o:o,s="Left"===r||"Right"===r?0:90;n=t.point,t.point=sr(t.point,a,s),t.direction=ni.direction(t.point,i.point),void 0===e.sourcePortWrapper||void 0===e.targetPortWrapper||t.corners.center.x!==i.corners.center.x&&t.corners.center.y!==i.corners.center.y||(t.direction=i.direction);var l=gr(e,t,i);return l.splice(0,0,n),l}function Xn(e,t,i){var n,r;(i.corners=e.targetWrapper.corners,void 0!==e.sourcePortWrapper)&&(r=br({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Ph(e.sourceWrapper),e.sourceWrapper.bounds,!1));var o=function(e,t,i,n){var r=!1;switch(i.direction){case"Left":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Right"===n&&t.point.x>i.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||("Bottom"===n&&t.point.y>i.point.y||"Top"===n&&t.point.y<i.point.y)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction="Right"===n?t.point.y>i.point.y?"Top":"Bottom":t.point.x<i.point.x?"Right":"Left",r=!0):t.point.x>i.point.x&&(t.point.y>i.point.y||t.point.y<i.point.y)&&!(i.corners.top>t.point.y&&i.corners.bottom<t.point.y)?t.direction="Left":t.point.x<i.point.x&&t.point.y>i.point.y||t.point.x>i.point.x&&t.point.y<=i.point.y&&i.corners.top<t.point.y&&i.corners.center.y>=t.point.y?t.direction="Top":t.point.x<i.point.x&&t.point.y<i.point.y||t.point.x>i.point.x&&t.point.y>i.point.y&&i.corners.bottom<t.point.y&&i.corners.center.y>t.point.y?t.direction="Bottom":t.point.y===i.point.y&&t.point.x<i.point.x&&(t.direction="Right");break;case"Right":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&("Bottom"===n&&t.point.y>i.point.y||"Top"===n&&t.point.y<i.point.y)&&t.point.x>i.point.x&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction=t.point.x>i.point.x?"Left":"Right",r=!0):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Left"===n&&t.point.x<i.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=t.point.y>i.point.y?"Top":"Bottom",r=!0):t.point.x<i.point.x&&i.corners.top<=t.point.y&&i.corners.bottom>=t.point.y&&t.point.y===i.point.y?t.direction="Top":t.point.y>i.point.y&&t.point.x>i.point.x?t.direction="Top":t.point.y<i.point.y&&t.point.x>i.point.x?t.direction="Bottom":t.point.x<i.point.x&&(t.point.y>i.point.y||t.point.y<i.point.y)?t.direction="Right":t.point.y===i.point.y&&t.point.x>i.point.x&&(t.direction="Left");break;case"Top":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Bottom"===n&&t.point.y>i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right||("Right"===n&&t.point.x>i.point.x||"Left"===n&&i.point.y>t.point.y&&i.point.x>t.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction="Bottom"===n?t.point.x>i.point.x?"Left":"Right":t.point.y<i.point.y?"Bottom":"Top",r=!0):t.point.x===i.point.x&&t.point.y<i.point.y?t.direction="Bottom":t.point.y>i.point.y&&t.point.x>i.corners.left&&t.point.x<i.corners.right?t.direction="Left":t.point.y>=i.point.y?t.direction="Top":t.point.y<i.point.y&&t.point.x>i.point.x?t.direction="Left":t.point.y<i.point.y&&t.point.x<i.point.x&&(t.direction="Right");break;case"Bottom":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>t.point.x)&&t.point.y>i.point.y&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Top"===n&&t.point.y<i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?(t.direction="Right"===n||"Left"===n?t.point.y>i.point.y?"Top":"Bottom":t.point.x>i.point.x?"Left":"Right",r=!0):t.point.y<i.point.y&&t.point.x>i.corners.left&&i.corners.right>t.point.x?t.point.y<i.point.y&&t.point.x>i.corners.left&&i.corners.center.x>=t.point.x?t.direction="Left":t.point.y<i.point.y&&t.point.x<i.corners.right&&i.corners.center.x<t.point.x&&(t.direction="Right"):t.point.y>i.point.y&&t.point.x>i.point.x?t.direction="Left":t.point.y>i.point.y&&t.point.x<i.point.x?t.direction="Right":t.point.y<=i.point.y&&(t.point.x>i.point.x||i.point.x>t.point.x)&&(t.direction="Bottom")}return r}(e,t,i,r);return void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&i.direction===xr(r)&&(("Left"===i.direction&&t.point.x>i.point.x||"Right"===i.direction&&t.point.x<i.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Bottom"===i.direction&&t.point.y<i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?n=Yn(e,t,i):t.direction===i.direction?n=gr(e,t,i):("Left"===i.direction&&t.point.x>i.point.x||"Right"===i.direction&&t.point.x<i.point.x)&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.y<=i.point.y&&i.corners.top<=t.point.y&&i.corners.bottom>=t.point.y||"Top"===i.direction&&t.point.y>i.point.y||"Bottom"===i.direction&&t.point.y<i.point.y&&i.corners.left<=t.point.x&&i.corners.right>=t.point.x?n=Yn(e,t,i):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Left"===t.direction||"Right"===t.direction)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===t.corners.center.x?(t.direction="Top"===i.direction?"Bottom":"Top",n=gr(e,t,i,"Top"===i.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===t.corners.center.y?(t.direction="Left"===i.direction?"Right":"Left",n=gr(e,t,i,"Left"===i.direction?t.corners.right-t.point.x+20:t.point.x-t.corners.left+20)):n=o?gr(e,t,i,"Left"===t.direction||"Right"===t.direction?"Left"===t.direction?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20:"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):fr(t,i),n}function Vn(e,t,i){var n,r={x:t.offsetX,y:t.offsetY},o=Ph(i),a=br(r,o,i.bounds,!1),s=e.segments[0];return s.direction!==a&&(!function(e,t,i,n,r,o){var a,s,l=[];l.push(n),n.y===r.y&&("Left"===t&&r.x<n.x||"Right"===t&&r.x>n.x)||n.x===r.x&&("Top"===t&&r.y<n.y||"Bottom"===t&&r.y>n.y)||("Top"===t||"Bottom"===t?"Top"===t&&r.y<n.y&&r.y>n.y-13||"Bottom"===t&&r.y>n.y&&r.y<n.y+13?(s="Top"===t?i.top-13:i.bottom+13,l.push({x:n.x,y:s}),l.push({x:n.x+(r.x-n.x)/2,y:s}),l.push({x:n.x+(r.x-n.x)/2,y:r.y})):Math.abs(n.x-r.x)>13&&("Top"===t&&r.y<n.y||"Bottom"===t&&r.y>n.y)?l.push({x:n.x,y:r.y}):(s="Top"===t?i.top-13:i.bottom+13,a=r.x<n.x?i.left-13:i.right+13,l.push({x:n.x,y:s}),l.push({x:r.x,y:s})):"Left"===t&&r.x<n.x&&r.x>n.x-13||"right"===t&&r.x>n.x&&r.x<n.x+13?(a="Left"===t?i.left-13:i.right+13,l.push({x:a,y:n.y}),l.push({x:a,y:n.y+(r.y-n.y)/2}),l.push({x:r.x,y:n.y+(r.y-n.y)/2})):Math.abs(n.y-r.y)>13&&("Left"===t&&r.x<n.x||"Right"===t&&r.x>n.x)?l.push({x:r.x,y:n.y}):(a="Left"===t?i.left-13:i.right+13,l.push({x:a,y:n.y}),l.push({x:a,y:r.y})),o&&(l.push(e.points[0]),l.reverse()),e.points=l)}(s,a,o,s.points[0],s.points[s.points.length-1],!1),n=s.points[s.points.length-1],s.direction=ni.direction(s.points[s.points.length-2],s.points[s.points.length-1])),n}function Un(e,t,i){var n,r=t.segments[t.segments.length-2],o=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||o.x!==e[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||o.y!==e[1].y)||(r.points[r.points.length-1]=e[1],n=ni.direction(r.points[0],r.points[r.points.length-1]),void 0!==t.sourceWrapper&&void 0===t.sourcePortWrapper&&n===xr(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-t.sourceWrapper.corners.width:r.points[0].x+t.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-t.sourceWrapper.corners.height:r.points[0].y+t.sourceWrapper.corners.height),r.direction=n,r.length=ni.distancePoints(r.points[0],r.points[r.points.length-1]),e.splice(0,1))}function Gn(e,t,i,n){var r=e.sourcePortWrapper,o=e.targetPortWrapper,a=n?e.targetPadding:e.sourcePadding,s=n?o:r,l=new mi(s.bounds.x-a,s.bounds.y-a,s.actualSize.width+2*a,s.actualSize.height+2*a),c=[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft];c[c.length]=c[0];c.length;var h={x1:t.point.x,y1:t.point.y,x2:i.point.x,y2:i.point.y},d=n?i.point:t.point;return hr(h,c,!0,d)||d}function qn(e,t){var i=[],n=cl(e,e.corners,t);n.push(n[0]);for(var r=0;r<n.length-1;r++)i.push(Zn(n[r],n[r+1]));return i}function Zn(e,t){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y}}function Qn(e,t,i){var n,r=e.rotateAngle+e.parentTransform;if(r){if(r<45)return t;if(r<=135)n={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.middleLeft,topRight:t.topLeft,middleLeft:t.bottomCenter,center:i.center,middleRight:t.topCenter,bottomLeft:t.bottomRight,bottomCenter:t.middleRight,bottomRight:t.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(r<=225)n={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.bottomCenter,topRight:t.bottomRight,middleLeft:t.middleRight,center:i.center,middleRight:t.middleLeft,bottomLeft:t.topLeft,bottomCenter:t.topCenter,bottomRight:t.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(r<=315))return t;n={width:t.width,height:t.height,topLeft:t.topRight,topCenter:t.middleRight,topRight:t.bottomRight,middleLeft:t.topCenter,center:i.center,middleRight:t.bottomCenter,bottomLeft:t.topLeft,bottomCenter:t.middleLeft,bottomRight:t.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return t}function Kn(e,t,i){var n=[];if(e.segments&&e.segments.length>0){var r=void 0,o=[],a=t.point;for(r=0;r<e.segments.length;r++){var s=e.segments[r];if((o=[]).push(a),r!==e.segments.length-1?(o.push(s.point),a=s.point):o.push(i.point),e.segments[r].points=o,e.segments.length>1&&ni.equals(s.points[0],s.points[1])&&e.segments.splice(r,1),s)for(var l=0;l<s.points.length;l++)(l>0||0===r)&&n.push(s.points[l])}}return n}function $n(e,t,i){return"Top"===e||"Bottom"===e?i.x>t.x?"Right":"Left":i.y>t.y?"Bottom":"Top"}function Jn(e){if("Straight"===e.type||"Bezier"===e.type){if(0===e.segments.length||e.segments.length>0&&!ni.isEmptyPoint(e.segments[e.segments.length-1].point)){var t=void 0;t="Bezier"===e.type?new Go(e,"segments",{type:"Bezier"},!0):new Uo(e,"segments",{type:"Straight"},!0),e.segments.push(t)}}else if(0===e.segments.length||e.segments[e.segments.length-1].direction){t=new qo(e,"segments",{type:"Orthogonal"},!0);e.segments.push(t)}}function er(e,t,i){var n=e.segments[t],r="Left"===n.direction||"Top"===n.direction?-n.length:n.length,o="Left"===n.direction||"Right"===n.direction?0:90,a=sr(i.point,r,o);return e.segments[t-1].length+=n.length,e.segments[t-1].points[1]=i.point=a,e.segments.splice(t,1),--t}function tr(e,t,i){var n,r;e.sourcePortWrapper&&(r=br({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Ph(e.sourceWrapper),e.sourceWrapper.bounds,!1));rr(e.targetWrapper,t,i,e);var o=$n(i.direction,t.point,i.point);if(void 0===e.sourcePortWrapper||t.direction!==i.direction||("Top"!==t.direction&&"Bottom"!==t.direction||t.corners.center.x!==i.corners.center.x)&&("Left"!==t.direction&&"Right"!==t.direction||t.corners.center.y!==i.corners.center.y))if(i.point.x>=t.corners.left&&i.point.x<=t.corners.right&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom){t.direction=i.point.y>t.point.y?"Bottom":"Top",n=gr(e,t,i,"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20)}else if(e.sourcePortWrapper&&r===xr(o)){var a;("Left"===r||"Right"===r)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=i.point.y>t.point.y?"Bottom":"Top",a=t.corners.height/2+20):("Top"===r||"Bottom"===r)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&(t.direction=i.point.x>t.point.x?"Right":"Left",a=t.corners.width/2+20),t.direction&&a?n=gr(e,t,i,a,!0):(t.direction=o,n=fr(t,i))}else if(!e.sourcePortWrapper||r!==i.direction||"Top"!==r&&"Bottom"!==r||t.corners.center.x!==i.corners.center.x)t.direction=o,n=fr(t,i);else{t.direction=i.point.y>t.point.y?"Bottom":"Top",n=gr(e,t,i,"Bottom"===t.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)}else t.direction=o,n=gr(e,t,i,"Top"===o||"Bottom"===o?e.sourceWrapper.height/2+20:e.sourceWrapper.width/2+20),t.point=n[1],"Left"===o||"Right"===o?(i.direction=o,i.point="Left"===o?i.corners.middleLeft:i.corners.middleRight):rr(e.targetWrapper,t,i,e),n=gr(e,t,i);return n}function ir(e,t){if(void 0!==e.targetWrapper&&void 0===e.targetPortWrapper&&Ph(e.targetWrapper).containsPoint(t.point)){var i=e.targetWrapper,n=e.segments[e.segments.length-2],r=n.points[n.points.length-1],o=xr(n.direction);"Bottom"===o?r.y<i.corners.bottom&&(n.points[n.points.length-1].y=i.corners.bottom+20,n.length=ni.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===o?r.y>i.corners.top&&(n.points[n.points.length-1].y=i.corners.top-20,n.length=ni.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===o?r.x>i.corners.left&&(n.points[n.points.length-1].x=i.corners.left-20,n.length=ni.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===o&&r.x<i.corners.right&&(n.points[n.points.length-1].x=i.corners.right+20,n.length=ni.distancePoints(n.points[0],n.points[n.points.length-1])),t.point=n.points[n.points.length-1]}}function nr(e,t){for(var i=0;i<e.segments.length;i++)for(var n=e.segments[i],r=0;r<n.points.length;r++)(r>0||0===i)&&t.push(n.points[r]);return t}function rr(e,t,i,n){var r,o={x:0,y:0},a=Qn(e,e.corners,e.bounds),s=t.margin,l=t.point;if(a.bottomCenter.y+s.bottom<l.y)r="Bottom",o=a.bottomCenter;else if(a.topCenter.y-s.top>l.y)r="Top",o=a.topCenter;else if(a.middleLeft.x-s.left>l.x)r="Left",o=a.middleLeft;else if(a.middleRight.x+s.right<l.x)r="Right",o=a.middleRight;else{var c=Math.abs(l.y-a.topCenter.y),h=Math.abs(l.x-a.middleRight.x),d=Math.abs(l.y-a.bottomCenter.y),p=Math.abs(l.x-a.middleLeft.x),u=Number.MAX_VALUE;u=c,r="Top",o=a.topCenter,u>h&&(u=h,r="Right",o=a.middleRight),u>d&&(u=d,r="Bottom",o=a.bottomCenter),u>p&&(r="Left",o=a.middleLeft)}i.point=o,i.direction=r;var f=ar(a,xr(i.direction));i.point=lr(n,e,i.point,f,e===n.targetWrapper)}function or(e,t){var i={x:t.x,y:e.y},n=(ni.findLength(e,i),ni.findLength(i,t)),r=ni.findLength(t,e),o=Math.asin(n/r);return o=180*o/Math.PI,e.x<t.x?e.y>t.y&&(o=360-o):o=e.y<t.y?180-o:180+o,o}function ar(e,t){var i;switch(t){case"Left":i=e.middleLeft;break;case"Top":i=e.topCenter;break;case"Right":i=e.middleRight;break;case"Bottom":i=e.bottomCenter}return i}function sr(e,t,i){return ni.transform(e,i,t)}function lr(e,t,i,n,r){i={x:i.x,y:i.y},n={x:n.x,y:n.y};var o,a,s,l=ni.findAngle(n,i),c=r?e.targetWrapper:e.sourceWrapper,h=r?e.targetPadding:e.sourcePadding,d=r||"Orthogonal"===e.type?i:n;ni.transform(i,l,Math.max(c.actualSize.height/2,c.actualSize.width/2));o=c;var p=Hh(-c.parentTransform,c.offsetX,c.offsetY,i),u=Hh(-c.parentTransform,c.offsetX,c.offsetY,n);if("Orthogonal"===e.type){p.x===u.x&&(p.y<u.y?p.y-=5:p.y+=5),p.y===u.y&&(p.x<u.x?p.x-=5:p.x+=5),i=Hh(c.parentTransform,c.offsetX,c.offsetY,p)}else{r?ni.findAngle(i,n):ni.findAngle(n,i);if(r){var f=ni.findAngle(i,n);n=ni.transform({x:n.x,y:n.y},f,Math.max(c.actualSize.width,c.actualSize.height))}else{var g=ni.findAngle(n,i);i=ni.transform({x:i.x,y:i.y},g,Math.max(c.actualSize.width,c.actualSize.height))}}c instanceof yn&&c.data?(s=o.getPoints(),o.data.split("m").length-1+(o.data.split("M").length-1)===1&&(s[s.length]=s[0])):((e.sourcePadding||e.targetPadding)&&(a=new mi(c.bounds.x-h,c.bounds.y-h,c.actualSize.width+2*h,c.actualSize.height+2*h)),(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:cl(c,c.corners))[s.length]=s[0]);s.length;return hr({x1:i.x,y1:i.y,x2:n.x,y2:n.y},s,!0,d)||i}function cr(e,t,i){return t.x=Math.round(100*t.x)/100,t.y=Math.round(100*t.y)/100,i?e.targetPoint=t:e.sourcePoint=t,t}function hr(e,t,i,n){var r,o=t.length,a={x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y},s=dr(e,a);if(s&&(r=ni.distancePoints(s,n)),isNaN(r)||r>0)for(var l=1;l<o-1;l++){var c=dr(e,a={x1:t[l].x,y1:t[l].y,x2:t[l+1].x,y2:t[l+1].y});if(c){var h=ni.distancePoints(c,n);if((isNaN(r)||r>h)&&(r=h,s=c),r>=0&&r<=1)break}}return s}function dr(e,t){var i,n,r,o,a,s,l,c,h,d,p,u,f,g=e.x1,m=e.y1,y=e.x2,v=e.y2,b=t.x1,w=t.y1,x=t.x2,S=t.y2;return d=(i=v-m)*x+(r=g-y)*S+(a=y*m-g*v),0!==(h=i*b+r*w+a)&&0!==d&&pr(h,d)?null:(c=(n=S-w)*y+(o=b-x)*v+(s=x*w-b*S),0!==(l=n*g+o*m+s)&&0!==c&&pr(l,c)?null:0===(p=i*o-n*r)?null:(u=p<0?-p/2:p/2,u=0,{x:(f=r*s-o*a)<0?(f-u)/p:(f+u)/p,y:(f=n*a-i*s)<0?(f-u)/p:(f+u)/p}))}function pr(e,t){return e*t>=0}function ur(e,t,i){switch(t.direction){case"Left":t.point.x>e.left&&(i=t.point.x-e.left>i?t.point.x-e.left+i:i);break;case"Right":t.point.x<e.right&&(i=e.right-t.point.x>i?e.right-t.point.x+i:i);break;case"Top":t.point.y>e.top&&(i=t.point.y-e.top>i?t.point.y-e.top+i:i);break;case"Bottom":t.point.y<e.bottom&&(i=e.bottom-t.point.y>i?e.bottom-t.point.y+i:i)}return i}function fr(e,t){var i;switch(e.direction){case"Left":case"Right":var n={x:t.point.x,y:e.point.y};i=ni.equals(e.point,n)||ni.equals(t.point,n)?[e.point,t.point]:[e.point,n,t.point];break;case"Top":case"Bottom":var r={x:e.point.x,y:t.point.y};i=ni.equals(e.point,r)||ni.equals(t.point,r)?[e.point,t.point]:[e.point,r,t.point]}return i}function gr(e,t,i,n,r){n||(n=20);var o,a,s,l=e.sourcePortWrapper,c=i.point.x-t.point.x,h=i.point.y-t.point.y;if(!r&&(Math.abs(c)<.001||Math.abs(h)<.001)&&void 0===i.direction)return[t.point,i.point];if(void 0===e.targetWrapper&&Math.abs(c)<=31&&Math.abs(h)<=31){if("Left"===t.direction||"Right"===t.direction?Math.abs(h)<12&&(t.direction=t.point.y>i.point.y?"Top":"Bottom"):Math.abs(c)<12&&(t.direction=t.point.x>i.point.x?"Left":"Right"),Math.abs(c)>12||Math.abs(h)>12)return fr(t,i);n+=5}return"Left"===t.direction||"Right"===t.direction?("Right"===t.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(t.point.x,i.point.x)-t.point.x+n),t.point.x>i.point.x&&void 0===l&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=t.point.x-Math.min(t.point.x,i.point.x)+n),(t.point.x>i.point.x||void 0!==l||"Left"===t.direction)&&(n=-n)),s=i.point.y-t.point.y,o=sr(t.point,n,0),0!==(s=i.point.y-o.y)&&(a=sr(o,i.point.y-o.y,90))):"Top"!==t.direction&&"Bottom"!==t.direction||("Bottom"===t.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(t.point.y,i.point.y)-t.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=t.point.y-Math.min(t.point.y,i.point.y)+n),(t.point.y>i.point.y||void 0!==l||"Top"===t.direction)&&(n=-n)),s=i.point.x-t.point.x,o=(t.direction,sr(t.point,n,90)),0!==(s=i.point.x-o.x)&&(a=sr(o,i.point.x-o.x,0))),0===s?[t.point,i.point]:[t.point,o,a,i.point]}function mr(e,t,i,n,r){var o;switch(void 0===r&&(r=20),void 0===i?(e.margin={left:2,right:2,top:2,bottom:2},t.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===e.direction?t.corners.top>e.corners.bottom&&t.corners.top-e.corners.bottom<20&&(r=(t.corners.top-e.corners.bottom)/2):"Top"===e.direction?t.corners.bottom<e.corners.top&&e.corners.top-t.corners.bottom<20&&(r=(e.corners.top-t.corners.bottom)/2):"Right"===e.direction?t.corners.left>e.corners.right&&t.corners.left-e.corners.right<20&&(r=(t.corners.left-e.corners.right)/2):"Left"===e.direction&&t.corners.right<e.corners.left&&e.corners.left-t.corners.right<20&&(r=(e.corners.left-t.corners.right)/2),e.direction){case"Left":r=function(e,t,i,n){e.corners.left-e.margin.left>t.corners.left-t.margin.left&&e.corners.left-e.margin.left<=t.corners.right+t.margin.right?("Bottom"===t.direction&&e.point.y<t.point.y?n+=e.corners.left-t.corners.left:"Top"===t.direction&&e.point.y>t.point.y&&(n+=e.corners.left-t.corners.left),n+=e.point.x-e.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===t.direction&&e.point.y<t.point.y?n+=Math.abs(e.point.x-t.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===t.direction&&t.point.y<e.point.y?n+=Math.abs(e.point.x-t.corners.right):n+=e.point.x-e.corners.left;return n}(e,t,i,r),o=sr(e.point,r,180);break;case"Right":r=function(e,t,i,n){e.corners.right+e.margin.right<t.corners.right+t.margin.right&&e.corners.right+e.margin.right>=t.corners.left-t.margin.left?("Bottom"===t.direction&&e.point.y<t.point.y?i+=t.corners.right-e.corners.right:"Top"===t.direction&&e.point.y>t.point.y&&(i+=t.corners.right-e.corners.right),i+=e.corners.right-e.point.x):void 0!==n&&"Top"!==n&&"Bottom"===t.direction&&e.point.y<t.point.y?i+=Math.abs(e.point.x-t.corners.right):void 0!==n&&"Bottom"!==n&&"Top"===t.direction&&t.point.y<e.point.y?i+=Math.abs(e.point.x-t.corners.right):i+=e.corners.right-e.point.x;return i}(e,t,r,i),o=sr(e.point,r,0);break;case"Top":r=function(e,t,i,n){e.corners.top-e.margin.top>t.corners.top+t.margin.top&&e.corners.top-e.margin.top<=t.corners.bottom+t.margin.bottom?("Right"===t.direction&&e.point.x<t.point.x?n+=e.corners.top-t.corners.top:"Left"===t.direction&&e.point.x>t.point.x&&(n+=e.corners.top-t.corners.top),n+=e.point.y-e.corners.top):void 0!==i&&"Left"!==i&&"Right"===t.direction&&e.point.x<t.point.x?n+=Math.abs(e.point.y-t.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===t.direction&&t.point.x<e.point.x?n+=Math.abs(e.point.y-t.corners.bottom):n+=e.point.y-e.corners.top;return n}(e,t,i,r),o=sr(e.point,r,270);break;case"Bottom":r=function(e,t,i,n){e.corners.bottom+e.margin.bottom<t.corners.bottom+t.margin.bottom&&e.corners.bottom+e.margin.bottom>=t.corners.top-t.margin.top?("Right"===t.direction&&e.point.x<t.point.x?i+=t.corners.bottom-e.corners.bottom:"Left"===t.direction&&e.point.x>t.point.x&&(i+=t.corners.bottom-e.corners.bottom),i+=e.corners.bottom-e.point.y):void 0!==n&&"Left"!==n&&"Right"===t.direction&&e.point.x<t.point.x?i+=Math.abs(e.point.y-t.corners.bottom):void 0!==n&&"Right"!==n&&"Left"===t.direction&&t.point.x<e.point.x?i+=Math.abs(e.point.y-t.corners.bottom):i+=e.corners.bottom-e.point.y;return i}(e,t,r,i),o=sr(e.point,r,90)}return void 0!==n?n.push(o):n=[e.point,o],"Top"===e.direction||"Bottom"===e.direction?yr(o,"horizontal",e,t,n):"Right"!==e.direction&&"Left"!==e.direction||yr(o,"vertical",e,t,n),n}function yr(e,t,i,n,r){var o,a,s;"horizontal"===t?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===t&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var l=20;if("horizontal"===t){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){var c=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);l=i.corners.right-e.x+c}else l="Top"===i.direction&&e.y>n.point.y||"Bottom"===i.direction&&e.y<n.point.y?Math.min(n.corners.left,e.x)-e.x-20:e.x>=i.corners.left-i.margin.left&&e.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-e.x-20:n.corners.left-e.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-n.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){c=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);l=i.corners.left-e.x-c}else l="Top"===i.direction&&e.y>n.point.y||"Bottom"===i.direction&&e.y<n.point.y?Math.max(n.corners.right,e.x)-e.x+20:e.x>=i.corners.left-i.margin.left&&e.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-e.x+20:n.corners.right-e.x+20}o=sr(e,l,0),a=sr(o,n.point.y-e.y,90),s=n.point}else if("vertical"===t){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){c=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);l=i.corners.bottom-e.y+c}else l="Left"===i.direction&&e.x>n.point.x||"Right"===i.direction&&e.x<n.point.x?Math.min(n.corners.top,e.y)-e.y-20:e.y>=i.corners.top-i.margin.top&&e.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-e.y-20:n.corners.top-e.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-n.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){c=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);l=i.corners.top-e.y-c}else l="Left"===i.direction&&e.x>n.point.x||"Right"===i.direction&&e.x<n.point.x?Math.max(n.corners.bottom,e.y)-e.y+20:e.y>=i.corners.top-i.margin.top&&e.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-e.y+20:n.corners.bottom-e.y+20}o=sr(e,l,90),a=sr(o,n.point.x-e.x,0),s=n.point}r.push(o),r.push(a),r.push(s)}function vr(e,t){var i=e.direction;e.direction=t.direction,t.direction=i;var n=e.point;e.point=t.point,t.point=n;var r=e.corners;e.corners=t.corners,t.corners=r}function br(e,t,i,n){var r=void 0===t?i:t,o=r.topLeft,a=r.topRight,s=r.bottomRight,l=r.bottomLeft,c=r.center,h=or(c,e),d=or(c,s),p=or(c,l),u=or(c,o),f=or(c,a);return h>u&&h<f?"Top":h>=d&&h<p?"Bottom":h>=p&&h<=u?"Left":"Right"}function wr(e){var t;return t=e.wrapper.children[0].bounds,"None"!==e.sourceDecorator.shape&&t.uniteRect(e.wrapper.children[1].bounds),"None"!==e.targetDecorator.shape&&t.uniteRect(e.wrapper.children[2].bounds),t}function xr(e){switch(e){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var Sr,Cr,Pr,Er,Or,Mr,Tr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ar=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tr(t,e),Ar([pe("None")],t.prototype,"shape",void 0),Ar([pe("white")],t.prototype,"fill",void 0),Ar([pe("Auto")],t.prototype,"horizontalAlignment",void 0),Ar([pe("Auto")],t.prototype,"verticalAlignment",void 0),Ar([pe(10)],t.prototype,"width",void 0),Ar([pe(10)],t.prototype,"height",void 0),Ar([ue({x:.5,y:1},ni)],t.prototype,"offset",void 0),Ar([pe("#1a1a1a")],t.prototype,"borderColor",void 0),Ar([pe(1)],t.prototype,"borderWidth",void 0),Ar([ue({},Ki)],t.prototype,"margin",void 0),Ar([pe("")],t.prototype,"pathData",void 0),Ar([pe("")],t.prototype,"content",void 0),Ar([pe(0)],t.prototype,"cornerRadius",void 0),Ar([ue({left:2,right:2,top:2,bottom:2},Ki)],t.prototype,"padding",void 0),t}(ke),Dr=!1;function kr(e,t,i,n,r){if(Cr=i+t==="topright"?void 0:r,Cr=r,Dr=!!n,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),Er=e.ownerDocument,Pr=e;return function(e,t,i){switch(Sr=Pr.getBoundingClientRect(),t+e){case"topcenter":Ir(Fr(),i),Rr(Br(),i);break;case"topright":Ir(Wr(),i),Rr(Br(),i);break;case"centercenter":Ir(Fr(),i),Rr(Hr(),i);break;case"centerright":Ir(Wr(),i),Rr(Hr(),i);break;case"centerleft":Ir(_r(),i),Rr(Hr(),i);break;case"bottomcenter":Ir(Fr(),i),Rr(zr(),i);break;case"bottomright":Ir(Wr(),i),Rr(zr(),i);break;case"bottomleft":Ir(_r(),i),Rr(zr(),i);break;default:case"topleft":Ir(_r(),i),Rr(Br(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Ir(e,t){t.left=e}function Rr(e,t){t.top=e}function Nr(){return Er.documentElement.scrollTop||Er.body.scrollTop}function jr(){return Er.documentElement.scrollLeft||Er.body.scrollLeft}function zr(){return Dr?Sr.bottom:Sr.bottom+Nr()}function Hr(){return Br()+Sr.height/2}function Br(){return Dr?Sr.top:Sr.top+Nr()}function _r(){return Sr.left+jr()}function Wr(){return Sr.right+jr()-(Cr?Cr.width:0)}function Fr(){return _r()+Sr.width/2}function Yr(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(Mr=t,Or=e.ownerDocument,n||(n=kr(e,"left","top")),i.X){var o=Mr?Zr():ao(),a=eo(),s=to(),l=a-n.left,c=n.left+r.width-s;r.width>o?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?a:l>c?s-r.width:a:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var h=Mr?Qr():oo(),d=Jr(),p=io(),u=d-n.top,f=n.top+r.height-p;r.height>h?n.top=u>0&&f<=0?p-r.height:f>0&&u<=0?d:u>f?p-r.height:d:u>0?n.top+=u:f>0&&(n.top-=f)}return n}function Xr(e,t,i,n){void 0===t&&(t=null);var r=kr(e,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];Mr=t,Or=e.ownerDocument;var a=e.getBoundingClientRect(),s=r.top,l=r.left,c=r.left+a.width,h=qr(s,r.top+a.height),d=Gr(l,c);return h.topSide&&o.push("top"),d.rightSide&&o.push("right"),d.leftSide&&o.push("left"),h.bottomSide&&o.push("bottom"),o}function Vr(e,t,i,n,r,o,a,s,l){if(void 0===a&&(a=null),void 0===s&&(s={X:!0,Y:!0}),t&&e&&r&&o&&(s.X||s.Y)){var c={TL:null,TR:null,BL:null,BR:null},h={TL:null,TR:null,BL:null,BR:null},d=e.getBoundingClientRect(),p={posX:r,posY:o,offsetX:i,offsetY:n,position:{left:0,top:0}};Mr=a,Or=t.ownerDocument,function(e,t,i,n,r){i.position=kr(e,i.posX,i.posY,n,r),t.TL=kr(e,"left","top",n,r),t.TR=kr(e,"right","top",n,r),t.BR=kr(e,"left","bottom",n,r),t.BL=kr(e,"right","bottom",n,r)}(t,c,p,l,d),Ur(h,p,d),s.X&&function e(t,i,n,r,o,a){var s=Gr(i.TL.left,i.TR.left);n.TL.left-ro()<=eo()&&(s.leftSide=!1);n.TR.left>=to()&&(s.rightSide=!1);(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&("right"===r.posX?r.posX="left":r.posX="right",r.offsetX=r.offsetX+o.width,r.offsetX=-1*r.offsetX,r.position=kr(t,r.posX,r.posY,!1),Ur(i,r,o),a&&e(t,i,n,r,o,!1))}(t,h,c,p,d,!0),s.Y&&c.TL.top>-1&&function e(t,i,n,r,o,a){var s=qr(i.TL.top,i.BL.top);n.TL.top-no()<=Jr()&&(s.topSide=!1);n.BL.top>=io()&&(s.bottomSide=!1);(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&("top"===r.posY?r.posY="bottom":r.posY="top",r.offsetY=r.offsetY+o.height,r.offsetY=-1*r.offsetY,r.position=kr(t,r.posX,r.posY,!1,o),Ur(i,r,o),a&&e(t,i,n,r,o,!1))}(t,h,c,p,d,!0),function(e,t,i){var n=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=kr(e.offsetParent,"left","top",!1,i);n=o.left,r=o.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,p,d)}}function Ur(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function Gr(e,t){var i=!1,n=!1;return e-ro()<eo()&&(i=!0),t>to()&&(n=!0),{leftSide:i,rightSide:n}}function qr(e,t){var i=!1,n=!1;return e-no()<Jr()&&(i=!0),t>io()&&(n=!0),{topSide:i,bottomSide:n}}function Zr(){return Mr.getBoundingClientRect().width}function Qr(){return Mr.getBoundingClientRect().height}function Kr(){return Mr.getBoundingClientRect().left}function $r(){return Mr.getBoundingClientRect().top}function Jr(){return Mr?$r():0}function eo(){return Mr?Kr():0}function to(){return Mr?ro()+Kr()+Zr():ro()+ao()}function io(){return Mr?no()+$r()+Qr():no()+oo()}function no(){return Or.documentElement.scrollTop||Or.body.scrollTop}function ro(){return Or.documentElement.scrollLeft||Or.body.scrollLeft}function oo(){return window.innerHeight}function ao(){var e=window.innerWidth;return e-(e-(d(document.documentElement)?0:document.documentElement.offsetWidth))}var so=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lo=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},co=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return so(t,e),lo([pe("left")],t.prototype,"X",void 0),lo([pe("top")],t.prototype,"Y",void 0),t}(ke),ho="e-popup",po="e-rtl",uo="e-popup-open",fo="e-popup-close",go=function(e){function t(t,i){return e.call(this,i,t)||this}return so(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":H(this.element,{width:m(e.width)});break;case"height":H(this.element,{height:m(e.height)});break;case"zIndex":H(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove(ho,po),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(ho);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=m(this.width)),"auto"!==this.height&&(e.height=m(this.height)),H(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent(),this.wireEvents()},t.prototype.wireEvents=function(){J.isDevice&&S.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];S.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){J.isDevice&&S.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];S.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||d(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"===typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(d(this.checkGetBoundingClientRect(t))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},o=kr(e),a={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},s={top:r.bottom-a.top,left:r.right-a.left,bottom:a.bottom-r.top,right:a.right-r.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top)&&!(i.bottom>l.bottom)&&!(i.right>l.right)&&!(i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(po):this.element.classList.remove(po)},t.prototype.setContent=function(){d(this.content)||(this.element.innerHTML="","string"===typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,t){d(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"===typeof this.position.X&&"number"===typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"===typeof this.position.X&&"number"===typeof this.position.Y||"number"===typeof this.position.X&&"string"===typeof this.position.Y){var n=this.element.style.display,r=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"===typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(i){n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else e={left:0,top:0};d(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,r){var o=this.checkGetBoundingClientRect(t),a=this.checkGetBoundingClientRect(e);if(d(o)||d(a))return null;var s=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=kr(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(t=t.parentElement),l=function(e,t){var i=!1,n={left:0,top:0},r=e;if(!e||!t)return n;for(d(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=r;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(s,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=a.width/2-o.width/2:l.left+=a.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=a.width-o.width:l.left+=a.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=a.height/2-o.height/2:l.top+=a.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=a.height-o.height:l.top+=a.height}return l.left+=n,l.top+=r,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();Vr(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Xr(this.element,this.viewPortElement).length)if(d(this.viewPortElement)){var t=Yr(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(d(i)||d(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var i=this;if(1e3===this.zIndex||!d(t)){var n=d(t)?this.element:t;this.zIndex=yo(n),H(this.element,{zIndex:this.zIndex})}e=d(e)||"object"!==typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(O([this.element],fo),E([this.element],uo),this.checkCollision(),O([this.element],uo),E([this.element],fo)),d(e)?(O([this.element],fo),E([this.element],uo),this.trigger("open")):(e.begin=function(){i.isDestroyed||(O([i.element],fo),E([i.element],uo))},e.end=function(){i.isDestroyed||i.trigger("open")},new Se(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=d(e)||"object"!==typeof e?this.hideAnimation:e,d(e)?(O([this.element],uo),E([this.element],fo),this.trigger("close")):(e.end=function(){t.isDestroyed||(O([t.element],uo),E([t.element],fo),t.trigger("close"))},new Se(e).animate(this.element))},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),mo(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,d(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},lo([pe("auto")],t.prototype,"height",void 0),lo([pe("auto")],t.prototype,"width",void 0),lo([pe(null)],t.prototype,"content",void 0),lo([pe("container")],t.prototype,"targetType",void 0),lo([pe(null)],t.prototype,"viewPortElement",void 0),lo([pe({X:"none",Y:"none"})],t.prototype,"collision",void 0),lo([pe("")],t.prototype,"relateTo",void 0),lo([ue({},co)],t.prototype,"position",void 0),lo([pe(0)],t.prototype,"offsetX",void 0),lo([pe(0)],t.prototype,"offsetY",void 0),lo([pe(1e3)],t.prototype,"zIndex",void 0),lo([pe(!1)],t.prototype,"enableRtl",void 0),lo([pe("reposition")],t.prototype,"actionOnScroll",void 0),lo([pe(null)],t.prototype,"showAnimation",void 0),lo([pe(null)],t.prototype,"hideAnimation",void 0),lo([ye()],t.prototype,"open",void 0),lo([ye()],t.prototype,"close",void 0),lo([ye()],t.prototype,"targetExitViewport",void 0),t=lo([ve],t)}(lt);function mo(e,t){for(var i=getComputedStyle(e),n=[],r=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var a=getComputedStyle(o);"absolute"===i.position&&"static"===a.position||!r.test(a.overflow+a.overflowY+a.overflowX)||n.push(o),o=o.parentElement}return t||n.push(document),n}function yo(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),t=t.parentElement}for(var o=[],a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){n=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&o.push(n)}o.push("999");var s=[];if(!d(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(a=0;a<l.length;a++){n=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&s.push(n)}}var c=i.concat(o,s),h=Math.max.apply(Math,c)+1;return h>2147483647?2147483647:h}var vo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bo=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},wo="e-tooltip",xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vo(t,e),bo([pe({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),bo([pe({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(ke),So=function(e){function t(t,i){return e.call(this,t,i)||this}return vo(t,e),t.prototype.initialize=function(){this.formatPosition(),E([this.element],wo)},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:"e-arrow-tip "+this.tipClass});e.appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new go(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="none";var t=kr(e,this.tooltipPositionX,this.tooltipPositionY);this.tooltipEle.style.display="";var i=this.calculateTooltipOffset(this.position);return this.collisionFlipFit(e,t.left+i.left,t.top+i.top)},t.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()},t.prototype.openPopupHandler=function(){this.needTemplateReposition()&&!this.mouseTrail&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){$t(this.element.id+"content"),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),o=r?r.offsetWidth:0,a=r?r.offsetHeight:0,s=this.showTipPointer?0:8,l=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(s+=2),e){case"RightTop":t.left+=o+s,t.top-=n-l;break;case"RightCenter":t.left+=o+s,t.top-=n/2;break;case"RightBottom":t.left+=o+s,t.top-=l;break;case"BottomRight":t.top+=a+s,t.left-=c;break;case"BottomCenter":t.top+=a+s,t.left-=i/2;break;case"BottomLeft":t.top+=a+s,t.left-=i-c;break;case"LeftBottom":t.left-=o+i+s,t.top-=l;break;case"LeftCenter":t.left-=o+i+s,t.top-=n/2;break;case"LeftTop":t.left-=o+i+s,t.top-=n-l;break;case"TopLeft":t.top-=n+a+s,t.left-=i-c;break;case"TopRight":t.top-=n+a+s,t.left-=c;break;default:t.top-=n+a+s,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");O(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),E(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,i,n){if(!1!==this.showTipPointer){var r,o;this.updateTipPosition(t);var a,s=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,c=this.tooltipEle.querySelector(".e-arrow-tip"),h=this.tooltipEle.querySelector(".e-arrow-tip-inner"),d=c.offsetWidth,p=c.offsetHeight;if("e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass)"e-tip-bottom"===this.tipClass?(o="99.9%",h.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",h.style.top="-"+(p-6)+"px"),r=(a="Center"!==i||s>e.offsetWidth||this.mouseTrail)&&"Left"===i||!a&&"End"===this.tipPointerPosition?s-d-2+"px":a&&"Right"===i||!a&&"Start"===this.tipPointerPosition?"2px":s/2-d/2+"px";else"e-tip-right"===this.tipClass?(r="99.9%",h.style.left="-"+(d-2)+"px"):(r=-(d-1)+"px",h.style.left=d-2-d+"px"),o=(a="Center"!==n||l>e.offsetHeight||this.mouseTrail)&&"Top"===n||!a&&"End"===this.tipPointerPosition?l-p-2+"px":a&&"Bottom"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-p/2+"px";c.style.top=o,c.style.left=r}},t.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");if(e&&!d(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),d(this.content))e&&!d(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"===typeof this.content&&this.content.indexOf("<div>Blazor")<0)t.innerHTML=this.content;else{L(Qt(this.content)({},null,null,this.element.id+"content"),t),"string"===typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Kt(this.element.id+"content","Content",this))}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),S.add(e,J.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),R(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var r=i.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;if(!this.isSticky){this.autoCloseTimer=setTimeout(function(){t.close()},1500)}},t.prototype.targetClick=function(e){var t;d(t=this.target?z(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(!d(t=this.target?z(e.target,this.target):this.element)&&null===t.getAttribute("data-tooltip-id")){for(var i=0,n=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));i<n.length;i++){var r=n[i];this.restoreElement(r)}this.showTooltip(t,this.animation.open,e),this.wireMouseEvents(e,t)}},t.prototype.showTooltip=function(e,t,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs=i?{type:i.type,cancel:!1,target:e,event:i,element:this.tooltipEle}:{type:null,cancel:!1,target:e,event:null,element:this.tooltipEle},this.trigger("beforeRender",this.tooltipEventArgs,function(r){if(r.cancel)n.isHidden=!0,n.clear();else{n.isHidden=!1,d(n.tooltipEle)?(n.ctrlId=n.element.getAttribute("id")?u(n.element.getAttribute("id")):u("tooltip"),n.tooltipEle=n.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:n.ctrlId+"_content"},styles:"width:"+m(n.width)+";height:"+m(n.height)+";position:absolute;"}),n.cssClass&&E([n.tooltipEle],n.cssClass.split(" ")),J.isDevice&&E([n.tooltipEle],"e-bigger"),"auto"!==n.width&&(n.tooltipEle.style.maxWidth=m(n.width)),n.tooltipEle.appendChild(n.createElement("div",{className:"e-tip-content"})),document.body.appendChild(n.tooltipEle),n.addDescribedBy(e,n.ctrlId+"_content"),n.renderContent(e),E([n.tooltipEle],"e-popup-open"),n.showTipPointer&&n.renderArrow(),n.renderCloseIcon(),n.renderPopup(e)):(n.adjustArrow(e,n.position,n.tooltipPositionX,n.tooltipPositionY),n.addDescribedBy(e,n.ctrlId+"_content"),n.renderContent(e),Se.stop(n.tooltipEle),n.reposition(e)),O([n.tooltipEle],"e-popup-open"),E([n.tooltipEle],"e-popup-close"),n.tooltipEventArgs=i?{type:i.type,cancel:!1,target:e,event:i,element:n.tooltipEle}:{type:null,cancel:!1,target:e,event:null,element:n.tooltipEle};var o=n;n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none"),n.trigger("beforeOpen",n.tooltipEventArgs,function(i){if(i.cancel)o.isHidden=!0,o.clear(),o.restoreElement(e);else{var n={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeOut"};if("None"===t.effect&&(n=void 0),o.openDelay>0){o.showTimer=setTimeout(function(){o.popupObj&&o.popupObj.show(n,e)},o.openDelay)}else o.popupObj.show(n,e)}})}})},t.prototype.needTemplateReposition=function(){return!d(this.viewContainerRef)&&"string"!==typeof this.viewContainerRef||y()&&this.isBlazorTemplate},t.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Xr(this.tooltipEle,this.target?this.element:null,t,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var o=kr(e,n.horizontal,n.vertical);this.adjustArrow(e,r,n.horizontal,n.vertical);var a=this.calculateTooltipOffset(r);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=o.left+a.left,n.top=o.top+a.top}else this.adjustArrow(e,r,n.horizontal,n.vertical);var s={left:n.left,top:n.top},l=Yr(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},s).left;if(this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var c=this.tooltipEle.querySelector(".e-arrow-tip"),h=parseInt(c.style.left,10)-(l-n.left);h<0?h=0:h+c.offsetWidth>this.tooltipEle.clientWidth&&(h=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=h.toString()+"px"}return s.left=l,s},t.prototype.hideTooltip=function(e,t,i){var n,r=this;t?(n=this.target?i||t.target:this.element,this.tooltipEventArgs={type:t.type,cancel:!1,target:n,event:t,element:this.tooltipEle}):(n=document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:null,cancel:!1,target:n,event:null,element:this.tooltipEle}),d(n)||this.trigger("beforeClose",this.tooltipEventArgs,function(t){if(t.cancel)r.isHidden=!1;else{r.restoreElement(n),r.isHidden=!0;var i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};if("None"===e.effect&&(i=void 0),r.closeDelay>0){r.hideTimer=setTimeout(function(){r.popupObj&&r.popupObj.hide(i)},r.closeDelay)}else r.popupObj.hide(i)}})},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),d(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(O([this.tooltipEle],"e-popup-close"),E([this.tooltipEle],"e-popup-open")),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&I(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=z(t,".e-tooltip-wrap.e-lib.e-popup");i?(S.add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(e.target)):this.hideTooltip(this.animation.close,e)}else this.hideTooltip(this.animation.close,e)},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),S.remove(this.element,"mouseleave",this.tooltipElementMouseOut)},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),Se.stop(this.tooltipEle),O([this.tooltipEle],"e-popup-close"),E([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),r=t+n.left+this.offsetX,o=i+n.top+this.offsetY,a=this.checkCollision(e.target,r,o);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=s,this.adjustArrow(e.target,a.position,a.horizontal,a.vertical);var l=this.calculateTooltipOffset(a.position);a.left=t+l.left-this.offsetX,a.top=i+l.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===z(e.target,"."+wo)&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&this.close()},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&S.add(this.element,J.touchStartEvent,this.targetClick,this),"Hover"===n&&(J.isDevice?(this.touchModule=new Ot(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),S.add(this.element,J.touchEndEvent,this.touchEndHandler,this)):S.add(this.element,"mouseover",this.targetHover,this))}S.add(document,"touchend",this.touchEnd,this),S.add(document,"scroll",this.scrollHandler,this),S.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=J.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(d(this.target))S.add(this.element,"focus",this.targetHover,this);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];S.add(i,"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&S.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&S.add(t,"mouseleave",this.onMouseOut,this)),this.mouseTrail&&S.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&S.remove(this.element,J.touchStartEvent,this.targetClick),"Hover"===n&&(J.isDevice?(this.touchModule&&this.touchModule.destroy(),S.remove(this.element,J.touchEndEvent,this.touchEndHandler)):S.remove(this.element,"mouseover",this.targetHover))}S.remove(document,"touchend",this.touchEnd),S.remove(document,"scroll",this.scrollHandler),S.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(d(this.target))S.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];S.remove(i,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky)for(var t=0,i=this.getTriggerList(this.opensOn);t<i.length;t++){var n=i[t];"Focus"===n&&S.remove(e,"blur",this.onMouseOut),"Hover"!==n||J.isDevice||S.remove(e,"mouseleave",this.onMouseOut)}this.mouseTrail&&S.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.findTarget(),n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=m(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=m(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var o=this.tooltipEle.querySelector(".e-arrow-tip-inner");o.style.top=o.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var a=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+a).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var s=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+s).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&O([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&E([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?E([this.tooltipEle],"e-rtl"):O([this.tooltipEle],"e-rtl"))}}},t.prototype.open=function(e,t){void 0===t&&(t=this.animation.open),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){void 0===e&&(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),O([this.element],wo),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&I(this.tooltipEle),this.tooltipEle=null,this.popupObj=null},bo([pe("auto")],t.prototype,"width",void 0),bo([pe("auto")],t.prototype,"height",void 0),bo([pe()],t.prototype,"content",void 0),bo([pe()],t.prototype,"target",void 0),bo([pe("TopCenter")],t.prototype,"position",void 0),bo([pe(0)],t.prototype,"offsetX",void 0),bo([pe(0)],t.prototype,"offsetY",void 0),bo([pe(!0)],t.prototype,"showTipPointer",void 0),bo([pe("Auto")],t.prototype,"tipPointerPosition",void 0),bo([pe("Auto")],t.prototype,"opensOn",void 0),bo([pe(!1)],t.prototype,"mouseTrail",void 0),bo([pe(!1)],t.prototype,"isSticky",void 0),bo([ue({},xo)],t.prototype,"animation",void 0),bo([pe(0)],t.prototype,"openDelay",void 0),bo([pe(0)],t.prototype,"closeDelay",void 0),bo([pe()],t.prototype,"cssClass",void 0),bo([ye()],t.prototype,"beforeRender",void 0),bo([ye()],t.prototype,"beforeOpen",void 0),bo([ye()],t.prototype,"afterOpen",void 0),bo([ye()],t.prototype,"beforeClose",void 0),bo([ye()],t.prototype,"afterClose",void 0),bo([ye()],t.prototype,"beforeCollision",void 0),bo([ye()],t.prototype,"created",void 0),bo([ye()],t.prototype,"destroyed",void 0),t=bo([ve],t)}(lt),Co=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Po=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Co(t,e),Po([pe("")],t.prototype,"content",void 0),Po([pe("TopLeft")],t.prototype,"position",void 0),Po([pe("Mouse")],t.prototype,"relativeMode",void 0),Po([pe(!0)],t.prototype,"showTipPointer",void 0),Po([pe("auto")],t.prototype,"width",void 0),Po([pe("auto")],t.prototype,"height",void 0),Po([pe("Auto")],t.prototype,"openOn",void 0),Po([pe()],t.prototype,"animation",void 0),t}(ke);function Oo(e){var t=new So;t=Lo(e.tooltip,t);var i=new So(t);return i.beforeCollision=To,i.beforeOpen=Mo,i.cssClass="e-diagram-tooltip",i.opensOn="custom",i.appendTo("#"+e.element.id),i.close(),i}function Mo(e){""!==this.content&&void 0!==this.content||(e.element.style.display="none")}function To(e){e.collidedPosition&&e.collidedPosition!==this.position&&(e.element.style.display="none")}function Ao(e,t){var i=e.tooltipObject;return Lo(t?t.tooltip:e.tooltip,i),i}function Lo(e,t){return e.content?(t.content=e.content,t.position=e.position,t.showTipPointer=e.showTipPointer,t.width=e.width,t.height=e.height,e.animation?t.animation=e.animation:t.animation={close:{effect:"None"}}):t.close(),t}var Do=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ko=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Io=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Do(t,e),ko([pe("")],t.prototype,"id",void 0),ko([pe(-1)],t.prototype,"zIndex",void 0),ko([ue({},Ki)],t.prototype,"margin",void 0),ko([pe(!0)],t.prototype,"visible",void 0),ko([ge([],En)],t.prototype,"ports",void 0),ko([pe(!0)],t.prototype,"isExpanded",void 0),ko([ue({},Eo)],t.prototype,"tooltip",void 0),ko([ue({},Lr)],t.prototype,"expandIcon",void 0),ko([ue({},Lr)],t.prototype,"collapseIcon",void 0),ko([pe(!1)],t.prototype,"excludeFromLayout",void 0),ko([pe()],t.prototype,"addInfo",void 0),ko([pe("None")],t.prototype,"flip",void 0),t}(ke),Ro=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),No=function(e){function t(t,i,n){var r=e.call(this)||this;return r.data="",r.nodeId="",r.annotationId="",r.diagramId="",r.diagramId=i,r.nodeId=t,r.annotationId=n,r}return Ro(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.template=vh(this,!0),this.isDirt=!0},enumerable:!0,configurable:!0}),t}(sn),jo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zo=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ho=function(e){if(e)switch(e.type){case"Bpmn":return Xo;case"UmlActivity":return Yo;case"UmlClassifier":return ia;default:return Fo}return Fo},Bo=function(e){if(e)switch(e.type){case"Straight":return Uo;case"Bezier":return Go;case"Orthogonal":return qo;default:return Uo}},_o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe(10)],t.prototype,"width",void 0),zo([pe(10)],t.prototype,"height",void 0),zo([pe("Arrow")],t.prototype,"shape",void 0),zo([ue({fill:"black",strokeColor:"black",strokeWidth:1},rn)],t.prototype,"style",void 0),zo([ue({x:0,y:.5},ni)],t.prototype,"pivot",void 0),zo([pe("")],t.prototype,"pathData",void 0),t}(ke),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe(0)],t.prototype,"angle",void 0),zo([pe(0)],t.prototype,"distance",void 0),t}(ke),Fo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe("None")],t.prototype,"type",void 0),t}(ke),Yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe("Object")],t.prototype,"flow",void 0),zo([pe(30)],t.prototype,"exceptionFlowHeight",void 0),t}(Fo),Xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe("Sequence")],t.prototype,"flow",void 0),zo([pe("Normal")],t.prototype,"sequence",void 0),zo([pe("Default")],t.prototype,"message",void 0),zo([pe("Default")],t.prototype,"association",void 0),t}(Fo),Vo=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.points=[],o}return jo(t,e),zo([pe("Straight")],t.prototype,"type",void 0),zo([pe(!0)],t.prototype,"allowDrag",void 0),t}(ke),Uo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),t.prototype.getClassName=function(){return"StraightSegment"},zo([ue({x:0,y:0},ni)],t.prototype,"point",void 0),t}(Vo),Go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),t.prototype.getClassName=function(){return"BezierSegment"},zo([ue({x:0,y:0},ni)],t.prototype,"point1",void 0),zo([ue({x:0,y:0},ni)],t.prototype,"point2",void 0),zo([ue({angle:0,distance:0},Wo)],t.prototype,"vector1",void 0),zo([ue({angle:0,distance:0},Wo)],t.prototype,"vector2",void 0),t}(Uo),qo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),t.prototype.getClassName=function(){return"OrthogonalSegment"},zo([pe(null)],t.prototype,"length",void 0),zo([pe(null)],t.prototype,"direction",void 0),t}(Vo);function Zo(e,t,i){var n=e.center,r=i?45:180/(2+2/(e.height/e.width)),o=r,a=180-r,s=a+2*r,l=360-r,c=or(t,n);return c>o&&c<a?"top":c>a&&c<s?"right":c>s&&c<l?"bottom":"left"}function Qo(e){return!e.distance&&!e.angle}function Ko(e,t,i){var n=60,r={x:0,y:0};switch(i||(i=Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(e.y-t.y),n),r={x:e.x,y:e.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(e.x-t.x),n),r={x:e.x+("right"===i?n:-n),y:e.y}}return r}function $o(e,t,i,n,r){var o=0,a=0,s=0,l=0,c=Number((r.distance(t,e)+r.distance(i,t)+r.distance(n,i))/3);if(0!==c)for(var h=0;h<=c;h++){var d=h/c,p=(1-d)*(1-d)*(1-d)*e.x+3*d*(1-d)*(1-d)*t.x+3*d*d*(1-d)*i.x+d*d*d*n.x,u=(1-d)*(1-d)*(1-d)*e.y+3*d*(1-d)*(1-d)*t.y+3*d*d*(1-d)*i.y+d*d*d*n.y;0===h?(o=s=p,a=l=u):(o=Math.min(p,o),a=Math.min(u,a),s=Math.max(p,s),l=Math.max(u,l))}return{x:o,y:a,width:s-o,height:l-a,left:o,top:a,right:o+(s-o),bottom:a+(l-a),center:{x:(o+(s-o))/2,y:(a+(l-a))/2}}}function Jo(e,t,i,n,r,o,a){var s={x:0,y:0},l=o/a,c=(1-l)*(1-l)*(1-l)*t.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*r.x;s.x=c;var h=(1-l)*(1-l)*(1-l)*t.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*r.y;return s.y=h,s}var ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe(!0)],t.prototype,"optional",void 0),zo([pe(void 0)],t.prototype,"lowerBounds",void 0),zo([pe(void 0)],t.prototype,"upperBounds",void 0),t}(ke),ta=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe("OneToOne")],t.prototype,"type",void 0),zo([ue({},ea)],t.prototype,"target",void 0),zo([ue({},ea)],t.prototype,"source",void 0),t}(ke),ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jo(t,e),zo([pe("UmlClassifier")],t.prototype,"type",void 0),zo([pe("Aggregation")],t.prototype,"relationship",void 0),zo([pe("Directional")],t.prototype,"associationType",void 0),zo([ue({},ta)],t.prototype,"multiplicity",void 0),t}(Fo),na=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.parentId="",o.bridges=[],o.status="None",o.shape&&"UmlActivity"===o.shape.type&&$s(n,o),n&&n.shape&&"None"!==n.shape.type&&Js(n,o),o}return jo(t,e),t.prototype.init=function(e){var t;this.id||(this.id=Ch());var i=new un,n=new yn;n.id=this.id+"_path";var r,o=new yn,a=new yn;n=this.getSegmentElement(this,n);var s=[];switch(s=this.getConnectorPoints(this.type),s=this.clipDecorators(this,s),r=mi.toBounds(s),i.width=r.width,i.height=r.height,i.offsetX=r.x+i.pivot.x*r.width,i.offsetY=r.y+i.pivot.y*r.height,this.shape.type){case"Bpmn":switch(this.shape.flow){case"Sequence":t=this.getBpmnSequenceFlow();break;case"Association":(t=new yn).visible=!1,this.getBpmnAssociationFlow();break;case"Message":t=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,t)}break;case"UmlActivity":switch(this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var l=this.intermediatePoints;if("Bezier"===this.type){var c=this.segments[0],h=this.segments[this.segments.length-1];l=[ni.isEmptyPoint(h.point2)?h.bezierPoint2:h.point2,ni.isEmptyPoint(c.point1)?c.bezierPoint1:c.point1]}var d=e.getDescription;this.sourceWrapper&&this.sourceWrapper.style.strokeWidth;if(o=this.getDecoratorElement(s[0],l[1],this.sourceDecorator,!0,d),a=this.getDecoratorElement(s[s.length-1],l[l.length-2],this.targetDecorator,!1,d),o.id=this.id+"_srcDec",a.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==d){var p=d(this,e);n.description=p||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,o,a],i.id=this.id,void 0!==t&&i.children.push(t),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var u=0;this.annotations,u<this.annotations.length;u++)i.children.push(this.getAnnotationElement(this.annotations[u],this.intermediatePoints,r,d,e.element.id));return this.wrapper=i,i},t.prototype.getConnectorRelation=function(){var e=this.shape;"Association"===e.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Aggregation"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===e.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===e.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var t,i,n,r,o="",a="";e.multiplicity.source&&(e.multiplicity.source.lowerBounds=e.multiplicity.source.lowerBounds,e.multiplicity.source.upperBounds=e.multiplicity.source.upperBounds),e.multiplicity.target&&(e.multiplicity.target.lowerBounds=e.multiplicity.target.lowerBounds,e.multiplicity.target.upperBounds=e.multiplicity.target.upperBounds),i=e.multiplicity.source,n=e.multiplicity.target,r=i.upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,t=n.upperBounds?n.lowerBounds+"..."+n.upperBounds:n.lowerBounds,"ManyToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,o=r||"*",a="1"),"OneToMany"===e.multiplicity.type&&(e.multiplicity.source.optional=!1,a=t||"*",o="1"),"ManyToOne"===e.multiplicity.type&&(o=r||"*",a=t||"*"),"OneToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,e.multiplicity.source.optional=!1,o="1",a="1"),this.annotations=[{id:this.id+"sourcelabel",content:o,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:a,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},t.prototype.getBpmnSequenceFlow=function(){var e=new yn,t=new yn;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){e=this.getSegmentElement(this,e);var i=this.intermediatePoints;t=rc(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",t.id=this.id+this.shape.type),t},t.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var e=0;e<this.annotations.length;e++)this.annotations[e].content="["+this.annotations[e].content+"]"},t.prototype.getUMLExceptionFlow=function(e){this.type="Straight";var t=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,r=i.y-this.sourcePoint.y,o=t/Math.sqrt(n*n+r*r),a={x:i.x-n*o,y:i.y-r*o},s={x:i.x+n*o,y:i.y+r*o},l=vi();xi(l,315,i.x,i.y),this.segments=[];var c=new Uo(this,"segments",{type:"Straight",point:bi(l,s)},!0);this.segments.push(c),c=new Uo(this,"segments",{type:"Straight",point:bi(l,a)},!0),this.segments.push(c),e=this.getSegmentElement(this,e)},t.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"Directional"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Arrow")},t.prototype.getBpmnMessageFlow=function(){var e=new yn;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(e.id=this.id+"_"+this.shape.message,e.width=25,e.height=15,e.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.horizontalAlignment="Center",e.verticalAlignment="Center",e.transform=zi.Self,e.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),e},t.prototype.distance=function(e,t){return ac(e,t)},t.prototype.findPath=function(e,t){return oc(e,t)},t.prototype.getAnnotationElement=function(e,t,i,n,r){var o,a;e.id=e.id||Ch(),r&&e.template?(o=new No(this.id,r,e.id)).content=e.template:((o=new dn).content=e.content,o.style.textOverflow="Wrap"),o.constraints=e.constraints,o.visible=e.visibility,o.rotateAngle=e.rotateAngle,o.horizontalAlignment=e.horizontalAlignment,o.verticalAlignment=e.verticalAlignment,o.width=e.width,o.height=e.height,void 0===i.width||e.template||(o.width=(e.width||i.width)-e.margin.left-e.margin.right),o.margin=e.margin,o.id=this.id+"_"+e.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),o.style=e.style;var s=_h(n);return s&&(a=s(e,this)),o.description=a||o.id,this.updateAnnotation(e,t,i,o),o},t.prototype.updateAnnotation=function(e,t,i,n,r){var o,a,s,l,c,h,d,p,u={x:0,y:0};n instanceof No||r||n.refreshTextElement(),n.width=e.width||i.width,a=(o=ul(t,e,i)).point,e.segmentAngle&&(n.rotateAngle=e.rotateAngle+o.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),h={x:(a.x-i.x)/i.width,y:(a.y-i.y)/i.height},u.x=i.width*h.x,u.y=i.height*h.y,l=(s=ml(e,o.angle,t)).hAlign,c=s.vAlign,"left"===l?(d="Left",u.x+=e.displacement.x):"right"===l?(d="Right",u.x-=e.displacement.x):"center"===l&&(d="Center"),"top"===c?(p="Top",u.y+=e.displacement.y):"bottom"===c?(p="Bottom",u.y-=e.displacement.y):"center"===c&&(p="Center"),n.horizontalAlignment=d,n.verticalAlignment=p,n.setOffsetWithRespectToBounds(u.x,u.y,"Absolute"),n.relativeMode="Point"},t.prototype.getConnectorPoints=function(e,t,i){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);var n=Bn(this,i).slice(0);return n&&n.length>0&&(this.sourcePoint=n[0],this.targetPoint=n[n.length-1]),n},t.prototype.clipDecorator=function(e,t,i){var n,r,o={x:0,y:0},a=t.length;n=i?t[0]:t[a-1],r=i?t[1]:t[a-2];var s=ni.distancePoints(n,r);s=0===s?1:s;var l=1,c=i?e.sourceWrapper:e.targetWrapper;c&&(l=c.style.strokeWidth);var h=l-1;return o.x=Math.round(n.x+h*(r.x-n.x)/s),o.y=Math.round(n.y+h*(r.y-n.y)/s),(i&&"None"!==e.sourceDecorator.shape||!i&&"None"!==e.targetDecorator.shape)&&(o=ni.adjustPoint(o,r,!0,l/2)),o},t.prototype.clipDecorators=function(e,t){return"None"!==e.sourceDecorator.shape&&(t[0]=this.clipDecorator(e,t,!0)),"None"!==e.targetDecorator.shape&&(t[t.length-1]=this.clipDecorator(e,t,!1)),t},t.prototype.updateSegmentElement=function(e,t,i){var n,r=new mi;if(n=this.getSegmentPath(e,t),"Bezier"===e.type){if(this.segments.length>0)for(var o=0;o<this.segments.length;o++){var a=this.segments[o],s=e.segments[o],l=ni.isEmptyPoint(a.point1)?s.bezierPoint1:s.point1,c=ni.isEmptyPoint(a.point2)?s.bezierPoint2:s.point2;r.uniteRect($o(a.points[0],l,c,a.points[1],e))}}else r=mi.toBounds(t);return i.width=r.width,i.height=r.height,i.offsetX=r.x+i.width/2,i.offsetY=r.y+i.height/2,i.data=n,e.wrapper&&(e.wrapper.offsetX=i.offsetX,e.wrapper.offsetY=i.offsetY,e.wrapper.width=r.width,e.wrapper.height=r.height),i},t.prototype.getSegmentElement=function(e,t,i){var n;return tc(e),n=this.getConnectorPoints(e.type,void 0,i),this.intermediatePoints=n,t.staticSize=!0,t=this.updateSegmentElement(e,n,t)},t.prototype.getDecoratorElement=function(e,t,i,n,r){var o=new yn;if(o.transform=zi.Self,this.updateDecoratorElement(o,e,t,i),void 0!==r){var a=r(i,this);o.description=a||"source"}return o},t.prototype.bridgePath=function(e,t,i){var n=t;if(e.bridges.length>0)if("Straight"===e.type&&e.segments.length<2)for(var r=0;r<e.bridges.length;r++){(o=e.bridges[r]).rendered||(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0)}else if("Orthogonal"===e.type||"Straight"===e.type&&e.segments.length>1)for(r=0;r<e.bridges.length;r++){var o;(o=e.bridges[r]).segmentPointIndex===i&&(o.rendered||o.segmentPointIndex===i&&(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0))}return n},t.prototype.updateDecoratorElement=function(e,t,i,n){var r,o;e.offsetX=t.x,e.offsetY=t.y,o=ni.findAngle(t,i),r=In(n.shape,n);var a=new ei(n.width,n.height);e.pivot.x=n.pivot.x,e.pivot.y=n.pivot.y,e.style=n.style,e.rotateAngle=o,e.data=r,e.canMeasurePath=!0,e.width=a.width,e.height=a.height},t.prototype.getSegmentPath=function(e,t){for(var i,n,r,o="",a=[],s=0;s<t.length;)a.push({x:t[s].x,y:t[s].y}),s++;for(var l=0;l<e.bridges.length;l++){e.bridges[l].rendered=!1}if(a=this.clipDecorators(e,a),this.cornerRadius>0&&"Bezier"!==this.type)for(var c=0;c<a.length-1;c++){i=a[c],0===c&&(o="M"+i.x+" "+i.y);var h=ni.distancePoints(a[c],a[c+1]);h>0&&(n=c<a.length-2?h<2*this.cornerRadius?ni.adjustPoint(a[c],a[c+1],!1,h/2):ni.adjustPoint(a[c],a[c+1],!1,this.cornerRadius):a[c+1],c>0&&(h<2*this.cornerRadius?(r=ni.adjustPoint(a[c],a[c+1],!0,h/2),c<a.length-2&&(n=null)):r=ni.adjustPoint(a[c],a[c+1],!0,this.cornerRadius)),r&&(o+="Q"+i.x+" "+i.y+" "+r.x+" "+r.y),n&&(e.bridges.length>0&&(o=this.bridgePath(e,o,c),"Orthogonal"===e.type&&(o=this.bridgePath(e,o,c+1))),o+=" L"+n.x+" "+n.y))}else if("Bezier"===this.type){for(var d=void 0,p=this.segments,u=0;u<p.length;u++)a.length>2&&(p[u].bezierPoint1={x:0,y:0},p[u].bezierPoint2={x:0,y:0}),!ni.isEmptyPoint(p[u].point1)||p[u].vector1.angle||p[u].vector1.distance?p[u].vector1.angle||p[u].vector1.distance?p[u].bezierPoint1=ni.transform(a[u],p[u].vector1.angle,p[u].vector1.distance):p[u].bezierPoint1={x:p[u].point1.x||p[u].bezierPoint1.x,y:p[u].point1.y||p[u].bezierPoint1.y}:((e.sourceID||this.sourcePortID)&&this.sourceWrapper&&(d=Zo(this.sourceWrapper.bounds,a[u],!0)),p[u].bezierPoint1=Ko(a[u],a[u+1],d)),!ni.isEmptyPoint(p[u].point2)||p[u].vector2.angle||p[u].vector2.distance?p[u].vector2.angle||p[u].vector2.distance?p[u].bezierPoint2=ni.transform(a[u+1],p[u].vector2.angle,p[u].vector2.distance):p[u].bezierPoint2={x:p[u].point2.x||p[u].bezierPoint2.x,y:p[u].point2.y||p[u].bezierPoint2.y}:((e.targetID||this.targetPortID)&&this.targetWrapper&&(d=Zo(this.targetWrapper.bounds,a[u+1],!0)),p[u].bezierPoint2=Ko(a[u+1],a[u],d));a.splice(1,0,{x:p[0].bezierPoint1.x,y:p[0].bezierPoint1.y}),a.splice(a.length-1,0,{x:p[p.length-1].bezierPoint2.x,y:p[p.length-1].bezierPoint2.y}),a=this.clipDecorators(e,a);for(var f=0;f<p.length;f++){0===f&&(o="M"+a[0].x+" "+a[0].y);var g=f===p.length-1?a[a.length-1].x+" "+a[a.length-1].y:p[f].points[p[f].points.length-1].x+" "+p[f].points[p[f].points.length-1].y;o+="C"+p[f].bezierPoint1.x+" "+p[f].bezierPoint1.y+" "+p[f].bezierPoint2.x+" "+p[f].bezierPoint2.y+" "+g}}else for(var m=0;m<a.length;m++)i=a[m],0===m&&(o="M"+i.x+" "+i.y),m>0&&(o=this.bridgePath(e,o,m),o+=" L"+i.x+" "+i.y);return o},t.prototype.updateShapeElement=function(e){var t;switch(e.shape.type){case"Bpmn":e.wrapper.children[3]instanceof yn&&(t=e.wrapper.children[3]),"Message"===e.shape.flow&&this.updateShapePosition(e,t);break;case"UmlActivity":"Exception"===e.shape.flow&&this.getUMLExceptionFlow(e.wrapper.children[0])}},t.prototype.updateShapePosition=function(e,t){for(var i,n,r=0,o=this.intermediatePoints,a=0;a<o.length-1;a++){var s=.5*(r+=this.distance(o[a],o[a+1]));r>=s&&(i=or(o[a],o[a+1]),n=ni.transform(o[a],i,s))}t.offsetX=n.x,t.offsetY=n.y},t.prototype.scale=function(e,t,i,n,r){var o=0,a=0;if(this.wrapper&&this.wrapper.outerBounds){var s=wr(this),l=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,c=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;o=s.width-l,a=s.height-c,e=(i-Math.max(o,a))/l,t=(n-Math.max(o,a))/c,o=a=Math.min(o,a)}e=t=Math.min(e,t);var h=vi();xi(h,-(r=r||this.wrapper).rotateAngle,r.offsetX,r.offsetY),Si(h,e,t,r.offsetX,r.offsetY),xi(h,r.rotateAngle,r.offsetX,r.offsetY);var d=wi(h,this.intermediatePoints);return this.sourcePoint=d[0],this.targetPoint=d[d.length-1],jl(this,d=this.intermediatePoints=Bn(this)),{x:o,y:a}},t.prototype.getClassName=function(){return"Connector"},zo([fe(Ho)],t.prototype,"shape",void 0),zo([pe(Li.Default)],t.prototype,"constraints",void 0),zo([pe(10)],t.prototype,"bridgeSpace",void 0),zo([ge([],Dn)],t.prototype,"annotations",void 0),zo([ue({},ni)],t.prototype,"sourcePoint",void 0),zo([ue({},ni)],t.prototype,"targetPoint",void 0),zo([me(Bo)],t.prototype,"segments",void 0),zo([pe("")],t.prototype,"sourceID",void 0),zo([pe("")],t.prototype,"targetID",void 0),zo([pe(10)],t.prototype,"hitPadding",void 0),zo([pe("Straight")],t.prototype,"type",void 0),zo([pe(0)],t.prototype,"cornerRadius",void 0),zo([ue({shape:"None"},_o)],t.prototype,"sourceDecorator",void 0),zo([ue({shape:"Arrow"},_o)],t.prototype,"targetDecorator",void 0),zo([ue({},Eo)],t.prototype,"tooltip",void 0),zo([pe("")],t.prototype,"sourcePortID",void 0),zo([pe("")],t.prototype,"targetPortID",void 0),zo([pe(0)],t.prototype,"sourcePadding",void 0),zo([pe(0)],t.prototype,"targetPadding",void 0),zo([ue({strokeWidth:1,strokeColor:"black"},on)],t.prototype,"style",void 0),zo([pe(null)],t.prototype,"wrapper",void 0),t}(Io),ra=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oa=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},aa=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.offset=0,n.scale=1,n}return ra(t,e),t.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},t.prototype.getModuleName=function(){return"Ruler"},t.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},t.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},t.prototype.renderRulerSpace=function(){var e=this.getRulerGeometry(),t=document.getElementById(this.element.id+"_ruler_space");return t||(t=ph("div",{id:this.element.id+"_ruler_space",style:"height:"+e.height+"px;width:"+e.width+"px;cssFloat:left;"}),this.element.appendChild(t)),t},t.prototype.updateRuler=function(){var e=this.getRulerSize(),t=this.getRulerGeometry(),i=0,n=0,r=new ei,o=this.getRulerSVG(t);if(o&&(i=this.length,r.height=e,n=this.offset,i&&i!==1/0)){var a=i+this.segmentWidth,s=n;this.updateSegments(s,a+Math.abs(s),o,e)}},t.prototype.updateSegments=function(e,t,i,n){for(var r=e,o={trans:0};r<t;){var a=this.getNewSegment(r,i);a&&(i.appendChild(a.segment),r=this.updateSegment(e,t,a,r,o,n))}},t.prototype.updateSegment=function(e,t,i,n,r,o){var a=this.updateSegmentWidth(this.scale);n===e?(this.startValue=Math.floor(e/a)*a/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=e-n:this.vRulerOffset=e-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,o);var s="Horizontal"===this.orientation?r.trans+.5+",0.5":"0.5,"+(r.trans+.5);return i.segment.setAttribute("transform","translate("+s+")"),r.trans+=a,n+=a},t.prototype.updateTickLabel=function(e,t){var i=e.segment.lastChild.getBBox(),n="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,o=n?2:0,a=n?r?t/2+5.5-5.5:t/2+5.5:i.height,s=r?-(i.width+2)+","+(t/2-i.height):-(i.width+2)+","+(t/2-i.height/2),l=n?{x:o,y:a}:{x:o,y:a,transform:"rotate(270)translate("+s+")"};bh(e.segment.lastChild,l)},t.prototype.getNewSegment=function(e,t){var i=this.createNewTicks(e,t);return{segment:i,label:this.createTickLabel(t,i)}},t.prototype.createNewTicks=function(e,t){var i,n,r,o=this.updateSegmentWidth(this.scale);r=uh("g",{class:"e-ruler-segment"});for(var a=0;a<this.interval;a++)n=o/this.interval,i=this.createTick(t,n,a+1,e),r.appendChild(i);return r},t.prototype.getLinePoint=function(e,t,i){var n=this.updateSegmentWidth(this.scale),r=this.getRulerSize();return i=(t*=i-1)%n===0?r:.3*r},t.prototype.createTick=function(e,t,i,n){var r,o,a=this.getLinePoint(e,t,i),s=this.getRulerSize(),l="Horizontal"===this.orientation,c="RightOrBottom"===this.tickAlignment,h=_h(this.arrangeTick);o={ruler:void 0,tickLength:a,tickInterval:this.segmentWidth/this.interval*(i-1)},h&&h(o),a=o.tickLength;var d=t*(i-1);return(r=uh("line",{x1:l?d:c?s:0,y1:l?c?s:s-(s-a):d,x2:l?d:c?s-a:s-(s-a),y2:l?c?s-a:0:d,"stroke-width":"1",stroke:"black"})).setAttribute("class","e-ruler-tick"),r},t.prototype.createTickLabel=function(e,t){var i;if(t){i=uh("text",{class:"e-ruler-tick-label"}),t.appendChild(i)}return i},t.prototype.updateSegmentWidth=function(e){if(100!==this.segmentWidth)return this.segmentWidth;var t,i=1;for(t=100,t=100/Math.pow(2,Math.round(Math.log(e)/Math.log(2)));t>100;)i/=10,t/=10;for(;t<25;)i*=10,t*=10;return t>=25&&t%25!==0&&(t=25*Math.round(t/25)),t*e/i},t.prototype.createMarkerLine=function(e,t,i){var n;return t&&((n=e.getElementById(t.id+"_marker"))&&n.parentNode.removeChild(n),n=uh("line",i)),n},t.prototype.drawRulerMarker=function(e,t,i){var n,r,o,a,s,l,c,h="Horizontal"===this.orientation,d=e.getElementsByTagName("svg");for(s=0;s<d.length;s++){d[s]&&(n=d[s]);break}if(n){r=this.getRulerSize(),l={id:e.id+"_marker",x1:0,y1:0,x2:h?0:r,y2:h?r:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},c=this.createMarkerLine(n,e,l),o=this.scale,a=this.offset-this.defStartValue;var p=(h?t.x:t.y)*o+i+a;c.setAttribute("transform","translate("+(h?p+.5+" 0.5":"0.5 "+(p+.5))+")"),n.appendChild(c)}},t.prototype.getRulerGeometry=function(){return new ei(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},t.prototype.getRulerSize=function(){return this.thickness},t.prototype.getRulerSVG=function(e){var t,i,n=this.getRulerSize();if(this.element&&(t=document.getElementById(this.element.id+"_ruler_space"))){if(i=uh("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?e.width+200:n+"px",height:"Horizontal"===this.orientation?n:e.height+200+"px",style:"position:inherit;"}),t.childNodes.length>0)for(var r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.appendChild(i)}return i},t.prototype.wireEvents=function(){},t.prototype.unWireEvents=function(){},oa([pe(5)],t.prototype,"interval",void 0),oa([pe(100)],t.prototype,"segmentWidth",void 0),oa([pe("Horizontal")],t.prototype,"orientation",void 0),oa([pe("RightOrBottom")],t.prototype,"tickAlignment",void 0),oa([pe("red")],t.prototype,"markerColor",void 0),oa([pe(25)],t.prototype,"thickness",void 0),oa([pe(null)],t.prototype,"arrangeTick",void 0),oa([pe(400)],t.prototype,"length",void 0),t}(lt);function sa(e,t){var i=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler")),n=ha(e),r=da(e),o=t?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!i){var a="height:"+(t?n.height:r.height+100)+"px;overflow:hidden;width:"+(t?r.width+100:n.width)+"px;position:absolute;font-size:11px;"+o;i=ph("div",{id:e.element.id+(t?"_hRuler":"_vRuler"),style:a})}e.element.insertBefore(i,e.element.firstChild);var s=t?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler,l=new aa(s);l.orientation=t?"Horizontal":"Vertical",l.length=(t?r.width:r.height)+s.segmentWidth,l.appendTo("#"+e.element.id+(t?"_hRuler":"_vRuler")),t?e.hRuler=l:e.vRuler=l;var c=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler"));t?e.hRuler.element=c:e.vRuler.element=c}function la(e){var t=-e.scroller.horizontalOffset,i=-e.scroller.verticalOffset;e&&e.rulerSettings.showRulers?(e.hRuler.length=0,e.vRuler.length=0,void 0!==t&&e.hRuler.element&&pa(e,e.hRuler,t,!0),void 0!==i&&e.vRuler.element&&pa(e,e.vRuler,i,!1)):ca(e)}function ca(e){yh(e.element.id+"_hRuler"),yh(e.element.id+"_vRuler"),yh(e.element.id+"_overlapRuler")}function ha(e){var t=0,i=0;return e.rulerSettings.showRulers&&(t=e.rulerSettings.horizontalRuler.thickness,i=e.rulerSettings.verticalRuler.thickness),new ei(i,t)}function da(e){var t=ha(e),i=e.scroller.viewPortHeight,n=e.scroller.viewPortWidth;return n<e.element.clientWidth-t.width&&(n=e.element.clientWidth-t.width),i<e.element.clientHeight-t.height&&(i=e.element.clientHeight-t.height),e.hRuler&&e.hRuler.length&&(n=e.hRuler.length),e.vRuler&&e.vRuler.length&&(i=e.vRuler.length),new ei(n,i)}function pa(e,t,i,n){var r=ha(e),o=da(e),a=n?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler;!function(e,t,i){var n=document.getElementById(e.element.id+(i?"_hRuler":"_vRuler")),r=i?e.hRuler:e.vRuler;n&&e&&t&&(n.style.width=(i?t.width+r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:t.height+r.segmentWidth)+"px",(n=document.getElementById(e.element.id+"_overlapRuler"))&&(i?n.style.height=r.thickness+"px":n.style.width=r.thickness+"px"))}(e,o,n),function(e,t,i){var n=document.getElementById(e.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),r=i?e.hRuler:e.vRuler;n&&e&&t&&(n.style.width=(i?t.width+2*r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:t.height+2*r.segmentWidth)+"px")}(e,o,n),t.offset=i,t.scale=e.scroller.currentZoom,t.length=o.width+100,t.arrangeTick=_h(a.arrangeTick),t.dataBind();var s=n?e.hRuler.element:e.vRuler.element;n?s.style.marginLeft=r.width-t.hRulerOffset+"px":s.style.marginTop=r.height-t.vRulerOffset+"px"}function ua(e){if(e){return e instanceof Ln||e instanceof Dn?e.constraints&Di.Select:e instanceof na?e.constraints&Li.Select:e.constraints&ki.Select}return 1}function fa(e){if(e){return e instanceof Ln||e instanceof Dn?e.constraints&Di.Drag:e instanceof na?e.constraints&Li.Drag:e instanceof Zc?1:e.constraints&ki.Drag}return 1}function ga(e){return e.constraints&Li.DragSourceEnd}function ma(e){return e.constraints&Li.DragTargetEnd}function ya(e){return e.constraints&Li.DragSegmentThumb}function va(e){return e instanceof Ln||e instanceof Dn?e.constraints&Di.Rotate:e.constraints&ki.Rotate}function ba(e){return e.constraints&ki.Shadow}function wa(e){return e instanceof Yc&&e.constraints&ki.InConnect?e.constraints&ki.InConnect:0}function xa(e){return e&&e.constraints&&!(e.constraints&Ui.None)&&e.constraints&Ui.InConnect?e.constraints&Ui.InConnect:0}function Sa(e){return e instanceof Yc&&e.constraints&ki.OutConnect?e.constraints&ki.OutConnect:0}function Ca(e){return e&&e.constraints&&!(e.constraints&Ui.None)&&e.constraints&Ui.OutConnect?e.constraints&Ui.OutConnect:0}function Pa(e,t){var i=0;return e instanceof Ln||e instanceof Dn?i=e.constraints&Di.Resize:e&&("SouthEast"===t?i=e.constraints&ki.ResizeSouthEast:"East"===t?i=e.constraints&ki.ResizeEast:"NorthEast"===t?i=e.constraints&ki.ResizeNorthEast:"South"===t?i=e.constraints&ki.ResizeSouth:"North"===t?i=e.constraints&ki.ResizeNorth:"SouthWest"===t?i=e.constraints&ki.ResizeSouthWest:"West"===t?i=e.constraints&ki.ResizeWest:"NorthWest"===t&&(i=e.constraints&ki.ResizeNorthWest)),i}function Ea(e){return e instanceof na?e.constraints&Li.AllowDrop:e.constraints&ki.AllowDrop}function Oa(e){return e.constraints&Ni.Virtualization}function Ma(e){return e.tool&ji.SingleSelect}function Ta(e){return e.tool&ji.ZoomPan}function Aa(e){return e.tool&ji.ContinuousDraw}function La(e){return e.tool&ji.DrawOnce}function Da(e){return e.tool&ji.SingleSelect||e.tool&ji.MultipleSelect}function ka(e){return e.constraints&Ni.UserInteraction}function Ia(e){return e.constraints&Ni.ZoomTextEdit}function Ra(e){return function(e){return e.constraints&Ni.ApiUpdate}(e)||e.diagramActions&Wi.ToolAction}function Na(e,t){return e.constraints&Ui.Draw}function ja(e,t){return e.constraints&Ui.Drag}function za(e){return!(e&Fi.DrawSelectorBorder)}function Ha(e){return!!(e&Fi.PreventRenderSelector)}var Ba=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_a=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ba(t,e),t.prototype.getClassName=function(){return"UserHandle"},_a([pe("")],t.prototype,"name",void 0),_a([pe("")],t.prototype,"pathData",void 0),_a([pe("")],t.prototype,"content",void 0),_a([pe("")],t.prototype,"source",void 0),_a([pe("#000000")],t.prototype,"backgroundColor",void 0),_a([pe("top")],t.prototype,"side",void 0),_a([pe("")],t.prototype,"borderColor",void 0),_a([pe(.5)],t.prototype,"borderWidth",void 0),_a([pe(25)],t.prototype,"size",void 0),_a([pe("white")],t.prototype,"pathColor",void 0),_a([pe(10)],t.prototype,"displacement",void 0),_a([pe(!0)],t.prototype,"visible",void 0),_a([pe(0)],t.prototype,"offset",void 0),_a([ue({},Ki)],t.prototype,"margin",void 0),_a([pe("Center")],t.prototype,"horizontalAlignment",void 0),_a([pe("Center")],t.prototype,"verticalAlignment",void 0),t}(ke);function Fa(e){return Ya[e.toString()]}var Ya={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},Xa=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Va=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ua=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xa(t,e),Va([pe()],t.prototype,"key",void 0),Va([pe()],t.prototype,"keyModifiers",void 0),t}(ke),Ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xa(t,e),t.prototype.getClassName=function(){return"Command"},Va([pe("")],t.prototype,"name",void 0),Va([pe()],t.prototype,"canExecute",void 0),Va([pe()],t.prototype,"execute",void 0),Va([ue({},Ua)],t.prototype,"gesture",void 0),Va([pe("")],t.prototype,"parameter",void 0),t}(ke),qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xa(t,e),Va([ge([],Ga)],t.prototype,"commands",void 0),t}(ke),Za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xa(t,e),Va([pe()],t.prototype,"show",void 0),Va([pe()],t.prototype,"showCustomMenuOnly",void 0),Va([pe()],t.prototype,"items",void 0),t}(ke),Qa=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ka=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childTable=[],t.cellStyle={},t.desiredRowHeight=[],t.desiredCellWidth=[],t}return Qa(t,e),t.prototype.rowDefinitions=function(){return this.rowDefns},t.prototype.columnDefinitions=function(){return this.colDefns},t.prototype.addObject=function(e,t,i,n,r){if(this.rows.length>=t){var o=this.rows[t];if(o.cells.length>i){r=r||1,n=n||1;var a=o.cells[i];a.columnSpan=Math.max(r,a.columnSpan),a.rowSpan=Math.max(n,a.rowSpan);var s=new is;(s=e).rowId=t,s.columnId=i,s.columnSpan=r,this.childTable[s.id]=s,this.addObjectToCell(s,a)}}},t.prototype.addObjectToCell=function(e,t){t.children||(t.children=[]),e.style.strokeColor="black",e.style.strokeWidth=1,e.style.fill="white",t.children.push(e)},t.prototype.updateProperties=function(e,t,i,n){this.offsetX=e,this.offsetY=t,this.width=i,this.height=n},t.prototype.setDefinitions=function(e,t){this.rowDefns=e,this.colDefns=t,this.children=[],this.rows=this.rows||[];for(var i=0;i<e.length;i++){var n=e[i],r=new es;r.cells=[];var o=new Ja;o.width=this.width;var a=this.colDefns;(void 0===a||a.length<1)&&(a=[o]),this.addCellInRow(a,n,r),this.rows.push(r)}},t.prototype.addCellInRow=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n],o=new ts;o.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",o.id=Ch(),o.style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=t.height,i.cells.push(o),this.children.push(o)}},t.prototype.calculateSize=function(){for(var e=this.rows||[],t=0,i=0,n=0;n<e.length;n++){var r=this.rows[n];i=0;for(var o=0;o<r.cells.length;o++)if(i+=r.cells[o].desiredCellWidth,o===r.cells.length-1&&(this.width&&this.width!==i&&(r.cells[o].desiredCellWidth+=this.width-i,r.cells[o].minWidth=r.cells[o].desiredCellWidth,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].width=r.cells[o].desiredCellWidth),this.colDefns[o].width=r.cells[o].desiredCellWidth),t+=r.cells[o].desiredCellHeight,n===e.length-1&&this.height&&this.height!==t)){var a=this.height-t;if(a>0){for(var s=0;s<r.cells.length;s++)r.cells[s].desiredCellHeight+=a,r.cells[s].minHeight=r.cells[s].desiredCellHeight=r.cells[s].desiredCellHeight,r.cells[s].children&&r.cells[s].children.length&&(r.cells[s].children[0].height=r.cells[s].desiredCellHeight);this.rowDefns[n].height+=a}}}},t.prototype.updateRowHeight=function(e,t,i,n){var r=this.rows[e];this.rowDefns[e].height=t,void 0!==this.height&&(this.height+=t-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[o].desiredCellHeight=r.cells[o].minHeight=t,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].height=t,this.setTextRefresh(r.cells[o].children[0]));if(this.desiredRowHeight[e]=t,this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize),i){var a=void 0!==n?this.calculateCellHeightBasedOnChildren(e,n):this.calculateCellHeight(e);a>t&&this.updateRowHeight(e,a,!1)}},t.prototype.setTextRefresh=function(e){if(e.children&&e.children.length)for(var t=e.children,i=0;i<t.length;i++)t[i]instanceof dn&&t[i].refreshTextElement(),t[i]instanceof un&&this.setTextRefresh(t[i])},t.prototype.updateColumnWidth=function(e,t,i,n){this.colDefns[e].width=t,void 0!==this.width&&(this.width+=t-this.rows[this.rows.length-1].cells[e].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[r].cells[0]),this.rows[r].cells[e].desiredCellWidth=this.rows[r].cells[e].minWidth=t,this.rows[r].cells[e].children&&this.rows[r].cells[e].children.length&&(this.rows[r].cells[e].children[0].width=t);if(this.desiredCellWidth[e]=t,this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==n?this.calculateCellWidthBasedOnChildren(e,n):this.calculateCellWidth(e);o>t&&this.updateColumnWidth(e,o,!1)}},t.prototype.calculateCellWidth=function(e){for(var t,i,n,r=0;r<this.rows.length;r++)1===(n=this.rows[r].cells[e]).columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,t=t?t<i?i:t:i);return t},t.prototype.calculateCellHeight=function(e){for(var t,i,n,r=this.rows[e],o=0;o<r.cells.length;o++)i=(n=r.cells[o]).outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,t=t?t<i?i:t:i;return t},t.prototype.calculateCellSizeBasedOnChildren=function(e,t,i,n){var r,o;if((o=e&&e.children.length>0?e.children[0]:void 0)&&1===e.columnSpan){r="Width"===t?o.bounds.right:o.bounds.bottom,n||(n="Width"===t?o.bounds.width:o.bounds.height);for(var a=0;a<o.children.length;a++){var s=o.children[a];if(s instanceof un&&-1===s.id.indexOf("header")){var l=("Width"===t?s.bounds.right:s.bounds.bottom)+i;if(l>r){var c=l-r+("Width"===t?o.bounds.width:o.bounds.height);n&&(n=n<c?c:n)}}}}return n},t.prototype.calculateCellWidthBasedOnChildren=function(e,t){for(var i,n,r=0;r<this.rows.length;r++)n=this.rows[r].cells[e],i=this.calculateCellSizeBasedOnChildren(n,"Width",t,i);return i},t.prototype.calculateCellHeightBasedOnChildren=function(e,t){for(var i,n,r=this.rows[e],o=0;o<r.cells.length;o++)n=r.cells[o],i=this.calculateCellSizeBasedOnChildren(n,"Height",t,i);return i},t.prototype.addRow=function(e,t,i){this.rowDefns.length>0?this.rowDefns.splice(e,0,t):this.rowDefns.push(t);var n=new es;n.cells=[],(new Ja).width=this.width;var r=this.colDefns;this.addCellInRow(r,t,n),e>this.rows.length-1?this.rows.push(n):this.rows.splice(e,0,n),i&&(this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.addColumn=function(e,t,i){var n,r,o,a,s=this.rows;this.colDefns.length>0?this.colDefns.splice(e,0,t):this.colDefns.push(t),void 0!==this.width&&(this.width+=t.width);for(var l=0;l<s.length;l++)n=s[l],r=this.rowDefns[l],o=t,(a=new ts).style=this.cellStyle,a.desiredCellWidth=a.minWidth=o.width,a.desiredCellHeight=a.minHeight=r.height,a.children=[],e>n.cells.length-1?n.cells.push(a):n.cells.splice(e,0,a),this.children.push(a);i&&(this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.removeRow=function(e){var t,i,n=this.rows[e];this.height-=this.rowDefns[e].height;for(var r=0;r<n.cells.length;r++)t=n.cells[r],this.children.splice(this.children.indexOf(t),1),(i=document.getElementById(t.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(e,1),this.rowDefns.splice(e,1),this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.removeColumn=function(e){var t,i,n=this.rows;this.width-=this.colDefns[e].width;for(var r=0;r<n.length;r++)t=n[r].cells[e],this.children.splice(this.children.indexOf(t),1),(i=document.getElementById(t.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i),n[r].cells.splice(e,1);this.colDefns.splice(e,1),this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateRowIndex=function(e,t){this.rows;var i=this.rows[e];this.rows.splice(e,1),this.rows.splice(t,0,i);var n=this.rowDefns[e];this.rowDefns.splice(e,1),this.rowDefns.splice(t,0,n),this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateColumnIndex=function(e,t,i){for(var n,r,o,a=e;a<this.rows.length;a++)n=this.rows[a],r=this.rows[a].cells[t],n.cells.splice(t,1),n.cells.splice(i,0,r);var s=this.colDefns[t];this.colDefns.splice(t,1),this.colDefns.splice(i,0,s),o=this.desiredCellWidth[t],this.desiredCellWidth.splice(t,1),this.desiredCellWidth.splice(i,0,o),this.measure(new ei(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.measure=function(t){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,r=0;i=new ei(0,0),this.calculateSize();for(var o=0,a=this.rows;o<a.length;o++){r=0;for(var s=0,l=(u=a[o]).cells;s<l.length;s++){var c=(y=l[s]).measure(new ei(y.desiredCellWidth,y.desiredCellHeight));1===y.rowSpan&&(0===r||void 0===this.desiredRowHeight[n]?this.desiredRowHeight[n]=c.height:this.desiredRowHeight[n]=Math.max(c.height,this.desiredRowHeight[n])),1===y.columnSpan&&(0===n||void 0===this.desiredCellWidth[r]?this.desiredCellWidth[r]=c.width:this.desiredCellWidth[r]=Math.max(c.width,this.desiredCellWidth[r]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[r])),r++}i.height+=this.desiredRowHeight[n],n++}n=r=0;for(var h=0,d=0,p=this.rows;d<p.length;d++){var u;r=0;for(var f=0,g=0,m=(u=p[d]).cells;g<m.length;g++){var y;if(1!==(y=m[g]).columnSpan){y.desiredSize.width=0;for(var v=0;v<y.columnSpan;v++)v+r<u.cells.length&&(y.desiredSize.width+=this.desiredCellWidth[v+r],y.minWidth=y.desiredSize.width,y.measure(y.desiredSize));r++}else y.desiredSize.width=this.desiredCellWidth[f],y.measure(y.desiredSize);if(1!==y.rowSpan){y.desiredSize.height=0;for(v=0;v<y.rowSpan;v++)v+h<this.rows.length&&(y.desiredSize.height+=this.desiredRowHeight[v+h],y.minHeight=y.desiredSize.height,y.measure(y.desiredSize))}else y.desiredSize.height=this.desiredRowHeight[h],y.measure(y.desiredSize);n++,f++}h++}}return void 0===i&&(i=e.prototype.validateDesiredSize.call(this,i,t)),e.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},t.prototype.arrange=function(e,t){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var r=this.offsetX-e.width*this.pivot.x,o=this.offsetY-e.height*this.pivot.y,a=r,s=0,l=this.rows;s<l.length;s++){a=r,i=0;for(var c=0,h=(f=l[s]).cells;c<h.length;c++){var d=h[c],p=Math.max(this.desiredCellWidth[i],d.desiredSize.width),u=Math.max(this.desiredRowHeight[n],d.desiredSize.height);d.offsetX=a+p*d.pivot.x,d.offsetY=o+u*d.pivot.y,a+=this.desiredCellWidth[i],d.arrange(new ei(p,u)),i++}o+=this.desiredRowHeight[n],n++}if(t){d=void 0;var f=void 0,g=void 0,m=void 0,y=void 0;for(n=0;n<this.rows.length;n++)for(f=this.rows[n],i=0;i<f.cells.length;i++)if((d=f.cells[i]).columnSpan>1&&this.children.splice(this.children.indexOf(d)+1,d.columnSpan-1),d.rowSpan>1)for(g=n,m=0;g+d.rowSpan-1<this.rows.length&&m<d.rowSpan-1;g++,m++)y=this.rows[g+1].cells[i],this.children.splice(this.children.indexOf(y),1)}}return this.actualSize=e,this.updateBounds(),e},t}(cn),$a=function(){return function(){this.height=void 0}}(),Ja=function(){return function(){this.width=void 0}}(),es=function(){return function(){this.cells=null}}(),ts=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnSpan=1,t.rowSpan=1,t}return Qa(t,e),t}(un),is=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowId=0,t.columnId=0,t.rowSpan=1,t.columnSpan=1,t}return Qa(t,e),t}(sn);function ns(e,t,i,n){var r,o=!1;if(ls(e,t,!0)){e.protectPropertyChange(!0);var a=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type){if(n||a.bounds.x<=i.x&&a.bounds.right>=i.x&&a.bounds.y<=i.y&&a.bounds.bottom>=i.y){var s=void 0,l=a.bounds.y,c=a.bounds.x,h=e.nameTable[r.parentId]||r;if("SwimLane"===h.shape.type)o=ps(r,h,t,e,!0);else{var d=e.nameTable[r.parentId]||r,p=d.shape;s=d.wrapper,a.actualSize.width<a.outerBounds.width&&!(a.bounds.x>a.outerBounds.x)&&(void 0!==r.rowIndex?(d.columns.length-1,s.updateColumnWidth(r.columnIndex,a.outerBounds.width,!0),"Horizontal"===p.orientation&&p.phaseSize&&Is(d,e,a,r.columnIndex),Rs(e,d),e.drag(d,c-a.bounds.x,l-a.bounds.y)):e.scale(r,1+(a.outerBounds.width-a.actualSize.width)/a.actualSize.width,1,a.outerBounds.x<a.bounds.x?{x:1,y:.5}:{x:0,y:.5})),a.actualSize.height<a.outerBounds.height&&!(a.bounds.y>a.outerBounds.y)&&(void 0!==r.rowIndex?(s.updateRowHeight(r.rowIndex,a.outerBounds.height,!0),e.drag(d,c-a.bounds.x,l-a.bounds.y)):e.scale(r,1,1+(a.outerBounds.height-a.actualSize.height)/a.actualSize.height,a.outerBounds.y<a.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}e.select([t]),Ts([],e)}e.protectPropertyChange(!1)}return o}function rs(e,t,i,n){var r;if(ls(e,t,!0)){e.protectPropertyChange(!0);var o=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type&&!n&&!(o.bounds.x<=i.x&&o.bounds.right>=i.x&&o.bounds.y<=i.y&&o.bounds.bottom>=i.y)){var a=Oh(t);e.clearSelection(),hs(e,t),t.parentId="";var s={type:"ChildCollectionChanged",category:"Internal",undoObject:a,redoObject:Oh(t)};e.addHistoryEntry(s),e.commandHandler.isContainer&&(e.commandHandler.isContainer=!1,e.endGroupAction())}}}function os(e,t,i){for(var n=new mi,r="SwimLane"===e.shape.type?e.wrapper.children[0].rows:e.wrapper.rows,o=i?1:0;o<r.length;o++)n.uniteRect(r[o].cells[t].bounds);return n}function as(e,t){for(var i,n={},r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];n[a]=t[a]}return ec(t)===Yc&&((i=new Yc(e,"nodes",n,!0)).id=t.id,e.initObject(i)),e.updateDiagramObject(i),i}function ss(e,t){var i,n,r;if(e.selectedObject.helperObject)r=e.selectedObject.helperObject;else if(e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0){if(t instanceof Zc&&t.nodes.length+t.connectors.length===1?(i=t.nodes.length>0?t.nodes[0]:t.connectors[0],n=e.selectedItems.wrapper.children[0]):(i=t,n=e.selectedItems.wrapper),e.selectedObject.actualObject=i,ls(e,i)||e.constraints&Ni.LineRouting&&0===e.selectedItems.connectors.length)r=as(e,{id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),e.selectedObject.helperObject=r}return r}function ls(e,t,i){var n=i?e.nameTable[t.parentId]:e.nameTable[t.parentId]||t;return!(!n||!n.container)}function cs(e,t){var i=e.nameTable[t.parentId];"Canvas"===i.container.type&&(t.margin.left=t.offsetX-i.wrapper.bounds.x-t.width/2,t.margin.top=t.offsetY-i.wrapper.bounds.y-t.height/2),e.nodePropertyChange(t,{},{width:t.width,height:t.height,offsetX:t.offsetX,offsetY:t.offsetY,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},rotateAngle:t.rotateAngle}),i.isLane||(i.wrapper.measure(new ei),i.wrapper.arrange(i.wrapper.desiredSize))}function hs(e,t){if(t.parentId&&""!==t.parentId){var i=e.nameTable[t.parentId];if(i.isLane&&i.parentId)for(var n=e.nameTable[i.parentId],r=i.id.slice(n.id.length),o=r.substring(0,r.length-1),a=n.shape.lanes,s=void 0,l=0;l<a.length;l++)if(o===(s=a[l]).id)for(var c=0;c<s.children.length;c++)s.children[c].id===t.id&&(s.children.splice(c,1),c--);e.deleteChild(t)}}function ds(e,t,i,n,r){if(!e.currentSymbol){e.protectPropertyChange(!0);var o=e.nameTable[t.parentId];i=e.getObject(i.id)||i;var a=-1!==e.nodes.indexOf(i)?i.id:i;if("Canvas"!==t.container.type||r){if(o){var s=o.wrapper.bounds,l=t.wrapper.bounds;if("Horizontal"===o.shape.orientation)i.margin.left-=l.x-s.x;else{var c=t.parentId+o.shape.lanes[0].id+"_0_header";i.margin.top-=l.y-s.y-e.nameTable[c].wrapper.bounds.height}}}else{var h=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(t.wrapper.offsetX-t.wrapper.actualSize.width/2),d=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(t.wrapper.offsetY-t.wrapper.actualSize.height/2);i.margin.left=h,i.margin.top=d}var p=e.nameTable[t.id];if(p.children||(p.children=[]),-1===p.children.indexOf(i.id)){hs(e,i),e.getObject(i.id)&&e.removeElements(i);var u=Oh(i);if(e.addChild(p,a),i=e.getObject(i.id),p.isLane&&p.parentId)for(var f=(o=e.nameTable[p.parentId]).shape.lanes,g=p.id.slice(o.id.length),m=g.substring(0,g.length-1),y=0;y<f.length;y++)p.isLane&&m===f[y].id&&f[y].children.push(i);if(e.updateDiagramObject(i),p.parentId?n||ps(p,o,i,e):e.updateDiagramObject(p),!(e.diagramActions&Wi.UndoRedo)){var v={type:"ChildCollectionChanged",category:"Internal",undoObject:u,redoObject:Oh(i),historyAction:r?"AddNodeToLane":void 0};e.addHistoryEntry(v)}}e.protectPropertyChange(!1)}}function ps(e,t,i,n,r){var o,a=Oh(e),s=!1,l=t.shape.padding,c=e.wrapper.bounds,h=e.wrapper.outerBounds,d=i.wrapper.bounds;if(t&&"SwimLane"===t.shape.type&&(c.right<d.right+l||c.bottom<d.bottom+l)){var p=t.wrapper.children[0],u=p.bounds.x,f=p.bounds.y,g=void 0;if(c.right<d.right+l&&h.x<=c.x&&(g=d.right-c.right,o=!1,p.updateColumnWidth(e.columnIndex,c.width+g,!0,l)),c.bottom<d.bottom+l&&h.y<=c.y&&(g=d.bottom-c.bottom,o=!0,p.updateRowHeight(e.rowIndex,c.height+g,!0,l)),!(n.diagramActions&Wi.UndoRedo)&&(r&&(n.startGroupAction(),s=!0),void 0!==o)){var m={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:a,redoObject:Oh(e)};n.addHistoryEntry(m)}t.width=t.wrapper.width=p.width,t.height=t.wrapper.height=p.height,Ss(t),"Horizontal"===t.shape.orientation&&Is(t,n,e.wrapper,e.columnIndex),Rs(n,t),n.drag(t,u-p.bounds.x,f-p.bounds.y),Ms(t,n),Os(t)}return function(e,t,i){var n=e.nameTable[t.parentId];if(n&&n.isLane){var r=e.nameTable[n.parentId],o=r.wrapper.children[0];r.wrapper.bounds.x,r.wrapper.bounds.y;o.updateColumnWidth(n.columnIndex,o.columnDefinitions()[n.columnIndex].width,!0,i),o.updateRowHeight(n.rowIndex,o.rowDefinitions()[n.rowIndex].height,!0,i);var a=n.wrapper,s=void 0;t.margin.left<i&&(t.margin.left=i),t.margin.top<i&&(t.margin.top=i);for(var l=0;l<a.children.length;l++){var c=a.children[l];if(c instanceof un){var h=e.nameTable[c.id];if(h.isLane){s=h.wrapper,!0;break}}}s&&("Horizontal"===r.shape.orientation?t.margin.left<i+s.actualSize.width&&(t.margin.left=i+s.actualSize.width):t.margin.top<i+s.actualSize.height&&(t.margin.top=i+s.actualSize.height)),r.wrapper.measure(new ei(r.width,r.height)),r.wrapper.arrange(r.wrapper.desiredSize),t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY,e.nodePropertyChange(t,{},{margin:{left:t.margin.left,top:t.margin.top}}),o.measure(new ei(o.width,o.height)),o.arrange(o.desiredSize),r.width=r.wrapper.width=r.wrapper.children[0].actualSize.width,r.height=r.wrapper.height=r.wrapper.children[0].actualSize.height}}(n,i,l),s}function us(e,t,i,n,r,o){var a=nh(n.element.id);n.diagramRenderer.renderStackHighlighter(e,a,n.scroller.transform,t,i,r,o)}function fs(e,t,i,n){var r=e,o=i.nameTable[r.parentId],a=i.nameTable[r.parentId];if(t&&a&&a.container&&"Stack"===a.container.type&&t.container&&"Stack"===t.container.type&&a.id!==t.parentId){var s=a.wrapper.children.indexOf(r.wrapper);s>-1&&(i.nameTable[r.id].parentId=t.id,a.wrapper.children.splice(s,1))}if(t&&t.parentId&&r.parentId&&"Drag"===n&&"Stack"===a.container.type){var l=o.wrapper.children.indexOf(t.wrapper),c=o.wrapper.children.indexOf(r.wrapper),h={targetIndex:l,target:t,sourceIndex:c,source:e};o.wrapper.children.splice(c,1),o.wrapper.children.splice(l,0,r.wrapper);var d={type:"StackChildPositionChanged",redoObject:{targetIndex:c,target:t,sourceIndex:l,source:e},undoObject:h,category:"Internal"};i.commandHandler.addHistoryEntry(d)}}function gs(e,t,i){var n=[],r=[],o=0,a=i.shape,s="Horizontal"===a.orientation;if(a.header&&a.hasHeader&&bs(n,a.header.height),function(e,t,i){var n,r=0,o=i.shape;if(e.length>0)for(var a=0;a<e.length;a++)r+=e[a].height;if(t){if(o.phases.length>0&&o.phaseSize&&(r+=o.phaseSize,bs(e,o.phaseSize)),o.lanes.length>0)for(var a=0;a<o.lanes.length;a++)n=o.lanes[a].height,r+=n,a===o.lanes.length-1&&r<i.height&&(n+=i.height-r),bs(e,n)}else if(o.phases.length>0)for(var s=0,a=0;a<o.phases.length;a++){var l=o.phases[a].offset;s+=0===a?l:l-=s,r+=n=l,a===o.phases.length-1&&r<i.height&&(n+=i.height-r),bs(e,n)}else bs(e,i.height)}(n,s,i),function(e,t,i){var n,r,o,a,s=0,l=i.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(a=0;a<l.phases.length;a++)n=l.phases[a].offset,s+=0===a?n:n-=s,r=ws(n),a===l.phases.length-1&&s<i.width&&(r.width+=i.width-s),e.push(r);else if(t)r=ws(i.width),e.push(r);else for(l.phaseSize&&l.phases.length>0?l.lanes.length+1:l.lanes.length,l.phaseSize&&l.phases.length>0&&(s+=l.phaseSize,r=ws(l.phaseSize),e.push(r)),o=0;o<l.lanes.length;o++)s+=l.lanes[o].width,r=ws(l.lanes[o].width),o===l.lanes.length-1&&s<i.width&&(r.width+=i.width-s),e.push(r)}(r,s,i),e.setDefinitions(n,r),a.header&&a.hasHeader&&(!function(e,t,i){for(var n=0,r=e.columnDefinitions(),o=i.shape,a=0;a<r.length;a++)n+=r[a].width;var s={annotations:[{content:o.header.annotation.content}],style:o.header.style?o.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}},l=ms(t,e,i,s,!0);e.addObject(l,0,0,1,e.columnDefinitions().length)}(e,t,i),o++),a.phases.length>0&&a.phaseSize){for(var l=0;l<a.phases.length;l++)""===a.phases[l].id&&(a.phases[l].id=Ch()),ys(e,t,i,o,s,l);o++}if(a.lanes.length>0)for(l=0;l<a.lanes.length;l++)""===a.lanes[l].id&&(a.lanes[l].id=Ch()),vs(e,t,i,o,l,s),o++}function ms(e,t,i,n,r,o,a,s){var l=new Yc(e,"nodes",n,!0);if(l.parentId=i.id,l.isHeader=!!r,l.isPhase=!!o,l.isLane=!!a,s&&(l[o?"PhaseHeaderParent":"LaneHeaderParent"]=s),l.constraints&=~(ki.InConnect|ki.OutConnect),l.constraints|=ki.HideThumbs,e.initObject(l),e.nodes.push(l),l.wrapper.children.length>0){for(var c=0;c<l.wrapper.children.length;c++){var h=l.wrapper.children[c];h instanceof sn&&(h.isCalculateDesiredSize=!1),h instanceof dn&&(h.canConsiderBounds=!1,(!r&&"Vertical"===i.shape.orientation&&o||"Vertical"!==i.shape.orientation&&a)&&(h.isLaneOrientation=!0,h.refreshTextElement()))}l.wrapper.measure(new ei(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function ys(e,t,i,n,r,o){var a,s=0,l=0,c=i.shape;r?(l=o,s=n,a=e.columnDefinitions()[o].width):s=c.header&&c.hasHeader?o+1:o;var h={annotations:[{content:c.phases[o].header.annotation.content,rotateAngle:r?0:270}],maxWidth:a,id:i.id+c.phases[o].id+"_header",offsetX:i.offsetX,offsetY:i.offsetY,style:c.phases[o].style,rowIndex:s,columnIndex:l,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}};c.phases[o].header.id=h.id;var d=ms(t,0,i,h,!1,!0,!1,c.phases[o].id);e.addObject(d,s,l)}function vs(e,t,i,n,r,o){for(var a,s,l,c,h=i.shape,d=h.phases.length||1,p=h.header&&h.hasHeader?1:0,u=0,f=o?n:p,g=h.phaseSize&&h.phases.length>0?1:0,m=0;m<d;m++)u=o?m:r+g,l=e.rows[f].cells[u],(s=ms(t,0,i,{id:i.id+h.lanes[r].id+m,rowIndex:f,columnIndex:u,width:l.minWidth,height:l.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:h.lanes[r].style,constraints:ki.Default|ki.ReadOnly|ki.AllowDrop,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===m&&(a={id:i.id+h.lanes[r].id+"_"+m+"_header",style:h.lanes[r].header.style,annotations:[{content:h.lanes[r].header.annotation.content,rotateAngle:o?270:0}],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:f,columnIndex:u,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},h.lanes[r].header.id=a.id,o?a.width=h.lanes[r].header.width:a.height=h.lanes[r].header.height,c=ms(t,0,i,a,!1,!1,!0,h.lanes[r].id),s.children.push(c)),e.addObject(s,f,u),o||f++,u=o?m:r+1}function bs(e,t){var i=new $a;i.height=t,e.push(i)}function ws(e){var t=new Ja;return t.width=e,t}function xs(e,t,i,n){for(var r,o,a,s,l,c,h,d=[],p=0,u=t.rowDefinitions().length,f=0;f<u;f++)for(c=t.rows[f],s=0;s<c.cells.length;s++)if((l=c.cells[s].children[0])&&l.children&&l.children.length)for(a=1;a<l.children.length;a++)if(r=l.children[a],(o=e.getObject(r.id))&&(o.inEdges.length>0||o.outEdges.length>0))for(h=o.inEdges.concat(o.outEdges),p=0;p<h.length;p++)-1===d.indexOf(h[p])&&d.push(h[p]);return d}function Ss(e){var t=e.wrapper;if(t.measure(new ei(e.width,e.height)),t.children[0]instanceof Ka){var i=t.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new ei(i.width,i.height))}t.arrange(t.desiredSize)}function Cs(e,t,i){var n,r,o,a,s,l,c,h,d=t.wrapper.children[0];for(n=i;n<d.rows.length;n++)for(l=d.rows[n],r=0;r<l.cells.length;r++)if((c=l.cells[r]).children&&c.children.length>0)for(o=0;o<c.children.length;o++)h=c.children[o],(a=e.nameTable[h.id]).isLane&&h.children.length>1&&(s=e.nameTable[h.children[1].id])&&s.isLane&&(s.rowIndex=n,s.columnIndex=r),a.rowIndex=n,a.columnIndex=r}function Ps(e,t){var i,n,r,o,a,s,l,c,h=t.wrapper.children[0],d=t.shape,p=d.padding,u=d.lanes,f=h.bounds.y,g=d.phaseSize>0?d.phases.length:0,m="Horizontal"===d.orientation,y=m?d.phases.length||1:u.length+1,v=m?(d.header&&d.hasHeader?1:0)+(d.phases.length>0?1:0)+d.lanes.length:(d.header&&d.hasHeader?1:0)+d.phases.length;if(0===g&&!m&&d.lanes.length&&(v+=1),m?(i=(d.header&&d.hasHeader?1:0)+(g>0?1:0),n=0):(i=d.header&&d.hasHeader?1:0,n=g>0?1:0),u.length>0)for(f+=d.header&&d.hasHeader?d.header.height:0,s=0;s<u.length;s++){for(l=0;l<u[s].children.length;l++)if((r=u[s].children[l]).offsetX=u[s].width,r.offsetY=u[s].height,e.initObject(r),e.nodes.push(r),o=r.wrapper,m){for(c=n;c<y;c++)if(a=h.rows[i].cells[c],o.margin.left<a.bounds.right-h.bounds.x){r.parentId=a.children[0].id,c>n?o.margin.left=o.margin.left-(a.bounds.left-h.bounds.left):a.children[0].children[1].actualSize.width+p>=o.margin.left&&(o.margin.left=a.children[0].children[1].actualSize.width+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),Es(o,r,e);break}}else for(var b=i;b<v;b++)if(a=h.rows[b].cells[n],o.margin.top<a.bounds.bottom-f){r.parentId=a.children[0].id,b>i?o.margin.top=o.margin.top-(a.bounds.top-f):a.children[0].children[1].actualSize.height+p>=o.margin.top&&(o.margin.top=a.children[0].children[1].actualSize.height+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),Es(o,r,e);break}m?i++:n++}h.measure(new ei(t.width,t.height)),h.arrange(h.desiredSize),function(e,t){var i,n,r,o,a,s,l=e.columnDefinitions(),c=e.rowDefinitions(),h=ks(t);"Vertical"===t.shape.orientation&&0===h&&(h=t.shape.header&&t.shape.hasHeader?1:0);var d=t.shape.padding;for(i=0;i<l.length;i++)e.updateColumnWidth(i,l[i].width,!0,d);for(i=h;i<c.length;i++)e.updateRowHeight(i,c[i].height,!0,d);for(n=0;n<c.length;n++)for(s=e.rows[n],i=0;i<l.length;i++)if((o=s.cells[i]).children&&o.children.length>0)for(r=0;r<o.children.length;r++)(a=o.children[r]).maxWidth&&(a.maxWidth=o.actualSize.width),a.maxHeight&&(a.maxHeight=o.actualSize.height)}(h,t),t.width=t.wrapper.width=h.width,t.height=t.wrapper.height=h.height,Rs(e,t),t.wrapper.measure(new ei(t.width,t.height)),t.wrapper.arrange(h.desiredSize),function(e){if("SwimLane"===e.shape.type)for(var t=e.shape.lanes,i=void 0,n=void 0,r=0;r<t.length;r++){i=t[r];for(var o=0;o<i.children.length;o++)(n=i.children[o]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(t),Ms(t,e),Os(t)}function Es(e,t,i){e.measure(new ei(t.width,t.height)),e.arrange(e.desiredSize);var n=i.getObject(t.parentId);i.addChild(n,t.id)}function Os(e){if("SwimLane"===e.shape.type&&!e.shape.isLane&&!e.shape.isPhase){var t=void 0,i=void 0,n=void 0,r=e.shape.lanes,o=ks(e),a=e.wrapper.children[0].rowDefinitions();for(i=0;i<r.length;i++,o++)t=r[i],"Horizontal"===e.shape.orientation?(n=a[o].height,t.height!==n&&(t.height=n)):(n=e.wrapper.children[0].columnDefinitions()[o].width,t.width!==n&&(t.width=n))}}function Ms(e,t){var i,n,r,o,a=e.shape,s=a.phases,l=a.header&&a.hasHeader?1:0,c=e.wrapper.children[0],h=c.bounds.y+(a.header&&a.hasHeader?a.header.height:0);if("SwimLane"===e.shape.type&&(e=t.getObject(e.id)||e,s.length>0))if(c=e.wrapper.children[0],"Horizontal"===a.orientation)for(r=a.header&&a.hasHeader?c.rows[1]:c.rows[0],i=0;i<s.length;i++)n=(o=r.cells[i].children[0]).bounds.right-c.bounds.x,s[i].offset!==n&&(s[i].offset=n),t.nameTable[o.id].maxWidth=o.maxWidth;else for(i=0;i<s.length;i++)n=(o=c.rows[l+i].cells[0].children[0]).bounds.bottom-h,s[i].offset!==n&&(s[i].offset=n),t.nameTable[o.id].maxWidth=o.maxWidth}function Ts(e,t){if(e&&e.length>0)for(var i=void 0,n=0;n<e.length;n++)i=t.getObject(e[n]),t.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}function As(e,t,i,n){var r,o,a,s,l,c,h,d,p=e.getObject(t.parentId),u=p.shape,f=p.wrapper.children[0],g=u.lanes,m=xs(e,f,t.rowIndex);("Horizontal"===u.orientation&&t.rowIndex!==i.rowIndex||"Vertical"===u.orientation&&t.columnIndex!==i.columnIndex)&&("Horizontal"===u.orientation?(s=t.rowIndex,l=i.rowIndex,r=(u.header&&u.hasHeader?1:0)+(u.phases.length&&u.phaseSize?1:0),(h=t.rowIndex-r)<(d=i.rowIndex-r)?n&&i.wrapper.offsetY>n.y&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetY<n.y&&(l+=1,d+=1),s!==l&&f.updateRowIndex(s,l)):(s=t.columnIndex,l=i.columnIndex,r=u.phases.length&&u.phaseSize?1:0,h=t.columnIndex-r,d=i.columnIndex-r,u.header&&u.hasHeader?1:0,h<d?n&&i.wrapper.offsetX>n.x&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetX<n.x&&(l+=1,d+=1),s!==l&&(0===u.phaseSize&&0===l&&u.header&&u.hasHeader&&(f.rows[0].cells[s].children=f.rows[0].cells[0].children,f.rows[0].cells[s].columnSpan=f.rows[0].cells[0].columnSpan,f.rows[0].cells[0].children=[]),f.updateColumnIndex(0,s,l))),s!==l&&(o={target:Oh(i),source:Oh(t)},c=g[h],g.splice(h,1),g.splice(d,0,c),a={type:"LanePositionChanged",redoObject:{target:Oh(o.source),source:Oh(o.target)},undoObject:o,category:"Internal"},e.diagramActions&Wi.UndoRedo||e.commandHandler.addHistoryEntry(a),Cs(e,p,0),Ts(m,e),p.wrapper.measure(new ei(p.width,p.height)),p.wrapper.arrange(p.wrapper.desiredSize),e.updateDiagramObject(p)))}function Ls(e,t,i,n){var r=e.getObject(i.id),o=r.shape,a=o.header&&o.hasHeader?1:0,s=o.lanes,l=o.phases,c=n.wrapper.actualSize.width,h=n.wrapper.actualSize.height,d=t.wrapper.actualSize.width,p=t.wrapper.actualSize.height;"SwimLane"===r.shape.type&&("Horizontal"===o.orientation?t.isPhase?l[t.columnIndex].offset+=c-d:(a=o.phaseSize&&o.phases.length>0?a+1:a,s[t.rowIndex-a].height+=h-p):t.isPhase?l[t.rowIndex-a].offset+=h-p:(a=o.phaseSize&&o.phases.length>0?1:0,s[t.columnIndex-a].width+=c-d))}function Ds(e,t){var i,n=e.shape,r=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(r+=n.phases.length>0?1:0,i=t.rowIndex-r):i=t.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function ks(e){var t=0,i=e.shape;return"Horizontal"===i.orientation&&(t=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(t+=1),t}function Is(e,t,i,n){var r=e.shape;if(r.phases.length>0){var o=t.nameTable[r.phases[n].header.id];o&&o.maxWidth<i.outerBounds.width&&(o.maxWidth=i.outerBounds.width,o.wrapper.maxWidth=i.outerBounds.width)}}function Rs(e,t){if(t.shape.header&&t.shape.hasHeader){var i=t.wrapper.children[0].rows[0].cells[0].children[0].id,n=e.nameTable[i];n&&n.isHeader&&n.maxWidth<t.width&&(n.maxWidth=t.width,n.wrapper.maxWidth=t.width)}}function Ns(e,t,i,n){var r=e.nameTable[t.id];if("SwimLane"===r.shape.type){e.protectPropertyChange(!0);var o,a,s,l,c=r.wrapper.children[0],h=c.bounds,d=r.shape,p=!1,u=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,b=void 0,w=void 0;if(g=new Vc(d,"lanes",i,!0),f=d.header&&d.hasHeader?1:0,"Horizontal"===d.orientation&&(p=!0,f=d.phases.length>0?f+1:f),a=xs(e,c),f+=s=void 0!==n?n:d.lanes.length,p){var x=new $a;x.height=i.height,c.addRow(f,x,!1),r.height=void 0!==r.height?r.height+i.height:r.height,r.wrapper.height=c.height=r.height}else{var S=new Ja;S.width=i.width,c.addColumn(s+1,S,!1),r.width&&(r.width+=i.width,r.wrapper.width=c.width=r.width),e.diagramActions&Wi.UndoRedo||(c.rows[0].cells[0].columnSpan+=1)}if(e.diagramActions&Wi.UndoRedo||(g.id+=Ch()),void 0!==n?d.lanes.splice(n,0,g):d.lanes.push(g),vs(c,e,r,f,s,p),o="Horizontal"===d.orientation?e.nameTable[c.rows[f].cells[0].children[0].id]:d.header&&d.hasHeader?e.nameTable[c.rows[1].cells[f].children[0].id]:e.nameTable[c.rows[0].cells[f].children[0].id],e.diagramActions&Wi.UndoRedo||(u={type:"LaneCollectionChanged",changeType:"Insert",undoObject:Oh(g),redoObject:Oh(o),category:"Internal"},e.addHistoryEntry(u)),Cs(e,r,"Horizontal"===d.orientation?f:d.header&&d.hasHeader?1:0),Ss(r),Rs(e,r),(l=i.children)&&l.length>0)for(m=0;m<l.length;m++)if(w={x:(b=l[m]).wrapper.offsetX,y:b.wrapper.offsetY},"Horizontal"===d.orientation)for(c.rows[f].cells[y],y=0;y<c.rows[f].cells.length;y++)js(e,c.rows[f].cells[y],w,b);else for(v=0;v<c.rows.length;v++)js(e,c.rows[v].cells[f],w,b);Ts(a,e),e.drag(r,h.x-c.bounds.x,h.y-c.bounds.y),e.protectPropertyChange(!1)}}function js(e,t,i,n){if(t.children&&t.children.length>0){var r=t.children[0],o=e.nameTable[r.id];r.bounds.containsPoint(i)&&e.addChild(o,n)}}function zs(e,t,i){if("SwimLane"===t.shape.type){var n,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=t.wrapper.bounds.x,p=t.wrapper.bounds.y,u=t.shape,f=u.padding,g=u.phases,m=void 0,y=t.wrapper.children[0],v="Horizontal"===u.orientation;if(r=u.header&&u.hasHeader?0:-1,u.phases.length>0&&(r+=1,0),n=v?u.lanes[0].header.width:u.lanes[0].header.height,i.offset>n){for(h=0;h<g.length;h++)if(a=g[h],s=h>0?g[h-1]:a,a.offset>i.offset){if(m=h>0?i.offset-s.offset:i.offset,v){var b=y.columnDefinitions()[h];b.width-=m,(l=e.nameTable[u.phases[h].header.id]).maxWidth=l.wrapper.maxWidth=b.width,y.updateColumnWidth(h,b.width,!1);var w=new Ja;w.width=m,c=h,y.addColumn(h,w,!1);break}var x=y.rowDefinitions()[h+r];x.height-=m,l=e.nameTable[u.phases[h].header.id],y.updateRowHeight(h+r,x.height,!1);var S=new $a;S.height=m,c=h,y.addRow(h+r,S,!1);break}if(e.diagramActions&Wi.UndoRedo&&void 0===c)(L=e.historyManager.currentEntry.next).isLastPhase&&function(e,t,i,n,r,o){var a=t.shape.phases[e-2],s=i.previousPhase.offset;if(r){var l=n.columnDefinitions()[e-1],c=new Ja;e>1?(c.width=l.width-(s-a.offset),l.width=s-a.offset):(c.width=l.width-s,l.width=s),n.updateColumnWidth(e-1,l.width,!1),n.addColumn(e,c,!1)}else{var l=n.rowDefinitions()[e],h=new $a;e>1?(h.height=i.undoObject.offset-s,l.height=s-a.offset):(h.height=l.height-s,l.height=s),n.updateRowHeight(e,l.height,!1),n.addRow(1+e,h,!1)}}(c=g.length,t,L,y,v);var C=new Uc(t.shape,"phases",i,!0);if(e.diagramActions&Wi.UndoRedo||(C.id+=Ch()),u.phases.splice(c,0,C),ys(y,e,t,r,v,c),v){if(o=e.nameTable[y.rows[r].cells[c].children[0].id],0===c&&u.header&&u.hasHeader){y.rows[0].cells[0].children=y.rows[0].cells[1].children,y.rows[0].cells[1].children=[];for(var P=y.rows[0],E=0;E<P.cells.length;E++)P.cells[E].minWidth=void 0,P.cells[E].columnSpan=0===E?y.rows[0].cells.length:1}!function(e,t,i,n,r){var o,a,s,l,c,h=t.shape,d=ks(t);h.header&&h.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length);for(a=d;a<i.rows.length;a++)c=i.rows[a],s=c.cells[n-1],l=c.cells[n],o=c.cells[n+1],Hs(e,t,s,l,o,a,n);Cs(e,t,1)}(e,t,y,c);var O=y.columnDefinitions();if(y.updateColumnWidth(c,O[c].width,!0,f),o.maxWidth=o.wrapper.maxWidth=O[c].width,O.length>c+1){var M=e.nameTable[y.rows[r].cells[c+1].children[0].id];y.updateColumnWidth(c+1,O[c+1].width,!0,f),M.maxWidth=M.wrapper.maxWidth=O[c+1].width}t.width=t.wrapper.width=t.wrapper.children[0].width=y.width}else{o=e.nameTable[y.rows[r+c].cells[0].children[0].id];var T=y.rowDefinitions(),A=T[r+c].height;!function(e,t,i,n,r){for(var o,a,s,l=i.rows[n],c=i.rows[n+1],h=i.rows[n-1],d=1;d<l.cells.length;d++)a=l.cells[d],s=c?c.cells[d]:void 0,o=h.cells[d],Hs(e,t,o,a,s,n,d);Cs(e,t,1)}(e,t,y,r+c),y.updateRowHeight(r+c,A,!0,f),T.length>r+c+1&&(A=T[r+c+1].height,y.updateRowHeight(r+c+1,A,!0,f)),t.height=t.wrapper.height=t.wrapper.children[0].height=y.actualSize.height}if(Ss(t),t.width=t.wrapper.actualSize.width,Rs(e,t),e.drag(t,d-t.wrapper.bounds.x,p-t.wrapper.bounds.y),Ms(t,e),!(e.diagramActions&Wi.UndoRedo)){var L={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:Oh(C),redoObject:Oh(o),category:"Internal"};e.addHistoryEntry(L)}e.updateDiagramObject(t)}}}function Hs(e,t,i,n,r,o,a){var s,l,c,h,d,p=t.shape,u="Horizontal"===p.orientation,f=t.wrapper.children[0],g=n.desiredCellWidth,m=n.desiredCellHeight,y=u?o:a;if(i?(s=u?i.bounds.x+i.bounds.width:i.bounds.x,l=u?i.bounds.y:i.bounds.y+i.bounds.height):(s=f.bounds.x,l=r.bounds.y),c=new mi(s,l,g,m),(h=ms(e,0,t,{id:t.id+(u?p.lanes[y-2]:p.lanes[y-1]).id+Ch()[0],rowIndex:o,columnIndex:a,width:n.minWidth,height:n.minHeight,style:(u?p.lanes[y-2]:p.lanes[y-1]).style,constraints:ki.Default|ki.AllowDrop,container:{type:"Canvas",orientation:u?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,f.addObject(h,o,a),r&&r.children&&r.children.length)for(d=0;d<r.children.length;d++)u?e.nameTable[r.children[d].id].columnIndex+=1:e.nameTable[r.children[d].id].rowIndex+=1;!function(e,t,i,n,r,o,a){var s,l,c,h=e.nameTable[r.id],d=t||a,p=e.nameTable[h.parentId].shape.padding;if(d.children&&d.children[0].children.length>1)for(var u=1;u<d.children[0].children.length;u++)s=d.children[0].children[u],c=e.nameTable[s.id],l=o?{x:s.bounds.x,y:s.bounds.center.y}:{x:s.bounds.center.x,y:s.bounds.top},n.containsPoint(l)?(i.children[0].children.push(s),d.children[0].children.splice(u,1),u--,e.deleteChild(c),c.isLane||(c.parentId=r.id),h.children||(h.children=[]),t||(o?c.margin.left=c.wrapper.bounds.x-d.children[0].bounds.right:c.margin.top=c.wrapper.bounds.y-d.children[0].bounds.bottom),h.children.push(s.id),c.zIndex=h.zIndex+1,e.removeElements(c)):t&&(o?(c.margin.left-=i.desiredCellWidth,p>c.margin.left&&(c.margin.left=p)):(c.margin.top-=i.desiredCellHeight,p>c.margin.top&&(c.margin.top=p)))}(e,r,n,c,h,u,i)}function Bs(e,t,i){if("SwimLane"===t.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=t.shape,r=t.wrapper.children[0],o=void 0,a=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?o=r.rows[r.rows.length-1].cells[0]:(a=r.rows.length-1,o=r.rows[a].cells[r.rows[a].cells.length-1]):(a=n.header&&n.hasHeader?1:0,o=r.rows[a].cells[r.rows[a].cells.length-1]),e.commandHandler.select(e.nameTable[o.children[0].id])}}function _s(e,t,i,n,r,o){var a,s,l,c,h,d,p,u,f=Ch(),g=e.shape,m=g.phases,y=e.offsetX-e.wrapper.actualSize.width/2,v=e.offsetY-e.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(v+=g.header&&g.hasHeader?g.header.height:0),!o)for(r||(e.id+=f,g&&g.header&&g.hasHeader?g.header.id+=f:g.header=void 0),a=0;m&&a<m.length;a++)m[a].id+=f;for(u=r?[i.childTable[n.id]]:g.lanes,a=0;u&&a<u.length;a++)for(l=u[a],o||(l.id+=f),s=0;l.children&&s<l.children.length;s++)d=(c=l.children[s]).wrapper.offsetX-c.width/2,p=c.wrapper.offsetY-c.height/2,c.zIndex=-1,c.inEdges=c.outEdges=[],(o||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===g.orientation?c.margin.top=p-v:c.margin.left=d-y),o||(c.id+=f);if(!o){if(r)h={shape:{lanes:u,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(h.width=e.wrapper.actualSize.width,h.height=n.wrapper.actualSize.height+g.header.height+g.phaseSize,h.offsetX=e.wrapper.offsetX+10*i.pasteIndex,h.offsetY=n.wrapper.offsetY+10*i.pasteIndex):(h.width=n.wrapper.actualSize.width,h.height=e.wrapper.actualSize.height,h.offsetX=n.wrapper.offsetX+10*i.pasteIndex,h.offsetY=e.wrapper.offsetY+10*i.pasteIndex),e=h;if(0!==i.pasteIndex&&(e.offsetX+=10,e.offsetY+=10),e.zIndex=-1,e=t.add(e),!r)for(var b=0,w=Object.keys(i.childTable);b<w.length;b++){var x=w[b],S=i.childTable[x];S.id+=f,S.sourceID+=f,S.targetID+=f,S.zIndex=-1,t.add(S)}"SVG"!==t.mode&&t.refreshDiagramLayer(),t.select([e])}return e}function Ws(e,t,i,n){var r,o=t.nodes[0];if(n||ls(e,o,!0)){var a,s,l=void 0,c=void 0,h=void 0,d=new sn;i&&(h=e.nameTable[i].parentId,l=o=e.nameTable[i]),a=i?l.wrapper:o.wrapper,(s=e.nameTable[h||o.parentId])&&"Grid"===s.container.type&&((r=new un).children=[],!n&&o.isHeader||("Horizontal"===s.container.orientation&&o.isPhase||"Vertical"===s.container.orientation&&(o.rowIndex>0&&o.columnIndex>0||o.isLane)?(c=os(s,l?l.columnIndex:o.columnIndex,!(!s.shape.header||!s.shape.hasHeader)),r.offsetX=c.center.x,r.offsetY=c.center.y,d.width=c.width,d.height=c.height):(r.offsetX=s.offsetX,r.offsetY=a.offsetY,d.width=s.wrapper.actualSize.width,d.height=a.actualSize.height)),r.children.push(d),r.measure(new ei),r.arrange(r.desiredSize))}return r}function Fs(e,t,i,n,r){r=void 0!==r?r:Ds(t,i);for(var o=!1,a=t.shape.lanes[r],s=a.children.length-1;s>=0;s--)n?n.id===a.children[s].id&&a.children.splice(s,1):(e.removeDependentConnector(a.children[s]),e.diagramActions&Wi.UndoRedo||(e.diagramActions=e.diagramActions|Wi.UndoRedo,o=!0),e.remove(a.children[s]),a.children.splice(s,1),o&&(e.diagramActions=e.diagramActions&~Wi.UndoRedo))}function Ys(e){return e.children[0]}function Xs(e,t){e.nodes.splice(e.nodes.indexOf(t),1),e.removeFromAQuad(t),e.removeObjectsFromLayer(t),delete e.nameTable[t.id],e.removeElements(t)}function Vs(e,t,i,n){if("SwimLane"===i.shape.type){var r=i.shape,o=void 0;if(1===r.lanes.length)e.remove(i);else{var a=i.wrapper.bounds.x,s=i.wrapper.bounds.y,l=void 0,c=void 0,h=void 0,d=void 0,p=i.wrapper.children[0];o=n?r.lanes.indexOf(n):Ds(i,t);var u=Oh(r.lanes[o]);if(Fs(e,i,t,void 0,o),!(e.diagramActions&Wi.UndoRedo)){var f={type:"LaneCollectionChanged",changeType:"Remove",undoObject:u,redoObject:Oh(t),category:"Internal"};e.addHistoryEntry(f)}r.lanes.splice(o,1);var g=t?"Horizontal"===r.orientation?t.rowIndex:t.columnIndex:ks(i)+o;if("Horizontal"===r.orientation){for(l=p.rows[g],c=0;c<l.cells.length;c++)if((h=l.cells[c])&&h.children.length>0)for(d=0;d<h.children.length;d++)Us(e,h.children[d]);p.removeRow(g)}else{for(i.width=void 0!==i.width?i.width-p.rows[0].cells[g].actualSize.width:i.width,c=0;c<p.rows.length;c++)if((h=p.rows[c].cells[g])&&h.children.length>0)for(d=0;d<h.children.length;d++)Us(e,h.children[d]);p.removeColumn(g)}i.width=i.wrapper.width=p.width,i.height=i.wrapper.height=p.height,Ss(i),Cs(e,i,g),e.drag(i,a-i.wrapper.bounds.x,s-i.wrapper.bounds.y),e.updateDiagramObject(i)}}}function Us(e,t){var i,n;if(t instanceof un){if(t.children.length>0)for(i=0;i<t.children.length;i++)t.children[i]instanceof un&&Us(e,t.children[i]);n=e.getObject(t.id),Xs(e,n)}}function Gs(e,t,i,n){e.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var r,o=!1,a=i.shape,s=i.wrapper.children[0],l=n?a.phases.indexOf(n):function(e,t){var i=t.shape,n=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?e.columnIndex:e.rowIndex-n}(t,i),c=a.phases.length;if(a.phases.length>1){l===c-1&&(o=!0,r=Oh(a.phases[l-1]));var h=Oh(a.phases[l]);if(a.phases.splice(l,1),!(e.diagramActions&Wi.UndoRedo)){var d={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:h,previousPhase:r,redoObject:Oh(t),category:"Internal",isLastPhase:o};e.addHistoryEntry(d)}"Horizontal"===a.orientation?function(e,t,i,n){var r,o,a,s,l,c,h,d,p,u,f,g;for(n=void 0!==n?n:i.columnIndex,h=0;h<t.rows.length;h++)if((r=t.rows[h]).cells.length>1&&(o=r.cells[n],a=r.cells.length-1===n?r.cells[n-1]:r.cells[n+1],l=a.children[0],o.children.length>0))if(s=o.children[0],f=e.nameTable[s.id],0===a.children.length&&o.children.length>0)a.children=o.children,a.columnSpan=o.columnSpan-1;else{for(d=0;d<s.children.length;d++){if((u=s.children[d])instanceof un){if((g=e.nameTable[u.id]).isLane||(g.parentId=l.id),r.cells.length-1===n&&(g.margin.left=g.wrapper.bounds.x-l.bounds.x,u.margin.left=g.wrapper.bounds.x-l.bounds.x),l.children.push(u),e.nameTable[l.id]){var m=e.nameTable[l.id];m.children||(m.children=[]),m.children.push(u.id)}s.children.splice(d,1),d--,f&&f.children&&-1!==f.children.indexOf(g.id)&&f.children.splice(f.children.indexOf(g.id),1)}if(r.cells.length-1!==n)for(p=0;p<l.children.length;p++){var y=l.children[p];if(y instanceof un){var v=e.nameTable[y.id];v.margin.left=v.wrapper.bounds.x-s.bounds.x,y.margin.left=v.wrapper.bounds.x-s.bounds.x}}}if(f&&f.isPhase){var b=e.nameTable[l.id];b&&(l.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=f.wrapper.maxWidth)}Xs(e,f)}var w=t.columnDefinitions()[n].width;t.removeColumn(n),n<t.columnDefinitions().length?(c=t.columnDefinitions()[n].width,c+=w,t.updateColumnWidth(n,c,!0)):(c=t.columnDefinitions()[n-1].width,c+=w,t.updateColumnWidth(n-1,c,!0))}(e,s,t,l):function(e,t,i,n,r){var o,a,s,l,c,h,d,p,u,f,g,m=r.shape,y=void 0!==n?m.header?n+1:n:i.rowIndex;o=t.rows[y];var v=r.wrapper.bounds.y,b=m.phases.length;void 0!==m.header&&m.hasHeader&&(v+=t.rowDefinitions()[0].height);for(s=n===b?t.rows[y-1]:t.rows[y+1],c=0;c<o.cells.length;c++)if(a=o.cells[c],p=s.cells[c],u=p.children[0],a.children.length>0){var w=a.children[0],x=e.nameTable[w.id];if(n<b)for(d=0;d<u.children.length;d++)(f=u.children[d])instanceof un&&((g=e.nameTable[f.id]).margin.top=g.wrapper.bounds.y-(0===n?v:w.bounds.y),f.margin.top=g.wrapper.bounds.y-(0===n?v:w.bounds.y));for(h=0;h<w.children.length;h++)(f=w.children[h])instanceof un&&((g=e.nameTable[f.id]).parentId=u.id,n===b&&(g.margin.top=g.wrapper.bounds.y-(0===n?v:u.bounds.y),f.margin.top=g.wrapper.bounds.y-(0===n?v:u.bounds.y)),u.children.push(f),w.children.splice(h,1),h--,x.children&&-1!==x.children.indexOf(g.id)&&x.children.splice(x.children.indexOf(g.id),1));Xs(e,x)}var S=t.rowDefinitions()[y].height;t.removeRow(y),y<t.rowDefinitions().length?(l=t.rowDefinitions()[y].height,l+=S,t.updateRowHeight(y,l,!0)):(l=t.rowDefinitions()[y-1].height,l+=S,t.updateRowHeight(y-1,l,!0))}(e,s,t,l,i),Rs(e,i),Cs(e,i,1),Ms(i,e),e.protectPropertyChange(!1),e.updateDiagramObject(i)}}function qs(e,t){for(var i=[],n=0;n<t.length;n++){var r=t[n];e.containsRect(r.wrapper.bounds)&&i.push(r)}return i}function Zs(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return!0;return!1}function Qs(e){var t;return e&&(e.type?t="Connector":e.shape&&!e.type&&(t="Node")),t}function Ks(e,t){t instanceof Yc&&(e.shape.header||(t.shape.hasHeader=!1))}function $s(e,t){if(t instanceof Yc)switch(e.shape.shape){case"JoinNode":e.width||(t.width=20),e.height||(t.height=90),e.style&&e.style.fill||(t.style.fill="black");break;case"ForkNode":e.width||(t.width=90),e.height||(t.height=20),e.style&&e.style.fill||(t.style.fill="black");break;case"InitialNode":case"FinalNode":e.style&&e.style.fill||(t.style.fill="black")}else switch(e.shape.flow){case"Object":e.style&&e.style.strokeDashArray||(t.style.strokeDashArray="8 4"),e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow");break;case"Control":e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow"),e.sourceDecorator&&e.sourceDecorator.shape||(t.sourceDecorator.shape="None")}}function Js(e,t){switch(e.shape.type){case"Bpmn":switch(e.shape.flow){case"Sequence":("Normal"===e.shape.sequence&&"Bezier"!==e.type||"Default"===e.shape.sequence||"Conditional"===e.shape.sequence)&&(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"Conditional"===e.shape.sequence&&t.sourceDecorator&&(t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||20,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.width||10));break;case"Association":"Default"!==e.shape.association&&"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"BiDirectional"===e.shape.association&&t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white",t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||5,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.height||10));break;case"Message":t.style&&!t.style.strokeDashArray&&(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch(e.shape.flow){case"Exception":"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var i=!1;"Association"===e.shape.relationship?i=!0:"Inheritance"===e.shape.relationship?(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"white"),t.style&&(i=!0,t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")):"Composition"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0,t.style.strokeDashArray="4 4"):"Realization"===e.shape.relationship&&(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0),i&&(t.style.strokeWidth=e.style&&e.style.strokeWidth||2)}}function el(e,t,i){var n;n=ni.findLength(t,e)>ni.findLength(i,e)?i:t;var r=ni.findAngle(t,i),o=ni.findAngle(n,e),a=ni.findLength(n,e),s=o+2*(r-o);return{x:n.x+a*Math.cos(s*Math.PI/180),y:n.y+a*Math.sin(s*Math.PI/180)}}function tl(e){var t=e.parentElement;do{if(gh(t,"e-diagram"))return!0;t=t.parentElement}while(t);return!1}function il(e,t,i){if(e&&e.children&&e.children.length>0)for(var n=void 0,r=0;r<e.children.length;r++)return(n=i[e.children[r]]).shape.type===t||il(n,t,i);return!1}function nl(e,t,i,n,r){if(i&&(e instanceof na||e&&(e.shape&&"SwimLane"!==e.shape.type||void 0===e.shape)))for(var o=void 0,a=0,s=Object.keys(i);a<s.length;a++){var l=s[a];if(o=i[l],"shape"===l&&o.type&&(e.shape={type:o.type}),o)if(Array.isArray(o)&&o.length&&o.length>0&&"annotations"!==r&&"ports"!==r)if(e[l].length>0)for(var c=0;c<=e[l].length;c++)nl(e[l],t?t[l]:void 0,i[l],"annotations"===l||"ports"===l?e:void 0,l);else nl(e[l],t?t[l]:void 0,i[l],"annotations"===l||"ports"===l?e:void 0,l);else if(o instanceof Object&&t&&"annotations"!==r&&"ports"!==r)nl(e[l],t[l],i[l]);else if("annotations"!==r&&"ports"!==r&&t&&!t[l]||!t&&e&&(e[l]||void 0!==e[l]))e[l]=i[l];else{var h=void 0;"annotations"!==r&&"ports"!==r||("annotations"===r?(e[l]&&nl(e[l],t[l],i[l]),e[l]||(ec(n)===na?(h=new Dn(n,"annotations",i[l]),n.annotations.push(h)):(h=new Ln(n,"annotations",i[l]),n.annotations.push(h)))):e[l]?nl(e[l],t[l],i[l]):(h=new En(n,"ports",i[l]),n.ports.push(h)))}}}function rl(e,t,i,n){var r;if(t)for(var o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];if(r=t[s],"getAssistantDetails"===s){if(n.data.Role===t[s].root)for(var l=t[s].assistants,c=0;c<l.length;c++)for(var h=0;h<i.length;h++)i[h].data.Role===l[c]&&(e.assistants.push(i[h].id),e.children.splice(0,1))}else r&&(e[s]=t[s])}}function ol(e,t){var i;i="Bezier"===e.type?function(e){var t=[];if("Bezier"===e.type)for(var i=0,n=0;n<e.segments.length;n++)for(var r=e.segments[n],o=ni.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,a=ni.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,s=Number((e.distance(o,r.points[0])+e.distance(a,o)+e.distance(r.points[1],a))/1.5),l=0;l<s-1;l+=10)t[i]=Jo(0,r.points[0],ni.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,ni.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],l,s),i++;return t}(e):e.intermediatePoints;for(var n=0;n<i.length-1;n++){var r=i[n],o=i[n+1],a=mi.toBounds([r,o]);if(a.Inflate(e.hitPadding),a.containsPoint(t)){var s=el(t,r,o),l=al({x1:r.x,x2:o.x,y1:r.y,y2:o.y},{x1:t.x,x2:s.x,y1:t.y,y2:s.y});if(l.enabled){var c=ni.findLength(t,l.intersectPt);if(Math.abs(c)<e.hitPadding)return!0}else{var h=mi.toBounds([t,t]);if(h.Inflate(3),h.containsPoint(r)||h.containsPoint(o))return!0}if(ni.equals(t,s))return!0}}if(e.annotations.length>0){var d=e.wrapper.children;for(n=3;n<d.length;n++){if(d[n].bounds.containsPoint(t))return!0}}return!1}function al(e,t){var i={x:0,y:0},n=e,r=t,o=(r.y2-r.y1)*(n.x2-n.x1)-(r.x2-r.x1)*(n.y2-n.y1),a=(r.x2-r.x1)*(n.y1-r.y1)-(r.y2-r.y1)*(n.x1-r.x1),s=(n.x2-n.x1)*(n.y1-r.y1)-(n.y2-n.y1)*(n.x1-r.x1);if(0===o)return{enabled:!1,intersectPt:i};var l=a/o,c=s/o;return l>=0&&l<=1&&c>=0&&c<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function sl(e,t,i,n){var r=al(ll(e.x,e.y,t.x,t.y),ll(i.x,i.y,n.x,n.y));return r.enabled?r.intersectPt:{x:0,y:0}}function ll(e,t,i,n){return{x1:Number(e)||0,y1:Number(t)||0,x2:Number(i)||0,y2:Number(n)||0}}function cl(e,t,i){var n=[];i=i||0;var r={x:t.topLeft.x-i,y:t.topLeft.y},o={x:t.topRight.x+i,y:t.topRight.y},a={x:t.bottomRight.x,y:t.bottomRight.y-i},s={x:t.bottomLeft.x,y:t.bottomLeft.y+i};return n.push(r),n.push(o),n.push(a),n.push(s),n}function hl(e,t,i){var n,r=i instanceof Yc?i.constraints&ki.InheritTooltip:i.constraints&Li.InheritTooltip,o=i instanceof Yc?i.constraints&ki.Tooltip:i.constraints&Li.Tooltip;n=function(e,t,i,n){var r={},o=(i.scroller.transform.scale,document.getElementById(i.element.id)),a=e.wrapper.bounds,s=o.getBoundingClientRect();i.scroller.horizontalOffset,i.scroller.verticalOffset;switch(i.tooltipObject.position){case"BottomCenter":r=dl(t,a.bottomCenter,i,n,s.width/2,s.height);break;case"BottomLeft":case"LeftBottom":r=dl(t,a.bottomLeft,i,n,0,s.height);break;case"BottomRight":case"RightBottom":r=dl(t,a.bottomRight,i,n,s.width,s.height);break;case"LeftCenter":r=dl(t,a.middleLeft,i,n,0,s.height/2);break;case"LeftTop":case"TopLeft":r=dl(t,a.topLeft,i,n,0,0);break;case"RightCenter":r=dl(t,a.middleRight,i,n,s.width,s.height/2);break;case"RightTop":case"TopRight":r=dl(t,a.topRight,i,n,s.width,0);break;case"TopCenter":r=dl(t,a.topCenter,i,n,s.width/2,0)}return r}(i,t,e,"Mouse"===(!r&&o?i.tooltip.relativeMode:e.tooltip.relativeMode));var a=ha(e);return{x:n.x+a.width,y:n.y+a.height}}function dl(e,t,i,n,r,o){var a={},s=i.scroller.transform.scale,l=i.scroller.horizontalOffset,c=i.scroller.verticalOffset;return a.x=(n?e.x:t.x)*s+l-r,a.y=(n?e.y:t.y)*s+c-o,a}function pl(e,t){var i,n=0,r=0;for(n=0;n<e.length;n++){var o=Eh(e[n].wrapper);for(r=0;r<e.length;r++){var a=Eh(e[r].wrapper);"Top"===t||"Bottom"===t||"BottomToTop"===t||"Middle"===t?o.center.y>a.center.y&&(i=e[n],e[n]=e[r],e[r]=i):o.center.x>a.center.x&&(i=e[n],e[n]=e[r],e[r]=i)}}return e}function ul(e,t,i){var n,r,o;r=fl(e,t,i),n=ni.findAngle(e[r.index],e[r.index+1]);var a=gl(t);return o=ni.transform(r.point,n+45,a),r.point=o,r.angle=n,r}function fl(e,t,i){for(var n,r,o,a,s,l=0,c=t.offset,h=[],d=0;d<e.length-1;d++)l+=ni.distancePoints(e[d],e[d+1]),h.push(l);o=c*l;for(var p=0;p<h.length;p++){if(h[p]>=o)return r=ni.findAngle(e[p],e[p+1]),{point:n=ni.transform(e[p],r,o-(a||0)),index:s=p};a=h[p]}return{point:n,index:s}}function gl(e){var t=void 0===e.content?10:0,i=0;switch(e.alignment){case"Center":i=0;break;case"Before":i=-(0+t);break;case"After":i=0+t}return i}function ml(e,t,i){t%=360;var n,r;switch(e.alignment){case"Before":t>=45&&t<=135?(r="right",n=.5===e.offset?"center":"top"):t>=225&&t<=315?(r="left",n=.5===e.offset?"center":"bottom"):t>45&&t<225?(n="top",r=.5===e.offset?"center":"right"):(n="bottom",r=.5===e.offset?"center":"left");break;case"After":t>=45&&t<=135?(r="left",n=.5===e.offset?"center":"top"):t>=225&&t<=315?(r="right",n=.5===e.offset?"center":"bottom"):t>45&&t<225?(n="bottom",r=.5===e.offset?"center":"right"):(n="top",r=.5===e.offset?"center":"left");break;case"Center":r="center",n="center"}if(0===e.offset||1===e.offset){switch(yl(i[0],i[1])){case"left":r=0===e.offset?"right":"left";break;case"right":r=0===e.offset?"left":"right";break;case"bottom":n=0===e.offset?"top":"bottom";break;case"top":n=0===e.offset?"bottom":"top"}}return{hAlign:r,vAlign:n}}function yl(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"}function vl(e,t){if(e instanceof Yc&&e.children)for(var i=0;i<e.children.length;i++)t.nameTable[e.children[i]].children&&vl(e,t),t.removeFromAQuad(t.nameTable[e.children[i]]),t.removeObjectsFromLayer(t.nameTable[e.children[i]]),delete t.nameTable[e.children[i]]}function bl(e,t){if(e&&e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children[i];n instanceof un&&bl(n,t)}return-1===t.indexOf(e.id)&&t.push(e.id),t}function wl(e){var t=function(e){for(var t,i,n=[],r=0;r<e.length;r++)if("SwimLane"===(t=e[r]).shape.type){i=t.wrapper.children[0].childTable;for(var o=0,a=Object.keys(i);o<a.length;o++)n=bl(i[a[o]],n)}return n}(e.nodes),i=Oh(e,e.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,e.serializationSettings.preventDefaults&&(i=xl(i,e)),function(e,t){var i=t.nodes;if(i)for(var n=0;n<i.length;n++)-1!==e.indexOf(i[n].id)&&(i.splice(n,1),n--)}(t,i),JSON.stringify(i)}function xl(e,t,i,n){i=function(e,t){var i,n=[],r=new sp;if(e.getClassName)switch(e.getClassName()){case"Diagram":i=new sp;break;case"Node":i=new Yc(r,"",n);break;case"Path":i=new yc(r,"",n);break;case"Native":i=new vc(r,"",n);break;case"Html":i=new bc(r,"",n);break;case"Image":i=new wc(r,"",n);break;case"Text":i=new xc(r,"",n);break;case"BasicShape":i=new Sc(r,"",n);break;case"FlowShape":i=new Cc(r,"",n);break;case"BpmnShape":i=new Ic(r,"",n);break;case"UmlActivityShape":i=new Rc(r,"",n);break;case"UmlClassifierShape":i=new Fc(r,"",n);break;case"SwimLane":i=new Gc(r,"",n),e.header&&(i.header=new Xc(r,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new Ln(r,"",n);break;case"PointPort":i=new En(r,"",n);break;case"BpmnGateway":i=new Pc(r,"",n);break;case"BpmnDataObject":i=new Ec(r,"",n);break;case"BpmnEvent":i=new Mc(r,"",n);break;case"BpmnSubEvent":i=new Tc(r,"",n);break;case"BpmnActivity":i=new Dc(r,"",n);break;case"BpmnAnnotation":i=new kc(r,"",n);break;case"MethodArguments":i=new Nc(r,"",n);break;case"UmlClassAttribute":i=new jc(r,"",n);break;case"UmlClassMethod":i=new zc(r,"",n);break;case"UmlClass":i=new Hc(r,"",n);break;case"UmlInterface":i=new Bc(r,"",n);break;case"UmlEnumerationMember":i=new _c(r,"",n);break;case"UmlEnumeration":i=new Wc(r,"",n);break;case"Lane":i=new Vc(r,"",n);break;case"Phase":i=new Uc(r,"",n);break;case"ChildContainer":i=new qc;break;case"Connector":i=new na(r,"",n);break;case"StraightSegment":i=new Uo(r,"",n);break;case"BezierSegment":i=new Go(r,"",n);break;case"OrthogonalSegment":i=new qo(r,"",n);break;case"PathAnnotation":i=new Dn(r,"",n);break;case"Stop":i=new Ji(r,"",n);break;case"Point":i=t||new ni(r,"",n);break;case"UserHandle":i=new Wa(r,"",n);break;case"Command":i=new Ga(r,"",n)}else i=t;return i}(t,i);for(var r=[],o=0,a=r=r.concat(Object.keys(e));o<a.length;o++){var s=a[o];t instanceof Yc&&(n="shape"===s),e[s]instanceof Array?Sl(e,i,t,s):e[s]instanceof Object?"wrapper"!==s&&(e[s]=xl(e[s],t[s],i[s],n)):(i&&e[s]===i[s]||void 0===e[s])&&(n&&"type"===s||t instanceof Gc&&"orientation"===s||delete e[s]),"[]"!==JSON.stringify(e[s])&&"{}"!==JSON.stringify(e[s])&&void 0!==e[s]||delete e[s]}return e}function Sl(e,t,i,n){if(0===e[n].length)delete e[n];else if(e[n].every(function(e){return"number"===typeof e})){var r=void 0,o=!0;for(r=0;r<e[n].length;r++)o=!(!o||e[n][r]!==t[n][r]);o&&delete e[n]}else{r=void 0;if("layers"===n&&(e[n].splice(0,1),0===e[n].length&&delete e[n]),e[n])for(r=e[n].length-1;r>=0;r--)"nodes"!==n&&"connectors"!==n||(e[n][r].wrapper=null),"dataManager"!==n&&(e[n][r]=xl(e[n][r],i[n][r],void 0!==t[n]?t[n][r]:void 0),"[]"!==JSON.stringify(e[n][r])&&"{}"!==JSON.stringify(e[n][r])&&void 0!==e[n][r]||e[n].splice(r,1))}}function Cl(e,t){t.clear(),t.protectPropertyChange(!0);for(var i=t.dataSourceSettings.doBinding,n=t.setNodeTemplate,r=t.getDescription,o=t.getCustomProperty,a={},s=0,l=t.commandManager.commands;s<l.length;s++){var c=l[s];a[c.name]={execute:c.execute,canExecute:c.canExecute}}var h=t.rulerSettings.horizontalRuler.arrangeTick,d=t.rulerSettings.verticalRuler.arrangeTick,p=t.layout.getLayoutInfo,u=t.layout.getBranch,f=t.getNodeDefaults,g=t.getConnectorDefaults,m=JSON.parse(e);m=Pl(m),t.contextMenuSettings=m.contextMenuSettings||{},t.constraints=m.constraints||Ni.Default,t.tool=m.tool||ji.Default,t.bridgeDirection=m.bridgeDirection||"Top",t.pageSettings=m.pageSettings||{},t.drawingObject=m.drawingObject||void 0,t.tooltip=m.tooltip||{},t.addInfo=m.addInfo||void 0,t.getDescription=r,t.scrollSettings=m.scrollSettings||{},t.commandManager=m.commandManager||{},t.layers=m.layers||[],t.rulerSettings.horizontalRuler.arrangeTick=h,t.rulerSettings.verticalRuler.arrangeTick=d;for(var y=0,v=t.commandManager.commands;y<v.length;y++){var b=v[y];a[b.name]&&(b.execute=a[b.name].execute,b.canExecute=a[b.name].canExecute)}if(t.backgroundColor=m.backgroundColor||"transparent",t.basicElements=m.basicElements||[],t.connectors=m.connectors||[],t.dataSourceSettings=m.dataSourceSettings||{},t.dataSourceSettings.doBinding=i,t.height=m.height||"100%",t.setNodeTemplate=n,t.getConnectorDefaults=g,t.getNodeDefaults=f,t.getCustomProperty=o,t.mode=m.mode||"SVG",m.nodes.length)for(var w=0;w<m.nodes.length;w++)m.nodes[w].shape&&"SwimLane"===m.nodes[w].shape.type&&_s(m.nodes[w],void 0,void 0,void 0,void 0,!0);t.nodes=m.nodes||[],t.rulerSettings=m.rulerSettings||{},t.snapSettings=m.snapSettings||{},t.width=m.width||"100%",t.layout=m.layout||{},t.layout.getLayoutInfo=_h(p),t.layout.getBranch=_h(u),t.diagramActions=0,t.isLoading=!0,t.protectPropertyChange(!1);var x;for(w=0;w<t.views.length;w++)(x=t.views[t.views[w]]).refresh(),x instanceof sp&&t.element.classList.add("e-diagram");return m.selectedItems&&(m.selectedItems.nodes=[],m.selectedItems.connectors=[]),t.selectedItems=m.selectedItems,m}function Pl(e){if(e&&(void 0===e.version||e.version<17.1))for(var t=0,i=e.nodes;t<i.length;t++){var n=i[t];if(n&&n.ports.length>0)for(var r=0,o=n.ports;r<o.length;r++){var a=o[r];a&&a.constraints&&a.constraints===Ui.None&&(a.constraints=Ui.Default)}}return e}function El(e,t){var i=t.style,n=t;t.canApplyStyle=!0;for(var r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"fill":i.fill=e.fill,i instanceof on&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=e.textOverflow;break;case"opacity":i.opacity=e.opacity;break;case"strokeColor":i.strokeColor=e.strokeColor;break;case"strokeDashArray":i.strokeDashArray=e.strokeDashArray;break;case"strokeWidth":i.strokeWidth=e.strokeWidth;break;case"bold":i.bold=e.bold;break;case"color":i.color=e.color;break;case"textWrapping":i.textWrapping=e.textWrapping;break;case"fontFamily":i.fontFamily=e.fontFamily;break;case"fontSize":i.fontSize=e.fontSize;break;case"italic":i.italic=e.italic;break;case"textAlign":i.textAlign=e.textAlign;break;case"whiteSpace":i.whiteSpace=e.whiteSpace;break;case"textDecoration":i.textDecoration=e.textDecoration;break;case"gradient":Ol(e.gradient,i.gradient)}}t instanceof dn&&n.refreshTextElement()}function Ol(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"type":t.type=e.type;break;case"x1":t.x1=e.x1;break;case"x2":t.x2=e.x2;break;case"y1":t.y1=e.y1;break;case"y2":t.y2=e.y2;break;case"cx":t.cx=e.cx;break;case"cy":t.cy=e.cy;break;case"fx":t.fx=e.fx;break;case"fy":t.fy=e.fy;break;case"r":t.r=e.r;break;case"stops":t.stops=e.stops}}}function Ml(e,t,i){for(var n=t,r=n.hyperlink,o=0,a=Object.keys(e);o<a.length;o++){switch(a[o]){case"color":n.style.color=r.color=e.color;break;case"content":n.content=r.content=e.content||r.link;break;case"link":var s=i.style;n.style.color=e.link?r.color:s.color,n.style.textDecoration=e.link?r.textDecoration:i.style.textDecoration,n.content=e.link?r.content||e.link:i.content,r.link=e.link;break;case"textDecoration":n.style.textDecoration=r.textDecoration=e.textDecoration}}}function Tl(e,t,i){e.width=t.width,e.height=t.height,e.minHeight=t.minHeight,e.maxHeight=t.maxHeight,e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.horizontalAlignment=t.wrapper.children[0].horizontalAlignment,e.verticalAlignment=t.wrapper.children[0].verticalAlignment,e.relativeMode=t.wrapper.children[0].relativeMode,e.visible=t.wrapper.children[0].visible,t.shape instanceof xc&&(e.margin=t.shape.margin),e.id=t.wrapper.children[0].id,e.style=t.style;for(var n=0,r=i.views;n<r.length;n++){var o=r[n];yh(t.id+"_groupElement",o),yh(t.id+"_content_groupElement",o),yh(t.id+"_html_element",o)}t.wrapper.children.splice(0,1),t.wrapper.children.splice(0,0,e)}function Al(e,t,i,n){var r=new sn;switch(e.shape.type){case"Path":var o=new yn;o.data=t.shape.data,Tl(r=o,t,n);break;case"Image":var a=new bn;a.source=t.shape.source,a.imageAlign=t.shape.align,a.imageScale=t.shape.scale,Tl(r=a,t,n);break;case"Text":Tl(r=new dn,t,n);break;case"Basic":var s=void 0;s="Rectangle"===t.shape.shape?new sn:new yn,"Polygon"===t.shape.shape?s.data=si(t.shape.points):s.data=fn(t.shape.shape),Tl(r,t,n),"Rectangle"===t.shape.shape&&(s.cornerRadius=t.shape.cornerRadius),r=s;break;case"Flow":var l=new yn;l.data=zn(t.shape.shape),Tl(r=l,t,n);break;case"Native":var c=new xn(e.id,n.element.id);c.content=t.shape.content,c.scale=t.shape.scale,Tl(r=c,t,n);break;case"HTML":var h=new No(t.id,n.element.id);h.content=t.shape.content,Tl(r=h,t,n)}void 0===e.shape.type||e.shape.type===i.shape.type?Ll(e,t,n):(r.width=t.wrapper.children[0].width,r.height=t.wrapper.children[0].height,t.shape instanceof xc&&(r.margin=t.shape.margin),r.style=t.style,t.wrapper.children[0]=r)}function Ll(e,t,i){if(Object.keys(e.shape).length>0)if("Path"===t.shape.type&&void 0!==e.shape.data)t.wrapper.children[0].data=e.shape.data;else if("Text"===t.shape.type&&void 0!==e.shape.content)t.wrapper.children[0].content=e.shape.content;else if("Image"===t.shape.type&&void 0!==e.shape.source)t.wrapper.children[0].source=e.shape.source;else if("Native"===t.shape.type){for(var n=void 0,r=0;r<i.views.length;r++)n=th(t.wrapper.children[0].id+"_native_element",i.views[r]),void 0!==e.shape.content&&n&&(n.removeChild(n.children[0]),t.wrapper.children[0].content=e.shape.content,n.appendChild(vh(t.wrapper.children[0],!1)));t.wrapper.children[0].scale=e.shape.scale?e.shape.scale:t.wrapper.children[0].scale}else if("HTML"===t.shape.type){var o=void 0;for(r=0;r<i.views.length;r++)(o=th(t.wrapper.children[0].id+"_html_element",i.views[r]))&&(o.removeChild(o.children[0]),t.wrapper.children[0].content=e.shape.content,o.appendChild(vh(t.wrapper.children[0],!0)))}else if("Flow"===t.shape.type&&void 0!==e.shape.shape){t.shape.shape=e.shape.shape;var a=zn(t.shape.shape.toString());t.wrapper.children[0].data=a}else if("UmlActivity"===t.shape.type&&void 0!==e.shape.shape)Dl(t,e);else if(void 0!==e.shape.cornerRadius)t.wrapper.children[0].cornerRadius=e.shape.cornerRadius;else if(void 0!==e.shape.shape){t.shape.shape=e.shape.shape;var s=fn(t.shape.shape.toString());t.wrapper.children[0].data=s}t.wrapper.children[0].canMeasurePath=!0}function Dl(e,t){e.shape.shape=t.shape.shape;var i=Fa(e.shape.shape.toString());"InitialNode"===e.shape.shape?e.wrapper.children[0].style.fill="black":"ForkNode"===e.shape.shape||"JoinNode"===e.shape.shape?e.wrapper.children[0].style.fill="black":"FinalNode"===e.shape.shape&&(e instanceof Yc&&(e.wrapper=kl(e)),e.wrapper.children[0].data=i)}function kl(e){var t=new un;t.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new yn;n.data=i,n.id=e.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=e.style.strokeColor,n.style.strokeWidth=e.style.strokeWidth;var r=new yn;return r.data=i,r.id=e.id+"_1_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.fill=e.style.fill,r.style.strokeColor=e.style.strokeColor,r.style.strokeWidth=e.style.strokeWidth,t.children=[n,r],t.children[0].width=e.width,t.children[0].height=e.height,t.children[1].height=e.height/1.5,t.children[1].width=e.width/1.5,t.style.strokeWidth=0,t.style.strokeColor="transparent",t}function Il(e,t,i){var n=Fa(i.shape.shape);switch(e.data=n,t=e,i.shape.shape){case"StructuredNode":if(i.annotations)for(var r=0;r<i.annotations.length;r++)i.annotations[r].content="<<"+i.annotations[r].content+">>";t=e;break;case"FinalNode":t=kl(i)}return t}function Rl(e){yh(e+"_linear"),yh(e+"_radial")}function Nl(e,t){var i=e.indexOf(t);i>=0&&e.splice(i,1)}function jl(e,t){var i,n,r;if(e.intermediatePoints=t,e.updateSegmentElement(e,t,e.wrapper.children[0]),e.sourcePoint,n=e.sourceDecorator,"Bezier"===e.type){var o=e.segments[0],a=e.segments[e.segments.length-1];i=[ni.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,ni.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1]}else i=e.intermediatePoints;t=e.clipDecorators(e,t);var s=e.wrapper.children[0];s.canMeasurePath=!0,s=e.wrapper.children[1],e.updateDecoratorElement(s,t[0],i[1],n),e.targetPoint,r=e.targetDecorator,s=e.wrapper.children[2],e.updateDecoratorElement(s,t[t.length-1],i[i.length-2],r),e.updateShapeElement(e)}function zl(e,t,i){var n,r=e.wrapper,o=r.bounds,a=t.offset,s=t.size/i.scale,l=t.margin,c=r.offsetX-r.actualSize.width*r.pivot.x,h=r.offsetY-r.actualSize.height*r.pivot.y;if(n={x:0,y:0},e.nodes.length>0){switch(t.side){case"Top":n.x+=c+o.width*a,n.y+=h-s;break;case"Bottom":n.x+=c+a*o.width,n.y+=h+r.actualSize.height+s;break;case"Left":n.x+=c-s,n.y+=h+a*o.height;break;case"Right":n.x+=c+r.actualSize.width+s,n.y+=h+a*o.height}n.x+=(l.left-l.right)/i.scale+s/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),n.y+=(l.top-l.bottom)/i.scale+s/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1)}else if(e.connectors.length>0){var d=e.connectors[0],p={offset:a},u=fl(d.intermediatePoints,p),f=u.index;n=u.point;var g,m=ul(d.intermediatePoints,p,o),y=(d.intermediatePoints,m.angle);xi(g=vi(),-y,d.intermediatePoints[f].x,d.intermediatePoints[f].y),(n=bi(g,n)).x+=l.left-l.right+s/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),n.y+=l.top-l.bottom+s/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1),xi(g=vi(),y,d.intermediatePoints[f].x,d.intermediatePoints[f].y),n=bi(g,n)}0===r.rotateAngle&&0===r.parentTransform||(xi(g=vi(),r.rotateAngle+r.parentTransform,r.offsetX,r.offsetY),n=bi(g,n));return n}function Hl(e,t,i,n){if(n.annotation){if(Pa(n.annotation))return!0}else if(Ai[t]&e&&Ri[t]&i)return!0;return!1}function Bl(e,t){return!!(Ai[t]&e)}function _l(e,t){return e.visibility&t}function Wl(e,t){var i;if("Text"===e.shape.type)i=e.shape;else{var n=t.split("_");t=n[n.length-1];for(var r=0;r<e.annotations.length;r++)t===e.annotations[r].id&&(i=e.annotations[r])}return i}function Fl(e,t){var i=t.split("_");t=i[i.length-1];for(var n=0;n<e.ports.length;n++)if(t===e.ports[n].id)return e.ports[n]}function Yl(e,t){var i={},n=0;if(e.ports){var r=e.ports;for(n=0;n<r.length;n++)t?r[n].constraints&Ui.InConnect&&(i=r[n]):r[n].constraints&Ui.OutConnect&&(i=r[n])}return i}function Xl(e,t,i){for(var n=i?e.annotations:e.ports,r=0;r<n.length;r++)if(n[r].id===t)return r.toString();return null}function Vl(e,t){var i;for(i=0;i<e.length;i++)if(t===e[i].id)return!0;return!1}function Ul(e,t,i,n){if(void 0!==e.width&&void 0!==e.height&&(e.width*=t,e.height*=i),e instanceof cn){var r=vi(),o=n.width||n.actualSize.width,a=n.height||n.actualSize.height;if(void 0!==o&&void 0!==a){var s=n.offsetX-o*n.pivot.x,l=n.offsetY-a*n.pivot.y,c={x:s+o*n.pivot.x,y:l+a*n.pivot.y};c=Hh(n.rotateAngle,n.offsetX,n.offsetY,c),xi(r,-n.rotateAngle,c.x,c.y),Si(r,t,i,c.x,c.y),xi(r,n.rotateAngle,c.x,c.y);for(var h=0,d=e.children;h<d.length;h++){var p=d[h];if(void 0!==p.width&&void 0!==p.height){var u=bi(r,{x:p.offsetX,y:p.offsetY});p.offsetX=u.x,p.offsetY=u.y,Ul(p,t,i,n)}}}}}function Gl(e,t,i,n,r,o){for(var a,s=e.children,l=0;l<s.length;l++)if(a=n[s[l]])if(a.children)Gl(a,t,i,n,r,o);else if(a.offsetX-=t,a.offsetY-=i,!r){var c,h=void 0;n[a.id]=a,(h=a.initContainer()).children||(h.children=[]),c=a.init(o),h.children.push(c),h.measure(new ei(a.width,a.height)),h.arrange(h.desiredSize)}}function ql(e,t,i){if(0===i.length)i.push(e);else if(1===i.length)i[0][t]>e[t]?i.splice(0,0,e):i.push(e);else if(i.length>1){for(var n=0,r=i.length-1,o=Math.floor((n+r)/2);o!==n;)i[o][t]<e[t]?(n=o,o=Math.floor((n+r)/2)):i[o][t]>e[t]&&(r=o,o=Math.floor((n+r)/2));i[r][t]<e[t]?i.push(e):i[n][t]>e[t]?i.splice(n,0,e):i[n][t]<e[t]&&i[r][t]>e[t]&&i.splice(r,0,e)}}function Zl(e){var t=document.getElementById(e.diagramId),i="ej2_instances",n=t[i][0].nodes;void 0===n&&(n=function(e){for(var t=[],i=0;i<e.palettes.length;i++)for(var n=e.palettes[i].symbols,r=0;r<n.length;r++)n[r]instanceof Yc&&t.push(n[r]);return t}(t[i][0]));for(var r=0;n&&r<n.length;r++)if(n[r].id===e.nodeId)return Ql(n[r],e);var o=t[i][0].connectors;for(r=0;o&&r<o.length;r++)if(o[r].id===e.nodeId)return Ql(o[r],e);var a=t[i][0].enterObject;return a&&(a.id===e.nodeId||a.children)?a.children&&il(a,"HTML",t[i][0].enterTable)?t[i][0].enterTable[e.nodeId]:a:null}function Ql(e,t){var i,n=e.annotations;for(i=0;n&&i<n.length;i++)if(t.annotationId&&n[i].id===t.annotationId)return n[i];return e}function Kl(e,t,i,n){return y()&&(e={cause:e.cause,state:i,type:n,cancel:!1,element:ec(t)===na?{connector:sc(t)}:{node:sc(t)}}),e}function $l(e,t){if(y()){var i=ec(e.source)===na,n=sc(e.source),r=sc(this.currentTarget);t={element:i?{connector:n}:{node:n},target:i?{connector:r}:{node:r},position:this.currentPosition,cancel:!1}}return t}function Jl(e,t,i,n,r,o,a,s){var l={x:0,y:0},c=vi();switch(xi(c,r,o,a),s.x){case 0:switch(s.y){case 0:l=bi(c,{x:e,y:t});break;case.5:l=bi(c,{x:e,y:t+n/2});break;case 1:l=bi(c,{x:e,y:t+n})}break;case.5:switch(s.y){case 0:l=bi(c,{x:e+i/2,y:t});break;case.5:l=bi(c,{x:e+i/2,y:t+n/2});break;case 1:l=bi(c,{x:e+i/2,y:t+n})}break;case 1:switch(s.y){case 0:l=bi(c,{x:e+i,y:t});break;case.5:l=bi(c,{x:e+i,y:t+n/2});break;case 1:l=bi(c,{x:e+i,y:t+n})}}return{x:l.x,y:l.y}}var ec=function(e){return e&&(e=void 0!==e.sourceID||void 0!==e.sourcePoint||void 0!==e.targetID||void 0!==e.targetPoint||void 0!==e.type?na:Yc),e},tc=function(e){if(!e.sourceID&&!e.targetID){var t={x:e.sourcePoint.x,y:e.sourcePoint.y},i={x:e.targetPoint.x,y:e.targetPoint.y};"Horizontal"===e.flip?(e.sourcePoint.x=i.x,e.targetPoint.x=t.x):"Vertical"===e.flip?(e.sourcePoint.y=i.y,e.targetPoint.y=t.y):"Both"===e.flip&&(e.sourcePoint=i,e.targetPoint=t)}},ic=function(e,t,i){var n=i.offset.x,r=i.offset.y;return"Horizontal"===t?(n=1-i.offset.x,r=i.offset.y):"Vertical"===t?(n=i.offset.x,r=1-i.offset.y):"Both"===t&&(n=1-i.offset.x,r=1-i.offset.y),e.setOffsetWithRespectToBounds(n,r,"Fraction"),e},nc=function e(t,i,n,r,o){if(t.hasChildren())for(var a=0,s=t.children;a<s.length;a++){var l=s[a],c=i-l.offsetX+i,h=n-l.offsetY+n;"Horizontal"!==o&&"Both"!==o||(l.offsetX=c,l.flipOffset.x=c-l.desiredSize.width/2),"Vertical"!==o&&"Both"!==o||(l.offsetY=h,l.flipOffset.y=h-l.desiredSize.height/2),(l instanceof un||l instanceof cn)&&e(l,i,n,r,o),l.measure(new ei(l.bounds.width,l.bounds.height)),l.arrange(l.desiredSize);var d=r.nameTable[l.id];d&&r.updateConnectorEdges(d)}},rc=function(e,t){for(var i,n=new yn,r=0;r<e.length-1;r++)i=oc(e[r],e[r+1]),n.data=i[0],n.id=t.id+"_"+t.shape.sequence,n.offsetX=i[1].x,n.offsetY=i[1].y,n.rotateAngle=45,n.transform=zi.Self;return n},oc=function(e,t){var i={x:e.x,y:e.y},n=ac(e,t);n=Math.min(30,n/2);var r=or(e,t),o=ni.transform({x:i.x,y:i.y},r,n),a=ni.transform({x:o.x,y:o.y},r,-12),s=ni.transform({x:a.x,y:a.y},r,24);return["M"+a.x+" "+a.y+" L"+s.x+" "+s.y,o]},ac=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function sc(e){return y()&&(e=Oh(e)),e}var lc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orientation="Vertical",t.measureChildren=void 0,t}return lc(t,e),t.prototype.measure=function(e){var t="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(e,t),this.desiredSize},t.prototype.arrange=function(e){var t="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(e,t),this.updateBounds(),this.actualSize},t.prototype.measureStackPanel=function(t,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var r=0,o=this.children;r<o.length;r++){var a=o[r];a.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?a.measure(a.desiredSize):a.measure(t);var s=a.desiredSize.clone();this.applyChildMargin(a,s),0!==a.rotateAngle&&(s=zh(s,a.rotateAngle)),void 0===n?n=s:a.preventContainer||i(s,n)}return n=e.prototype.validateDesiredSize.call(this,n,t),this.stretchChildren(n),this.applyPadding(n),n},t.prototype.arrangeStackPanel=function(t,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,r=void 0;n=this.offsetX-t.width*this.pivot.x+this.padding.left,r=this.offsetY-t.height*this.pivot.y+this.padding.top;for(var o=0,a=this.children;o<a.length;o++){var s=a[o],l=s.desiredSize.clone(),c=l;"Vertical"===this.orientation?r+=s.margin.top:n+=s.margin.left,0!==s.rotateAngle&&(c=zh(l,s.rotateAngle));var h=i(n,r,s,this,t,c);e.prototype.findChildOffsetFromCenter.call(this,s,h),s.arrange(l,!0),"Vertical"===this.orientation?r+=c.height+s.margin.bottom:n+=c.width+s.margin.right}}return t},t.prototype.updateHorizontalStack=function(e,t){t.height=Math.max(e.height,t.height),t.width+=e.width},t.prototype.updateVerticalStack=function(e,t){t.width=Math.max(e.width,t.width),t.height+=e.height},t.prototype.arrangeHorizontalStack=function(e,t,i,n,r,o){var a=0;if("Top"===i.verticalAlignment)a=t+i.margin.top+o.height/2;else if("Bottom"===i.verticalAlignment){a=n.offsetY+r.height*(1-n.pivot.y)-n.padding.bottom-i.margin.bottom-o.height/2}else a=n.offsetY-r.height*n.pivot.y+r.height/2,i.margin.top&&(a=t+i.margin.top+o.height/2);return{x:e+o.width/2,y:a}},t.prototype.arrangeVerticalStack=function(e,t,i,n,r,o){var a=0;if("Left"===i.horizontalAlignment)a=e+i.margin.left+o.width/2;else if("Right"===i.horizontalAlignment){a=n.offsetX+r.width*(1-n.pivot.x)-n.padding.right-i.margin.right-o.width/2}else a=n.offsetX-r.width*n.pivot.x+r.width/2,i.margin.left&&(a=e+i.margin.left+o.width/2);return{x:a,y:t+o.height/2}},t.prototype.stretchChildren=function(e){if(void 0!==this.children&&this.children.length>0)for(var t=0,i=this.children;t<i.length;t++){var n=i[t];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=e.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=e.height-(n.margin.top+n.margin.bottom))}},t.prototype.applyChildMargin=function(e,t){t.height+=e.margin.top+e.margin.bottom,t.width+=e.margin.left+e.margin.right},t}(cn);function hc(e,t,i){var n,r="NoWrap";"Class"===t.shape.classifier?n=t.shape.classShape:"Enumeration"===t.shape.classifier?n=t.shape.enumerationShape:"Interface"===t.shape.classifier&&(n=t.shape.interfaceShape);t.container={type:"Stack",orientation:"Vertical"},t.constraints=(ki.Default|ki.HideThumbs)&~(ki.Rotate|ki.Resize),t.style={fill:t.style.fill,strokeColor:"black",strokeWidth:1.5},t.children=[],t.maxWidth&&(r="Wrap");var o=new Yc(i,"nodes",{id:t.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:r}},{content:"<<"+t.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:r},offset:{x:.5,y:.3},constraints:Di.ReadOnly}],constraints:(ki.Default|ki.HideThumbs)&~(ki.Rotate|ki.Drag|ki.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"#ffffff00"}},!0);return i.initObject(o),i.nodes.push(o),t.children.push(o.id),function(e,t,i,n){if("Enumeration"===e.shape.classifier){var r=i.members;if(r&&r.length){dc(e,t);for(var o="",a=0;a<r.length;a++){var s=r[a];if(""!==s.name&&(o+=s.name),a!==r.length){var l=pc(e,s),c=new Yc(t,"nodes",{id:Ch()+"_umlMember",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"#ffffff00",textWrapping:n},constraints:(ki.Default|ki.HideThumbs)&~(ki.Rotate|ki.Drag|ki.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),e.children.push(c.id),o="",s.isSeparator&&a!==r.length-1&&dc(e,t)}}}}else{var h=i.attributes;if(h.length){var d="";dc(e,t);for(var a=0;a<h.length;a++){var p=void 0,u=h[a];if(p=u.scope&&"Public"===u.scope?" +":u.scope&&"Private"===u.scope?"-":u.scope&&"Protected"===u.scope?"#":"~",""!==u.name&&p&&(d+=p+" "+u.name+" : "+u.type),a!==h.length){var l=pc(e,u),c=new Yc(t,"nodes",{id:Ch()+"_umlProperty",style:{fill:e.style.fill,strokeColor:"#ffffff00"},annotations:[{id:"name",content:d,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ki.Default|ki.HideThumbs)&~(ki.Rotate|ki.Drag|ki.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),e.children.push(c.id),d="",u.isSeparator&&a!==h.length-1&&dc(e,t)}}}}}(t,i,n,r),function(e,t,i,n){if(i.methods&&i.methods.length){var r=i.methods;dc(e,t);for(var o="",a="",s=void 0,l=0;l<r.length;l++){var c=r[l];if(s=c.scope&&"Public"===c.scope?" +":c.scope&&"Private"===c.scope?"-":c.scope&&"Protected"===c.scope?"#":"~",c.parameters)for(var h=0;h<c.parameters.length;h++)c.parameters[h].type?o+=c.parameters[h].name+":"+c.parameters[h].type:o+=c.parameters[h].name,h!==c.parameters.length-1&&(o+=",");if(""!==c.name&&s&&(a+=s+" "+c.name+"("+o+") : "+c.type),l!==r.length){var d=pc(e,c),p=new Yc(t,"nodes",{id:Ch()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:a,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:e.style.fill,strokeColor:"#ffffff00"},minHeight:25,constraints:(ki.Default|ki.HideThumbs)&~(ki.Rotate|ki.Drag|ki.Resize)},!0);t.initObject(p),t.nodes.push(p),e.children.push(p.id),a="",c.isSeparator&&l!==r.length-1&&dc(e,t)}}}}(t,i,n,r),t.offsetX=t.offsetX,t.offsetY=t.offsetY,t.style.fill=t.style.fill,t.borderColor=t.borderColor,i.initObject(t),e}function dc(e,t){var i=new Yc(t,"nodes",{id:Ch()+"_path",height:1,constraints:ki.Default&~ki.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch"},!0);t.initObject(i),t.nodes.push(i),e.children.push(i.id)}function pc(e,t){var i={},n=t.style;return i.fill="transparent"!==n.fill?n.fill:e.style.fill,i.color=n.color,i.fontSize=12!==n.fontSize?n.fontSize:e.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:e.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:e.style.strokeWidth,i}var uc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},gc=function(e){if(e)switch(e.type){case"Basic":return Sc;case"Flow":return Cc;case"Path":return yc;case"Image":return wc;case"Text":return xc;case"Bpmn":return Ic;case"Native":return vc;case"HTML":return bc;case"UmlActivity":return Rc;case"UmlClassifier":return Fc;case"SwimLane":return Gc;default:return Sc}return Sc},mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),fc([pe("Basic")],t.prototype,"type",void 0),t}(ke),yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Path"},fc([pe("Path")],t.prototype,"type",void 0),fc([pe("")],t.prototype,"data",void 0),t}(mc),vc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Native"},fc([pe("Native")],t.prototype,"type",void 0),fc([pe("")],t.prototype,"content",void 0),fc([pe("Stretch")],t.prototype,"scale",void 0),t}(mc),bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Html"},fc([pe("HTML")],t.prototype,"type",void 0),fc([pe("")],t.prototype,"content",void 0),t}(mc),wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Image"},fc([pe("Image")],t.prototype,"type",void 0),fc([pe("")],t.prototype,"source",void 0),fc([pe("None")],t.prototype,"scale",void 0),fc([pe("None")],t.prototype,"align",void 0),t}(mc),xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Text"},fc([pe("Text")],t.prototype,"type",void 0),fc([pe("")],t.prototype,"content",void 0),fc([ue({},Ki)],t.prototype,"margin",void 0),t}(mc),Sc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BasicShape"},fc([pe("Basic")],t.prototype,"type",void 0),fc([pe("Rectangle")],t.prototype,"shape",void 0),fc([pe(0)],t.prototype,"cornerRadius",void 0),fc([ge([],ni)],t.prototype,"points",void 0),t}(mc),Cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"FlowShape"},fc([pe("Flow")],t.prototype,"type",void 0),fc([pe("Terminator")],t.prototype,"shape",void 0),t}(mc),Pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnGateway"},fc([pe("None")],t.prototype,"type",void 0),t}(ke),Ec=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnDataObject"},fc([pe("None")],t.prototype,"type",void 0),fc([pe(!1)],t.prototype,"collection",void 0),t}(ke),Oc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),fc([pe("None")],t.prototype,"type",void 0),fc([pe("None")],t.prototype,"loop",void 0),fc([pe(!1)],t.prototype,"call",void 0),fc([pe(!1)],t.prototype,"compensation",void 0),t}(ke),Mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnEvent"},fc([pe("Start")],t.prototype,"event",void 0),fc([pe("None")],t.prototype,"trigger",void 0),t}(ke),Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnSubEvent"},fc([pe("None")],t.prototype,"trigger",void 0),fc([pe("Start")],t.prototype,"event",void 0),fc([pe("")],t.prototype,"id",void 0),fc([ue({},ni)],t.prototype,"offset",void 0),fc([ge([],Ln)],t.prototype,"annotations",void 0),fc([ge([],En)],t.prototype,"ports",void 0),fc([pe()],t.prototype,"width",void 0),fc([pe()],t.prototype,"height",void 0),fc([ue({},Ki)],t.prototype,"margin",void 0),fc([pe("Center")],t.prototype,"horizontalAlignment",void 0),fc([pe("Center")],t.prototype,"verticalAlignment",void 0),fc([pe(!0)],t.prototype,"visible",void 0),t}(ke),Ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),fc([ue({id:"success",event:"End",offset:{x:1,y:.5}},Tc)],t.prototype,"success",void 0),fc([ue({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},Tc)],t.prototype,"failure",void 0),fc([ue({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},Tc)],t.prototype,"cancel",void 0),t}(ke),Lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),fc([pe("None")],t.prototype,"type",void 0),fc([pe(!1)],t.prototype,"adhoc",void 0),fc([pe("Default")],t.prototype,"boundary",void 0),fc([pe(!1)],t.prototype,"compensation",void 0),fc([pe("None")],t.prototype,"loop",void 0),fc([pe(!0)],t.prototype,"collapsed",void 0),fc([ge([],Tc)],t.prototype,"events",void 0),fc([ue({},Ac)],t.prototype,"transaction",void 0),fc([pe(void 0)],t.prototype,"processes",void 0),t}(ke),Dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnActivity"},fc([pe("Task")],t.prototype,"activity",void 0),fc([ue({},Oc)],t.prototype,"task",void 0),fc([ue({},Lc)],t.prototype,"subProcess",void 0),t}(ke),kc=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnAnnotation"},fc([pe("")],t.prototype,"text",void 0),fc([pe("")],t.prototype,"id",void 0),fc([pe(0)],t.prototype,"angle",void 0),fc([pe()],t.prototype,"height",void 0),fc([pe()],t.prototype,"width",void 0),fc([pe(0)],t.prototype,"length",void 0),t}(ke),Ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"BpmnShape"},fc([pe("Bpmn")],t.prototype,"type",void 0),fc([pe("Event")],t.prototype,"shape",void 0),fc([ue({},Mc)],t.prototype,"event",void 0),fc([ue({},Pc)],t.prototype,"gateway",void 0),fc([ue({},Ec)],t.prototype,"dataObject",void 0),fc([ue({},Dc)],t.prototype,"activity",void 0),fc([ue({},kc)],t.prototype,"annotation",void 0),fc([ge([],kc)],t.prototype,"annotations",void 0),t}(mc),Rc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlActivityShape"},fc([pe("UmlActivity")],t.prototype,"type",void 0),fc([pe("Action")],t.prototype,"shape",void 0),t}(mc),Nc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"MethodArguments"},fc([pe("")],t.prototype,"name",void 0),fc([pe("")],t.prototype,"type",void 0),fc([ue({},an)],t.prototype,"style",void 0),t}(ke),jc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlClassAttribute"},fc([pe("Public")],t.prototype,"scope",void 0),fc([pe(!1)],t.prototype,"isSeparator",void 0),t}(Nc),zc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlClassMethod"},fc([ge([],Nc)],t.prototype,"parameters",void 0),t}(jc),Hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlClass"},fc([pe("")],t.prototype,"name",void 0),fc([ge([],jc)],t.prototype,"attributes",void 0),fc([ge([],zc)],t.prototype,"methods",void 0),fc([ue({},an)],t.prototype,"style",void 0),t}(ke),Bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlInterface"},fc([pe(!1)],t.prototype,"isSeparator",void 0),t}(Hc),_c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlEnumerationMember"},fc([pe("")],t.prototype,"name",void 0),fc([pe("")],t.prototype,"value",void 0),fc([pe(!1)],t.prototype,"isSeparator",void 0),fc([ue({},an)],t.prototype,"style",void 0),t}(ke),Wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlEnumeration"},fc([pe("")],t.prototype,"name",void 0),fc([ge([],_c)],t.prototype,"members",void 0),fc([ue({},an)],t.prototype,"style",void 0),t}(ke),Fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"UmlClassifierShape"},fc([pe("UmlClassifier")],t.prototype,"type",void 0),fc([ue({},Hc)],t.prototype,"classShape",void 0),fc([ue({},Bc)],t.prototype,"interfaceShape",void 0),fc([ue({},Wc)],t.prototype,"enumerationShape",void 0),fc([pe("Class")],t.prototype,"classifier",void 0),t}(mc),Yc=function(e){function t(t,i,n,r){var o,a=e.call(this,t,i,n,r)||this;return a.isCanvasUpdate=!1,a.status="None",a.parentId="",a.processId="",a.umlIndex=-1,a.outEdges=[],a.inEdges=[],a.isHeader=!1,a.isLane=!1,a.isPhase=!1,a.children&&a.children.length>0&&((o=n).style&&o.style.fill||(a.style.fill="transparent"),o.style&&o.style.strokeColor||(a.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&$s(n,a),a.shape&&"SwimLane"===a.shape.type&&Ks(n,a),a}return uc(t,e),Object.defineProperty(t.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new ei(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t,i;t="SwimLane"!=this.shape.type?new sn:new Ka;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":var n=new yn;n.data=this.shape.data,t=n;break;case"Image":var r=new bn;r.source=this.shape.source,r.imageAlign=this.shape.align,r.imageScale=this.shape.scale,t=r;break;case"Text":var o=new dn;o.content=this.shape.content,t=o,i=this.style,t.style=i;break;case"Basic":if("Rectangle"===this.shape.shape)(t=s=new sn).cornerRadius=this.shape.cornerRadius;else if("Polygon"===this.shape.shape){var a=new yn;a.data=si(this.shape.points),t=a}else{var s=new yn,l=fn(this.shape.shape);s.data=l,t=s}break;case"Flow":var c=new yn,h=zn(this.shape.shape);c.data=h,t=c;break;case"UmlActivity":t=Il(new yn,t,this);break;case"Bpmn":if(e.bpmnModule){t=e.bpmnModule.initBPMNContent(t,this,e),this.wrapper.elementActions=this.wrapper.elementActions|Ii.ElementIsGroup;var d=this.shape.activity.subProcess;if(d.processes&&d.processes.length)for(var p=0,u=this.shape.activity.subProcess.processes;p<u.length;p++){var f=u[p];!e.nameTable[f]||e.nameTable[f].processId&&e.nameTable[f].processId!==this.id||(e.nameTable[f].processId=this.id,d.collapsed&&e.updateElementVisibility(e.nameTable[f].wrapper,e.nameTable[f],!d.collapsed),t.children.push(e.nameTable[f].wrapper))}}break;case"Native":var g=new xn(this.id,e.element.id);g.content=this.shape.content,g.scale=this.shape.scale,t=g;break;case"HTML":var m=new No(this.id,e.element.id);m.content=this.shape.content,t=m;break;case"UmlClassifier":t=hc(t,this,e);break;case"SwimLane":this.annotations=[],this.ports=[],t.cellStyle.fill="none",t.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},t.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=ki.HideThumbs,gs(t,e,this)}return t.id=this.id+"_content",t.relativeMode="Object",void 0!==this.width&&(t.width=this.width),t.horizontalAlignment="Stretch",void 0!==this.height&&(t.height=this.height),void 0!==this.minHeight&&(t.minHeight=this.minHeight),void 0!==this.maxHeight&&(t.maxHeight=this.maxHeight),void 0!==this.minWidth&&(t.minWidth=this.minWidth),void 0!==this.maxWidth&&(t.maxWidth=this.maxWidth),"Rectangle"!==this.shape.shape||this.shape.cornerRadius||(t.isRectElement=!0),t.verticalAlignment="Stretch",this.shape instanceof xc&&(t.margin=this.shape.margin),ba(this)&&0!==(this.constraints&ki.Shadow)&&(t.shadow=this.shadow),"Bpmn"===this.shape.type&&"Message"!==this.shape.shape&&"DataSource"!==this.shape.shape||"UmlActivity"===this.shape.type&&"FinalNode"===this.shape.shape||"Text"!==this.shape.type&&(t.style=this.style),(this.wrapper.elementActions&Ii.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(t.flip=this.flip),t},t.prototype.initContainer=function(){var e;if(this.id||(this.id=Ch()),!this.container||this.shape instanceof Gc)e=this.children?new cn:new un;else switch(this.container.type){case"Canvas":e=new un;break;case"Stack":e=new cc;break;case"Grid":(e=new Ka).setDefinitions(this.rows,this.columns)}return e.id=this.id,e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.visible=this.visible,e.horizontalAlignment=this.horizontalAlignment,e.verticalAlignment=this.verticalAlignment,this.container&&(e.width=this.width,e.height=this.height,"Stack"===this.container.type&&(e.orientation=this.container.orientation)),e.style.fill=this.backgroundColor,e.style.strokeColor=this.borderColor,e.style.strokeWidth=this.borderWidth,e.rotateAngle=this.rotateAngle,e.minHeight=this.minHeight,e.minWidth=this.minWidth,e.maxHeight=this.maxHeight,e.maxWidth=this.maxWidth,e.pivot=this.pivot,e.margin=this.margin,e.flip=this.flip,this.wrapper=e,e},t.prototype.initPorts=function(e,t){this.wrapper;for(var i,n=0;this.ports,n<this.ports.length;n++){(i=this.initPortWrapper(this.ports[n])).elementActions=i.elementActions|Ii.ElementIsPort;var r=void 0,o=_h(e);o&&(r=o(i,this)),i.description=r||i.id,t.children.push(i)}},t.prototype.getIconOffet=function(e,t){var i,n;return"BottomToTop"===e.orientation?(i=t.offset.x,n=1-t.offset.y):"LeftToRight"===e.orientation?(i=t.offset.y,n=t.offset.x):"RightToLeft"===e.orientation?(i=1-t.offset.y,n=t.offset.x):(i=t.offset.x,n=t.offset.y),{x:i,y:n}},t.prototype.initIcons=function(e,t,i,n){this.wrapper;var r,o=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==o.shape){var a=new un;a.float=!0;a.id=this.id+"_icon_content",a.children=[],a.height=o.height,a.width=o.width,a.style.strokeColor="transparent",a.margin=o.margin,a.horizontalAlignment="Center",a.verticalAlignment="Center",a.visible=this.visible,r=this.getIconOffet(t,o),a.setOffsetWithRespectToBounds(r.x,r.y,"Fraction"),a.relativeMode="Point",this.initIconSymbol(o,a,e,n);var s=void 0,l=_h(e);l&&(s=l(o,this)),a.description=s||a.id,i.children.push(a)}},t.prototype.initAnnotations=function(e,t,i,n){for(var r,o=0;this.annotations,o<this.annotations.length;o++){r=this.initAnnotationWrapper(this.annotations[o],i,n,o);var a=void 0,s=_h(e);s&&(a=s(r,this)),r.description=a||r.id,t.children.push(r)}},t.prototype.initPortWrapper=function(e){e.id=e.id||Ch();var t=new yn;t.height=e.height,t.width=e.width;var i="Custom"===e.shape?e.pathData:kn(e.shape);t.id=this.id+"_"+e.id,t.margin=e.margin,t.data=i;var n=e.style;return t.style={fill:n.fill,strokeColor:n.strokeColor,gradient:null,opacity:n.opacity,strokeDashArray:n.strokeDashArray,strokeWidth:n.strokeWidth},t.horizontalAlignment=e.horizontalAlignment,t.verticalAlignment=e.verticalAlignment,t=ic(t,this.flip,e),void 0===this.width&&void 0===this.height||(t.float=!0),t.relativeMode="Point",t.visible=!(!_l(e,Mi.Visible)||_l(e,Mi.Hover)||_l(e,Mi.Connect)),t},t.prototype.initAnnotationWrapper=function(e,t,i,n){e.id=e.id||n+"annotation"||Ch();var r,o=e;if(t&&e.template)(r=new No(this.id,t,e.id)).content=e.template;else{(r=new dn).canMeasure=!i;var a=e.style,s=e.hyperlink.link?e.hyperlink:void 0;r.style={fill:a.fill,strokeColor:a.strokeColor,strokeWidth:a.strokeWidth,bold:a.bold,textWrapping:a.textWrapping,color:s?s.color||r.hyperlink.color:a.color,whiteSpace:a.whiteSpace,fontFamily:a.fontFamily,fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textOverflow:e.style.textOverflow,textDecoration:s?s.textDecoration||r.hyperlink.textDecoration:a.textDecoration},r.hyperlink.link=e.hyperlink.link||void 0,r.hyperlink.content=e.hyperlink.content||void 0,r.hyperlink.textDecoration=e.hyperlink.textDecoration||void 0,r.content=s?s.content||r.hyperlink.link:e.content}return r.constraints=e.constraints,r.height=e.height,r.width=e.width,r.visible=e.visibility,r.rotateAngle=e.rotateAngle,r.id=this.id+"_"+e.id,void 0===this.width||e.template||(void 0===e.width||e.width>this.width&&("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping))&&(r.width=this.width),r.margin=e.margin,r.horizontalAlignment=e.horizontalAlignment,r.verticalAlignment=e.verticalAlignment,r.setOffsetWithRespectToBounds(o.offset.x,o.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(r.float=!0),r.relativeMode="Point",r},t.prototype.initIconContainer=function(e,t){var i=new sn;return i.id=t.id+"_rect",i.height=e.height,i.width=e.width,i.visible=t.visible,i.margin=e.margin,i.cornerRadius=e.cornerRadius,i.style={fill:e.fill,strokeColor:e.borderColor,strokeWidth:e.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},t.prototype.initIconSymbol=function(e,t,i,n){var r;if(t.children.push(this.initIconContainer(e,t)),"Template"===e.shape)(r=new xn(this.id,n)).content=e.content,r.height=10,r.width=10;else{(r=new yn).data=Rn(e);var o=Kc(r.data);r.height=o.height<10?o.height:10-(e.padding.bottom+e.padding.top),r.width=o.width<10?o.width:10-(e.padding.left+e.padding.right)}r.id=t.id+"_shape",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.visible=t.visible,r.visible=t.visible,r.style={fill:"black",strokeColor:e.borderColor,strokeWidth:e.borderWidth},r.setOffsetWithRespectToBounds(.5,.5,"Fraction"),r.relativeMode="Object",r.description=t.description||"Click here to expand or collapse",t.children.push(r)},t.prototype.getClassName=function(){return"Node"},fc([ge([],Ln)],t.prototype,"annotations",void 0),fc([pe(0)],t.prototype,"offsetX",void 0),fc([pe(0)],t.prototype,"offsetY",void 0),fc([ue({x:.5,y:.5},ni)],t.prototype,"pivot",void 0),fc([pe()],t.prototype,"width",void 0),fc([pe()],t.prototype,"height",void 0),fc([pe()],t.prototype,"minWidth",void 0),fc([pe()],t.prototype,"minHeight",void 0),fc([pe()],t.prototype,"maxWidth",void 0),fc([pe()],t.prototype,"maxHeight",void 0),fc([pe(0)],t.prototype,"rotateAngle",void 0),fc([ue({fill:"white"},an)],t.prototype,"style",void 0),fc([pe("transparent")],t.prototype,"backgroundColor",void 0),fc([pe("none")],t.prototype,"borderColor",void 0),fc([pe(0)],t.prototype,"borderWidth",void 0),fc([pe()],t.prototype,"data",void 0),fc([fe(gc)],t.prototype,"shape",void 0),fc([pe(null)],t.prototype,"wrapper",void 0),fc([pe(ki.Default)],t.prototype,"constraints",void 0),fc([ue({},$i)],t.prototype,"shadow",void 0),fc([pe()],t.prototype,"children",void 0),fc([pe(null)],t.prototype,"container",void 0),fc([pe("Left")],t.prototype,"horizontalAlignment",void 0),fc([pe("Top")],t.prototype,"verticalAlignment",void 0),fc([pe()],t.prototype,"rows",void 0),fc([pe()],t.prototype,"columns",void 0),fc([pe()],t.prototype,"rowIndex",void 0),fc([pe()],t.prototype,"columnIndex",void 0),fc([pe()],t.prototype,"rowSpan",void 0),fc([pe()],t.prototype,"columnSpan",void 0),fc([pe("")],t.prototype,"branch",void 0),t}(Io),Xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),fc([pe("")],t.prototype,"id",void 0),fc([ue({style:{fill:"#111111"}},An)],t.prototype,"annotation",void 0),fc([ue({fill:"#E7F4FF",strokeColor:"#CCCCCC"},rn)],t.prototype,"style",void 0),fc([pe(50)],t.prototype,"height",void 0),fc([pe(50)],t.prototype,"width",void 0),t}(ke),Vc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Lane"},fc([pe("")],t.prototype,"id",void 0),fc([ue({fill:"#F9F9F9",strokeColor:"#CCCCCC"},rn)],t.prototype,"style",void 0),fc([ge([],Yc)],t.prototype,"children",void 0),fc([pe(100)],t.prototype,"height",void 0),fc([pe(100)],t.prototype,"width",void 0),fc([ue({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Xc)],t.prototype,"header",void 0),t}(ke),Uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.getClassName=function(){return"Phase"},fc([pe("")],t.prototype,"id",void 0),fc([ue({strokeColor:"#CCCCCC"},rn)],t.prototype,"style",void 0),fc([ue({annotation:{content:"Phase"}},Xc)],t.prototype,"header",void 0),fc([pe(100)],t.prototype,"offset",void 0),t}(ke),Gc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=20,t.hasHeader=!0,t}return uc(t,e),t.prototype.getClassName=function(){return"SwimLane"},fc([pe("SwimLane")],t.prototype,"type",void 0),fc([pe(20)],t.prototype,"phaseSize",void 0),fc([ge([],Uc)],t.prototype,"phases",void 0),fc([pe("Horizontal")],t.prototype,"orientation",void 0),fc([ge([],Vc)],t.prototype,"lanes",void 0),fc([ue({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Xc)],t.prototype,"header",void 0),fc([pe(!1)],t.prototype,"isLane",void 0),fc([pe(!1)],t.prototype,"isPhase",void 0),t}(mc),qc=function(){function e(){}return e.prototype.getClassName=function(){return"ChildContainer"},fc([pe("Canvas")],e.prototype,"type",void 0),fc([pe("Vertical")],e.prototype,"orientation",void 0),e}(),Zc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.init=function(e){var t=new cn;t.measureChildren=!1;new ei;if(t.children=[],this.annotation){var i=this.nodes.length>0?e.nameTable[this.nodes[0].id].wrapper:e.nameTable[this.connectors[0].id].wrapper,n=e.getWrapper(i,this.annotation.id);t.children.push(n)}else if(this.nodes||this.connectors){for(var r=0;r<this.nodes.length;r++){n=e.nameTable[this.nodes[r].id].wrapper;t.children.push(n)}for(var o=0;o<this.connectors.length;o++){n=e.nameTable[this.connectors[o].id].wrapper;t.children.push(n)}}return this.wrapper=t,t},fc([pe(null)],t.prototype,"wrapper",void 0),fc([ge([],Yc)],t.prototype,"nodes",void 0),fc([ge([],na)],t.prototype,"connectors",void 0),fc([pe()],t.prototype,"width",void 0),fc([pe()],t.prototype,"height",void 0),fc([pe(0)],t.prototype,"rotateAngle",void 0),fc([pe(0)],t.prototype,"offsetX",void 0),fc([pe(0)],t.prototype,"offsetY",void 0),fc([ue({x:.5,y:.5},ni)],t.prototype,"pivot",void 0),fc([pe("CompleteIntersect")],t.prototype,"rubberBandSelectionMode",void 0),fc([ge([],Wa)],t.prototype,"userHandles",void 0),fc([pe(Ai.All)],t.prototype,"constraints",void 0),fc([pe()],t.prototype,"setTooltipTemplate",void 0),t}(ke);function Qc(e){var t,i=[];if("msie"===J.info.name||"edge"===J.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i}function Kc(e){if(e){window.measureElement.style.visibility="visible";var t=Qc(window.measureElement.children[2])[0];t.setAttribute("d",e);var i=t.getBBox(),n=new mi(i.x,i.y,i.width,i.height);return window.measureElement.style.visibility="hidden",n}return new mi(0,0,0,0)}function $c(e,t,i,n,r){var o=new ei,a=ph("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==i&&(a.style.width=i.toString()+"px"),void 0!==n&&(a.style.height=n.toString()+"px"),void 0!==r&&(a.style.maxWidth=r.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=t,a.style.whiteSpace=jh(e.whiteSpace,e.textWrapping),a.style.wordBreak=void 0!==r?"break-word":kh(e.textWrapping),document.body.appendChild(a),o.width=a.offsetWidth,o.height=a.offsetHeight,document.body.removeChild(a),o}function Jc(e,t,i,n){var r,o,a=0,s=0,l=!1;return 0===(r=t).x&&0===r.y||(a=0-Number(r.x),s=0-Number(r.y)),(e.actualSize.width!==r.width||e.actualSize.height!==r.height||n)&&(a=(n&&n.width||e.actualSize.width)/Number(r.width?r.width:1),s=(n&&n.height||e.actualSize.height)/Number(r.height?r.height:1),l=!0),o=ci(pi(ri(e.data)),a,s,l,r.x,r.y,0,0),l=!1,o}function eh(e){return th(e).getElementsByClassName("e-diagram-layer")[0]}function th(e,t){var i;return t&&(i=document.getElementById(t)),i?i.querySelector("#"+e):document.getElementById(e)}function ih(e,t,i){var n,r,o=void 0,a="";"native"===i?(n=hh(e),a="_content_groupElement"):"html"===i?(n=dh(e).childNodes[0],a="_html_element"):(n=function(e){var t=eh(e);return t.getElementById(e+"_diagramLayer")}(e),a="_groupElement");for(var s=0;n.childNodes&&s<n.childNodes.length;s++)if((r=n.childNodes[s])&&r.id===t+a){o=s;break}return o}function nh(e){return th(e).getElementsByClassName("e-adorner-layer")[0]}function rh(e){return nh(e).getElementById(e+"_SelectorElement")}function oh(e){return nh(e).getElementById(e+"_diagramAdorner")}function ah(e){return th(e).getElementsByClassName("e-native-layer")[0]}function sh(e){return th(e).getElementsByClassName("e-grid-layer")[0]}function lh(e){return th(e).getElementsByClassName("e-background-layer")[0].parentNode}function ch(e){return th(e).getElementsByClassName("e-background-layer")[0]}function hh(e){return ah(e).getElementById(e+"_nativeLayer")}function dh(e){return th(e).getElementsByClassName("e-html-layer")[0]}function ph(e,t){var i=P(e);return wh(i,t),i}function uh(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return bh(i,t),i}function fh(e,t,i){for(var n=e;n&&(i?n.id!==t:!gh(n,t));)n=n.parentNode;return n}function gh(e,t){return(" "+("object"===typeof e.className?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function mh(e,t,i){e=[];for(var n=0,r=i.length;n<r;n++)e.push({pageX:i[n].clientX,pageY:i[n].clientY,pointerId:null});return e}function yh(e,t){var i=th(e,t);i&&i.parentNode.removeChild(i)}function vh(e,t){var i;if(t){i=ph("div",{style:"height: 100%; width: 100%"})}else i=document.createElementNS("http://www.w3.org/2000/svg","g");var n,r=Zl(e),o="",a={};if(r instanceof Yc){a=r;if(window.Blazor){a={};if(o=r.id+"content_diagram",a.id=r.id,a.height=r.height,a.width=r.width,a.offsetX=r.offsetX,a.offsetY=r.offsetY,a.addInfo=r.addInfo,r.annotations&&r.annotations.length>0){a.annotations=[];for(var s=0;s<r.annotations.length;s++)a.annotations[s]={content:r.annotations[s].content}}}}else a=r,o=e.diagramId+"template_diagram";if("string"===typeof e.content){var l=document.getElementById(e.content);if(l)i.appendChild(l);else for(var c=0,h=Qt(e.content)(a,null,null,o);c<h.length;c++)n=h[c],i.appendChild(n)}else i.appendChild(e.content);return i.cloneNode(!0)}function bh(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])}function wh(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])}function xh(){if(window.measureElement)window.measureElement.usageCount+=1;else{var e=ph("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=ph("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i;i=ph("img",{}),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(r);document.createTextNode("");var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(o),window.measureElement=e,window.measureElement.usageCount=1,document.body.appendChild(e)}}function Sh(e,t,i,n){return t.length>1&&0===e.x&&("Clip"===n.textOverflow||"Ellipsis"===n.textOverflow)&&"Wrap"===n.textWrapping?(e.x=t[i-1]?t[i-1].x:-e.width/2,e.x):e.x}function Ch(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var r=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(r)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===n&&e<10?n--:i+=t.substring(e,e+1)}return i}function Ph(e){new mi;var t=e.offsetY-e.actualSize.height*e.pivot.y,i=e.offsetY+e.actualSize.height*(1-e.pivot.y),n=e.offsetX-e.actualSize.width*e.pivot.x,r=e.offsetX+e.actualSize.width*(1-e.pivot.x),o={x:n,y:t},a={x:r,y:t},s={x:n,y:i},l={x:r,y:i};return mi.toBounds([o,a,s,l])}function Eh(e){var t,i=new mi,n=(t=Ph(e)).middleLeft,r=t.topCenter,o=t.bottomCenter,a=t.middleRight,s=t.topLeft,l=t.topRight,c=t.bottomLeft,h=t.bottomRight;if(e.corners={topLeft:s,topCenter:r,topRight:l,middleLeft:n,middleRight:a,bottomLeft:c,bottomCenter:o,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var d=vi();xi(d,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=s=bi(d,s),e.corners.topCenter=r=bi(d,r),e.corners.topRight=l=bi(d,l),e.corners.middleLeft=n=bi(d,n),e.corners.middleRight=a=bi(d,a),e.corners.bottomLeft=c=bi(d,c),e.corners.bottomCenter=o=bi(d,o),e.corners.bottomRight=h=bi(d,h)}return i=mi.toBounds([s,l,c,h]),e.corners.left=i.left,e.corners.right=i.right,e.corners.top=i.top,e.corners.bottom=i.bottom,e.corners.center=i.center,e.corners.width=i.width,e.corners.height=i.height,i}function Oh(e,t,i){var n={},r="properties";if(e){i=e.propName;var o=e[r]||e,a=[],s=[];if((a=a.concat(Object.keys(o))).push("version"),i){var l=_h(t);s=l?l(i):[],a=a.concat(s)}for(var c=Mh(i),h=0,d=a=a.concat(c);h<d.length;h++){var p=d[h];if("historyManager"!==p)if("wrapper"!==p){!(!e[p]||!e.hasOwnProperty("observers"))||(e[p]instanceof Array?n[p]=Th(-1===c.indexOf(p)&&e[r]?e[r][p]:e[p],t,p):e[p]instanceof Array===!1&&e[p]instanceof HTMLElement?n[p]=e[p].cloneNode(!0).innerHtml:e[p]instanceof Array===!1&&e[p]instanceof Object?n[p]=Oh(-1===c.indexOf(p)&&e[r]?e[r][p]:e[p]):n[p]=e[p])}else e[p]&&(n[p]={actualSize:{width:e[p].actualSize.width,height:e[p].actualSize.height},offsetX:e[p].offsetX,offsetY:e[p].offsetY})}}return n}function Mh(e){switch(e){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}function Th(e,t,i){var n;if(e){n=[];for(var r=0;r<e.length;r++)e[r]instanceof Array?n.push(e[r]):e[r]instanceof Object?n.push(Oh(e[r],t,i)):n.push(e[r])}return n}function Ah(e,t){if(e){t||(t={properties:{}});for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]instanceof Array){var o=Lh(e[r],t.properties[r]);t.properties[r]&&t.properties[r].length||(t[r]=o)}else if(e[r]instanceof Array===!1&&e[r]instanceof HTMLElement)t[r]=e[r].cloneNode(!0).innerHtml;else if(e[r]instanceof Array===!1&&e[r]instanceof Object){var a=Ah(e[r],t.properties[r]);a.properties&&!Object.keys(a.properties).length&&delete a.properties,t[r]=a}else t[r]=void 0!==t.properties[r]?t[r]:e[r]}}return t}function Lh(e,t){var i=[],n=!1;t||(t=[]),t.length||(n=!0);for(var r=0;r<e.length;r++)if(e[r]instanceof Array){Lh(e[r],t[r]);n&&i.push(Lh)}else if(e[r]instanceof Object){var o=Ah(e[r],t[r]);n&&i.push(o)}else i.push(e[r]);return i}function Dh(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function kh(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function Ih(e,t){window.measureElement.style.visibility="visible";var i=Qc(window.measureElement.children[2])[1];i.textContent=e,i.setAttribute("style","font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var n=i.getBBox().width;return window.measureElement.style.visibility="hidden",n}function Rh(e,t){return(e+t)/2}function Nh(e,t){var i,n=0,r=0,o=0,a="";i=e.length;var s=0;do{o>0&&(n=r),r=Math.floor(Rh(n,i)),o=Ih(a+=e.substr(n,r),t)}while(o<=t.width);for(a=a.substr(0,n),s=n;s<i;s++)if((o=Ih(a+=e[s],t))>=t.width){e=e.substr(0,a.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e}function jh(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function zh(e,t){var i=vi();xi(i,t,0,0);var n=bi(i,{x:0,y:0}),r=bi(i,{x:e.width,y:0}),o=bi(i,{x:0,y:e.height}),a=bi(i,{x:e.width,y:e.height}),s=Math.min(n.x,r.x,o.x,a.x),l=Math.min(n.y,r.y,o.y,a.y),c=Math.max(n.x,r.x,o.x,a.x),h=Math.max(n.y,r.y,o.y,a.y);return new ei(c-s,h-l)}function Hh(e,t,i,n){if(0!==e){var r=vi();return xi(r,e,t,i),bi(r,n)}return n}function Bh(e,t){return{x:e.x+t.desiredSize.width*t.pivot.x,y:e.y+t.desiredSize.height*t.pivot.y}}function _h(e){return void 0!==e&&"string"===typeof e&&(e=a(e,window)),e}var Wh=function(){function e(){}return e.getContext=function(e){return e.getContext("2d")},e.setCanvasSize=function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},e.prototype.renderGradient=function(e,t,i,n){var r,o,a;if("None"!==e.gradient.type){for(var s=0;s<e.gradient.stops.length;s++)r=void 0!==r?e.gradient.stops[s].offset:Math.max(r,e.gradient.stops[s].offset),o=void 0!==o?e.gradient.stops[s].offset:Math.min(o,e.gradient.stops[s].offset);if("Linear"===e.gradient.type){var l=e.gradient;a=t.createLinearGradient(i+l.x1,n+l.y1,i+l.x2,n+l.y2)}else{var c=e.gradient;a=t.createRadialGradient(i+c.fx,n+c.fy,0,i+c.cx,n+c.cy,c.r)}for(s=0;s<e.gradient.stops.length;s++){var h=e.gradient.stops[s],d=o<0?(r+h.offset)/(2*r):h.offset/r;a.addColorStop(d,h.color)}t.fillStyle=a}return t},e.prototype.renderShadow=function(t,i,n){void 0===n&&(n=null);var r=e.getContext(i);r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=t.shadow.color,r.globalAlpha=t.shadow.opacity;var o=ni.transform({x:0,y:0},t.shadow.angle,t.shadow.distance),a=t.x+o.x,s=t.y+o.y,l=a+t.width*t.pivotX,c=s+t.height*t.pivotY;this.rotateContext(i,t.angle,l,c),n?(r.translate(a,s),this.renderPath(i,t,n),r.translate(-a,-s)):(r.rect(a,s,t.width,t.height),r.fillRect(a,s,t.width,t.height)),r.fill(),r.stroke(),r.closePath(),r.restore()},e.createCanvas=function(e,t,i){var n=ph("canvas",{id:e});return this.setCanvasSize(n,t,i),n},e.prototype.setStyle=function(t,i){var n=e.getContext(t);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var r=[];i.dashArray&&(r=this.parseDashArray(i.dashArray)),n.setLineDash(r),i.gradient&&"None"!==i.gradient.type?this.renderGradient(i,n,0,0):n.fillStyle=i.fill},e.prototype.rotateContext=function(t,i,n,r){var o=e.getContext(t);o.translate(n,r),o.rotate(i*Math.PI/180),o.translate(-n,-r)},e.prototype.setFontStyle=function(t,i){var n=e.getContext(t),r="";i.italic&&(r+="italic "),i.bold&&(r+="bold "),r+=i.fontSize+"px ",r+=i.fontFamily,n.font=r},e.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",n=0,r=e.split(i);n<r.length;n++){var o=r[n];t.push(Number(o))}return t},e.prototype.drawRectangle=function(t,i){if(!0===i.visible)if(i.cornerRadius)i.data=ai(i.cornerRadius,i.height,i.width),this.drawPath(t,i);else{var n=e.getContext(t);i.shadow&&this.renderShadow(i,t),n.save(),n.beginPath();i.cornerRadius;var r=i.x+i.width*i.pivotX,o=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,r,o),this.setStyle(t,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},e.prototype.drawPath=function(t,i){var n=[];n=li(n=ri(i.data)),i.shadow&&this.renderShadow(i,t,n);var r=e.getContext(t);r.save(),r.beginPath();var o=i.y+i.height*i.pivotY,a=i.x+i.width*i.pivotX;"Horizontal"===i.flip||"Vertical"===i.flip?(r.translate(i.x+i.width/2,i.y+i.height/2),r.rotate(-i.angle*Math.PI/180),r.translate(-i.x-i.width/2,-i.y-i.height/2)):this.rotateContext(t,i.angle,a,o),this.setStyle(t,i),r.translate(i.x,i.y),"Horizontal"===i.flip?(r.scale(-1,1),r.translate(-1*i.width,0)):"Vertical"===i.flip?(r.scale(1,-1),r.translate(0,-1*i.height)):"Both"===i.flip&&(r.scale(-1,-1),r.translate(-1*i.width,-1*i.height)),this.renderPath(t,i,n),r.fill(),r.translate(-i.x,-i.y),r.stroke(),r.restore()},e.prototype.renderPath=function(t,i,n){if(!0===i.visible){var r,o=e.getContext(t),a=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,u=void 0,f=void 0,g=n;for(p=0,u=0,f=0,r=g.length;f<r;++f){var m=g[f],y=m.command;switch("x1"in m&&(l=m.x1),"x2"in m&&(h=m.x2),"y1"in m&&(c=m.y1),"y2"in m&&(d=m.y2),"x"in m&&(p=m.x),"y"in m&&(u=m.y),y){case"M":o.moveTo(p,u),m.x=p,m.y=u;break;case"L":o.lineTo(p,u),m.x=p,m.y=u;break;case"C":o.bezierCurveTo(l,c,h,d,p,u),m.x=p,m.y=u,m.x1=l,m.y1=c,m.x2=h,m.y2=d;break;case"Q":o.quadraticCurveTo(l,c,p,u),m.x=p,m.y=u,m.x1=l,m.y1=c;break;case"A":var v={x:a,y:s},b=m.r1,w=m.r2,x=m.angle*(Math.PI/180),S=m.largeArc,C=m.sweep,P={x:p,y:u},E={x:Math.cos(x)*(v.x-P.x)/2+Math.sin(x)*(v.y-P.y)/2,y:-Math.sin(x)*(v.x-P.x)/2+Math.cos(x)*(v.y-P.y)/2},O=Math.pow(E.x,2)/Math.pow(b,2)+Math.pow(E.y,2)/Math.pow(w,2);O>1&&(b*=Math.sqrt(O),w*=Math.sqrt(O));var M=Math.pow(w,2)*Math.pow(E.x,2),T=(S===C?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(w,2)-Math.pow(b,2)*Math.pow(E.y,2)-M)/(Math.pow(b,2)*Math.pow(E.y,2)+Math.pow(w,2)*Math.pow(E.x,2)));isNaN(T)&&(T=0);var A={x:T*b*E.y/w,y:T*-w*E.x/b},L={x:(v.x+P.x)/2+Math.cos(x)*A.x-Math.sin(x)*A.y,y:(v.y+P.y)/2+Math.sin(x)*A.x+Math.cos(x)*A.y},D=this.a([1,0],[(E.x-A.x)/b,(E.y-A.y)/w]),k=[(E.x-A.x)/b,(E.y-A.y)/w],I=[(-E.x-A.x)/b,(-E.y-A.y)/w],R=this.a(k,I);this.r(k,I)<=-1&&(R=Math.PI),this.r(k,I)>=1&&(R=0);var N=D+(C?1:-1)*(R/2);Math.cos(N),Math.sin(N);if(m.centp=L,m.xAxisRotation=x,m.rx=b,m.ry=w,m.a1=D,m.ad=R,m.sweep=C,null!=o){var j=b>w?b:w,z=b>w?1:b/w,H=b>w?w/b:1;o.save(),o.translate(L.x,L.y),o.rotate(x),o.scale(z,H),o.arc(0,0,j,D,D+R,!C),o.scale(1/z,1/H),o.rotate(-x),o.translate(-L.x,-L.y),o.restore()}break;case"Z":case"z":o.closePath(),p=a,u=s}a=p,s=u}}},e.prototype.drawText=function(t,i,n,r,o,a,s){if(i.content&&!0===i.visible){var l=e.getContext(t);l.save(),this.setStyle(t,i),a&&(i.fontSize*=a);var c=i.x+i.width*i.pivotX,h=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,c,h),this.setFontStyle(t,i);var d,p=0;d=i.childNodes;var u=i.wrapBounds;if(l.fillStyle=i.color,u){var f=this.labelAlign(i,u,d);for(p=0;p<d.length;p++){var g=d[p];g.x=Sh(g,d,p,i);var m=f.x+(a?g.x*a:g.x)-u.x,y=f.y+(a?g.dy*a:g.dy)*p+.8*i.fontSize;if(u.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(g.text=Nh(g.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)l.fillText(g.text,m,y);else if(y<s.actualSize.height+s.bounds.y){if("Ellipsis"===i.textOverflow&&d[p+1]){var v=d[p+1];f.y+v.dy*(p+1)+.8*i.fontSize>s.actualSize.height+s.bounds.y&&(g.text=g.text.slice(0,g.text.length-3),g.text=g.text.concat("..."))}l.fillText(g.text,m,y)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var b=m,w=void 0,x=m+l.measureText(g.text).width,S=void 0;switch(i.textDecoration){case"Underline":w=y+2,S=y+2;break;case"Overline":w=f.y+g.dy*p,S=f.y+g.dy*p;break;case"LineThrough":w=(y+f.y+g.dy*p)/2+2,S=(y+f.y+g.dy*p)/2+2}l.beginPath(),l.moveTo(b,w),l.lineTo(x,S),l.strokeStyle=i.color,l.lineWidth=.08*i.fontSize,l.globalAlpha=i.opacity,l.stroke()}}}l.restore()}},e.prototype.loadImage=function(e,t,i,n,r){this.rotateContext(i,t.angle,n,r);var o=new Image;o.src=t.source,this.image(e,o,t.x,t.y,t.width,t.height,t)},e.prototype.drawImage=function(t,i,n,r){var o=this;if(i.visible){var a=e.getContext(t);a.save();var s=i.x+i.width*i.pivotX,l=i.y+i.height*i.pivotY,c=new Image;c.src=i.source;var h=a.canvas.id.split("_");h[h.length-1];r?c.onload=function(){o.loadImage(a,i,t,s,l)}:this.loadImage(a,i,t,s,l),a.restore()}},e.prototype.image=function(e,t,i,n,r,o,a){e.beginPath();var s=t.width,l=t.height,c=r,h=o,d=0,p=0;if(a&&"None"!==a.alignment){var u=a.alignment.toLowerCase().substr(1,3),f=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var g=function(){d=c,p=l*c/s},m=function(){d=s*h/l,p=h};c>h?(g(),h>p&&m()):c===h?s>l?m():g():(m(),c>d&&g());var y=this.getSliceOffset(u,d,c,s),v=this.getSliceOffset(f,p,h,l),b=s-y,w=l-v,x=d-y*(d/s),S=p-v*(p/l),C=ph("canvas",{width:r.toString(),height:o.toString()});C.getContext("2d").drawImage(t,y,v,b,w,0,0,x,S),e.drawImage(C,i,n,r,o)}else if("Meet"===a.scale){var P=l/s,E=h/c;d=E>P?c:h/P,p=E>P?c*P:h,i+=this.getMeetOffset(u,d,c),n+=this.getMeetOffset(f,p,h),e.drawImage(t,0,0,s,l,i,n,d,p)}else e.drawImage(t,i,n,r,o)}else if("None"!==a.flip){var O=1,M=1;"Horizontal"!==a.flip&&"Both"!==a.flip||(i=-i,r=-r,O=-1),"Vertical"!==a.flip&&"Both"!==a.flip||(n=-n,o=-o,M=-1),e.scale(O,M),e.drawImage(t,i,n,r,o)}else e.drawImage(t,i,n,r,o);e.closePath()},e.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t;default:return 0}},e.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),r=Math.min(t,i);switch(e){case"min":return 0;case"mid":return(n-r)/2;case"max":return n-r;default:return 0}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.labelAlign=function(e,t,i){var n=new ei(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},o=e.x,a=e.y,s=.5*e.width,l=.5*e.height;return"left"===e.textAlign?s=0:"center"===e.textAlign?s=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(s=1*e.width),r.x=o+s+(t?t.x:0),r.y=a+l-n.height/2,r},e}(),Fh=function(){function e(){}return e.prototype.renderShadow=function(e,t,i,n){void 0===i&&(i=null);var r,o,a=ni.transform({x:0,y:0},e.shadow.angle,e.shadow.distance),s=e.x+a.x,l=e.y+a.y;e.width,e.pivotX,e.height,e.pivotY;n&&(o=n.getElementById(t.id+"_shadow")),o||(r=i?"path":"rect",o=document.createElementNS("http://www.w3.org/2000/svg",r),t.appendChild(o));var c={id:t.id+"_shadow",fill:e.shadow.color,stroke:e.shadow.color,opacity:e.shadow.opacity.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+(e.x+a.x)+","+(e.y+a.y)+")"};if(n){var h=n.getElementById(t.id);h&&h.insertBefore(o,h.firstChild)}bh(o,c),i?i&&this.renderPath(o,e,i):bh(o,{width:e.width,height:e.height})},e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,i,n,r,o,a){var s,l,c;t.shadow&&!n&&this.renderShadow(t,e,void 0,o),s=t.id===e.id?t.id+"_container":t.id,o&&(l=o.getElementById(s)),l&&!r||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(l)),o&&!t.shadow&&(c=o.getElementById(t.id+"_groupElement_shadow"))&&c.parentNode.removeChild(c);var h={id:s,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(h.class=t.class);a||(h["pointer-events"]="none"),bh(l,h),this.setSvgStyle(l,t,i)},e.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),bh(i,n)},e.prototype.createGElement=function(e,t){return uh(e,t)},e.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,r=t.y+t.height*t.pivotY,o={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+r+")",visibility:t.visible?"visible":"hidden"};t.class&&(o.class=t.class),bh(i,o),e.appendChild(i)},e.prototype.drawCircle=function(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,t);var o=t.class||"";i||(o+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:o,"aria-label":n?n["aria-label"]:""};r.style.display=t.visible?"block":"none",bh(r,a),e.appendChild(r)},e.prototype.drawPath=function(e,t,i,n,r,o){var a=Math.floor(10*Math.random()+1);e.id,a.toString();var s,l,c=[];c=li(c=ri(t.data)),t.shadow&&this.renderShadow(t,e,c,r),r&&!t.shadow&&(s=r.getElementById(t.id+"_groupElement_shadow"))&&s.parentNode.removeChild(s),r&&(l=r.getElementById(t.id)),l&&!n||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(l)),this.renderPath(l,t,c);var h={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":o||""};t.class&&(h.class=t.class),bh(l,h),this.setSvgStyle(l,t,i)},e.prototype.renderPath=function(e,t,i){var n,r,o,a,s,l,c,h,d=i,p="";for(s=0,l=0,h=0,c=d.length;h<c;++h){var u=d[h],f=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"y1"in u&&(r=u.y1),"y2"in u&&(a=u.y2),"x"in u&&(s=u.x),"y"in u&&(l=u.y),f){case"M":p=p+"M"+s.toString()+","+l.toString()+" ";break;case"L":p=p+"L"+s.toString()+","+l.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+r.toString()+","+o.toString()+","+a.toString()+",",p+=s.toString()+","+l.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+r.toString()+","+s.toString()+","+l.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+s.toString()+","+l.toString()+" ";break;case"Z":case"z":p+="Z "}}e.setAttribute("d",p)},e.prototype.setSvgFontStyle=function(e,t){e.style.fontStyle=t.italic?"italic":"normal",e.style.fontWeight=t.bold?"bold":"normal",e.style.fontSize=t.fontSize.toString()+"px",e.style.fontFamily=t.fontFamily},e.prototype.drawText=function(e,t,i,n,r,o,a){if(void 0!==t.content){var s=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,u=0,f=0,g=0,m=void 0;if(i&&(m=i.getElementById(t.id+"_text")),m){if(t.doWrap)for(;m.firstChild;)m.removeChild(m.firstChild)}else t.doWrap=!0,m=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===t.whiteSpace&&m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.appendChild(m);var y=t.x+t.width*t.pivotX,v=t.y+t.height*t.pivotY;if(t.doWrap||"Wrap"!==t.textOverflow){var b=document.getElementById(t.id+"_text");for(b&&(b.innerHTML=""),this.setSvgStyle(m,t,r),this.setSvgFontStyle(m,t),s=document.createTextNode(t.content),l=t.childNodes,c=t.wrapBounds,h=this.svgLabelAlign(t,c,l),c.width>t.width&&"Wrap"!==t.textOverflow&&"NoWrap"===t.textWrapping&&(l[0].text=Nh(t.content,t)),g=0;g<l.length;g++)if(p=document.createElementNS("http://www.w3.org/2000/svg","tspan"),s=document.createTextNode(l[g].text),(d=l[g]).x=Sh(d,l,g,t),u=h.x+d.x-c.x,f=h.y+d.dy*g+.8*t.fontSize,"Clip"!==t.textOverflow&&"Ellipsis"!==t.textOverflow||"Wrap"!==t.textWrapping)this.setText(m,p,d,s,u,f);else{if(!(f<a.actualSize.height))break;if("Ellipsis"===t.textOverflow&&l[g+1]){var w=l[g+1];h.y+w.dy*(g+1)+.8*t.fontSize>a.actualSize.height&&(d.text=d.text.slice(0,d.text.length-3),d.text=d.text.concat("..."),s.data=d.text)}this.setText(m,p,d,s,u,f)}}t.textDecoration&&"LineThrough"===t.textDecoration&&(t.textDecoration=kh(t.textDecoration)),bh(m,{id:t.id+"_text",fill:t.color,visibility:t.visible?"visible":"hidden","text-decoration":t.textDecoration,transform:"rotate("+t.angle+","+y+","+v+")translate("+t.x+","+t.y+")",opacity:t.opacity,"aria-label":n||""})}},e.prototype.setText=function(e,t,i,n,r,o){bh(t,{x:r.toString(),y:o.toString()}),e.setAttribute("fill",i.text),t.appendChild(n),e.appendChild(t)},e.prototype.drawImage=function(e,t,i,n){var r;t.id;i&&(r=i.getElementById(t.id+"image")),r||(r=document.createElementNS("http://www.w3.org/2000/svg","image"),e.appendChild(r));var o=new Image;o.src=t.source;var a="None"!==t.scale?t.scale:"",s=t.alignment,l=s.charAt(0).toLowerCase()+s.slice(1);a&&(l+=" "+a.charAt(0).toLowerCase()+a.slice(1)),bh(r,{id:t.id+"image",x:t.x.toString(),y:t.y.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",width:t.width.toString(),visibility:t.visible?"visible":"hidden",height:t.height.toString(),preserveAspectRatio:l,opacity:(t.opacity||1).toString()}),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o.src.toString())},e.prototype.drawHTMLContent=function(e,t,i,n,r){var o,a;if(t){var s=void 0,l=void 0,c=void 0;for(s=0;s<t.childNodes.length;s++)for(c=t.childNodes[s],l=0;l<c.childNodes.length;l++)c.childNodes[l].id===e.id+"_html_element"&&(o=c.childNodes[l])}if(!o){if(!(a=t.querySelector("#"+e.id+"_html_element")))a=ph("div",{id:e.nodeId+"_html_element",class:"foreign-object"});(o=ph("div",{id:e.id+"_html_element",class:"foreign-object"})).appendChild(e.template.cloneNode(!0)),void 0!==r&&t.childNodes.length>r?t.insertBefore(o,t.childNodes[r]):(a.appendChild(o),t.appendChild(a))}var h=Ph(e).topLeft;o.setAttribute("style","height:"+e.actualSize.height+"px; width:"+e.actualSize.width+"px;left:"+h.x+"px; top:"+h.y+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")},e.prototype.drawNativeContent=function(e,t,i,n,r){var o,a;r&&(o=r.getElementById(e.id+"_native_element"),a=r.getElementById(e.id+"_clip")),o||((o=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",e.id+"_native_element"),o.appendChild(e.template.cloneNode(!0)),t.appendChild(o)),a&&o.removeChild(a),o.setAttribute("style","visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";"),this.setNativTransform(e,o,i,n),"Slice"===e.scale&&this.drawClipPath(e,o,i,n,r),bh(o,e.description?{"aria-label":e.description}:{})},e.prototype.setNativTransform=function(e,t,i,n){var r=0!==e.contentSize.width?e.contentSize.width:1,o=0!==e.contentSize.height?e.contentSize.height:1,a=e.templatePosition.x*n/r,s=e.templatePosition.y*i/o;t.setAttribute("transform","rotate("+e.parentTransform+","+e.offsetX+","+e.offsetY+") translate("+(e.offsetX-a-n*e.pivot.x)+","+(e.offsetY-s-i*e.pivot.y)+") scale("+n/r+","+i/o+")")},e.prototype.drawClipPath=function(e,t,i,n,r){var o=e.contentSize.width,a=e.contentSize.height,s=(e.actualSize.width,e.actualSize.height,e.width/(n/o)),l=e.height/(i/a),c=e.templatePosition.x+(e.width>=e.height?0:(o-s)/2),h=e.templatePosition.y+(e.height>=e.width?0:(a-l)/2),d=r.getElementById(e.id+"_clip");(d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",e.id+"_clip"),t.appendChild(d);var p=r.getElementById(e.id+"_clip_rect");return p=document.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(p),bh(p,{id:e.id+"_clip_rect",width:s.toString(),height:l.toString(),x:c.toString(),y:h.toString()}),t.setAttribute("clip-path","url(#"+e.id+"_clip)"),t},e.prototype.renderGradient=function(e,t,i){var n,r,o,a,s,l=lh(i),c=l.getElementById(i+"gradient_pattern");if(c||(c=uh("defs",{id:i+"gradient_pattern"}),l.insertBefore(c,l.firstChild)),Rl(t.id),"None"!==e.gradient.type){for(var h=0;h<e.gradient.stops.length;h++)n=n?Math.max(n,e.gradient.stops[h].offset):e.gradient.stops[h].offset,r=r?Math.min(r,e.gradient.stops[h].offset):e.gradient.stops[h].offset;"Linear"===e.gradient.type?((s=e.gradient).id=t.id+"_linear",o=this.createLinearGradient(s),c.appendChild(o)):((a=e.gradient).id=t.id+"_radial",o=this.createRadialGradient(a),c.appendChild(o));for(h=0;h<e.gradient.stops.length;h++){var d=e.gradient.stops[h],p=r<0?(n+d.offset)/(2*n):d.offset/n,u=document.createElementNS("http://www.w3.org/2000/svg","stop");bh(u,{offset:p.toString(),style:"stop-color:"+d.color}),o.appendChild(u)}}return o},e.prototype.createLinearGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return bh(t,{id:e.id,x1:e.x1+"%",y1:e.y1+"%",x2:e.x2+"%",y2:e.y2+"%"}),t},e.prototype.createRadialGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return bh(t,{id:e.id,cx:e.cx+"%",cy:e.cy+"%",r:e.r+"%",fx:e.fx+"%",fy:e.fy+"%"}),t},e.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var n=[],r=void 0;if(t.dashArray)n=(new Wh).parseDashArray(t.dashArray);if(t.gradient&&"None"!==t.gradient.type)r="url(#"+this.renderGradient(t,e,i).id+")";else r=t.fill;t.stroke&&e.setAttribute("stroke",t.stroke),void 0!==t.strokeWidth&&null!==t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),n&&e.setAttribute("stroke-dasharray",n.toString()||"none"),r&&e.setAttribute("fill",r)}},e.prototype.svgLabelAlign=function(e,t,i){var n=new ei(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},o=.5*e.width,a=.5*e.height;return"left"===e.textAlign?o=0:"center"===e.textAlign?o=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(o=1*e.width),r.x=0+o+(t?t.x:0),r.y=1.2+a-n.height/2,r},e}(),Yh=function(){function e(e,t,i){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=e,this.element=th(this.diagramId),this.svgRenderer=t,this.isSvgMode=i,this.renderer=i?new Fh:new Wh}return e.prototype.setCursor=function(e,t){e.style.cursor=t},e.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},e.prototype.getAdornerLayer=function(){return oh(this.diagramId)},e.prototype.getParentSvg=function(e,t,i){return this.diagramId&&e&&e.id?e.id.split("_icon_content").length>1||e.id.split("_nodeport").length>1?this.iconSvgLayer:t&&"selector"===t?this.adornerSvgLayer:e instanceof xn?this.nativeSvgLayer:this.diagramSvgLayer:i},e.prototype.getParentElement=function(e,t,i,n){var r=t;if(i&&this.diagramId&&e&&e.id){e.id.split("_icon_content").length>1?(r=i.getElementById(this.diagramId+"_diagramExpander"),t=null):e.id.split("_nodeport").length>1?r=i.getElementById(this.diagramId+"_diagramPorts"):e instanceof xn?(r=i.getElementById(this.diagramId+"_nativeLayer"),t=null):r=i.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(e,t||r,n);r=o.g,o.svg&&(i=o.svg)}return{g:r,svg:i}},e.prototype.getGroupElement=function(e,t,i){var n,r,o=this.getParentSvg(e);if(t&&o){if(o&&!(n=o.getElementById(e.id+"_groupElement"))&&o!==this.nativeSvgLayer){var a=this.nativeSvgLayer;n=a.getElementById(e.id+"_groupElement"),r=a}n||(n=this.svgRenderer.createGElement("g",{id:e.id+"_groupElement"}),void 0!==i&&t.childNodes.length>i?t.insertBefore(n,t.childNodes[i]):t.appendChild(n))}return{g:n,svg:r}},e.prototype.renderElement=function(e,t,i,n,r,o,a,s){e instanceof cn?(!1,this.renderContainer(e,t,i,n,r,o,a,s)):e instanceof bn?this.renderImageElement(e,t,n,r,a):e instanceof yn?this.renderPathElement(e,t,n,r,a):e instanceof dn?this.renderTextElement(e,t,n,r,a):e instanceof xn?this.renderNativeElement(e,t,n,r,a):e instanceof No?this.renderHTMLElement(e,t,i,n,r,a,s):this.renderRect(e,t,n,r)},e.prototype.drawSelectionRectangle=function(e,t,i,n,r,o){e=(e+o.tx)*o.scale,t=(t+o.ty)*o.scale;var a={width:i*o.scale,height:n*o.scale,x:e+.5,y:t+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:r.id+"_selected_region"},s=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(s,a)},e.prototype.renderHighlighter=function(e,t,i){var n=e.actualSize.width||2,r=e.actualSize.height||2,o=e.offsetX-n*e.pivot.x,a=e.offsetY-r*e.pivot.y;o=(o+i.tx)*i.scale,a=(a+i.ty)*i.scale;var s={width:n*i.scale,height:r*i.scale,x:o,y:a,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(t,s,this.diagramId)},e.prototype.renderStackHighlighter=function(e,t,i,n,r,o,a){var s,l=e.actualSize.width||2,c=e.offsetX-l*e.pivot.x,h=e.actualSize.height||2,d=e.offsetY-h*e.pivot.y;c=(c+i.tx)*i.scale;var p=e.bounds,u="";if(d=(d+i.ty)*i.scale,n)if(o){s="M 0 0 L "+((m=l*i.scale)+2)+" 0 Z";var f=p.x,g=p.y;f=e.actualSize.width/Number(p.width?p.width:1)*i.scale,g=e.actualSize.height/Number(p.height?p.height:1)*i.scale;u=ci(pi(ri("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),f+m+2,g-8,!1,p.x,p.y,0,0),r.y>=e.offsetY&&(d+=h)}else{var m;a&&r.y>=e.offsetY&&(d+=h),s="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(m=l*i.scale)+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else s="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(m=h*i.scale)+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",r.x>=e.offsetX&&(c+=l);var y={data:s+u,width:l*i.scale,height:h*i.scale,x:c,y:d,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:t.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(t,y,this.diagramId)},e.prototype.drawLine=function(e,t){this.svgRenderer.drawLine(e,t)},e.prototype.drawPath=function(e,t){this.svgRenderer.drawPath(e,t,this.diagramId)},e.prototype.renderResizeHandle=function(e,t,i,n,r,o,a,s,l,c){var h=e.offsetX-e.actualSize.width*e.pivot.x,d=e.offsetY-e.actualSize.height*e.pivot.y,p=e.actualSize.height,u=e.actualSize.width;!c&&i&Ri.Rotate&&za(this.rendererActions)&&!Ha(this.rendererActions)&&(this.renderPivotLine(e,t,o,r,a),this.renderRotateThumb(e,t,o,r,a)),this.renderBorder(e,t,o,s,l,c);var f=e.actualSize.width*n,g=e.actualSize.height*n;l||!za(this.rendererActions)||Ha(this.rendererActions)||(f>=40&&g>=40&&(r&Ai.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",e,h,d,t,Bl(r,"ResizeNorthWest"),i&Ri.ResizeNorthWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),r&Ai.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",e,h+u,d,t,Bl(r,"ResizeNorthEast"),i&Ri.ResizeNorthEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),r&Ai.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",e,h,d+p,t,Bl(r,"ResizeSouthWest"),i&Ri.ResizeSouthWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),r&Ai.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",e,h+u,d+p,t,Bl(r,"ResizeSouthEast"),i&Ri.ResizeSouthEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),r&Ai.ResizeNorth&&this.renderCircularHandle("resizeNorth",e,h+u/2,d,t,Bl(r,"ResizeNorth"),i&Ri.ResizeNorth,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),r&Ai.ResizeSouth&&this.renderCircularHandle("resizeSouth",e,h+u/2,d+p,t,Bl(r,"ResizeSouth"),i&Ri.ResizeSouth,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),r&Ai.ResizeWest&&this.renderCircularHandle("resizeWest",e,h,d+p/2,t,Bl(r,"ResizeWest"),i&Ri.ResizeWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),r&Ai.ResizeEast&&this.renderCircularHandle("resizeEast",e,h+u,d+p/2,t,Bl(r,"ResizeEast"),i&Ri.ResizeEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},e.prototype.renderEndPointHandle=function(e,t,i,n,r,o,a,s){var l,c,h=e.sourcePoint,d=e.targetPoint,p=e.wrapper;if(this.renderCircularHandle("connectorSourceThumb",p,h.x,h.y,t,Bl(n,"ConnectorSourceThumb"),i&Ri.ConnectorSource,r,o,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",p,d.x,d.y,t,Bl(n,"ConnectorTargetThumb"),i&Ri.ConnectorTarget,r,a,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),s)if(("Straight"===e.type||"Bezier"===e.type)&&e.segments.length>0)for(l=0;l<e.segments.length-1;l++)c=e.segments[l],this.renderCircularHandle("segementThumb_"+(l+1),p,c.point.x,c.point.y,t,!0,i&Ri.ConnectorSource,r,o,null,null,l);else for(l=0;l<e.segments.length;l++){var u=e.segments[l];this.renderOrthogonalThumbs("orthoThumb_"+(l+1),p,u,t,Bl(n,"ConnectorSourceThumb"),r)}if("Bezier"===e.type)for(l=0;l<e.segments.length;l++){var f=e.segments[l],g=ni.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1;this.renderCircularHandle("bezierPoint_"+(l+1)+"_1",p,g.x,g.y,t,Bl(n,"ConnectorSourceThumb"),i&Ri.ConnectorSource,r,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),Bl(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_1",p,t,f.points[0],ni.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1,r),g=ni.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,this.renderCircularHandle("bezierPoint_"+(l+1)+"_2",p,g.x,g.y,t,Bl(n,"ConnectorTargetThumb"),i&Ri.ConnectorTarget,r,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),Bl(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_2",p,t,f.points[1],ni.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,r)}},e.prototype.renderOrthogonalThumbs=function(e,t,i,n,r,o){var a,s,l,c=0;for(c=0;c<i.points.length-1;c++)l=ni.distancePoints(i.points[c],i.points[c+1]),a=i.points[c].y.toFixed(2)===i.points[c+1].y.toFixed(2)?"horizontal":"vertical",s=!!(l>=50&&i.allowDrag),this.renderOrthogonalThumb(e+"_"+(c+1),t,(i.points[c].x+i.points[c+1].x)/2,(i.points[c].y+i.points[c+1].y)/2,n,s,a,o)},e.prototype.renderOrthogonalThumb=function(e,t,i,n,r,o,a,s){var l,c,h;"horizontal"===a?(l="M0,7 L15,0 L30,7 L15,14 z",c=-15,h=-7):(l="M7,0 L0,15 L7,30 L14,15 z",c=-7,h=-15);var d={x:(i+s.tx)*s.scale+c,y:(n+s.ty)*s.scale+h,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:o,id:e};this.svgRenderer.drawPath(r,d,this.diagramId)},e.prototype.renderPivotLine=function(e,t,i,n,r){var o=e,a=!!(n&Ai.Rotate);r&&(a=!1);var s=this.getBaseAttributes(o,i);s.fill="None",s.stroke="black",s.strokeWidth=1,s.dashArray="2,3",s.visible=a;var l=i.scale;s.x*=l,s.y*=l,s.width*=l,s.height*=l,s.id="pivotLine",s.class="e-diagram-pivot-line";var c={x:o.actualSize.width*o.pivot.x*l,y:-20},h={x:o.actualSize.width*o.pivot.x*l,y:0};s.startPoint=c,s.endPoint=h,this.svgRenderer.drawLine(t,s)},e.prototype.renderBezierLine=function(e,t,i,n,r,o){var a=this.getBaseAttributes(t,o);a.id=e,a.stroke="black",a.strokeWidth=1,a.dashArray="3,3",a.fill="None",a.class="e-diagram-bezier-line",a.x=0,a.y=0;var s=o.scale,l={x:(n.x+o.tx)*s,y:(n.y+o.ty)*s},c={x:(r.x+o.tx)*s,y:(r.y+o.ty)*s};a.startPoint=l,a.endPoint=c,this.svgRenderer.drawLine(i,a)},e.prototype.renderCircularHandle=function(e,t,i,n,r,o,a,s,l,c,h,d,p){var u=t,f=7,g={x:i,y:n};if(0!==u.rotateAngle||0!==u.parentTransform){var m=vi();xi(m,u.rotateAngle+u.parentTransform,u.offsetX,u.offsetY),g=bi(m,g)}var y=this.getBaseAttributes(u);y.stroke="black",y.strokeWidth=1,void 0!==d?(f=5,y.id="segmentEnd_"+d,y.fill="#e2e2e2"):(f=7,y.fill=l?"#8CC63F":"white"),y.centerX=(g.x+s.tx)*s.scale,y.centerY=(g.y+s.ty)*s.scale,y.radius=f,y.angle=0,y.id=e,y.visible=o,y.class=p,l&&(y.class+=" e-connected"),c&&(y.visible=!1),this.svgRenderer.drawCircle(r,y,a,h)},e.prototype.renderBorder=function(e,t,i,n,r,o){var a=e,s=this.getBaseAttributes(a,i);s.x*=i.scale,s.y*=i.scale,s.width*=i.scale,s.height*=i.scale,s.fill="transparent",s.stroke="#097F7F",s.strokeWidth=.6,s.dashArray="6,3",s.class="e-diagram-border",o&&(s.class+=" e-diagram-lane"),s.id="borderRect",s.id=this.rendererActions&Fi.DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(s.class+=" e-disabled"),r&&(s.class+=" e-thick-border"),s.cornerRadius=0;var l=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,s,this.diagramId,void 0,!0,l)},e.prototype.renderUserHandler=function(e,t,i){for(var n=e.wrapper,r=0,o=e.userHandles;r<o.length;r++){var a=o[r],s=(new yn,void 0);if((s=zl(e,a,i)).x=(s.x+i.tx)*i.scale,s.y=(s.y+i.ty)*i.scale,a.visible&&(a.visible=!!(e.constraints&Ai.UserHandle)),""===a.content&&""===a.source){var l=a.pathData?a.pathData:a.content,c=this.getBaseAttributes(n);c.id=a.name+"_userhandle",c.fill=a.backgroundColor,c.stroke=a.borderColor,c.strokeWidth=a.borderWidth,c.centerX=s.x,c.centerY=s.y,c.radius=.5*a.size,c.class="e-diagram-userhandle-circle",c.angle=0,c.visible=a.visible,c.opacity=1,this.svgRenderer.drawCircle(t,c,1,{"aria-label":a.name+"user handle"});var h=[];h=pi(h=ri(l));var d=Kc(l),p=ci(h,(a.size-.45*a.size)/d.width,(a.size-.45*a.size)/d.height,!0,d.x,d.y,0,0);d=Kc(p);var u={x:s.x-d.width/2,y:s.y-d.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:a.pathColor,stroke:a.backgroundColor,strokeWidth:.5,dashArray:"",data:p,width:a.size-5,height:a.size-5,pivotX:0,pivotY:0,opacity:1,visible:a.visible};this.svgRenderer.drawPath(t,u,this.diagramId,void 0,void 0,{"aria-label":a.name+"user handle"})}else if(""!==a.content){var f=void 0;(f=new xn(a.name,this.diagramId)).content=a.content,f.offsetX=s.x,f.offsetY=s.y,f.height=a.size,f.width=a.size,f.id=a.name+"_shape",f.horizontalAlignment="Center",f.verticalAlignment="Center",f.visible=a.visible,f.setOffsetWithRespectToBounds(s.x,s.y,"Fraction"),f.relativeMode="Object",f.description=a.name||"User handle",f.measure(new ei(a.size,a.size)),f.arrange(f.desiredSize),this.svgRenderer.drawNativeContent(f,t,a.size,a.size,this.adornerSvgLayer)}else{var g=new bn;(u=this.getBaseAttributes(g,i)).width=a.size,u.height=a.size,u.x=s.x-a.size/2,u.y=s.y-a.size/2,u.sourceWidth=a.size,u.sourceHeight=a.size,u.alignment=g.imageAlign,u.source=a.source,u.scale=g.imageScale,u.description=a.name||"User handle",u.id=a.name+"_",this.renderer.drawImage(t,u,this.adornerSvgLayer,!1)}}},e.prototype.renderRotateThumb=function(e,t,i,n,r){new yn;var o,a=new ei;a.width=18,a.height=16;var s=e.offsetY-e.actualSize.height*e.pivot.y,l=e.offsetX-e.actualSize.width*e.pivot.x,c=!!(n&Ai.Rotate);r&&(c=!1);var h=l+e.pivot.x*e.actualSize.width,d=s;if(h=(h+i.tx)*i.scale,d=(d+i.ty)*i.scale,o={x:h-.5*a.width,y:d-30-.5*a.height},0!==e.rotateAngle||0!==e.parentTransform){var p=vi();xi(p,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),o=bi(p,o)}var u={x:o.x,y:o.y,angle:e.rotateAngle+e.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:c,id:e.id,class:"e-diagram-rotate-handle"};u.id="rotateThumb",this.svgRenderer.drawPath(t,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},e.prototype.renderPathElement=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i);o.data=e.absolutePath,o.data=e.absolutePath;var a=e.description?e.description:e.id;if(this.isSvgMode||(o.x=e.flipOffset.x?e.flipOffset.x:o.x,o.y=e.flipOffset.y?e.flipOffset.y:o.y),e.isExport){var s=e.absoluteBounds;o.data=Jc(e,s,0,o)}this.renderer.drawPath(t,o,this.diagramId,void 0,n,a)},e.prototype.renderSvgGridlines=function(e,t,i,n,r,o){var a=document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=document.createElementNS("http://www.w3.org/2000/svg","defs");s.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(e.constraints&Ti.ShowHorizontalLines||e.constraints&Ti.ShowVerticalLines)&&a.setAttribute("id",this.diagramId+"_pattern");var l=0,c=0,h=0,d=0,p=1,u=!1;if(n.showRulers&&n.dynamicGrid&&r&&o)h=o.updateSegmentWidth(i.scale),d=r.updateSegmentWidth(i.scale),e.horizontalGridlines.scaledIntervals=[h/r.interval],e.verticalGridlines.scaledIntervals=[d/o.interval],u=!0;else{for(var f=0,g=e.verticalGridlines.lineIntervals;f<g.length;f++){l+=g[f]}for(var m=0,y=e.horizontalGridlines.lineIntervals;m<y.length;m++){c+=y[m]}p=this.scaleSnapInterval(e,i.scale)}l=u?d:l*p,c=u?h:c*p,bh(a,{id:this.diagramId+"_pattern",x:0,y:0,width:l,height:c,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(a,l,c,p,e,n,o,u),this.verticalSvgGridlines(a,l,c,p,e,n,r,u),s.appendChild(a),t.appendChild(s)},e.prototype.horizontalSvgGridlines=function(e,t,i,n,r,o,a,s){var l,c=0,h=[];if(r.constraints&Ti.ShowHorizontalLines){var d=r.horizontalGridlines.lineIntervals;r.horizontalGridlines.lineColor;r.horizontalGridlines.lineDashArray&&(h=this.renderer.parseDashArray(r.horizontalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&a&&(d=this.updateLineIntervals(d,o,a,i));for(var p=0;p<d.length;p+=2){l=document.createElementNS("http://www.w3.org/2000/svg","path");var u=c+d[p]/2;u=s?u:u*n,bh(l,{"stroke-width":d[p],stroke:r.horizontalGridlines.lineColor,d:"M0,"+u+" L"+t+","+u+" Z",dashArray:h.toString(),class:1.25===d[p]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(l),c+=d[p+1]+d[p]}}},e.prototype.verticalSvgGridlines=function(e,t,i,n,r,o,a,s){var l,c=0,h=[];if(r.constraints&Ti.ShowVerticalLines){var d=r.verticalGridlines.lineIntervals;r.verticalGridlines.lineColor;r.verticalGridlines.lineDashArray&&(h=this.renderer.parseDashArray(r.verticalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&a&&(d=this.updateLineIntervals(d,o,a,t));for(var p=0;p<d.length;p+=2){l=document.createElementNS("http://www.w3.org/2000/svg","path");var u=c+d[p]/2;u=s?u:u*n,bh(l,{"stroke-width":d[p],stroke:r.verticalGridlines.lineColor,d:"M"+u+",0 L"+u+","+i+" Z",dashArray:h.toString(),class:1.25===d[p]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(l),c+=d[p+1]+d[p]}}},e.prototype.updateGrid=function(e,t,i,n,r,o){var a,s=t.getElementById(this.diagramId+"_grid_rect"),l=!1;if(s){var c=t.getElementById(this.diagramId+"_pattern");c&&c.parentNode.removeChild(c);var h=0,d=0,p=1;n.showRulers&&n.dynamicGrid&&o&&r?(h=o.updateSegmentWidth(i.scale),d=r.updateSegmentWidth(i.scale),l=!0,e.horizontalGridlines.scaledIntervals=[h/r.interval],e.verticalGridlines.scaledIntervals=[d/o.interval]):p=this.scaleSnapInterval(e,i.scale);var u=0;for(a=0;a<e.horizontalGridlines.lineIntervals.length;a++)u+=e.horizontalGridlines.lineIntervals[a];var f=0;for(a=0;a<e.verticalGridlines.lineIntervals.length;a++)f+=e.verticalGridlines.lineIntervals[a];var g={x:-i.tx*i.scale,y:-i.ty*i.scale};bh(s,g),f=l?d:f*p,u=l?h:u*p,g={id:this.diagramId+"_pattern",x:0,y:0,width:f,height:u,patternUnits:"userSpaceOnUse"},bh(c=document.createElementNS("http://www.w3.org/2000/svg","pattern"),g),this.horizontalSvgGridlines(c,f,u,p,e,n,o,l),this.verticalSvgGridlines(c,f,u,p,e,n,r,l);var m=t.getElementById(this.diagramId+"_grid_pattern_defn");m&&m.appendChild(c)}},e.prototype.updateLineIntervals=function(e,t,i,n){for(var r=[],o=n/i.interval,a=0;a<2*i.interval;a++)r[a]=a%2===0?0===a?1.25:.25:o-r[a-1];return r},e.prototype.scaleSnapInterval=function(e,t){if(t>=2)for(;t>=2;)t/=2;else if(t<=.5)for(;t<=.5;)t*=2;var i;if(e.horizontalGridlines.scaledIntervals=e.horizontalGridlines.snapIntervals,e.verticalGridlines.scaledIntervals=e.verticalGridlines.snapIntervals,1!==t){var n=e.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*t;for((n=e.verticalGridlines).scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*t}return t},e.prototype.renderTextElement=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i);o.cornerRadius=0,o.whiteSpace=jh(e.style.whiteSpace,e.style.textWrapping),o.content=e.content,o.breakWord=kh(e.style.textWrapping),o.textAlign=Dh(e.style.textAlign),o.color=e.style.color,o.italic=e.style.italic,o.bold=e.style.bold,o.fontSize=e.style.fontSize,o.fontFamily=e.style.fontFamily,o.textOverflow=e.style.textOverflow,o.textWrapping=e.style.textWrapping,o.textDecoration=e.style.textDecoration,o.doWrap=e.doWrap,o.wrapBounds=e.wrapBounds,o.childNodes=e.childNodes,o.dashArray="",o.strokeWidth=0,o.fill=e.style.fill;var a=e.description?e.description:e.content?e.content:e.id;"Wrap"===e.style.textWrapping&&this.groupElement&&o.height>this.groupElement.actualSize.height&&("Clip"===e.style.textOverflow||"Ellipsis"===e.style.textOverflow)&&(o.y=o.y+(o.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(t,o,this.diagramId,void 0,void 0,n),this.renderer.drawText(t,o,n,a,this.diagramId,e.isExport&&Math.min(e.exportScaleValue.x||e.exportScaleValue.y),this.groupElement),this.isSvgMode&&(e.doWrap=!1)},e.prototype.renderNativeElement=function(e,t,i,n,r){var o,a,s=this.getParentSvg(e,void 0,t)||n,l=this.getParentElement(e,t,s).g||t,c=this.getBaseAttributes(e,i);switch(c.fill="transparent",c.cornerRadius=e.cornerRadius,c.stroke="transparent",this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,n),e.scale){case"None":o=e.contentSize.width,a=e.contentSize.height;break;case"Stretch":o=e.actualSize.width,a=e.actualSize.height;break;case"Meet":o=a=e.actualSize.width<=e.actualSize.height?e.actualSize.width:e.actualSize.height;break;case"Slice":o=a=e.actualSize.width>=e.actualSize.height?e.actualSize.width:e.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(e,l,a,o,s)},e.prototype.renderHTMLElement=function(e,t,i,n,r,o,a){var s=this.getBaseAttributes(e,n);s.fill="transparent",s.cornerRadius=e.cornerRadius,s.stroke="transparent",this.renderer.drawRectangle(t,s,this.diagramId,void 0,void 0,r),this.svgRenderer&&this.svgRenderer.drawHTMLContent(e,i.children[0],n,tl(i),a)},e.prototype.renderImageElement=function(e,t,i,n,r){var o,a,s,l,c=this.getBaseAttributes(e,i);if(c.cornerRadius=0,this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,n),"Stretch"===e.stretch)o=e.actualSize.width,a=e.actualSize.height;else{var h=e.contentSize.width,d=e.contentSize.height,p=c.width/h,u=c.height/d,f=void 0;switch(e.stretch){case"Meet":o=h*(f=Math.min(p,u)),a=d*f,c.x+=Math.abs(c.width-o)/2,c.y+=Math.abs(c.height-a)/2;break;case"Slice":p=c.width/h,u=c.height/d,o=h*(f=Math.max(p,u)),a=d*f,s=c.width/o*h,l=c.height/a*d;break;case"None":o=h,a=d}}c.width=o,c.height=a,c.sourceWidth=s,c.sourceHeight=l,c.source=e.source,c.alignment=e.imageAlign,c.scale=e.imageScale,c.description=e.description?e.description:e.id,this.renderer.drawImage(t,c,n,r)},e.prototype.renderContainer=function(e,t,i,n,r,o,a,s){var l={svg:r,g:t};if(this.diagramId&&(r=this.getParentSvg(e)||r,this.isSvgMode)){var c;c=this.getParentElement(e,t,r,s).g||t,r=this.getParentSvg(this.hasNativeParent(e.children))||r;var h=this.getParentElement(this.hasNativeParent(e.children),c,r,s);l.svg=h.svg||r,l.g=h.g||c,o?(r&&(r.getElementById(l.g.id)||t.appendChild(l.g)),t=l.g):t=l.g}if(this.renderRect(e,t,n,r),this.groupElement=e,e.hasChildren()){for(var d,p=void 0,u=void 0,f=0,g=e.children;f<g.length;f++){var m=g[f];r=this.getParentSvg(this.hasNativeParent(e.children)||m)||r,this.isSvgMode&&(p=(d=this.getParentElement(this.hasNativeParent(e.children)||m,t,r)).g||t,d.svg&&(r=d.svg)),this.isSvgMode||(m.flip=e.flip),this.renderElement(m,p||t,i,n,r,!0,a,s),m instanceof dn&&p&&!(e.elementActions&Ii.ElementIsGroup)&&(u=m.flip&&"None"!==m.flip?m.flip:e.flip,this.renderFlipElement(m,p,u)),m.elementActions&Ii.ElementIsPort&&p&&(u=m.flip&&"None"!==m.flip?m.flip:e.flip,this.renderFlipElement(e,p,u)),!(m instanceof dn)&&"None"!==e.flip&&e.elementActions&Ii.ElementIsGroup&&this.renderFlipElement(m,p||t,e.flip)}e.elementActions&Ii.ElementIsGroup||this.renderFlipElement(e,t,e.flip)}},e.prototype.renderFlipElement=function(e,t,i){var n={},r=1,o=1,a=0,s=0,l=0,c=0;("None"!==i?("Horizontal"!==i&&"Both"!==i||(a=e.bounds.center.x,l=-e.bounds.center.x,r=-1),"Vertical"!==i&&"Both"!==i||(s=e.bounds.center.y,c=-e.bounds.center.y,o=-1),n={transform:"translate("+a+","+s+") scale("+r+","+o+") translate("+l+","+c+")"}):n={transform:"translate(0,0)"},n)&&(e&&e.children&&e.children.length&&e.children[0]instanceof No?(t=dh(this.diagramId).children[0].querySelector("#"+e.id+"_content_html_element")).style.transform="scale("+r+","+o+")":bh(t,n))},e.prototype.hasNativeParent=function(e,t){if(e&&e.length>0){var i=e[0];if(i instanceof xn)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,t++||0)}},e.prototype.renderRect=function(e,t,i,n){var r=this.getBaseAttributes(e,i);r.cornerRadius=e.cornerRadius||0;var o=e.description?e.description:e.id;this.renderer.drawRectangle(t,r,this.diagramId,void 0,void 0,n,o)},e.prototype.drawRect=function(e,t){t.cornerRadius=0,this.svgRenderer.drawRectangle(e,t,this.diagramId)},e.prototype.getBaseAttributes=function(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,canApplyStyle:e.canApplyStyle};return e.isExport&&(i.width*=e.exportScaleValue.x,i.height*=e.exportScaleValue.y,i.x*=e.exportScaleValue.x,i.y*=e.exportScaleValue.y,i.strokeWidth*=e.exportScaleValue.x),e.flip&&(i.flip=e.flip),t&&(i.x+=t.tx,i.y+=t.ty),i},e.renderSvgBackGroundImage=function(e,t,i,n,r,o){if(e.source){var a=lh(t.id).getElementById(t.id+"_image");if(!a){var s=th(t.id).getElementsByClassName("e-background-image-layer")[0];(a=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",t.id+"_image"),s.appendChild(a)}var l=new Image;l.src=e.source,a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var c="None"!==e.scale?e.scale:"",h=e.align,d=h.charAt(0).toLowerCase()+h.slice(1);c&&(d+=" "+c.charAt(0).toLowerCase()+c.slice(1)),bh(a,{id:t.id+"_image",x:i,y:n,width:r,height:o,preserveAspectRatio:d})}},e.prototype.transformLayers=function(e,t){var i,n=e.tx*e.scale,r=e.ty*e.scale;if(n!==this.transform.x||r!==this.transform.y||0===n||0===r){if(t)this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")");return sh(i=this.diagramId).getElementById(i+"_gridline").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+")"),this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),dh(this.diagramId).children[0].style.transform="translate("+e.tx*e.scale+"px,"+e.ty*e.scale+"px)scale("+e.scale+")",this.transform={x:e.tx*e.scale,y:e.ty*e.scale},!0}return!1},e.prototype.updateNode=function(e,t,i,n,r){this.renderElement(e,t,i,n,this.getParentSvg(e),void 0,void 0,r)},e}(),Xh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Uh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xh(t,e),Vh([pe("")],t.prototype,"source",void 0),Vh([pe("transparent")],t.prototype,"color",void 0),Vh([pe("None")],t.prototype,"scale",void 0),Vh([pe("None")],t.prototype,"align",void 0),t}(ke),Gh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xh(t,e),Vh([pe(null)],t.prototype,"width",void 0),Vh([pe(null)],t.prototype,"height",void 0),Vh([ue({},Ki)],t.prototype,"margin",void 0),Vh([pe("Landscape")],t.prototype,"orientation",void 0),Vh([pe("Infinity")],t.prototype,"boundaryConstraints",void 0),Vh([ue({},Uh)],t.prototype,"background",void 0),Vh([pe(!1)],t.prototype,"multiplePage",void 0),Vh([pe(!1)],t.prototype,"showPageBreaks",void 0),t}(ke),qh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xh(t,e),Vh([pe(0)],t.prototype,"horizontalOffset",void 0),Vh([pe(0)],t.prototype,"verticalOffset",void 0),Vh([pe(1)],t.prototype,"currentZoom",void 0),Vh([pe(0)],t.prototype,"viewPortWidth",void 0),Vh([pe(0)],t.prototype,"viewPortHeight",void 0),Vh([pe(.2)],t.prototype,"minZoom",void 0),Vh([pe(30)],t.prototype,"maxZoom",void 0),Vh([pe("Diagram")],t.prototype,"scrollLimit",void 0),Vh([pe()],t.prototype,"scrollableArea",void 0),Vh([pe(!1)],t.prototype,"canAutoScroll",void 0),Vh([ue({left:15,right:15,top:15,bottom:15},Ki)],t.prototype,"autoScrollBorder",void 0),Vh([ue({left:0,right:0,top:0,bottom:0},Ki)],t.prototype,"padding",void 0),t}(ke),Zh=function(){function e(){this.services={}}return e.prototype.register=function(e,t){this.services[e]=t},e.prototype.getService=function(e){return this.services[e]},e}(),Qh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},$h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qh(t,e),Kh([pe("lightgray")],t.prototype,"lineColor",void 0),Kh([pe("")],t.prototype,"lineDashArray",void 0),Kh([pe([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],t.prototype,"lineIntervals",void 0),Kh([pe([20])],t.prototype,"snapIntervals",void 0),t}(ke),Jh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qh(t,e),Kh([ue({},$h)],t.prototype,"horizontalGridlines",void 0),Kh([ue({},$h)],t.prototype,"verticalGridlines",void 0),Kh([pe(Ti.All)],t.prototype,"constraints",void 0),Kh([pe(5)],t.prototype,"snapAngle",void 0),Kh([pe(5)],t.prototype,"snapObjectDistance",void 0),t}(ke),ed=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),td=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ed(t,e),td([pe(5)],t.prototype,"interval",void 0),td([pe(100)],t.prototype,"segmentWidth",void 0),td([pe("Horizontal")],t.prototype,"orientation",void 0),td([pe("RightOrBottom")],t.prototype,"tickAlignment",void 0),td([pe("red")],t.prototype,"markerColor",void 0),td([pe(25)],t.prototype,"thickness",void 0),td([pe(null)],t.prototype,"arrangeTick",void 0),t}(ke),nd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ed(t,e),td([pe(!1)],t.prototype,"showRulers",void 0),td([pe(!0)],t.prototype,"dynamicGrid",void 0),td([ue({orientation:"Horizontal"},id)],t.prototype,"horizontalRuler",void 0),td([ue({orientation:"Vertical"},id)],t.prototype,"verticalRuler",void 0),t}(ke),rd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),od=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ad=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rd(t,e),od([pe("")],t.prototype,"property",void 0),od([pe("")],t.prototype,"field",void 0),t}(ke),sd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ld=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},cd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sd(t,e),ld([pe("")],t.prototype,"read",void 0),ld([pe("")],t.prototype,"create",void 0),ld([pe("")],t.prototype,"update",void 0),ld([pe("")],t.prototype,"destroy",void 0),ld([pe()],t.prototype,"customFields",void 0),t}(ke),hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sd(t,e),ld([pe("")],t.prototype,"id",void 0),ld([pe("")],t.prototype,"sourceID",void 0),ld([pe("")],t.prototype,"targetID",void 0),ld([pe(null)],t.prototype,"sourcePointX",void 0),ld([pe(null)],t.prototype,"sourcePointY",void 0),ld([pe(null)],t.prototype,"targetPointX",void 0),ld([pe(null)],t.prototype,"targetPointY",void 0),ld([pe(null)],t.prototype,"dataManager",void 0),ld([ue({},cd)],t.prototype,"crudAction",void 0),t}(ke),dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sd(t,e),ld([pe("")],t.prototype,"id",void 0),ld([pe(null)],t.prototype,"dataManager",void 0),ld([pe(null)],t.prototype,"dataSource",void 0),ld([pe("")],t.prototype,"root",void 0),ld([pe("")],t.prototype,"parentId",void 0),ld([pe()],t.prototype,"doBinding",void 0),ld([ge([],ad)],t.prototype,"dataMapSettings",void 0),ld([ue({},cd)],t.prototype,"crudAction",void 0),ld([ue({},hd)],t.prototype,"connectionDataSource",void 0),t}(ke),pd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ud=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pd(t,e),ud([pe("")],t.prototype,"fixedNode",void 0),ud([pe(30)],t.prototype,"horizontalSpacing",void 0),ud([pe(30)],t.prototype,"verticalSpacing",void 0),ud([pe(30)],t.prototype,"maxIteration",void 0),ud([pe(40)],t.prototype,"springFactor",void 0),ud([pe(50)],t.prototype,"springLength",void 0),ud([ue({left:50,top:50,right:0,bottom:0},Ki)],t.prototype,"margin",void 0),ud([pe("Auto")],t.prototype,"horizontalAlignment",void 0),ud([pe("Auto")],t.prototype,"verticalAlignment",void 0),ud([pe("TopToBottom")],t.prototype,"orientation",void 0),ud([pe("Auto")],t.prototype,"connectionDirection",void 0),ud([pe("Default")],t.prototype,"connectorSegments",void 0),ud([pe("None")],t.prototype,"type",void 0),ud([pe()],t.prototype,"getLayoutInfo",void 0),ud([pe()],t.prototype,"layoutInfo",void 0),ud([pe()],t.prototype,"getBranch",void 0),ud([pe()],t.prototype,"bounds",void 0),ud([pe(!0)],t.prototype,"enableAnimation",void 0),ud([pe("")],t.prototype,"root",void 0),t}(ke);function gd(e,t,i,n,r,o,a){n.selectedItems.connectors[0];if(o&&o.length>1&&r&&r.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";if("PortDraw"===n.eventHandler.action&&(n.tool&=~ji.DrawOnce),(La(n)||Aa(n))&&n.drawingObject)return"Draw";if(vd(n)&&((p=n.selectedItems).wrapper&&Bl(p.constraints,"UserHandle")))for(var s=0,l=p.userHandles;s<l.length;s++){var c=l[s];if(c.visible)if(yd(i,u=zl(p,c,n.scroller.transform),c.size/(2*n.scroller.transform.scale)))return c.name}if(vd(n)){var h=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,d=h.bounds,p=n.selectedItems,u=new mi(d.x,d.y,d.width,d.height);if(bd(n)&&!n.selectedItems.annotation){var f=n.selectedItems.connectors[0],g=10/n.scrollSettings.currentZoom,m=10/n.scrollSettings.currentZoom;if(Bl(p.constraints,"ResizeAll")){if(Bl(p.constraints,"ConnectorSourceThumb")&&ga(f)&&yd(i,f.sourcePoint,g))return"ConnectorSourceEnd";if(Bl(p.constraints,"ConnectorTargetThumb")&&ma(f)&&yd(i,f.targetPoint,m))return"ConnectorTargetEnd";if(S=function(e,t,i,n){var r=10/n.scrollSettings.currentZoom,o=10/n.scrollSettings.currentZoom;if("Bezier"===e.type)for(var a=0;a<e.segments.length;a++){var s=e.segments[a];if(yd(i,ni.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1,o))return"BezierSourceThumb";if(yd(i,ni.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,r))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&ya(e))if("Straight"===e.type||"Bezier"===e.type)for(var a=0;a<e.segments.length;a++){var s=void 0;if(s=e.segments[a],yd(i,s.point,10))return"SegmentEnd"}else for(var a=0;a<e.segments.length;a++){var s=void 0,l={x:0,y:0};if((s=e.segments[a]).allowDrag)for(var c=0;c<s.points.length-1;c++){var h=ni.distancePoints(s.points[c],s.points[c+1]);if(h>=50&&(l.x=(s.points[c].x+s.points[c+1].x)/2,l.y=(s.points[c].y+s.points[c+1].y)/2,yd(i,l,30)))return"OrthoThumb"}}return null}(f,0,i,n))return S}}else{var y=10/n.scroller.currentZoom,v=vi();xi(v,h.rotateAngle+h.parentTransform,h.offsetX,h.offsetY);var b=h.offsetX-h.pivot.x*h.actualSize.width,w=h.offsetY-h.pivot.y*h.actualSize.height,x={x:b+(.5===h.pivot.x?2*h.pivot.x:h.pivot.x)*h.actualSize.width/2,y:w-30/n.scroller.currentZoom};x=bi(v,x);var S,C=!!n.selectedItems.annotation,P=!(!C||!va(n.selectedItems.annotation));if(Bl(p.constraints,"Rotate")&&yd(i,x,y)&&n.selectedItems.thumbsConstraints&Ri.Rotate){if(C&&P)return"LabelRotate";if(!C)return"Rotate"}if(u.Inflate(y),u.containsPoint(i))if(S=function(e,t,i,n,r,o){var a;1===e.selectedItems.nodes.length&&0===e.selectedItems.connectors.length&&e.selectedItems.nodes[0].container&&(a=function(e,t,i,n,r){var o=10/e.scroller.currentZoom,a=40/e.scroller.currentZoom,s=e.selectedItems,l=t.actualSize.width,c=t.actualSize.height,h=new mi(n,r+20,t.style.strokeWidth,c-40),d=new mi(n+l,r+20,t.style.strokeWidth,c-40),p=new mi(n+20,r,l-40,t.style.strokeWidth),u=new mi(n+20,r+c,l-40,t.style.strokeWidth),f=ls(e,e.selectedItems.nodes[0],!0)?e.nameTable[e.selectedItems.nodes[0].parentId]:e.selectedItems.nodes[0];if(l>=a&&c>=a){if(Hl(s.constraints,"ResizeEast",s.thumbsConstraints,s)&&d.containsPoint(i,o))return"ResizeEast";if(Hl(s.constraints,"ResizeSouth",s.thumbsConstraints,s)&&u.containsPoint(i,o))return"ResizeSouth";if("Grid"!==f.container.type){if(Hl(s.constraints,"ResizeWest",s.thumbsConstraints,s)&&h.containsPoint(i,o))return"ResizeWest";if(Hl(s.constraints,"ResizeNorth",s.thumbsConstraints,s)&&p.containsPoint(i,o))return"ResizeNorth"}}return null}(e,t,i,r,o));a||e.selectedItems.nodes[0]&&(e.selectedItems.nodes[0].isPhase||e.selectedItems.nodes[0].isLane||"SwimLane"===e.selectedItems.nodes[0].shape.type)||(a=function(e,t,i,n,r,o){var a=40/e.scroller.currentZoom,s=10/e.scroller.currentZoom,l=e.selectedItems,c=!!l.annotation;if(t.actualSize.width>=a&&t.actualSize.height>=a){if(Hl(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r+t.actualSize.width,y:o+t.actualSize.height}),s))return c?"LabelResizeSouthEast":"ResizeSouthEast";if(Hl(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r,y:o+t.actualSize.height}),s))return c?"LabelResizeSouthWest":"ResizeSouthWest";if(Hl(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r+t.actualSize.width,y:o}),s))return c?"LabelResizeNorthEast":"ResizeNorthEast";if(Hl(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r,y:o}),s))return c?"LabelResizeNorthWest":"ResizeNorthWest"}if(Hl(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r+t.actualSize.width,y:o+t.actualSize.height/2}),s))return c?"LabelResizeEast":"ResizeEast";if(Hl(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r,y:o+t.actualSize.height/2}),s))return c?"LabelResizeWest":"ResizeWest";if(Hl(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r+t.actualSize.width/2,y:o+t.actualSize.height}),s))return c?"LabelResizeSouth":"ResizeSouth";if(Hl(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&yd(i,bi(n,{x:r+t.actualSize.width/2,y:o}),s))return c?"LabelResizeNorth":"ResizeNorth";return null}(e,t,i,n,r,o));if(a)return a;return null}(n,h,i,v,b,w))return S}}if(Ta(n)&&!e)return"Pan";if(a instanceof En&&!Ta(n)&&"None"!==(S=md(n,a)))return S;if((a instanceof Ln||a instanceof Dn)&&!Ta(n)&&ua(a))return wd(n,a,void 0,t)&&fa(a)?"LabelDrag":"LabelSelect";if(null!==e){if(!(e instanceof Yc||e instanceof na))return"Select";if(t&&t.id){var E=t.id.split(e.id)[1];if(E&&E.match("^_icon"))return"LayoutAnimation"}if(fa(e)&&t instanceof dn&&t.hyperlink.link)return"Hyperlink";if(!fa(e)||!wd(n,e,!1)||void 0!==n.selectedItems.annotation)return e&&Ta(n)&&!Da(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(e instanceof na&&!yd(i,e.sourcePoint,e.hitPadding)&&!yd(i,e.targetPoint,e.hitPadding)||!(e instanceof na))return"Drag"}return"Select"}function md(e,t,i,n){if(ja(t)&&(_l(t,Mi.Hover)||_l(t,Mi.Visible))){if(t.constraints&Ui.Drag)return"PortDrag"}else if(Na(t)&&(_l(t,Mi.Hover)||_l(t,Mi.Visible))&&t.constraints&Ui.Draw){e.drawingObject={};var r={type:"Orthogonal",sourcePortID:t.id};return e.drawingObject=r,e.tool|=ji.DrawOnce,e.currentDrawingObject=r,"PortDraw"}return"None"}function yd(e,t,i){return e.x>=t.x-i&&e.x<=t.x+i&&e.y>=t.y-i&&e.y<=t.y+i}function vd(e){return e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0}function bd(e){return 1===e.selectedItems.connectors.length&&!e.selectedItems.nodes.length}function wd(e,t,i,n){if(void 0===i&&(i=!0),t instanceof Zc)return!0;if(t instanceof Yc)for(;t;){if(-1!==e.selectedItems.nodes.indexOf(t)&&void 0===e.selectedItems.annotation)return!0;if(i)break;t=e.nameTable[t.parentId]}else if(t instanceof na){if(-1!==e.selectedItems.connectors.indexOf(t)&&void 0===e.selectedItems.annotation)return!0}else if((t instanceof Ln||t instanceof Dn)&&e.selectedItems.annotation&&e.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}function xd(e,t){if(t+=360,t%=360,-1===e.indexOf("Resize"))return Cd[e];var i=Cd[e];return t>=0&&t<25||t>=160&&t<=205||t>=340&&t<=360?i:t>=25&&t<=70||t>=205&&t<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":t>=70&&t<=115||t>=250&&t<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":t>=115&&t<=155||t>=295&&t<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":Cd[e]:"n-resize"}var Sd,Cd={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"pointer",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},Pd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ed=function(){function e(e,t){void 0===t&&(t=!1),this.commandHandler=null,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=e,this.isProtectChange=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source),this.checkProperty=!0},e.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.currentPosition=e.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),this.endAction()},e.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,i,n,r,o){e=this.commandHandler.renderContainerHelper(e)||e;var a,s={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},c=this.currentPosition.x-this.startPosition.x,h=this.currentPosition.y-this.startPosition.y,d=!(e instanceof dn)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=d?this.commandHandler.snappingModule.getLayer():null,u=e instanceof dn?o:e.rotateAngle;xi(a=vi(),-u,0,0);e.offsetX,e.offsetY;var f=e.width,g=e.height;e.pivot.x,e.pivot.y;var m,y=0,v=0,b=e instanceof dn?e.actualSize.width:e.width,w=e instanceof dn?e.actualSize.height:e.height;switch(n){case"ResizeWest":c=(m=bi(a,{x:c,y:h})).x,h=m.y,v=1,c=d?this.commandHandler.snappingModule.snapLeft(s,l,p,c,h,e,i===t,r):c,h=0,y=(r.width-c)/b;break;case"ResizeEast":c=(m=bi(a,{x:c,y:h})).x,h=m.y,c=d?this.commandHandler.snappingModule.snapRight(s,l,p,c,h,e,i===t,r):c,h=0,y=(r.width+c)/b,v=1;break;case"ResizeNorth":y=1,c=(m=bi(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapTop(s,l,p,c,h,e,i===t,r):h,v=(r.height-h)/w;break;case"ResizeSouth":y=1,c=(m=bi(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapBottom(s,l,p,c,h,e,i===t,r):h,v=(r.height+h)/w;break;case"ResizeNorthEast":c=(m=bi(a,{x:c,y:h})).x,h=m.y,c=d?this.commandHandler.snappingModule.snapRight(s,l,p,c,h,e,i===t,r):c,h=d?this.commandHandler.snappingModule.snapTop(s,l,p,c,h,e,i===t,r):h,y=(r.width+c)/b,v=(r.height-h)/w;break;case"ResizeNorthWest":c=(m=bi(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapTop(s,l,p,c,h,e,i===t,r):h,c=d?this.commandHandler.snappingModule.snapLeft(s,l,p,c,h,e,i===t,r):c,y=(r.width-c)/b,v=(r.height-h)/w;break;case"ResizeSouthEast":c=(m=bi(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapBottom(s,l,p,c,h,e,i===t,r):h,c=d?this.commandHandler.snappingModule.snapRight(s,l,p,c,h,e,i===t,r):c,v=(r.height+h)/w,y=(r.width+c)/b;break;case"ResizeSouthWest":c=(m=bi(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapBottom(s,l,p,c,h,e,i===t,r):h,c=d?this.commandHandler.snappingModule.snapLeft(s,l,p,c,h,e,i===t,r):c,y=(r.width-c)/b,v=(r.height+h)/w}return{width:y,height:v}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e}(),Od=function(e){function t(t,i,n){var r=e.call(this,t,!0)||this;return r.action=n,r}return Pd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===ni.equals(this.currentPosition,this.prevPosition)){var i=mi.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height)}return!this.blocked},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),!1===ni.equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=mi.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var n=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&t.info&&t.info.ctrlKey?t&&t.source&&(this.commandHandler.isSelected(t.source)?1===t.clickCount&&this.commandHandler.unSelect(t.source):this.commandHandler.selectObjects([t.source],!0)):(this.commandHandler.clearSelection(null===t.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(t.source,t.sourceWrapper):t.source&&this.commandHandler.selectObjects([t.source],!1,n))}this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ed),Md=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.endPoint=i,n}return Pd(t,e),t.prototype.mouseDown=function(t){var i;if(this.inAction=!0,this.undoElement=void 0,this instanceof kd||(this.undoElement=Oh(t.source)),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},i=t.source.connectors[0]),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(var n=0;n<i.segments.length;n++){var r=i.segments[n],o=ni.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,a=ni.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2;(yd(this.currentPosition,o,i.hitPadding)||yd(this.currentPosition,a,i.hitPadding))&&(this.selectedSegment=r)}this.currentPosition=t.position},t.prototype.mouseUp=function(t){if(this.commandHandler.updateSelectedNodeProperties(t.source),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(t),this instanceof kd||("ConnectorSourceEnd"!==this.endPoint||!t.source.connectors.length||ni.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&t.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||ni.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&t.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)){if(!(this instanceof kd)&&("BezierTargetThumb"===this.endPoint||"BezierSourceThumb"===this.endPoint)&&this.undoElement&&t.source){c=void 0,h={type:"SegmentChanged",redoObject:c=Oh(t.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(h)}}else{var i=void 0,n=void 0;t.source&&t.source.connectors&&(i={x:this.prevPosition.x,y:this.prevPosition.y},n=t.source.connectors[0]);var r=void 0,o=void 0;if(t.target){var a=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0);a instanceof En?r=a.id:o=a.id}var s={connector:n,state:"Completed",targetNode:o,oldValue:i,newValue:i,cancel:!1,targetPort:r};y()&&(s={connector:sc(n),state:"Completed",targetNode:o,oldValue:sc(i),newValue:i,cancel:s.cancel,targetPort:r});var l="ConnectorSourceEnd"===this.endPoint?Vi.sourcePointChange:Vi.targetPointChange;if(this.commandHandler.triggerEvent(l,s),this.commandHandler.removeTerminalSegment(n,!0),this.undoElement&&t.source){var c=void 0;c=Oh(t.source);var h={type:"ConnectionChanged",redoObject:Oh(c),undoObject:Oh(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(h)}}e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),!(this instanceof kd)&&("ConnectorSourceEnd"===this.endPoint&&ni.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&ni.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var i=void 0,n=void 0;t.source&&t.source.connectors&&(i={x:this.prevPosition.x,y:this.prevPosition.y},n=t.source.connectors[0]);var r=void 0,o=void 0;if(t.target)o=t.target.id,(m=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof En||m instanceof Tc?r=m.id:o=m.id;var a={connector:n,state:"Start",targetNode:o,oldValue:i,newValue:i,cancel:!1,targetPort:r};y()&&(a={connector:sc(n),state:"Start",targetNode:o,oldValue:i,newValue:i,cancel:a.cancel,targetPort:r});var s="ConnectorSourceEnd"===this.endPoint?Vi.sourcePointChange:Vi.targetPointChange;this.commandHandler.triggerEvent(s,a)}if(this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var l=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y,h=void 0,d=(i=void 0,void 0),p=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var u=void 0;t.source&&t.source.connectors&&(h={x:this.currentPosition.x,y:this.currentPosition.y},i={x:this.prevPosition.x,y:this.prevPosition.y},u=t.source.connectors[0]);var f=void 0,g=void 0;if(t.target)(m=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof En?f=m.id:g=m.id;var m;a={connector:u,state:"Progress",targetNode:g,oldValue:i,newValue:h,cancel:!1,targetPort:f};if(y()&&(a={connector:sc(u),state:"Progress",targetNode:g,oldValue:i,newValue:h,cancel:a.cancel,targetPort:f}),!(this instanceof kd)){s="ConnectorSourceEnd"===this.endPoint?Vi.sourcePointChange:Vi.targetPointChange;this.commandHandler.triggerEvent(s,a)}if(t.target&&(d=Yl(t.target,!0),p=Yl(t.target,!1)),!a.cancel&&this.inAction&&void 0!==this.endPoint&&0!==l||0!==c)if(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,t.source,this.currentPosition,this.selectedSegment,t.target,f),this.commandHandler.updateSelector(),t.target&&("ConnectorSourceEnd"===this.endPoint&&(Sa(t.target)||Ca(p))||"ConnectorTargetEnd"===this.endPoint&&(wa(t.target)||xa(d))))if(this.commandHandler.canDisconnect(this.endPoint,t,f,g)&&this.commandHandler.disConnect(t.source,this.endPoint),(m=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Yc)(wa(m)&&"ConnectorTargetEnd"===this.endPoint||Sa(m)&&"ConnectorSourceEnd"===this.endPoint)&&this.commandHandler.connect(this.endPoint,t);else this.checkConnect(m)&&this.commandHandler.connect(this.endPoint,t);else-1===this.endPoint.indexOf("Bezier")&&(this.commandHandler.disConnect(t.source,this.endPoint),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var v=this.getTooltipContent(t.position);this.commandHandler.showTooltip(t.source,t.position,v,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.x)+" Y:"+Math.round(e.y)},t.prototype.checkConnect=function(e){return!(!xa(e)||"ConnectorTargetEnd"!==this.endPoint)||(!(!Ca(e)||"ConnectorSourceEnd"!==this.endPoint)||!(e.constraints&Ui.None||xa(e)||Ca(e)))},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Ed),Td=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.currentTarget=null,n.objectType=i,n}return Pd(t,e),t.prototype.mouseDown=function(t){if(t.source instanceof Yc||t.source instanceof na){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([t.source],t.info&&t.info.ctrlKey,i);var n={nodes:[],connectors:[]};t.source instanceof Yc?n.nodes.push(Oh(t.source)):n.connectors.push(Oh(t.source)),this.undoElement=Oh(n)}else this.undoElement=Oh(t.source);this.undoParentElement=this.commandHandler.getSubProcess(t.source),"Port"===this.objectType&&(this.portId=t.sourceWrapper.id),e.prototype.mouseDown.call(this,t),this.initialOffset={x:0,y:0}},t.prototype.mouseUp=function(t,i){var n;this.checkPropertyValue();var r,o=!1,a={nodes:[],connectors:[]};if(this.commandHandler.updateSelectedNodeProperties(t.source),"Port"!==this.objectType){if(t.source instanceof Yc||t.source instanceof na){t.source instanceof Yc?a.nodes.push(Oh(t.source)):a.connectors.push(Oh(t.source)),n=Oh(a);var s=t.source.wrapper;n.offsetX=s.offsetX,n.offsetY=s.offsetY}else n=Oh(t.source);if(("helper"===(r=this.commandHandler.renderContainerHelper(t.source)||t.source).id&&!n.nodes[0].isLane&&!n.nodes[0].isPhase||"helper"!==r.id)&&(r.offsetX!==this.undoElement.offsetX||r.offsetY!==this.undoElement.offsetY)){var l=void 0,c=void 0;t.source&&(c={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},l={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY});var h={source:t.source,state:"Completed",oldValue:l,newValue:c,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1};if(h={source:sc(t.source),state:"Completed",oldValue:sc(l),newValue:sc(c),target:sc(this.currentTarget),targetPosition:sc(this.currentPosition),allowDrop:h.allowDrop,cancel:h.cancel},y()&&(h=this.getBlazorPositionChangeEventArgs(h,this.currentTarget)),this.commandHandler.triggerEvent(Vi.positionChange,h),!i){this.commandHandler.startGroupAction(),o=!0;var d={type:"PositionChanged",redoObject:Oh(n),undoObject:Oh(this.undoElement),category:"Internal"};if(n.nodes[0]&&n.nodes[0].processId){var p={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(t.source)};this.commandHandler.addHistoryEntry(p)}this.commandHandler.addHistoryEntry(d)}}this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0);if(this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),t.source&&this.currentTarget&&Ea(this.currentTarget)&&this.commandHandler.isDroppable(t.source,this.currentTarget)){this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition);h={element:t.source,target:this.currentTarget,position:this.currentPosition,cancel:!1};if(y&&(h=$l(t,h)),this.commandHandler.triggerEvent(Vi.drop,h),!h.cancel&&t.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(var u=t.source instanceof Zc?t.source.nodes:[t.source],f=!1,g=0;g<u.length;g++)u[g].container||(f=!0,this.commandHandler.dropChildToContainer(this.currentTarget,u[g]),this.commandHandler.renderContainerHelper(u[g]));o&&this.commandHandler.isContainer&&f&&this.commandHandler.endGroupAction()}}t.source&&this.currentTarget&&this.commandHandler.dropAnnotation(t.source,this.currentTarget),this.commandHandler.updateSelector(),o&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction()}else{a.nodes.push(Oh(t.source)),n=Oh(a);d={type:"PortPositionChanged",objectId:this.portId,redoObject:Oh(n),undoObject:Oh(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(d)}e.prototype.mouseUp.call(this,t)},t.prototype.getBlazorPositionChangeEventArgs=function(e,t){return e={source:sc(e.source),state:e.state,oldValue:e.oldValue,newValue:e.newValue,target:ec(t)===na?{connector:sc(t)}:{node:sc(t)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i,n,r=!1;(i=this.commandHandler.renderContainerHelper(t.source)||t.source)instanceof Yc||i instanceof na?i instanceof Yc?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(r=!0):ni.equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&ni.equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(r=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(r=!0),i&&(n={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var o={source:i,state:"Start",oldValue:n,newValue:n,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(o={source:sc(i),state:"Start",oldValue:sc(n),newValue:sc(n),target:t.target,targetPosition:t.position,allowDrop:o.allowDrop,cancel:o.cancel},y()&&(o=this.getBlazorPositionChangeEventArgs(o,t.target)),r&&this.commandHandler.triggerEvent(Vi.positionChange,o),this.currentPosition=t.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var a,s=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),l=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(t,this.currentPosition),this.commandHandler.disConnect(t.source),this.commandHandler.removeSnap();var c=void 0,h=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,s,l);this.initialOffset.x=s-h.x,this.initialOffset.y=l-h.y,i&&(a={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},c={offsetX:i.wrapper.offsetX+h.x,offsetY:i.wrapper.offsetY+h.y}),this.currentTarget&&t.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(t.source,t.target,this.currentTarget),this.currentTarget=t.target;var d={source:i,state:"Progress",oldValue:a,newValue:c,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(y()&&(d=this.getBlazorPositionChangeEventArgs(d,t.target)),this.commandHandler.triggerEvent(Vi.positionChange,d),!d.cancel){this.blocked=!this.commandHandler.dragSelectedObjects(h.x,h.y);var p=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||p}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(t),this.currentTarget&&t.source!==this.currentTarget&&this.commandHandler.isDroppable(t.source,this.currentTarget)&&"helper"!==t.source.id){var u=t.source instanceof Zc?t.source.nodes[0]:t.source;this.commandHandler.isParentAsContainer(u,!0)||"SwimLane"===u.shape.type||u.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(t,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var f=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,f,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var g=vi(),m=t.source;xi(g,-m.rotateAngle,m.offsetX,m.offsetY);var v=bi(g,{x:this.prevPosition.x,y:this.prevPosition.y}),b=bi(g,{x:t.position.x,y:t.position.y});this.commandHandler.portDrag(t.source,t.sourceWrapper,b.x-v.x,b.y-v.y)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.wrapper.bounds.x)+" Y:"+Math.round(e.wrapper.bounds.y)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(Ed),Ad=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseDown=function(t){if(this.undoElement=Oh(t.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var i=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),n=0;n<i.length;n++){var r=this.commandHandler.cloneChild(i[n].id);this.childTable[i[n].id]=Oh(r)}e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){var i;if(this.checkPropertyValue(),this.commandHandler.updateSelectedNodeProperties(t.source),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle!==i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},r={source:t.source,state:"Completed",oldValue:n,newValue:n,cancel:!1};this.commandHandler.triggerEvent(Vi.rotateChange,r);var o;o=Oh(t.source);var a={type:"RotationChanged",redoObject:Oh(o),undoObject:Oh(this.undoElement),category:"Internal",childTable:this.childTable};this.commandHandler.addHistoryEntry(a),this.commandHandler.updateSelector()}e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},r={source:t.source,state:"Start",oldValue:n,newValue:n,cancel:!1};this.commandHandler.triggerEvent(Vi.rotateChange,r)}this.currentPosition=t.position;var o={x:i.wrapper.offsetX,y:i.wrapper.offsetY},a=ni.findAngle(o,this.currentPosition)+90,s=this.commandHandler.snapAngle(a);a=((a=0!==s?s:a)+360)%360;var l={rotateAngle:i.wrapper.rotateAngle},c={rotateAngle:a},h=(t.source,!1),d={source:sc(t.source),state:"Progress",oldValue:sc(l),newValue:sc(c),cancel:h};if(this.commandHandler.triggerEvent(Vi.rotateChange,d),d.cancel||(this.blocked=!this.commandHandler.rotateSelectedItems(a-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var p=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,p,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"\xb0"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ed),Ld=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.initialBounds=new mi,n.corner=i,n}return Pd(t,e),t.prototype.mouseDown=function(t){if(this.undoElement=Oh(t.source),this.undoParentElement=this.commandHandler.getSubProcess(t.source),e.prototype.mouseDown.call(this,t),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var i=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),n=0;n<i.length;n++){var r=this.commandHandler.cloneChild(i[n].id);this.childTable[i[n].id]=Oh(r)}this.commandHandler.checkSelection(t.source,this.corner),e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width},t.prototype.mouseUp=function(t,i){var n;if(this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelectedNodeProperties(t.source),this.commandHandler.updateSelector(),n=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX!==n.wrapper.offsetX||this.undoElement.offsetY!==n.wrapper.offsetY){var r=this.updateSize(t.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds);this.blocked=this.scaleObjects(r.width,r.height,this.corner,this.currentPosition,this.prevPosition,n);var o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},a={source:t.source,state:"Completed",oldValue:o,newValue:o,cancel:!1};this.commandHandler.triggerEvent(Vi.sizeChange,a);var s=Oh(t.source),l={type:"SizeChanged",redoObject:Oh(s),undoObject:Oh(this.undoElement),category:"Internal",childTable:this.childTable};if(!i){if(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(l),s.nodes[0]&&s.nodes[0].processId){var c={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(t.source),undoObject:this.undoParentElement,category:"Internal"};this.commandHandler.addHistoryEntry(c)}this.commandHandler.endGroupAction()}}return e.prototype.mouseUp.call(this,t),!this.blocked},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY){var n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},r={source:t.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};this.commandHandler.triggerEvent(Vi.sizeChange,r)}this.currentPosition=t.position;var o={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};o=Hh(-this.currentElement.wrapper.rotateAngle,void 0,void 0,o);this.currentElement.wrapper.actualSize.width,o.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,o.y,this.currentElement.wrapper.actualSize.height;o=this.getChanges(o),this.commandHandler.removeSnap();var a=this.updateSize(t.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(a.width,a.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var s=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,s,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.scaleObjects=function(e,t,i,n,r,o){o instanceof Zc&&1===o.nodes.length&&o.nodes[0].constraints&ki.AspectRatio&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e)):t=e=n!==r?Math.max(t,e):0);var a={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner));var s,l,c={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};return s={source:o,state:"Progress",oldValue:a,newValue:c,cancel:!1},l={source:sc(o),state:"Progress",oldValue:sc(a),newValue:sc(c),cancel:s.cancel},this.commandHandler.triggerEvent(Vi.sizeChange,l),l.cancel&&this.commandHandler.scaleSelectedItems(1/e,1/t,this.getPivot(this.corner)),this.blocked},t}(Ed),Dd=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.sourceObject=i,n}return Pd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0},t.prototype.mouseMove=function(t){var i;e.prototype.mouseMove.call(this,t);var n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.inAction&&!1===ni.equals(this.currentPosition,this.prevPosition)){var r=mi.toBounds([this.prevPosition,this.currentPosition]);(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r))&&this.commandHandler.updateNodeDimension(this.drawingObject,r)}return i},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=mi.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof Yc&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ed),kd=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.sourceObject=n,r}return Pd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0},t.prototype.mouseMove=function(t){if(this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),t.source=this.drawingObject,t.target&&("ConnectorTargetEnd"!==this.endPoint||wa(t.target))&&this.commandHandler.connect(this.endPoint,t),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),t.source&&t.sourceWrapper&&this.commandHandler.renderHighlighter(t,!0)),e.prototype.mouseMove.call(this,t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof na&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Md),Id=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:50,height:20,offsetY:this.currentPosition.y};t.source||(this.drawingNode=this.commandHandler.drawObject(i))},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,style:{strokeDashArray:"2 2",fill:"transparent"},offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i)}if(this.inAction&&!1===ni.equals(this.currentPosition,this.prevPosition)){var n=mi.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=t.source,this.drawingNode&&(this.drawingNode instanceof Yc||this.drawingNode instanceof na)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ed),Rd=function(e){function t(t,i){var n=e.call(this,t)||this;return n.zooming=i,n}return Pd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction)if(this.zooming||!1!==ni.equals(this.currentPosition,this.prevPosition)){if(t.moveTouches&&t.moveTouches.length&&t.moveTouches.length>=2){var i=t.startTouches[0],n=t.startTouches[1],r=t.moveTouches[0],o=t.moveTouches[1],a=this.getDistance(r,o)/this.getDistance(i,n),s=t.position;this.commandHandler.zoom(a,0,0,s),this.updateTouch(i,r),this.updateTouch(n,o)}}else{var l=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(l,c,this.currentPosition)}return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.getDistance=function(e,t){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},t.prototype.updateTouch=function(e,t){e.pageX=t.pageX,e.pageY=t.pageY},t}(Ed),Nd=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.commandHandler.initExpand(t),e.prototype.mouseUp.call(this,t)},t}(Ed),jd=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),window.open(t.sourceWrapper.hyperlink.link,"_blank").focus(),e.prototype.mouseUp.call(this,t)},t}(Ed),zd=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i={x:(i=n.points[n.points.length-1]).x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var r={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};this.drawingObject=this.commandHandler.drawObject(r)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=si(this.drawingObject.shape.points),this.inAction&&!1===ni.equals(this.currentPosition,this.prevPosition))){var n=mi.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},t.prototype.mouseUp=function(t,i){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},t}(Ed),Hd=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;(n=new Uo(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var r={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(r)}},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.mouseUp=function(t){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject),this.endAction()},t.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},t}(Ed),Bd=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=Oh(t.source),this.annotationId=t.sourceWrapper.id,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,r=t.source;if(r instanceof Yc){var o=vi();xi(o,-r.rotateAngle,0,0);var a=bi(o,{x:i,y:n});i=a.x,n=a.y}return this.inAction&&(this.commandHandler.labelDrag(t.source,t.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=t.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:Oh(this.undoElement),category:"Internal",redoObject:Oh(i)};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(Ed),_d=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.corner=i,n}return Pd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.annotationId=t.source.wrapper.children[0].id,this.undoElement=Oh(i);var n=t.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),this.inAction&&this.resizeObject(t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Oh(i),undoObject:Oh(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.resizeObject=function(e){var t;t=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];var i,n,r=e.source.wrapper.children[0],o={x:r.offsetX,y:r.offsetY},a=r.rotateAngle;a=((a+=t instanceof Yc?t.rotateAngle:0)+360)%360;var s=vi();xi(s,a,o.x,o.y);var l=this.corner.slice(5),c=this.updateSize(r,this.startPosition,this.currentPosition,l,this.initialBounds,a),h=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,p=this.getPivot(l),u=bi(s,p={x:h+r.actualSize.width*p.x,y:d+r.actualSize.height*p.y});c.x=u.x,c.y=u.y,i=(i=c.width)<0?1:i,n=(n=c.height)<0?1:n,this.commandHandler.labelResize(t,e.source.annotation,i,n,c,e.source),this.commandHandler.updateSelector()},t}(Ed),Wd=function(e){function t(t){return e.call(this,t,!0)||this}return Pd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.annotationId=t.source.wrapper.children[0].id;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.undoElement=Oh(i),e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),t.source&&this.inAction){var i,n=t.source.nodes[0]?t.source.nodes[0]:t.source.connectors[0];i=t.source.annotation,this.commandHandler.labelRotate(n,i,this.currentPosition,t.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Oh(i),undoObject:Oh(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(Ed),Fd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yd=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.endPoint=i,n}return Fd(t,e),t.prototype.mouseDown=function(t){var i;this.inAction=!0,this.undoElement=Oh(t.source),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&(i=t.source.connectors[0]);for(var n=0;n<i.segments.length;n++){var r=i.segments[n];if("OrthoThumb"===this.endPoint)for(var o=0;o<r.points.length-1;o++){var a={x:0,y:0};a.x=(r.points[o].x+r.points[o+1].x)/2,a.y=(r.points[o].y+r.points[o+1].y)/2,yd(this.currentPosition,a,30)&&(this.selectedSegment=r,this.segmentIndex=o)}else yd(this.currentPosition,r.point,10)&&(this.selectedSegment=r)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var r=void 0;if(t.source&&t.source.connectors&&(r=t.source.connectors[0]),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(r,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var o=this.currentPosition.x-this.selectedSegment.point.x,a=this.currentPosition.y-this.selectedSegment.point.y,s=r.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(r,o,a,!1,s)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){var i,n;if(t.source&&t.source.connectors&&(n={segments:(i=t.source.connectors[0]).segments}),t&&t.source&&t.info&&t.info.ctrlKey&&t.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var r=i.segments.indexOf(this.selectedSegment),o=i.segments[r-1],a=i.segments[r+1];if(r===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(o&&Math.abs(o.length)<5)1!==r&&this.removePrevSegment(i,r);else if(a){var s=ni.distancePoints(a.points[0],a.points[1]),l=a.length||0===a.length?a.length:s;Math.abs(l)<=5&&this.removeNextSegment(i,r)}this.commandHandler.updateEndPoint(i,n)}if(this.undoElement){var c={type:"SegmentChanged",redoObject:Oh(t.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(c)}e.prototype.mouseUp.call(this,t)},t.prototype.removePrevSegment=function(e,t){var i=e.segments[t-2],n=e.segments[t+1];if(!((n.length||0===n.length?n.length:ni.distancePoints(n.points[0],n.points[1]))<=5)){var r=e.segments.slice(t-1,t+1),o={element:e,removeSegments:r,type:"Removal",cancel:!1};if(y()&&(o={element:sc(e),removeSegments:sc(r),type:"Removal",cancel:o.cancel}),this.commandHandler.triggerEvent(Vi.segmentCollectionChange,o),!o.cancel){var a=e.segments[t+1];e.segments.splice(t-1,2);var s=this.selectedSegment;"Left"===s.direction||"Right"===s.direction?(i.points[i.points.length-1].x=a.points[0].x,a.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=a.points[0].y,a.points[0].x=i.points[i.points.length-1].x),(s.length||0===s.length)&&this.findSegmentDirection(i),this.findSegmentDirection(a)}}},t.prototype.findSegmentDirection=function(e){e.direction&&(e.length||0===e.length)&&(e.length=ni.distancePoints(e.points[0],e.points[e.points.length-1]),e.direction=ni.direction(e.points[0],e.points[e.points.length-1]))},t.prototype.removeNextSegment=function(e,t){var i,n,r=this.selectedSegment,o=e.segments[t-1],a=e.segments[t+2],s=e.segments[t+1];if(s.length||0===s.length?(i=e.segments.slice(t,2),n={element:e,removeSegments:i,type:"Removal",cancel:!1},n={element:sc(e),removeSegments:sc(i),type:"Removal",cancel:!1},y()&&(n={element:sc(e),removeSegments:sc(i),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(Vi.segmentCollectionChange,n),n.cancel||(e.segments.splice(t,2),"Top"===r.direction||"Bottom"===r.direction?(a.points[0].y=r.points[0].y,o.points[o.points.length-1].x=a.points[0].x):(a.points[0].x=r.points[0].x,o.points[o.points.length-1].y=a.points[0].y))):(i=e.segments.slice(t+1,1),n={element:e,removeSegments:i,type:"Removal",cancel:!1},y()&&(n={element:e,removeSegments:i,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(Vi.segmentCollectionChange,n),n.cancel||(e.segments.splice(t+1,1),"Top"===r.direction||"Bottom"===r.direction?o.points[o.points.length-1].x=s.points[s.points.length-1].x:o.points[o.points.length-1].y=s.points[s.points.length-1].y,this.findSegmentDirection(o),r.length=r.direction=null)),o&&a&&!n.cancel&&(o.length=ni.distancePoints(o.points[0],a.points[0]),o.direction=ni.direction(o.points[0],a.points[0]),a.length||0===a.length)){a.length=ni.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);var l=o.points,c=a.points;a.direction=ni.direction(l[l.length-1],c[c.length-1])}},t.prototype.addOrRemoveSegment=function(e,t){for(var i,n,r={segments:e.segments},o=0;o<e.segments.length;o++){yd(t,(a=e.segments[o]).point,e.hitPadding)&&(n=o,i=!0)}if(i&&void 0!==n){if(e.segments&&e.segments[n]&&"Straight"===e.segments[n].type){var a=e.segments[n],s=e.segments[n+1];s&&(e.segments.splice(n,1),s.points[0]=a.points[0])}}else{var l=this.findIndex(e,t);if(e.segments&&e.segments[l]&&"Straight"===e.segments[l].type){a=e.segments[l];var c=new Uo(e,"segments",{type:"Straight",point:t},!0);c.points[0]=a.points[0],c.points[1]=t,a.points[0]=t,e.segments.splice(l,0,c),i=!0}}i&&this.commandHandler.updateEndPoint(e,r)},t.prototype.findIndex=function(e,t){for(var i=[],n=0;n<e.segments.length;n++){var r=e.segments[n],o=mi.toBounds([r.points[0],r.points[1]]);o.Inflate(e.hitPadding),o.containsPoint(t)&&i.push(r)}if(1===i.length)return e.segments.indexOf(i[0]);var a=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=void 0;for(n=0;n<i.length;n++)c=i[n],h=(t.y-c.points[0].y)/(c.points[1].y-t.y),d=(t.x-c.points[0].x)/(c.points[1].x-t.x),a=Math.abs(h-d),0===n&&(s=a,l=0),a<s&&(s=a,l=n);return e.segments.indexOf(i[l])},t.prototype.dragOrthogonalSegment=function(e,t,i,n){var r={x:0,y:0},o={segments:e.segments};r.x=(t.points[n].x+t.points[n+1].x)/2,r.y=(t.points[n].y+t.points[n+1].y)/2;var a=i.y-r.y,s=i.x-r.x,l=e.segments.indexOf(t),c=!1;t.points[0].y.toFixed(2),t.points[1].y.toFixed(2);return-1!==l&&(0===l&&1===e.segments.length&&2===t.points.length?(l=this.addSegments(e,t,s,a,l),c=!0):l!==e.segments.length-1||null!==t.direction&&null!==t.length?0===l&&(l=this.insertFirstSegment(e,t,s,a,l),c=!0):(l=this.addTerminalSegment(e,t,s,a,n),c=!0),l&&(c&&(this.selectedSegment=t=e.segments[l],this.segmentIndex=0),this.updateAdjacentSegments(e,l,s,a),this.commandHandler.updateEndPoint(e,o))),!0},t.prototype.addSegments=function(e,t,i,n,r){var o,a,s,l=[],c=ni.distancePoints(t.points[0],t.points[1]),h=ni.direction(t.points[0],t.points[1]);l.push(new qo(e,"segments",{type:"Orthogonal",direction:h,length:c/4},!0)),a=t.points[0].y===t.points[1].y?n>0?"Bottom":"Top":i>0?"Right":"Left",s=t.points[0].x===t.points[1].x?n:i,l.push(new qo(e,"segments",{type:"Orthogonal",direction:a,length:s},!0)),l.push(new qo(e,"segments",{type:"Orthogonal",direction:h,length:c/2},!0));var d={element:e,addSegments:l,type:"Addition",cancel:!1};return y()&&(d={addSegments:sc(l),type:"Addition",cancel:d.cancel,element:sc(e)}),this.commandHandler.triggerEvent(Vi.segmentCollectionChange,d),d.cancel||(e.segments=l.concat(e.segments),o=r+2),o},t.prototype.insertFirstSegment=function(e,t,i,n,r){var o,a,s,l,c,h=[];if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)for(var d=void 0,p=0;p<t.points.length-1;p++){var u=ni.distancePoints(t.points[p],t.points[p+1]),f=ni.direction(t.points[p],t.points[p+1]);0===(c=new qo(e,"segments",{type:"Orthogonal",direction:f,length:u},!0)).length&&(!d||"Top"!==d.direction&&"Bottom"!==d.direction?c.direction=n>0?"Bottom":"Top":c.direction=i>0?"Right":"Left"),d=c,h.push(c)}else s={type:"Orthogonal",direction:t.direction,length:t.length/3},h.push(new qo(e,"segments",s,!0)),"Bottom"===t.direction||"Top"===t.direction?(a=Math.abs(i),o=i>0?"Right":"Left"):(a=Math.abs(n),o=n>0?"Bottom":"Top"),c=new qo(e,"segments",{type:"Orthogonal",direction:o,length:a},!0),h.push(c);var g={element:e,addSegments:h,type:"Addition",cancel:!1};if(y()&&(g={element:sc(e),addSegments:sc(h),type:"Addition",cancel:g.cancel}),this.commandHandler.triggerEvent(Vi.segmentCollectionChange,g),!g.cancel){if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)e.segments.splice(0,1),l=1;else{var m=e.segments[1];m&&m.length&&(m.length=o!==m.direction?m.length+a:m.length-a),l=2,t.length=2*t.length/3}e.segments=h.concat(e.segments)}return l},t.prototype.updateAdjacentSegments=function(e,t,i,n){var r=e.segments[t],o=r.points[r.points.length-1],a=r.points[0],s=!0;if("Orthogonal"===r.type&&(r.points[0]=a,r.points[r.points.length-1]=o,e.segments[t-1]&&(s=this.updatePreviousSegment(i,n,e,t)),e.segments.length-1>t&&s)){var l=e.segments[t+1];this.updateNextSegment(e,r,l,i,n)}},t.prototype.addTerminalSegment=function(e,t,i,n,r){e.segments;var o,a,s,l,c=e.segments.indexOf(t),h=[],d=e.segments.pop(),p=e.segments[e.segments.length-1];o=p&&"Orthogonal"===p.type?p:null;for(var u=0;u<t.points.length-2;u++)s=ni.distancePoints(t.points[u],t.points[u+1]),l=ni.direction(t.points[u],t.points[u+1]),a=new qo(e,"segments",{type:"Orthogonal",length:s,direction:l},!0),h.push(a),o=a;var f=r;if((2===t.points.length||f===t.points.length-2)&&(o&&(o.length+=5),void 0!==f)){var g;s=2*ni.distancePoints(t.points[t.points.length-2],t.points[t.points.length-1])/3,l=ni.direction(t.points[t.points.length-2],t.points[t.points.length-1]),g=new qo(e,"segments",{type:"Orthogonal",length:s,direction:l}),h.push(g)}var m=new qo(e,"segments",{type:"Orthogonal"},!0);h.push(m);var v,b=!1;return v={element:sc(e),addSegments:sc(h),type:"Addition",cancel:b},y()&&(v={element:sc(e),addSegments:sc(h),type:"Addition",cancel:b}),this.commandHandler.triggerEvent(Vi.segmentCollectionChange,v),v.cancel?e.segments.push(d):(e.segments=e.segments.concat(h),c+=r),this.commandHandler.updateEndPoint(e),c},t.prototype.updatePortSegment=function(e,t,i,n,r){if(1===i&&2===e.points.length&&e.length<0){var o=t.sourceWrapper.corners,a=t.segments[i],s=t.segments[i+1],l=void 0,c=[];l=new qo(t,"segments",{type:"Orthogonal",length:13,direction:e.direction}),c.push(l);var h=void 0;h="Left"===a.direction?a.points[0].x-(o.middleLeft.x-20):"Right"===a.direction?o.middleRight.x+20-a.points[0].x:"Bottom"===a.direction?o.bottomCenter.y+20-a.points[0].y:a.points[0].y-(o.topCenter.y-20);a.direction;l=new qo(t,"segments",{type:"Orthogonal",length:h,direction:a.direction}),c.push(l),a.length=a.length-h,s&&s.length&&s.direction&&(s.direction===e.direction?s.length-=13:s.direction===xr(e.direction)&&(s.length+=13)),t.segments=c.concat(t.segments),this.selectedSegment=t.segments[3]}},t.prototype.updatePreviousSegment=function(e,t,i,n){var r=i.segments[n],o=i.segments[n-1];o.points[o.points.length-1]=r.points[0];var a=!i.sourceID||""!==i.sourcePortID,s=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=t:"Top"===o.direction?o.length-=t:"Right"===o.direction?o.length+=e:o.length-=e,""!==i.sourcePortID&&o.length<0?this.updatePortSegment(o,i,n,e,t):i.sourceID&&""===i.sourcePortID&&o.length<0&&1===n&&(s=!1,this.updateFirstSegment(i,r)),a&&this.changeSegmentDirection(o)),s},t.prototype.changeSegmentDirection=function(e){e.length<0&&(e.direction=xr(e.direction),e.length*=-1)},t.prototype.updateNextSegment=function(e,t,i,n,r){t.points[t.points.length-1];i.points[0]=t.points[t.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i)):0!==r&&(i.length="Bottom"===i.direction?i.length-r:i.length+r,(i.length||0===i.length)&&this.changeSegmentDirection(i)))},t.prototype.updateFirstSegment=function(e,t){var i,n=e.segments.indexOf(t),r=!1,o=e.segments[n],a=e.segments[n-1],s={segments:e.segments};if(a.length<0&&e.sourceID){var l=e.sourceWrapper.corners,c=[],h=void 0,d=!1;this.changeSegmentDirection(o);var p=e.segments[n+1],u=e.segments[n+2];switch(p&&this.changeSegmentDirection(p),u&&this.changeSegmentDirection(u),a.direction){case"Top":case"Bottom":i=o.length>0&&"Left"===o.direction?l.middleLeft:l.middleRight,o.length>l.width/2?Math.abs(a.length)<l.height/2&&(a.length=ni.distancePoints(l.center,a.points[a.points.length-1]),o.points[0].x=i.x,o.length=ni.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].y=i.y,p.points[0].x=p.points[p.points.length-1].x="Right"===o.direction?i.x+20:i.x-20),r=!0,d=!0);break;case"Left":case"Right":i=o.length>0&&"Top"===o.direction?l.topCenter:l.bottomCenter,o.length>l.height/2?Math.abs(a.length)<l.width/2&&(a.length=ni.distancePoints(l.center,a.points[a.points.length-1]),o.points[0].y=i.y,o.length=ni.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].x=i.x,p.points[0].y=p.points[p.points.length-1].y="Bottom"===o.direction?i.y+20:i.y-20),r=!0,d=!0)}this.changeSegmentDirection(a),this.changeSegmentDirection(o),r&&(h={type:"Orthogonal",direction:o.direction,length:20},c.push(new qo(e,"segments",h,!0)),d&&(p&&p.direction&&p.length&&(p.length=ni.distancePoints(p.points[0],p.points[p.points.length-1])),u&&u.direction&&u.length&&(u.length=ni.distancePoints(p.points[p.points.length-1],u.points[u.points.length-1])),e.segments.splice(n-1,2)),e.segments=c.concat(e.segments)),this.selectedSegment=d?e.segments[n-1]:e.segments[n+1],this.commandHandler.updateEndPoint(e,s)}},t.prototype.updateLastSegment=function(e,t){if(e.targetID&&""===e.targetPortID){var i=void 0,n=void 0,r=void 0,o=void 0,a=e.targetWrapper.corners,s=t.points[0],l=t.points[t.points.length-1];return"Right"===t.direction||"Left"===t.direction?(i={x:s.x,y:s.y},n={x:"Left"===t.direction?l.x-a.width/2:l.x+a.width/2,y:l.y},r={x:a.center.x,y:a.center.y-a.height},o={x:a.center.x,y:a.center.y+a.height}):(i={x:s.x,y:s.y},n={x:l.x,y:"Bottom"===t.direction?l.y+a.height/2:l.y-a.height/2},r={x:a.center.x-a.width,y:a.center.y},o={x:a.center.x+a.width,y:a.center.y}),al({x1:i.x,y1:i.y,x2:n.x,y2:n.y},{x1:r.x,y1:r.y,x2:o.x,y2:o.y}).enabled}return!1},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ConnectorEditingTool"},t}(Ed),Xd=function(){function e(e,t){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.diagram=e,this.objectFinder=new Vd,this.commandHandler=t}return Object.defineProperty(e.prototype,"action",{get:function(){return this.currentAction},set:function(e){e!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~ji.DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===e||"LabelRotate"===e?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=e,"None"===this.currentAction||"Select"===this.currentAction||this.diagram.diagramActions&Wi.TextEdit?this.diagram.diagramActions=this.diagram.diagramActions&~Wi.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions|Wi.ToolAction,this.diagram.setCursor(this.diagram.getCursor(e,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.isBlocked},set:function(e){this.isBlocked=e,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),e.prototype.getMousePosition=function(e){var t,i,n;-1!==e.type.indexOf("touch")?(i=(t=e).changedTouches[0].clientX,n=t.changedTouches[0].clientY):(i=e.clientX,n=e.clientY);var r=new ei;r=ha(this.diagram);var o=this.diagram.element.getBoundingClientRect();return i=i+this.diagram.diagramCanvas.scrollLeft-o.left-r.width,n=n+this.diagram.diagramCanvas.scrollTop-o.top-r.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,{x:i-=this.diagram.scroller.transform.tx,y:n-=this.diagram.scroller.transform.ty}},e.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){t.updateViewPortSize(t.diagram.element)},300),!1},e.prototype.updateViewPortSize=function(e){var t=document.getElementById(e.id);if(t){var i=t.getBoundingClientRect();this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new ei;n=ha(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,n.width),o=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=o,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&la(this.diagram)}},e.prototype.canHideResizers=function(){return(this.tool instanceof Td||this.tool instanceof Ad)&&this.isMouseDown},e.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var e=[];e=e.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=this.isMouseDown&&1===e.length&&this.tool instanceof Od&&!fa(e[0])}},e.prototype.isForeignObject=function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"===typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.renderUmlHighLighter=function(e){this.diagram.commandHandler.removeStackHighlighter();var t=this.diagram.selectedItems.nodes[0];if(t&&t.container&&"Stack"===t.container.type&&"UmlClassifier"===t.shape.type&&!t.wrapper.bounds.containsPoint(this.currentPosition)){var i=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(n&&n.parentId&&n.parentId===t.id){var r="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;us(n.wrapper,r,e.position,this.diagram,!0)}}},e.prototype.isDeleteKey=function(e,t){return navigator.platform.match("Mac")&&"Backspace"===e&&"delete"===t},e.prototype.isMouseOnScrollBar=function(e){var t,i,n,r,o=e.offsetX,a=e.offsetY,s=this.diagram.diagramCanvas,l=s.offsetHeight,c=s.offsetWidth;return!!(l<s.scrollHeight&&(t={x:c-17,y:0},i={x:c,y:0},n={x:c-17,y:l},r={x:c,y:l},mi.toBounds([t,i,n,r]).containsPoint({x:o,y:a})))||!!(c<s.scrollWidth&&(t={x:0,y:l-17},i={x:c,y:l-17},n={x:0,y:l},r={x:c,y:l},mi.toBounds([t,i,n,r]).containsPoint({x:o,y:a})))},e.prototype.updateVirtualization=function(){var e,t=this;e=setInterval(function(i){t.diagram.removeVirtualObjects(e)},50),setTimeout(function(){t.diagram.deleteVirtualObject=!0},50)},e.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var e=0;e<this.diagram.selectedItems.userHandles.length;e++)this.previousAction&&this.diagram.selectedItems.userHandles[e]&&(this.checkUserHandleEvent(Vi.onUserHandleMouseLeave),this.previousAction="None")},e.prototype.checkUserHandleEvent=function(e){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var t=e===Vi.onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)t===this.diagram.selectedItems.userHandles[n].name&&(i.element=this.diagram.selectedItems.userHandles[n],e===Vi.onUserHandleMouseEnter&&(this.previousAction=this.action),this.diagram.triggerEvent(e,i))},e.prototype.mouseDown=function(e){var t;if(this.focus=!0,t=e.touches,this.isMouseOnScrollBar(e))return this.isScrolling=!0,void e.preventDefault();if(this.checkUserHandleEvent(Vi.onUserHandleMouseDown),!this.checkEditBoxAsTarget(e)&&ka(this.diagram)||Ta(this.diagram)&&!Da(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,Mi.Hover,!0),!(this.tool instanceof zd||this.tool instanceof Hd)||2!==e.button&&2!==e.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof zd||this.tool instanceof Hd))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(e)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var i=void 0,n=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),r=this.objectFinder.findObjectUnderMouse(this.diagram,n,this.action,this.inAction,this.eventArgs,e),o=null;null!==r&&(o=this.diagram.findElementUnderMouse(r,this.currentPosition))&&(i=this.commandHandler.findTarget(o,r)),this.action=this.diagram.findActionToBeDone(r,o,this.currentPosition,i);var a=this.isMetaKey(e);if(a&&e.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!a&&!e.shiftKey||Ta(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),a||e.shiftKey){var s=a&&e.shiftKey?{ctrlKey:a,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=s}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===e.type&&(t&&t.length>=2&&(this.touchStartList=mh(this.touchStartList,0,t)),t||e.preventDefault())}else{sc(this.diagram),sc(this.currentPosition),e.buttons,sc(this.eventArgs.actualObject);this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(e.target)||this.isForeignObject(e.target,!0)||t||e.preventDefault()},e.prototype.mouseMoveExtend=function(e,t){(this.tool instanceof zd||this.tool instanceof Hd)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(e):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof Yc&&t instanceof Yc);this.tool instanceof Md&&this.diagram.updatePortVisibility(this.hoverElement instanceof Yc?this.hoverElement:this.hoverNode,Mi.Connect|Mi.Hover,i),this.hoverElement instanceof Yc&&this.hoverNode instanceof Yc&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,Mi.Connect|Mi.Hover,!0),this.hoverElement=i?null:t,this.hoverNode=i?null:t},e.prototype.checkAction=function(e){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof dn||this.eventArgs.sourceWrapper instanceof No)){var t=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!wd(this.diagram,t,!1,this.eventArgs.sourceWrapper)&&fa(t)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else fa(e)&&ua(e)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!wd(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Zc&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),e instanceof na&&(!(e instanceof na)||yd(this.currentPosition,e.sourcePoint,e.hitPadding)||yd(this.currentPosition,e.targetPoint,e.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},e.prototype.mouseMove=function(e,t){var i,n;if(this.focus=!0,this.isScrolling)e.preventDefault();else if(ka(this.diagram)||Ta(this.diagram)&&!Da(this.diagram)){this.currentPosition=this.getMousePosition(e);var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);i=this.diagram,n=this.currentPosition,i.rulerSettings.showRulers&&(i.hRuler.drawRulerMarker(i.hRuler.element,n,i.scroller.horizontalOffset),i.vRuler.drawRulerMarker(i.vRuler.element,n,i.scroller.verticalOffset));var a=!1,s=void 0;if("touchmove"===e.type&&(t=e.touches)&&t.length>1&&(this.touchMoveList=mh(this.touchMoveList,0,t),"PinchZoom"!==this.action&&(a=!0)),!1===ni.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||a){this.eventArgs={};var l=null;if(null!==o){if(l=this.diagram.findElementUnderMouse(o,this.currentPosition),o!==this.hoverElement){var c=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==c&&(this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,Mi.Hover,!0)),o instanceof Yc&&(this.hoverNode=o),this.hoverElement=o,this.elementEnter(this.currentPosition,!1)}else this.hoverElement||this.hoverElement!==o||this.elementEnter(this.currentPosition,!0);l&&(s=this.commandHandler.findTarget(l,o))}this.action=this.diagram.findActionToBeDone(o,l,this.currentPosition,s),this.checkUserHandleEvent(Vi.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof kd||this.tool instanceof Hd||this.tool instanceof zd?this.tool.mouseMove(this.eventArgs):t&&this.tool instanceof Rd&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var h=!1;(!this.hoverElement||this.tool instanceof Rd||!(o instanceof Yc)||0!==this.diagram.selectedItems.nodes.length&&wd(this.diagram,this.hoverElement))&&(h=!0),this.diagram.updatePortVisibility(this.hoverElement,Mi.Hover,h);var d=this.getContent();null===o&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&d&&(this.hoverElement=null,this.elementLeave()),a=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!wd(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Zc&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),e.ctrlKey||e.shiftKey){var p=e.ctrlKey&&e.shiftKey?{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=p}this.checkAction(o),this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|Wi.Interactions),this.mouseMoveExtend(e,o)}this.prevPosition=this.currentPosition,this.isForeignObject(e.target,!0)||e.preventDefault()}}},e.prototype.getContent=function(){return this.hoverElement instanceof Yc&&this.hoverElement.constraints&ki.Tooltip||this.hoverElement instanceof na&&this.hoverElement.constraints&Li.Tooltip?this.hoverElement.tooltip.content:this.diagram.tooltip.content},e.prototype.checkAutoScroll=function(e){var t=this.startAutoScroll(e);if(!t&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(t){if((this.tool instanceof Td||this.tool instanceof Ld||this.tool instanceof Od)&&this.inAction){var i=this;this.diagram.scrollSettings.canAutoScroll&&t&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(n){i.doAutoScroll(t,e,100)},100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},e.prototype.mouseUp=function(e){var t;if(this.checkUserHandleEvent(Vi.onUserHandleMouseUp),"SVG"===this.diagram.mode&&Oa(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Fi.DrawSelectorBorder),t=e.touches,this.isScrolling)return this.isScrolling=!1,void e.preventDefault();if(!this.checkEditBoxAsTarget(e)&&ka(this.diagram)||Ta(this.diagram)&&!Da(this.diagram)){if(this.tool&&(!(this.tool instanceof zd||this.tool instanceof Hd)||(this.tool instanceof zd||this.tool instanceof Hd)&&2===e.detail)){if(!this.isForeignObject(e.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction),r=!0;!e.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===e.which&&!(this.diagram.diagramActions&Wi.PreventClearSelection)&&(r=!1,this.commandHandler.clearSelection()),wd(this.diagram,n)&&r||this.commandHandler.selectObjects([n])}var o=this.updateContainerProperties(),a=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(e),this.diagram.selectedObject.helperObject&&(a=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof jd)){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source);var s=this.isMetaKey(e);if(s||e.shiftKey){var l=s&&e.shiftKey?{ctrlKey:s,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=l}if(this.diagram.diagramActions&Wi.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~Wi.Interactions),this.eventArgs.clickCount=e.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof Td||this.tool instanceof Ld)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var c=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);c&&c.isLane&&(this.commandHandler.isContainer=!0)}this.tool.mouseUp(this.eventArgs,o.isPreventHistory)}else this.tool.mouseUp(this.eventArgs);o.hasStack&&this.diagram.endGroupAction()}if(a&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.blocked=!1,this.hoverElement){var h=Mi.Connect;wd(this.diagram,this.hoverElement)&&(h|=Mi.Hover),this.diagram.updatePortVisibility(this.hoverElement,h,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof Id||(this.tool=null)}t||e.preventDefault(),this.diagram.currentDrawingObject=void 0;var d=this.diagram.selectedItems;if(!this.inAction&&d.wrapper&&d.userHandles.length>0&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var p={element:sc(this.eventArgs.source)||sc(this.diagram),position:sc(this.eventArgs.position),count:e.detail,actualObject:sc(this.eventArgs.actualObject)};y()&&(p=this.getBlazorClickEventArgs(p)),this.diagram.triggerEvent(Vi.click,p)}this.eventArgs={}}this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},e.prototype.getBlazorClickEventArgs=function(e){return e={element:this.eventArgs.source?{selector:sc(this.eventArgs.source)}:{diagram:sc(this.diagram)},position:sc(this.eventArgs.position),count:e.count,actualObject:this.eventArgs.actualObject?{selector:sc(this.eventArgs.actualObject)}:{diagram:sc(this.diagram)}}},e.prototype.addSwimLaneObject=function(e){var t,i,n,r,o,a,s=0,l=e.shape,c=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(c,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var h=0;h<c.length;h++){var d=this.diagram.nameTable[c[h].id];(d.isLane||d.isPhase||d.isHeader)&&(i=d)}if(i&&(l.isPhase||l.isLane&&i.isLane)){var p=i.parentId;t=this.diagram.nameTable[p]}if(t&&(n=t.shape,o=l.isLane?l.orientation===n.orientation:l.orientation!==n.orientation),o&&i){if(n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(s=1),n.phases.length>0&&(s+=1),l.isPhase){a="Horizontal"===n.orientation?this.currentPosition.x-t.wrapper.bounds.x:this.currentPosition.y-(t.wrapper.bounds.y+n.header.height);var u={id:Ch(),offset:a,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(t,[u])}else{l.lanes[0].header.height;var f={id:Ch(),style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};"Horizontal"===l.orientation?f.height=l.lanes[0].height:f.width=l.lanes[0].width,"Horizontal"===n.orientation?(r=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(r+=1)):(r=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(r-=1)),n.lanes.length>r-s?(f.header.width=n.lanes[r-s].header.width,f.header.height=n.lanes[r-s].header.height):(f.header.width=n.lanes[r-s-1].header.width,f.header.height=n.lanes[r-s-1].header.height),this.diagram.addLanes(t,[f],r-s)}this.commandHandler.select(t)}else if(l.isLane){var g={id:Ch(),width:e.width,height:e.height,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:l.lanes[0].header.style},phases:[{id:Ch(),header:{annotation:{content:"Phase"}}}],lanes:[{id:Ch(),height:e.height,width:e.width,style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(g.width+=20),g.offsetX=this.currentPosition.x+g.width/2,g.offsetY=this.currentPosition.y+g.height/2,this.diagram.add(g)}},e.prototype.mouseLeave=function(e){(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject)&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction());this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,Mi.Hover,!0),this.hoverElement=null),this.tool instanceof Md&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof Yc&&(this.diagram.updatePortVisibility(this.eventArgs.target,Mi.Hover|Mi.Connect,!0),this.hoverElement=null);var t=this.diagram.selectedItems;t&&t.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&Wi.Interactions||this.diagram.diagramActions&Wi.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Wi.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.tool=null,function(){var e,t,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(t=i.length-1;t>=0;t--)(e=i[t])&&e.parentNode.removeChild(e)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),e.preventDefault()},e.prototype.mouseWheel=function(e){var t=e.wheelDelta>0||-40*e.detail>0,i=this.getMousePosition(e);if(this.diagram.tooltipObject.close(),this.isMetaKey(e))this.diagram.zoom(t?1.2:1/1.2,i),e.preventDefault();else{var n=this.diagram.scroller.horizontalOffset,r=this.diagram.scroller.verticalOffset,o=t?20:-20;this.tool&&(this.tool instanceof zd||this.tool instanceof Hd)&&(this.eventArgs={},this.getMouseEventArgs(i,this.eventArgs),this.eventArgs.position=i,this.tool.mouseWheel(this.eventArgs)),e.shiftKey?this.diagram.scroller.zoom(1,o,0,i):this.diagram.scroller.zoom(1,0,o,i),n===this.diagram.scroller.horizontalOffset&&r===this.diagram.scroller.verticalOffset||e.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var a=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(a,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}},e.prototype.keyDown=function(e){if(!(this.diagram.diagramActions&Wi.TextEdit)&&!this.checkEditBoxAsTarget(e)||"Escape"===e.key||27===e.keyCode){var t=void 0,i=e.keyCode?e.keyCode:e.which,n=e.key,r=this.isMetaKey(e);if(this.diagram.commandManager&&this.diagram.commands)for(var o=this.diagram.commands,a=0,s=Object.keys(o);a<s.length;a++){var l=s[a];if((t=this.diagram.commands[l])&&(t.gesture.keyModifiers||t.gesture.key)&&(i===t.gesture.key||n===_i[t.gesture.key]||this.isDeleteKey(n,l))&&(!t.gesture.keyModifiers&&!e.altKey&&!e.shiftKey&&!r||t.gesture.keyModifiers&&(r||e.altKey||e.shiftKey)&&this.altKeyPressed(t.gesture.keyModifiers)&&e.altKey||this.shiftKeyPressed(t.gesture.keyModifiers)&&e.shiftKey||this.ctrlKeyPressed(t.gesture.keyModifiers)&&r)){var c=_h(t.canExecute);if(c&&c({keyDownEventArgs:KeyboardEvent,parameter:t.parameter}||y())){if(e.preventDefault(),"Escape"===e.key)if(this.checkEditBoxAsTarget(e))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),vl(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var h=this.diagram.droppable.selectedSymbols;h.parentNode.removeChild(h);var d=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(d,Wi.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Fi.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(d,Wi.PreventClearSelection),this.isMouseDown=!1}if(t.execute)_h(t.execute)({keyDownEventArgs:KeyboardEvent,parameter:t.parameter});if(y()){var p={gesture:t.gesture};this.diagram.triggerEvent(Vi.commandExecute,p)}break}}}}},e.prototype.startAutoScroll=function(e){var t=this.getMousePosition(e);t.x*=this.diagram.scroller.currentZoom,t.y*=this.diagram.scroller.currentZoom;var i,n=ha(this.diagram),r=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===J.info.name&&0===this.diagram.scroller.viewPortWidth){var o=document.getElementById(this.diagram.element.id).getBoundingClientRect();o.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(o.width,o.height)}return this.diagram.scrollSettings.canAutoScroll&&(t.x+this.diagram.scroller.horizontalOffset+r.right+n.width>=this.diagram.scroller.viewPortWidth-18?i="right":t.x+this.diagram.scroller.horizontalOffset<r.left?i="left":t.y+this.diagram.scroller.verticalOffset+r.bottom+n.height>this.diagram.scroller.viewPortHeight-18?i="bottom":t.y+this.diagram.scroller.verticalOffset<r.top&&(i="top")),i},e.prototype.doAutoScroll=function(e,t,i,n){var r=e;if((this.tool instanceof Td||this.tool instanceof Ld||this.tool instanceof Od)&&this.inAction){var o=this.getMousePosition(t),a=(this.diagram.scrollSettings.autoScrollBorder,0),s=0,l={x:o.x,y:o.y};switch(r){case"right":l.x=o.x+10,a=10;break;case"left":l.x=o.x-10,a=-10;break;case"bottom":l.y=o.y+10,s=10;break;case"top":l.y=o.y-10,s=-10}this.eventArgs.position={x:l.x,y:l.y},this.tool.mouseMove(this.eventArgs),this.diagram.scroller.zoom(1,-a,-s,o)}},e.prototype.mouseEvents=function(){for(var e=this.diagram.findObjectsUnderMouse(this.currentPosition),t=0;t<e.length;t++)this.eventArgs.actualObject===e[t]&&e.splice(t,1);var i={targets:sc(e),element:sc(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:sc(this.eventArgs.actualObject)};if(y()&&(i.targets.connector=[],i.targets.node=[],this.getBlazorCollectionObject(e,i)),this.lastObjectUnderMouse&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var n={targets:void 0,element:sc(this.lastObjectUnderMouse),actualObject:void 0};y()&&(n={targets:void 0,element:ec(this.lastObjectUnderMouse)===na?{connector:sc(e)}:{node:sc(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(Vi.mouseLeave,n),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,this.diagram.triggerEvent(Vi.mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(Vi.mouseOver,i)},e.prototype.getBlazorCollectionObject=function(e,t){if(e)for(var i=0;i<e.length;i++)ec(e[i])===na?t.targets.connector.push(sc(e[i])):t.targets.node.push(sc(e[i]))},e.prototype.elementEnter=function(e,t){if(!t){var i=this.hoverElement instanceof Yc&&this.hoverElement.constraints&ki.Tooltip||this.hoverElement instanceof na&&this.hoverElement.constraints&Li.Tooltip,n=this.getContent();"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&Ao(this.diagram,i?this.hoverElement:void 0);var r=hl(this.diagram,e,this.hoverElement);"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.offsetX=r.x,this.diagram.tooltipObject.offsetY=r.y,this.diagram.tooltipObject.dataBind()),function(e,t){var i=0;return e instanceof na?e.constraints&Li.Tooltip?i=e.constraints&Li.Tooltip:e.constraints&Li.InheritTooltip&&(i=t.constraints&Ni.Tooltip):e.constraints&ki.Tooltip?i=e.constraints&ki.Tooltip:e.constraints&ki.InheritTooltip&&(i=t.constraints&Ni.Tooltip),i}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&this.diagram.tooltipObject.open(this.diagram.element)}},e.prototype.elementLeave=function(){this.diagram.tooltipObject.close()},e.prototype.altKeyPressed=function(e){return!!(e&Bi.Alt)},e.prototype.ctrlKeyPressed=function(e){return!!(e&Bi.Control)},e.prototype.shiftKeyPressed=function(e){return!!(e&Bi.Shift)},e.prototype.scrolled=function(e){this.diagram.updateScrollOffset()},e.prototype.doubleClick=function(e){if(ka(this.diagram)){var t=void 0,i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(null!==n&&ka(this.diagram)){if(t=this.diagram.findElementUnderMouse(n,this.currentPosition),this.tool&&(this.tool instanceof zd||this.tool instanceof Hd)){sc(n)||sc(this.diagram),this.currentPosition,e.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,e.preventDefault()}else{var r=this.diagram.commandHandler.getObjectLayer(n.id);if(r&&!r.lock&&r.visible&&!(this.diagram.diagramActions&Wi.TextEdit)){var o="";"TextAnnotation"===n.shape.shape&&(o=n.id.split("_textannotation_")[1]),this.diagram.startTextEdit(n,o||(t instanceof dn?t.id.split(n.id+"_")[1]:void 0))}}}var a={source:sc(n)||sc(this.diagram),position:this.currentPosition,count:e.detail};y()&&(a={source:{selector:sc(n)}||{diagram:sc(this.diagram)},position:this.currentPosition,count:e.detail}),this.diagram.triggerEvent(Vi.doubleClick,a)}},e.prototype.itemClick=function(e,t){var i=e;return ls(this.diagram,i,!0)?i:null},e.prototype.inputChange=function(e){var t,i,n,r,o,a,s,l,c,h=document.getElementById(this.diagram.element.id+"_editBox"),d=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),p=h.value,u=p.split("\n");(!(r=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof Id||"SwimLane"===r.shape.type)&&(r=this.diagram.nameTable[this.diagram.activeLabel.parentId]),r&&("Text"!==r.shape.type&&r.annotations.length>0||"Text"===r.shape.type)&&(n=this.diagram.getWrapper(r.wrapper,this.diagram.activeLabel.id),t=(t=r.wrapper.bounds.width<n.bounds.width?r.wrapper.bounds.width:n.bounds.width)>90?t:90,s=$c(n.style,p,void 0,void 0,t),i=Number(h.style.fontSize.split("px")[0]),u.length>1&&""===u[u.length-1]&&(s.height=s.height+i),l=this.diagram.scroller.transform,c=Ia(this.diagram)?l.scale:1,a=(90>(a=s.width)?90:a)*c,o=(12>s.height?12:s.height)*c,d.style.left=(n.bounds.center.x+l.tx)*l.scale-a/2-2.5+"px",d.style.top=(n.bounds.center.y+l.ty)*l.scale-o/2-3+"px",d.style.width=a+"px",d.style.height=o+"px",h.style.minHeight="12px",h.style.minWidth="90px",h.style.width=a+"px",h.style.height=o+"px")},e.prototype.isAddTextNode=function(e,t){return!!(this.tool instanceof Id||t)&&(this.tool=null,e&&!Aa(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(Vl(this.diagram.nodes,e.id)||Vl(this.diagram.connectors,e.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e)>-1))},e.prototype.checkEditBoxAsTarget=function(e){return!(!e.target||e.target.id!==this.diagram.element.id+"_editBox")},e.prototype.getMouseEventArgs=function(e,t,i){var n,r,o;return t.position=e,i?(r=this.diagram.findObjectsUnderMouse(this.currentPosition,i),n=this.diagram.findTargetObjectUnderMouse(r,this.action,this.inAction,t.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(n=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&n&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(r=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(r,this.action,this.inAction))):(r=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(r,this.action,this.inAction)),n&&n.isHeader&&(n=this.diagram.nameTable[n.parentId],this.eventArgs.actualObject=n),n&&(o=this.diagram.findElementUnderMouse(n,this.currentPosition)),i?(t.target=n,t.targetWrapper=o):(t.source=n,t.sourceWrapper=o),t.actualObject=this.eventArgs.actualObject,t.startTouches=this.touchStartList,t.moveTouches=this.touchMoveList,t},e.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},e.prototype.getTool=function(e){switch(e){case"Select":return new Od(this.commandHandler,!0);case"Drag":return new Td(this.commandHandler);case"Rotate":return new Ad(this.commandHandler);case"LayoutAnimation":return new Nd(this.commandHandler);case"Hyperlink":return new jd(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Ld(this.commandHandler,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new Md(this.commandHandler,e);case"SegmentEnd":case"OrthoThumb":return new Yd(this.commandHandler,e);case"Draw":var t=Qs(this.diagram.drawingObject);if("Node"===t&&"Text"===this.diagram.drawingObject.shape.type)return new Id(this.commandHandler);if("Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&!this.diagram.drawingObject.shape.points)return new zd(this.commandHandler);if("Node"===t||"Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new Dd(this.commandHandler,this.diagram.drawingObject);if("Connector"===t&&"Polyline"===this.diagram.drawingObject.type)return new Hd(this.commandHandler);if("Connector"===t)return new kd(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new Rd(this.commandHandler,!1);case"PinchZoom":return new Rd(this.commandHandler,!0);case"PortDrag":return new Td(this.commandHandler,"Port");case"PortDraw":return new kd(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new Od(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Bd(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new _d(this.commandHandler,e);case"LabelRotate":return new Wd(this.commandHandler)}return null},e.prototype.getCursor=function(e){var t=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return xd(e,this.diagram.selectedItems.annotation?t.rotateAngle+t.parentTransform:t.rotateAngle)},e.prototype.findElementUnderMouse=function(e,t){return this.objectFinder.findElementUnderSelectedItem(e,t)},e.prototype.findObjectsUnderMouse=function(e,t){return this.objectFinder.findObjectsUnderMouse(e,this.diagram,this.eventArgs,t)},e.prototype.findObjectUnderMouse=function(e,t,i){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,i,this.eventArgs,this.currentPosition)},e.prototype.findTargetUnderMouse=function(e,t,i,n,r){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,i,this.eventArgs,n,r)},e.prototype.findActionToBeDone=function(e,t,i,n){return gd(e,t,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},e.prototype.updateContainerBounds=function(e){var t=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof Yc){var i=this.tool instanceof Ld,n=this.diagram.selectedObject.actualObject,r=this.diagram.nameTable[n.parentId];e?rs(this.diagram,n,this.currentPosition,i):((!r||r&&"SwimLane"!==r.shape.type)&&this.diagram.updateDiagramObject(n),t=ns(this.diagram,n,this.currentPosition,i),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.select(n)))}return t},e.prototype.updateContainerProperties=function(){var e,t,i,n,r=!1,o=!1,a={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var s=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(s,this.action,this.inAction);if(e=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof Yc){if("SwimLane"===n.shape.type&&(i=xs(this.diagram,n.wrapper.children[0])),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof Yc&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l!==n&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)As(this.diagram,n,l,this.currentPosition),a.isPreventHistory=!0;else{var c=this.diagram.nameTable[n.parentId];(!c||c&&"SwimLane"!==c.shape.type)&&(n.offsetX=e.offsetX,n.offsetY=e.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&(n.width=e.width,n.height=e.height),n.rotateAngle=e.rotateAngle);var h=void 0;if(c&&c.container&&"Stack"===c.container.type&&(this.diagram.startGroupAction(),o=!0),!l&&c&&c.container&&"Stack"===c.container.type&&"Drag"===this.action){var d=c.wrapper.children.indexOf(n.wrapper);if(h={targetIndex:void 0,target:void 0,sourceIndex:d,source:Oh(n)},d>-1){var p=c.children;p.splice(p.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",t=!0,c.wrapper.children.splice(d,1)}}if(fs(n,l,this.diagram,this.action),(c=ls(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n)&&c.container&&"Canvas"===c.container.type&&(c.wrapper.maxWidth=c.maxWidth=c.wrapper.actualSize.width,c.wrapper.maxHeight=c.maxHeight=c.wrapper.actualSize.height,r=!0),ls(this.diagram,n,!0)&&c&&"Canvas"===c.container.type?cs(this.diagram,n):a=this.updateContainerPropertiesExtend(c,n,i,e,a),n.shape.lanes&&this.updateLaneChildNode(n),r&&(c.maxWidth=c.wrapper.maxWidth=void 0,c.maxHeight=c.wrapper.maxHeight=void 0),t){this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,width:c.width,height:c.height,rotateAngle:c.rotateAngle});var u={redoObject:{sourceIndex:void 0,source:h.source},type:"StackChildPositionChanged",undoObject:h,category:"Internal"};this.diagram.diagramActions&Wi.UndoRedo||this.diagram.addHistoryEntry(u)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}Ts(i,this.diagram),a.hasStack=o}}return a},e.prototype.updateLaneChildNode=function(e){for(var t=0;t<e.shape.lanes.length;t++)if(e.shape.lanes[t].children&&e.shape.lanes[t].children.length>0)for(var i=0;i<e.shape.lanes[t].children.length;i++){var n=e.shape.lanes[t].children[i].id,r=this.diagram.nameTable[n];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}},e.prototype.updateContainerPropertiesExtend=function(e,t,i,n,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===t.shape.type){var o=Oh(t),a=!1;if(e&&e.container&&"Grid"===e.container.type){var s="SwimLane"===e.shape.type,l=s?e.wrapper.children[0]:e.wrapper,c=s?e.shape.padding:void 0,h=e.wrapper.bounds.x,d=e.wrapper.bounds.y;if(void 0!==t.columnIndex&&"Horizontal"===e.container.orientation&&(s&&t.isPhase||!s&&1===t.rowIndex)||"Vertical"===e.container.orientation&&(!s&&t.rowIndex>0&&t.columnIndex>0||s&&t.isLane)){if("Horizontal"===e.container.orientation&&t.isPhase&&t.wrapper.width>t.maxWidth&&(t.maxWidth=t.wrapper.width,t.wrapper.maxWidth=t.wrapper.width),Ls(this.diagram,t,e,n),l.updateColumnWidth(t.columnIndex,n.width,!0,c),t.isPhase){var p=e.shape.phases[t.columnIndex].header.id,u=this.diagram.nameTable[p];u.maxWidth<n.width&&(u.maxWidth=n.width,u.wrapper.maxWidth=n.width)}"SwimLane"===e.shape.type&&(e.width=e.width?l.width:e.width,Rs(this.diagram,e),e.wrapper.width=e.width,i=xs(this.diagram,l,t.rowIndex))}else void 0!==t.rowIndex&&(a=!0,Ls(this.diagram,t,e,n),l.updateRowHeight(t.rowIndex,n.height,!0,c),"SwimLane"===e.shape.type&&(e.height=e.height?l.height:e.height,e.wrapper.height=e.height,i=xs(this.diagram,l,t.rowIndex)));"SwimLane"===e.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,rotateAngle:e.rotateAngle}),this.diagram.drag(e,h-e.wrapper.bounds.x,d-e.wrapper.bounds.y)}else t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,width:t.width,height:t.height,rotateAngle:t.rotateAngle}),t.wrapper.measureChildren=!1;if(t.wrapper.measure(new ei(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var f={category:"Internal",type:a?"RowHeightChanged":"ColumnWidthChanged",undoObject:o,redoObject:Oh(t)};this.diagram.addHistoryEntry(f)}}return Ts(i,this.diagram),r},e.prototype.addUmlNode=function(){var e=this.diagram.selectedItems.nodes[0],t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(t,this.action,this.inAction);if(i||(t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(t,this.action,this.inAction)),e&&e.container&&"Stack"===e.container.type&&i&&i.parentId&&i.parentId===e.id){var n=i,r=nh(this.diagram.element.id);if(r.getElementById(r.id+"_stack_highlighter")){var o=e.wrapper.children.indexOf(i.wrapper)+1,a=new Yc(this.diagram,"nodes",{style:{fill:e.style.fill,strokeColor:"#ffffff00"},annotations:i.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ki.Default|ki.HideThumbs)&~(ki.Rotate|ki.Drag|ki.Resize),minHeight:25},!0);a.annotations[0].content=" + Name : Type";n.id.split("_");a.id=Ch()+a.id,a.parentId=e.id,a.zIndex=-1,a.umlIndex=o,this.diagram.startGroupAction();e.wrapper.children.indexOf(a.wrapper);this.diagram.add(a),this.diagram.updateConnectorEdges(e),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[a.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},e}(),Vd=function(){function e(){}return e.prototype.findObjectsUnderMouse=function(e,t,i,n,r){var o,a,s,l,c=[];n&&n instanceof Zc&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0]).children&&0===n.children.length&&(i.actualObject=n);for(var h,d,p={},u=0,f=t.spatialSearch.findObjects(new mi(e.x-50,e.y-50,100,100));u<f.length;u++){var g=e;a=(E=f[u]).wrapper.outerBounds;var m=!E.rotateAngle&&a.containsPoint(g);if((E!==n||t.currentDrawingObject instanceof na)&&E instanceof na?E!==t.currentDrawingObject:E.wrapper.visible)if((S=t.commandHandler.getObjectLayer(E.id))&&!S.lock&&S.visible){if(h=p[S.zIndex]=p[S.zIndex]||[],E.rotateAngle){a=Ph(o=E.wrapper);for(var y=0,v=o.children;y<v.length;y++)s=v[y],xi(l=vi(),-(s.rotateAngle+s.parentTransform),s.offsetX,s.offsetY),g=bi(l,e),Ph(s).containsPoint(g)&&(m=!0)}if((!n||!1===wd(t,E))&&((d=E)instanceof na?d.constraints&Li.PointerEvents:d.constraints&ki.PointerEvents)&&(E instanceof na?ol(E,e):m)){var b=E instanceof na&&E.hitPadding||0;this.findElementUnderMouse(E,e,b)&&"helper"!==E.id&&ql(E,"zIndex",h)}}}for(var w=0,x=t.layers;w<x.length;w++)for(var S=x[w],C=0,P=c=c.concat(p[S.zIndex]||[]);C<P.length;C++){var E;if("Bpmn"===(E=P[C]).shape.type&&E.processId&&(!(t.eventHandler.tool instanceof Td)||t.eventHandler.tool instanceof Td&&Ea(E)))(D=c.indexOf(t.nameTable[E.processId]))>-1&&c.splice(D,1);if("UmlClassifier"===E.shape.type&&E.container&&"Stack"===E.container.type)(D=c.indexOf(t.nameTable[t.nameTable[E.id].wrapper.children[0].id]))>-1&&c.splice(D,1)}for(var O=0;O<c.length;O++){var M=t.nameTable[c[O].parentId];if(M)for(var T=this.findElementUnderMouse(M,e),A=0;A<M.ports.length;A++)if(T.id.match("_"+M.ports[A].id+"$")){var L=M.ports[A];if(ja(L)||Na(L))return c}for(;M;){var D;if(-1===(D=c.indexOf(M)))break;c.splice(D,1),M=t.nameTable[M.parentId]}}if(i&&!i.source)for(O=0;O<c.length;O++){var k=t.nameTable[c[O].parentId];if(k&&"SwimLane"===k.shape.type)for(A=0;A<c.length;A++){c[A]instanceof na&&c.splice(O,1)}}return c},e.prototype.isTarget=function(e,t,i){var n,r=t.selectedItems.connectors[0];if(!(n="ConnectorSourceEnd"===i?t.nameTable[r.targetID]:n=t.nameTable[r.sourceID])||(n.processId||e.processId)&&n.processId===e.processId||(n.processId!==e.processId&&(e=null),e&&e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])),"ConnectorSourceEnd"===i&&r.targetID){var o=t.nameTable[r.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var a=r.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==e.shape.type||a[0]===e.id||"TextAnnotation"===e.shape.shape)&&(e=null),e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])}}return e},e.prototype.findObjectUnderMouse=function(e,t,i,n,r,o,a){var s,l,c=null;if(0!==t.length)if(a&&a instanceof Zc&&a.nodes.length+a.connectors.length===1&&(a=a.nodes[0]||a.connectors[0]),"ConnectorSourceEnd"===i&&a||"PortDraw"===i||(La(e)||Aa(e))&&ec(e.drawingObject)===na){for(var h=e.selectedItems.connectors[0],d=t.length-1;d>=0;d--)if(l=Yl(t[d],!1),t[d]instanceof Yc&&(Sa(t[d])||Ca(l)))return c=t[d],h&&(c=this.isTarget(c,e,i)),r.actualObject=c,c}else if("ConnectorTargetEnd"===i&&a){for(d=t.length-1;d>=0;d--)if(s=Yl(t[d],!0),t[d]instanceof Yc&&(wa(t[d])||xa(s)))return c=t[d],c=this.isTarget(c,e,i),r.actualObject=c,c}else{if(a&&("Drag"===i||e.eventHandler.tool instanceof Td)){var p=0;for(d=0;d<t.length;d++){var u=t[d];a!==u&&(u instanceof na||!o||u.wrapper.bounds.containsPoint(o))&&Ea(u)&&(c?(c=p>=u.zIndex?c:u,p=Math.max(p,u.zIndex)):p=(c=u).zIndex)}return c&&"Bpmn"===c.shape.type&&(c=e.selectedItems.nodes.length>0&&"Bpmn"===e.selectedItems.nodes[0].shape.type?c:null),c&&(r.actualObject=c),c}if("Select"===i&&e.eventHandler.tool){for(d=t.length-1;d>=0;d--)if(t[d]instanceof na&&t[d-1]instanceof Yc&&t[d-1].ports){if((y=this.findTargetElement(t[d-1].wrapper,o,void 0))&&(y.id.match("_icon_content_shape$")||y.id.match("_icon_content_rect$")))return t[d-1];for(var f=0;f<t[d-1].ports.length;f++)if(y&&y.id.match("_"+t[d-1].ports[f].id+"$")&&Na(t[d-1].ports[f]))return t[d-1]}if(c=t[t.length-1],r.actualObject=c,!e.eventHandler.itemClick(c,!0)&&c.parentId)for(var g=c,m=wd(e,g);g&&(!wd(e,g)||m);)c=g,g=e.nameTable[g.parentId]}else if("Pan"===i||"LayoutAnimation"===i){for(d=t.length-1;d>=0;d--)if(t[d]instanceof Yc){var y=this.findTargetElement(t[d].wrapper,o,void 0);if("LayoutAnimation"===i||"Pan"===i||y&&(y.id.match("_icon_content_shape$")||y.id.match("_icon_content_rect$")))return t[d]}}else c=t[t.length-1],r&&c&&(r.actualObject=c)}return c},e.prototype.findElementUnderSelectedItem=function(e,t){return e instanceof Zc?1!==e.nodes.length||e.connectors&&e.connectors.length?e.nodes&&!e.nodes.length||1!==e.connectors.length?null:this.findElementUnderMouse(e.connectors[0],t):this.findElementUnderMouse(e.nodes[0],t):this.findElementUnderMouse(e,t)},e.prototype.findElementUnderMouse=function(e,t,i){return this.findTargetElement(e.wrapper,t,i)},e.prototype.findTargetElement=function(e,t,i){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];if(r&&r.outerBounds.containsPoint(t)){if(r instanceof cn){var o=this.findTargetElement(r,t);if(o)return o}if(r.bounds.containsPoint(t))return r}}return e.bounds.containsPoint(t,i)&&"none"!==e.style.fill?e:null},e}(),Ud=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},qd=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return Ud(t,e),Gd([pe("")],t.prototype,"id",void 0),Gd([pe(!0)],t.prototype,"visible",void 0),Gd([pe(!1)],t.prototype,"lock",void 0),Gd([pe()],t.prototype,"objects",void 0),Gd([pe()],t.prototype,"addInfo",void 0),Gd([pe(-1)],t.prototype,"zIndex",void 0),t}(ke),Zd=function(){function e(e){this.clipboardData={},this.connectorsTable=[],this.processTable={},this.isContainer=!1,this.childTable={},this.parentTable={},this.diagram=e}return Object.defineProperty(e.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),e.prototype.startTransaction=function(e){this.state={element:this.diagram.selectedItems,backup:null},e&&this.diagram.protectPropertyChange(!0),oh(this.diagram.element.id).style.pointerEvents="none"},e.prototype.endTransaction=function(e){this.state=null,e&&this.diagram.protectPropertyChange(!1),oh(this.diagram.element.id).style.pointerEvents="all"},e.prototype.showTooltip=function(e,t,i,n,r){var o=this;if(r&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltip.relativeMode="ConnectTool"===n?"Mouse":"Object",this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var a=void 0,s=_h(this.diagram.selectedItems.setTooltipTemplate);s&&(a=s(e,this.diagram)),i=a instanceof HTMLElement?a.cloneNode(!0):a||i}this.diagram.tooltipObject.content=i;var l=hl(this.diagram,{x:t.x,y:t.y},e);this.diagram.tooltipObject.offsetX=l.x+("ConnectTool"===n?10:0),this.diagram.tooltipObject.offsetY=l.y+10,this.diagram.tooltipObject.dataBind(),r&&setTimeout(function(){o.diagram.tooltipObject.open(o.diagram.element)},1)},e.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},e.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&Ai.ToolTip)},e.prototype.updateSelector=function(){this.diagram.updateSelector()},e.prototype.triggerEvent=function(e,t){if(e===Vi.drop||e===Vi.positionChange||e===Vi.connectionChange){if(this.diagram.currentSymbol)return;if(e===Vi.drop&&(t.source=this.diagram),this.diagram.currentDrawingObject)return}this.diagram.triggerEvent(e,t)},e.prototype.dragOverElement=function(e,t){if(this.diagram.currentSymbol){var i={element:sc(e.source),target:sc(e.target),mousePosition:sc(t),diagram:sc(this.diagram)};this.triggerEvent(Vi.dragOver,i)}},e.prototype.disConnect=function(e,t){var i,n={},r={};if(e instanceof Zc?i=e.connectors[0]:e instanceof na&&this.diagram.currentDrawingObject&&(i=this.diagram.currentDrawingObject),e&&i&&(bd(this.diagram)||this.diagram.currentDrawingObject))if(!t||"ConnectorSourceEnd"!==t&&"ConnectorTargetEnd"!==t){if("OrthoThumb"!==t&&"SegmentEnd"!==t&&(i.sourceID||i.targetID)){n={sourceID:i.sourceID,sourcePortID:i.sourcePortID,targetID:i.targetID,targetPortID:i.targetPortID},i.sourceID="",i.sourcePortID="",i.targetID="",i.targetPortID="",r={sourceID:i.sourceID,sourcePortID:i.sourcePortID,targetID:i.targetID,targetPortID:i.targetPortID};var o={connector:sc(i),oldValue:n,newValue:r,cancel:!1,state:"Changing",connectorEnd:t};y()&&(o={connector:sc(i),oldValue:{connector:sc(n)},newValue:{connector:sc(r)},cancel:!1,state:"Changed",connectorEnd:t}),this.triggerEvent(Vi.connectionChange,o),o.cancel?(i.sourceID=n.sourceID,i.sourcePortID=n.sourcePortID,i.targetID=n.targetID,i.targetPortID=n.targetPortID):(this.diagram.connectorPropertyChange(i,n,r),this.diagram.updateDiagramObject(i),o={connector:i,oldValue:n,newValue:r,cancel:!1,state:"Changed",connectorEnd:t},y()&&(o={connector:sc(i),oldValue:{connector:n},newValue:{connector:r},cancel:!1,state:"Changed",connectorEnd:t}),this.triggerEvent(Vi.connectionChange,o))}}else{var a="ConnectorSourceEnd"===t?"sourceID":"targetID",s="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";i[a]&&(n[a]=i[a],i[a]="",r[a]=i[a],(i.sourcePortID||i.targetPortID)&&(n[s]=i[s],i[s]="",r[s]=i[s]),this.connectionEventChange(i,n,r,t))}},e.prototype.connectionEventChange=function(e,t,i,n){var r="ConnectorSourceEnd"===n?"sourceID":"targetID",o="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID",a={connector:sc(e),oldValue:{nodeId:t[r],portId:t[o]},newValue:{nodeId:i[r],portId:i[o]},cancel:!1,state:"Changing",connectorEnd:n};y()&&(a={connector:sc(e),cancel:!1,state:"Changing",connectorEnd:n,oldValue:{connectorTargetValue:{portId:t[o],nodeId:t[r]}},newValue:{connectorTargetValue:{portId:i[o],nodeId:i[r]}}}),this.triggerEvent(Vi.connectionChange,a),a.cancel?(e[r]=t[r],e[o]=t[o],i=t):(this.diagram.connectorPropertyChange(e,t,i),this.diagram.updateDiagramObject(e),a={connector:sc(e),oldValue:{nodeId:t[r],portId:t[o]},newValue:{nodeId:i[r],portId:i[o]},cancel:!1,state:"Changed",connectorEnd:n},y()&&(a={connector:sc(e),oldValue:{connectorTargetValue:{portId:t[o],nodeId:t[r]}},newValue:{connectorTargetValue:{portId:i[o],nodeId:i[r]}},cancel:!1,state:"Changed",connectorEnd:n}),this.triggerEvent(Vi.connectionChange,a))},e.prototype.findTarget=function(e,t,i,n){if(t instanceof Yc){if(e&&e.id===t.id+"_content")return t;if(i&&"Bpmn"===t.shape.type&&"Activity"===t.shape.shape&&"Transaction"===t.shape.activity.subProcess.type){var r=t.shape.activity.subProcess.transaction;if(r.success.visible&&0===e.id.indexOf(t.id+"_success"))return r.success;if(r.cancel.visible&&0===e.id.indexOf(t.id+"_cancel"))return r.cancel;if(r.failure.visible&&0===e.id.indexOf(t.id+"_failure"))return r.failure}if(e instanceof yn)for(var o=0;o<t.ports.length;o++){var a=t.ports[o];if(e.id===t.id+"_"+a.id)return a}}if(!n){var s=void 0;for(o=0;o<t.annotations.length;o++)if(s=t.annotations[o],e.id===t.id+"_"+s.id)return s}return t},e.prototype.canDisconnect=function(e,t,i,n){var r;t.source instanceof Zc?r=t.source.connectors[0]:t.source instanceof na&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0);var o="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";return r["ConnectorSourceEnd"===e?"sourceID":"targetID"]!==n||r[o]!==i},e.prototype.changeAnnotationDrag=function(e){var t;if(e.source&&e.source.connectors&&e.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e.source.connectors[0])>-1){e.source instanceof Zc&&(t=e.source.connectors[0]);var i=t.id.split("_"),n=(i[i.length-1],i[i.length-3]||i[0]);if(e.target&&e.target.id!==n&&"TextAnnotation"!==e.target.shape.shape){this.diagram.startGroupAction();var r=this.diagram.nameTable[i[0]],o=this.getAnnotation(r,i[1]),a={id:i[1]+Ch(),angle:ni.findAngle(t.intermediatePoints[0],t.intermediatePoints[1]),text:o.text,length:ni.distancePoints(t.intermediatePoints[0],t.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:o.nodeId},s=new kc(e.target.shape,"annotations",a,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[t.targetID],this.diagram),this.diagram.refreshCanvasLayers(),s.id=i[1],this.diagram.addTextAnnotation(s,e.target),this.diagram.endGroupAction()}else t&&(t.sourceID=n,this.diagram.connectorPropertyChange(t,{},{sourceID:n}),this.diagram.updateDiagramObject(t))}},e.prototype.connect=function(e,t){var i,n,r,o={},a={};t.source instanceof Zc?r=t.source.connectors[0]:t.source instanceof na&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);var s=this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0),l="ConnectorSourceEnd"===e?"sourceID":"targetID",c="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";if(s instanceof Yc)a[l]=r[l],r[l]=s.id,o[l]=r[l],a[c]=r[c],this.connectionEventChange(r,a,o,e);else{i=r[l],n=r[c],r[c]=s.id,r[l]=t.target.id,o[l]=r[l],o[c]=r[c];var h={connector:sc(r),oldValue:{nodeId:i,portId:n},newValue:{nodeId:o[l],portId:o[c]},cancel:!1,state:"Changing",connectorEnd:e};y()&&(h={connector:sc(r),oldValue:{connectorTargetValue:{portId:a[c],nodeId:a[l]}},newValue:{connectorTargetValue:{portId:o[c],nodeId:o[l]}},cancel:!1,state:"Changing",connectorEnd:e}),this.triggerEvent(Vi.connectionChange,h),h.cancel?(r[l]=i,r[c]=n,o[l]=i,o[c]=n):(this.diagram.connectorPropertyChange(r,a,o),this.diagram.updateDiagramObject(r),h={connector:sc(r),oldValue:{nodeId:i,portId:n},newValue:{nodeId:o[l],portId:o[c]},cancel:!1,state:"Changed",connectorEnd:e},y()&&(h={newValue:{connectorTargetValue:{portId:o[c],nodeId:o[l]}},connector:sc(r),oldValue:{connectorTargetValue:{portId:a[c],nodeId:a[l]}},cancel:!1,state:"Changed",connectorEnd:e}),this.triggerEvent(Vi.connectionChange,h))}this.renderHighlighter(t,void 0,"ConnectorSourceEnd"===e)},e.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},e.prototype.addLayer=function(e,t){e.id=e.id||Ch(),e.zIndex=this.diagram.layers.length,(e=new qd(this.diagram,"layers",e,!0)).objectZIndex=-1,e.zIndexTable={},this.diagram.layers.push(e),this.diagram.layerZIndexTable[e.zIndex]=e.id,this.diagram.activeLayer=e;e.objects;if(t)for(var i=0;i<t.length;i++)this.diagram.add(t[i])},e.prototype.getObjectLayer=function(e){for(var t=this.diagram.layers,i=0;i<t.length;i++){if(t[i].objects.indexOf(e)>-1)return t[i]}return this.diagram.activeLayer},e.prototype.getLayer=function(e){for(var t=this.diagram.layers,i=0;i<t.length;i++)if(t[i].id===e)return t[i]},e.prototype.removeLayer=function(e){var t=this.getLayer(e);if(t){for(var i=this.diagram.layers.indexOf(t),n=t.objects,r=n.length-1;r>=0;r--)this.diagram.unSelect(this.diagram.nameTable[n[r]]),this.diagram.remove(this.diagram.nameTable[n[r]]),"default_layer"!==t.id&&this.diagram.activeLayer.id===e&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);delete this.diagram.layerZIndexTable[t.zIndex],this.diagram.layers.splice(i,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.moveObjects=function(e,t){var i,n=this.getLayer(t)||this.diagram.activeLayer;this.diagram.setActiveLayer(n.id);for(var r=0,o=e;r<o.length;r++){var a=o[r];this.getObjectLayer(a).objects.indexOf(a)>-1&&(i=this.diagram.nameTable[a],this.diagram.unSelect(i),this.diagram.remove(this.diagram.nameTable[a]),this.diagram.add(i))}},e.prototype.cloneLayer=function(e){this.diagram.layers;var t=this.getLayer(e);if(t){var i=[],n={id:e+"_"+Ch(),objects:[],visible:!0,lock:!1};this.addLayer(n),n.zIndex=this.diagram.layers.length-1;i.length;for(var r=0,o=t.objects;r<o.length;r++){var a=o[r];i.push(this.diagram.nameTable[a])}this.paste(i)}},e.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){e=this.diagram.selectedItems.connectors;for(var i=0;i<e.length;i++){var n=void 0;n=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e[i])>-1?Oh(this.diagram.nameTable[e[i].targetID]):Oh(e[i]),t.push(n)}}if(this.diagram.selectedItems.nodes.length>0){e=e.concat(this.diagram.selectedItems.nodes);for(i=0;i<this.diagram.selectedItems.nodes.length;i++){var r=Oh(this.diagram.selectedItems.nodes[i]);this.copyProcesses(r),t.push(Oh(r));var o=vi();if(xi(o,-r.rotateAngle,r.offsetX,r.offsetY),r.children){for(var a=this.clipboardData.childTable,s=void 0,l=this.getAllDescendants(r,[],!0),c=0;c<l.length;c++){var h=a[(s=this.diagram.nameTable[l[c].id]).id]=Oh(s),d=bi(o,{x:h.wrapper.offsetX,y:h.wrapper.offsetY});s instanceof Yc&&(h.offsetX=d.x,h.offsetY=d.y,h.rotateAngle-=r.rotateAngle)}this.clipboardData.childTable=a}if("SwimLane"===r.shape.type){var p=this.diagram.getObject(this.diagram.selectedItems.nodes[i].id),u=(a=this.clipboardData.childTable,xs(this.diagram,p.wrapper.children[0]));for(c=0;c<u.length;c++){var f=this.diagram.getObject(u[c]);a[f.id]=Oh(f)}}if(r&&r.isLane){a=this.clipboardData.childTable;var g=Ds(p=this.diagram.getObject(r.parentId),r);a[r.id]=Oh(p.shape.lanes[g]),a[r.id].width=p.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var m=0,y=e;m<y.length;m++){var v=y[m];this.diagram.nameTable[v.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(v)>-1?this.diagram.remove(this.diagram.nameTable[v.targetID]):this.diagram.remove(v))}this.endGroupAction()}return this.sortByZIndex(t,"zIndex"),t},e.prototype.copyProcesses=function(e){if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0){for(var t=0,i=e.shape.activity.subProcess.processes;t<i.length;t++){var n=i[t];this.processTable[n]=Oh(this.diagram.nameTable[n]),this.processTable[n].shape.activity.subProcess.processes&&this.processTable[n].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[n])}this.clipboardData.processTable=this.processTable}},e.prototype.group=function(){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Wi.Group;var t,i=[],n={};n.id="group"+Ch(),(n=new Yc(this.diagram,"nodes",n,!0)).children=[],i=(i=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors);for(var r=0;r<i.length;r++)i[r].parentId||n.children.push(i[r].id);(t=this.diagram.add(n))&&this.select(t);var o={type:"Group",undoObject:n,redoObject:n,category:"Internal"};this.addHistoryEntry(o),this.diagram.diagramActions=this.diagram.diagramActions&~Wi.Group,this.diagram.protectPropertyChange(e)},e.prototype.unGroup=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Wi.Group;var i=[];e?i.push(e):i=this.diagram.selectedItems.nodes;for(var n=0;n<i.length;n++){var r=i[n],o={type:"UnGroup",undoObject:Oh(r),redoObject:Oh(r),category:"Internal"};if(this.diagram.diagramActions&Wi.UndoRedo||this.addHistoryEntry(o),r.children){r.ports&&r.ports.length>0&&this.diagram.removePorts(r,r.ports),r.annotations&&r.annotations.length>0&&this.diagram.removeLabels(r,r.annotations);for(var a=this.diagram.nameTable[r.parentId],s=r.children.length-1;s>=0;s--)this.diagram.nameTable[r.children[s]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[r.children[s]],r),r.parentId&&r.children[s]&&this.diagram.addChild(a,r.children[s]);r.parentId&&this.diagram.deleteChild(r,a)}this.diagram.removeNode(r),this.clearSelection()}this.diagram.diagramActions=this.diagram.diagramActions&~Wi.Group,this.diagram.protectPropertyChange(t)},e.prototype.paste=function(e){if(e||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var t=e?this.getNewObject(e):this.clipboardData.clipObject;if(t){var i=1!==t.length,n=!1,r={},o={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var a=0,s=t;a<s.length;a++){r[(c=s[a]).id]=c}for(var l=0;l<t.length;l++){var c=t[l];if(ec(c)===na){var h=Oh(c),d=h.sourceID;h.sourceID="",r[d]&&o[d]&&(h.sourceID=o[d]),d=h.targetID,h.targetID="",r[d]&&o[d]&&(h.targetID=o[d]);var p=this.cloneConnector(h,i);o[c.id]=p.id}else{var u=this.cloneNode(c,i);if(u){o[c.id]=u.id;var f=c.inEdges;if(f)for(var g=0,m=f;g<m.length;g++){if(r[b=m[g]]&&o[b])(w=this.diagram.nameTable[o[b]]).targetID=o[c.id],this.diagram.connectorPropertyChange(w,{targetID:"",targetPortID:""},{targetID:w.targetID,targetPortID:w.targetPortID})}if(f=c.outEdges)for(var y=0,v=f;y<v.length;y++){var b,w;if(r[b=v[y]]&&o[b])(w=this.diagram.nameTable[o[b]]).sourceID=o[c.id],this.diagram.connectorPropertyChange(w,{sourceID:"",sourcePortID:""},{sourceID:w.sourceID,sourcePortID:w.sourcePortID})}}}}!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},e.prototype.getNewObject=function(e){var t,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=Oh(e[n]),i.push(t);return i},e.prototype.cloneConnector=function(e,t){var i,n=Oh(e);return this.translateObject(n),n.zIndex=-1,i=this.diagram.add(n),this.selectObjects([i],t),i},e.prototype.cloneNode=function(e,t,i,n){var r,o,a={},s=Oh(e),l=this.diagram.nameTable[e.parentId];if(e.shape&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length&&(o=s.shape.activity.subProcess.processes,s.zIndex=-1,s.shape.activity.subProcess.processes=void 0),e.shape&&"SwimLane"===e.shape.type)_s(e,this.diagram,this.clipboardData);else if(l&&"SwimLane"===l.shape.type)_s(Oh(l),this.diagram,this.clipboardData,e,!0);else if(!e.children||!e.children.length||i&&i.length)if(e.shape&&"TextAnnotation"===e.shape.shape&&-1!==e.id.indexOf("_textannotation_")&&this.diagram.nameTable[e.id])for(var c=e.id.split("_textannotation_"),h=void 0,d=this.diagram.nameTable[e.id],p=0;p<d.inEdges.length;p++){var u=this.diagram.nameTable[d.inEdges[p]];if(u){h=this.diagram.nameTable[u.sourceID];var f=this.getAnnotation(h,c[1]),g={id:c[1]+Ch(),angle:f.angle,text:f.text,length:f.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:f.nodeId};this.diagram.addTextAnnotation(g,h)}}else this.translateObject(s,n),s.zIndex=-1,i&&(s.children=i),r=this.diagram.add(s);else r=this.cloneGroup(e,t);for(var m=0,y=Object.keys(a);m<y.length;m++){var v=y[m];this.diagram.add(a[v])}return o&&o.length&&(r.shape.activity.subProcess.processes=o,this.cloneSubProcesses(r)),r&&this.selectObjects([r],t),r},e.prototype.getAnnotation=function(e,t){var i=e.shape.annotations;if(i&&i.length)for(var n=0;n<=i.length;n++)if(i[n].id===t)return i[n]},e.prototype.cloneSubProcesses=function(e){var t=[],i={};if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length)for(var n=e.shape.activity.subProcess.processes,r=0;r<n.length;r++){for(var o=this.diagram.nameTable[n[r]]||this.clipboardData.processTable[n[r]],a=0,s=o.outEdges;a<s.length;a++){var l=s[a];t.indexOf(l)<0&&t.push(l)}for(var c=0,h=o.inEdges;c<h.length;c++){l=h[c];t.indexOf(l)<0&&t.push(l)}var d=Oh(this.clipboardData.processTable[n[r]]);d.processId=e.id;var p=this.cloneNode(d,!1);i[n[r]]=p.id,n[r]=p.id,this.diagram.addProcess(p,e.id);for(var u=0,f=t;u<f.length;u++){var g=f[u],m=Oh(this.diagram.nameTable[g]||this.diagram.connectorTable[g]);i[m.sourceID]&&i[m.targetID]&&(m.zIndex=-1,m.id+=Ch(),m.sourceID=i[m.sourceID],m.targetID=i[m.targetID],t.splice(t.indexOf(g),1),this.diagram.add(m))}}},e.prototype.cloneGroup=function(e,t){var i,n=[],r=[],o=[],a=[];r=r.concat(e.children);var s=Ch();if(this.clipboardData.childTable||e.children.length>0)for(var l=0;l<r.length;l++){var c=void 0;(c=this.clipboardData.childTable?this.clipboardData.childTable[r[l]]:this.diagram.nameTable[r[l]]).parentId="",c&&(ec(c)===na?o.push(c):(i=this.cloneNode(c,t,void 0,s),a.push(c.id),n.push(i.id)))}for(var h=0;h<o.length;h++){if(o[h].sourceID||o[h].targetID)for(var d=0;d<a.length;d++)o[h].sourceID===a[d]&&(o[h].sourceID+=s),o[h].targetID===a[d]&&(o[h].targetID+=s);i=this.cloneConnector(o[h],t),n.push(i.id)}var p=this.cloneNode(e,t,n);return p&&p.container&&p.shape&&"UmlClassifier"===p.shape.type&&(this.diagram.updateDiagramObject(p),p.wrapper.measure(new ei)),p},e.prototype.translateObject=function(e,t){e.id+=t||Ch();var i=10*this.clipboardData.pasteIndex;if(ec(e)===na){if(e.sourcePoint={x:e.sourcePoint.x+i,y:e.sourcePoint.y+i},e.targetPoint={x:e.targetPoint.x+i,y:e.targetPoint.y+i},"Bezier"===e.type)for(var n=e.segments,r=0;r<n.length;r++)ni.isEmptyPoint(n[r].point1)||(n[r].point1={x:n[r].point1.x+i,y:n[r].point1.y+i}),ni.isEmptyPoint(n[r].point2)||(n[r].point2={x:n[r].point2.x+i,y:n[r].point2.y+i});if(("Straight"===e.type||"Bezier"===e.type)&&e.segments&&e.segments.length>0)for(n=e.segments,r=0;r<n.length-1;r++)n[r].point.x+=i,n[r].point.y+=i}else e.offsetX+=i,e.offsetY+=i},e.prototype.drawObject=function(e){var t,i;i=Oh(this.diagram.drawingObject);for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];i[o]=e[o]}return ec(this.diagram.drawingObject)===Yc?((t=new Yc(this.diagram,"nodes",i,!0)).id=(this.diagram.drawingObject.id||"node")+Ch(),this.diagram.initObject(t)):((t=new na(this.diagram,"connectors",i,!0)).id=(this.diagram.drawingObject.id||"connector")+Ch(),this.diagram.initObject(t)),this.diagram.updateDiagramObject(t),this.diagram.currentDrawingObject=t,t},e.prototype.addObjectToDiagram=function(e){var t;this.diagram.removeFromAQuad(e),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[e.id]),delete this.diagram.nameTable[e.id],t=this.diagram.add(e),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([t]),e&&!Aa(this.diagram)&&(this.diagram.tool&=~ji.DrawOnce,this.diagram.currentDrawingObject=void 0)},e.prototype.addText=function(e,t){var i=this.diagram.findElementUnderMouse(e,t);this.diagram.startTextEdit(e,i instanceof dn?i.id.split("_")[1]:void 0)},e.prototype.updateArgsObject=function(e,t,i){if(e)for(var n=0;n<e.length;n++)ec(e[n])===na?i.connectors.push(sc(e[n])):i.nodes.push(sc(e[n]))},e.prototype.updateSelectionChangeEventArgs=function(e,t,i){if(y()){var n=(e={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:"Changing",type:"Addition",cancel:!1}).oldValue,r=e.newValue;return n.connectors=[],n.nodes=[],r.connectors=[],r.nodes=[],this.updateArgsObject(t,e,r),this.updateArgsObject(i,e,n),e}return e},e.prototype.selectObjects=function(e,t,i){var n={oldValue:i||this.getSelectedObject(),newValue:e,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1};y()&&(n=this.updateSelectionChangeEventArgs(n,e,i||[])),this.diagram.triggerEvent(Vi.selectionChange,n);var r=this.diagram.tool&ji.MultipleSelect,o=Ma(this.diagram);if(o||r){if(!r&&(e.length>1||t&&1===e.length)){if(1!==e.length)return;this.clearSelection()}if(!o&&1===e.length&&(!t||!vd(this.diagram)))return void this.clearSelection()}if(!n.cancel){for(var a=0;a<e.length;a++){var s=e[a];if(!0,vd(this.diagram)){if((a>0||t)&&s.children&&!s.parentId)for(var l=0;l<this.diagram.selectedItems.nodes.length;l++){var c=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId];c&&(c=this.findParent(c))&&s.id===c.id&&this.selectGroup(s)}this.selectProcesses(s),this.selectBpmnSubProcesses(s)&&this.select(s,a>0||t,!0)}else this.select(s,a>0||t,!0)}n={oldValue:sc(i||[]),newValue:sc(this.getSelectedObject()),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.updateBlazorSelectorModel(i),n=this.updateSelectionChangeEventArgs(n,e,i),this.diagram.triggerEvent(Vi.selectionChange,n),this.diagram.renderSelector(t||e&&e.length>1)}},e.prototype.findParent=function(e){return e.parentId&&(e=this.diagram.nameTable[e.parentId],this.findParent(e)),e},e.prototype.selectProcesses=function(e){if(this.hasProcesses(e))for(var t=e.shape.activity.subProcess.processes,i=0;i<t.length;i++){var n=this.diagram.nameTable[t[i]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}},e.prototype.selectGroup=function(e){for(var t=0;t<e.children.length;t++){var i=this.diagram.nameTable[e.children[t]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[e.children[t]])}},e.prototype.selectBpmnSubProcesses=function(e){var t,i=!0;if(e.processId)i=!wd(this.diagram,this.diagram.nameTable[e.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[e.processId]);else if(e instanceof na){if(e.sourceID&&this.diagram.nameTable[e.sourceID]&&this.diagram.nameTable[e.sourceID].processId&&(t=this.diagram.nameTable[e.sourceID].processId),e.targetID&&this.diagram.nameTable[e.targetID]&&this.diagram.nameTable[e.targetID].processId&&(t=this.diagram.nameTable[e.targetID].processId),t){if(wd(this.diagram,this.diagram.nameTable[t]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[t])}}else e.parentId&&this.diagram.nameTable[e.parentId]&&"UmlClassifier"===this.diagram.nameTable[e.parentId].shape.type&&wd(this.diagram,this.diagram.nameTable[e.parentId])&&(i=!1);return i},e.prototype.hasProcesses=function(e){return!!(e&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)},e.prototype.select=function(e,t,i){var n=this.getObjectLayer(e.id);if(ua(e)&&!(e instanceof Zc)&&!wd(this.diagram,e)&&n&&!n.lock&&n.visible&&e.wrapper.visible){(t=!!vd(this.diagram)&&t)||this.clearSelection();var r=this.diagram.selectedItems;if(e instanceof Yc)if(e.isHeader){var o=this.diagram.nameTable[e.parentId];r.nodes.push(o)}else r.nodes.push(e);else r.connectors.push(e);if(t)r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(e.wrapper);else if(r.init(this.diagram),1===r.nodes.length&&0===r.connectors.length){var a=Ws(this.diagram,r);a&&(r.wrapper.children[0]=a),r.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.pivot=r.nodes[0].pivot}i||this.diagram.renderSelector(t)}},e.prototype.getObjectCollectionId=function(e,t){for(var i=[],n=0,r=e?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!t&&n<r.length;)i[n]=r[n].id,n++;return i},e.prototype.updateBlazorSelectorModel=function(e,t){if(window&&window.ejsInterop){for(var i=0,n=[];e&&i<e.length;)n[i]=e[i].id,i++;i=0;var r=sc({nodes:this.getObjectCollectionId(!0,t),connectors:this.getObjectCollectionId(!1,t)});window.ejsInterop.updateDiagramCollection&&window.ejsInterop.updateDiagramCollection.call(this.diagram,"selectedItems",r,n,!1,!0)}},e.prototype.labelSelect=function(e,t){var i=this.diagram.selectedItems;i.nodes=i.connectors=[],e instanceof Yc?i.nodes[0]=e:i.connectors[0]=e,i.annotation=this.findTarget(t,e),i.init(this.diagram),this.diagram.renderSelector(!1)},e.prototype.unSelect=function(e){var t=[];t.push(e);var i={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||(y()&&(i=this.updateSelectionChangeEventArgs(i,[],t)),this.diagram.triggerEvent(Vi.selectionChange,i)),wd(this.diagram,e)){var n=this.diagram.selectedItems,r=void 0;e instanceof Yc?(r=n.nodes.indexOf(e,0),n.nodes.splice(r,1)):(r=n.connectors.indexOf(e,0),n.connectors.splice(r,1)),i={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(t),(i={oldValue:sc(t),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:i.cancel}).cancel||(r=n.wrapper.children.indexOf(e.wrapper,0),n.wrapper.children.splice(r,1),this.diagram.updateSelector(),this.diagram.currentSymbol||(i=this.updateSelectionChangeEventArgs(i,[],t),this.diagram.triggerEvent(Vi.selectionChange,i)))}},e.prototype.getChildElements=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n.children&&n.children.length>0?t.concat(this.getChildElements(n.children)):(t.push(n.id),n instanceof dn&&t.push(n.id+"_text"))}return t},e.prototype.moveSvgNode=function(e,t){var i=th(t+"_groupElement",this.diagram.element.id),n=th(e+"_groupElement",this.diagram.element.id);i.parentNode.insertBefore(n,i)},e.prototype.sendLayerBackward=function(e){var t=this.getLayer(e);if(t&&0!==t.zIndex){var i=t.zIndex;if("SVG"===this.diagram.mode){var n=t.objects,r=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(r)for(var o=0,a=n;o<a.length;o++){var s=a[o];this.moveSvgNode(s,r)}}var l=this.getLayer(this.diagram.layerZIndexTable[i-1]);l.zIndex=l.zIndex+1,t.zIndex=t.zIndex-1;var c=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=c,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.bringLayerForward=function(e){var t=this.getLayer(e);if(t&&t.zIndex<this.diagram.layers.length-1){var i=t.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var r=t.objects[0],o=0,a=n.objects;o<a.length;o++){var s=a[o];s&&this.moveSvgNode(s,r)}n.zIndex=n.zIndex-1,t.zIndex=t.zIndex+1;var l=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.sendToBack=function(){if(vd(this.diagram)){for(var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.nameTable[e].zIndex,i=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[i].zIndexTable,r=t;r>0;r--)n[r]&&(n[r-1]?(n[r]=n[r-1],this.diagram.nameTable[n[r]].zIndex=r):(n[r-1]=n[r],this.diagram.nameTable[n[r-1]].zIndex=r,delete n[r]));if(n[0]=this.diagram.nameTable[e].id,this.diagram.nameTable[e].zIndex=0,"SVG"===this.diagram.mode){for(var o=n[r=1];!o&&r<t;)o=n[++r];this.moveSvgNode(e,o),this.updateNativeNodeIndex(e)}else this.diagram.refreshCanvasLayers()}},e.prototype.bringToFront=function(){if(vd(this.diagram)){for(var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.layers.indexOf(this.getObjectLayer(e)),i=this.diagram.layers[t].zIndexTable,n=Number(Object.keys(i).sort(function(e,t){return Number(e)-Number(t)}).reverse()[0]),r=this.diagram.nameTable[e].zIndex;r<n;r++)i[r]&&(i[r+1]?(i[r]=i[r+1],this.diagram.nameTable[i[r]].zIndex=r):(i[r+1]=i[r],this.diagram.nameTable[i[r+1]].zIndex=r,delete i[r]));if(i[n]=this.diagram.nameTable[e].id,this.diagram.nameTable[e].zIndex=n,"SVG"===this.diagram.mode){var o=this.diagram.diagramLayer,a=(this.getChildElements(this.diagram.nameTable[e].wrapper.children),th(e+"_groupElement",this.diagram.element.id)),s=this.diagram.selectedItems.nodes;if(s.length>0&&("Native"===s[0].shape.type||"HTML"===s[0].shape.type)){a.parentNode.removeChild(a);for(var l=0;l<this.diagram.views.length;l++){var c=(a=th(e+("HTML"===s[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[l])).parentNode.lastChild;c.parentNode.insertBefore(a,c.nextSibling)}var h=dh(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[e].wrapper,o,h)}else{var d=this.getObjectLayer(e);for(r=0;r<d.objects.length;r++)d.objects[r]!==e&&(this.moveSvgNode(d.objects[r],e),this.updateNativeNodeIndex(e))}}else this.diagram.refreshCanvasLayers()}},e.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e=e.sort(function(e,t){return e[i]-t[i]})},e.prototype.sendForward=function(){if(vd(this.diagram)){var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.layers.indexOf(this.getObjectLayer(e)),i=this.diagram.layers[t].zIndexTable,n=(Object.keys(i).length,this.diagram.nameTable[e]),r=[],o=this.diagram.spatialSearch.findObjects(n.wrapper.bounds);o.length>2&&(o=this.sortByZIndex(o));for(var a=0,s=o;a<s.length;a++){var l=s[a];if(n.id!==l.id)if(t===this.getObjectLayer(l.id).zIndex&&Number(this.diagram.nameTable[e].zIndex)<Number(l.zIndex)&&n.wrapper.bounds.intersects(l.wrapper.bounds)){r.push(l);break}}if(r.length>0){var c=r[0].zIndex,h=n.zIndex;i[c];this.diagram.layers[0].zIndexTable[c]=n.id,this.diagram.nameTable[i[c]].zIndex=c,this.diagram.layers[0].zIndexTable[h]=r[0].id,this.diagram.nameTable[i[h]].zIndex=h,"SVG"===this.diagram.mode?(this.moveSvgNode(i[Number(r[0].zIndex)],e),this.updateNativeNodeIndex(i[Number(r[0].zIndex)],e)):this.diagram.refreshCanvasLayers()}}},e.prototype.sendBackward=function(){if(vd(this.diagram)){var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.layers.indexOf(this.getObjectLayer(e)),i=this.diagram.layers[t].zIndexTable,n=(Object.keys(i).length,this.diagram.nameTable[e]),r=[],o=this.diagram.spatialSearch.findObjects(n.wrapper.bounds);o.length>2&&(o=this.sortByZIndex(o));for(var a=0,s=o;a<s.length;a++){var l=s[a];if(n.id!==l.id)t===this.getObjectLayer(l.id).zIndex&&Number(this.diagram.nameTable[e].zIndex)>Number(l.zIndex)&&n.wrapper.bounds.intersects(l.wrapper.bounds)&&r.push(l)}if(r.length>0){var c=r[r.length-1].zIndex,h=n.zIndex;i[c];i[c]=n.id,this.diagram.nameTable[i[c]].zIndex=c,i[h]=r[r.length-1].id,this.diagram.nameTable[i[h]].zIndex=h,"SVG"===this.diagram.mode?(this.moveSvgNode(e,i[r[r.length-1].zIndex]),this.updateNativeNodeIndex(e,i[r[r.length-1].zIndex])):this.diagram.refreshCanvasLayers()}}},e.prototype.updateNativeNodeIndex=function(e,t){for(var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(t),n=0;n<this.diagram.views.length;n++)if(i&&("HTML"===i.shape.type||"Native"===i.shape.type)){var r="HTML"===i.shape.type?"_html_element":"_content_groupElement",o=th(e+r,this.diagram.views[n]),a=t?th(t+r,this.diagram.views[n]):o.parentElement.firstChild;o.parentNode.id===a.parentNode.id&&a.parentNode.insertBefore(o,a)}},e.prototype.initSelectorWrapper=function(){var e=this.diagram.selectedItems;e.init(this.diagram),1===e.nodes.length&&0===e.connectors.length&&(e.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.pivot=e.nodes[0].pivot)},e.prototype.doRubberBandSelection=function(e){this.clearSelectionRectangle();var t=[],i=[];t=this.diagram.getNodesConnectors(t),(i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?qs(e,t):this.diagram.spatialSearch.findObjects(e)).length&&this.selectObjects(i,!0)},e.prototype.clearSelectionRectangle=function(){var e=nh(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&I(e)},e.prototype.dragConnectorEnds=function(e,t,i,n,r,o){var a,s,l,c=!1;return t instanceof Zc?a=t.connectors[0]:t instanceof na&&this.diagram.currentDrawingObject&&(this.clearSelection(),a=this.diagram.currentDrawingObject),"BezierSourceThumb"!==e&&"BezierTargetThumb"!==e||(c=!0),"ConnectorSourceEnd"===e||"BezierSourceThumb"===e?(s=i.x-(c?n.bezierPoint1.x:a.sourcePoint.x),l=i.y-(c?n.bezierPoint1.y:a.sourcePoint.y),this.dragSourceEnd(a,s,l,null,i,e,void 0,r,o,void 0,n)):(s=i.x-(c?n.bezierPoint2.x:a.targetPoint.x),l=i.y-(c?n.bezierPoint2.y:a.targetPoint.y),this.dragTargetEnd(a,s,l,null,i,e,void 0,n))},e.prototype.getSelectedObject=function(){var e=this.diagram.selectedItems;return e.nodes.concat(e.connectors)},e.prototype.clearSelection=function(e){if(vd(this.diagram)){var t=this.diagram.selectedItems,i=this.getSelectedObject();this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=i);var n={oldValue:i,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};this.updateBlazorSelectorModel(i,!0),e&&(y()&&(n=this.updateSelectionChangeEventArgs(n,[],i)),this.diagram.triggerEvent(Vi.selectionChange,n)),n.cancel||(t.offsetX=0,t.offsetY=0,t.width=0,t.height=0,t.rotateAngle=0,t.nodes=[],t.connectors=[],t.wrapper=null,t.annotation=void 0,this.diagram.clearSelectorLayer(),e&&(n={oldValue:sc(i),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},n=this.updateSelectionChangeEventArgs(n,[],i),this.diagram.triggerEvent(Vi.selectionChange,n)))}},e.prototype.clearSelectedItems=function(){var e=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,t=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(e+t>0)},e.prototype.removeStackHighlighter=function(){var e=nh(this.diagram.element.id),t=e.getElementById(e.id+"_stack_highlighter");t&&t.parentNode.removeChild(t)},e.prototype.renderStackHighlighter=function(e,t){var i,n,r,o=this.diagram.selectedItems.nodes[0];if(!t){var a=this.diagram.findObjectsUnderMouse(e.position);if((t=this.diagram.findObjectUnderMouse(a,"Drag",!0))&&!(t.isLane||t.isPhase||t.isHeader))for(var s=0;s<a.length;s++){var l=this.diagram.nameTable[a[s].id];(l.isLane||l.isPhase||l.isHeader)&&(t=l)}}o&&t&&t.isLane&&o.shape&&!o.shape.isPhase&&(n=this.diagram.nameTable[t.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),(o&&!o.parentId&&"SwimLane"!==o.shape.type||o&&o.parentId&&this.diagram.nameTable[o.parentId]&&this.diagram.nameTable[o.parentId].isLane&&o.parentId!==t.parentId&&o.parentId!==t.id)&&(r=this.diagram.selectedItems,(c=Ws(this.diagram,r,t.id,!0))&&(r.wrapper.children[0]=c),this.diagram.renderSelector(!1,!0),r.wrapper.children[0]=r.nodes[0].wrapper));o&&t&&t.parentId&&o.shape&&o.shape.isPhase&&("SwimLane"===this.diagram.nameTable[t.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[t.parentId].wrapper,this.diagram.renderSelector(!1,!0)));if(i&&this.diagram.currentSymbol.shape.isLane||o&&t&&o.parentId&&t.parentId&&!o.isPhase&&o.parentId===t.parentId&&o.id!==t.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){var c=void 0,h="Vertical"===n.container.orientation,d="Stack"===n.container?h:!h;"Grid"===n.container.type&&t.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&t.rowIndex!==o.rowIndex||"Vertical"===n.shape.orientation&&t.columnIndex!==o.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(r=this.diagram.selectedItems,c=Ws(this.diagram,r,t.id,i));var p="Stack"===n.container.type?t.wrapper:c;p&&us(p,d,e.position,this.diagram,!1,!0)}},e.prototype.drag=function(e,t,i){var n;if(fa(e)&&this.checkBoundaryConstraints(t,i,e.wrapper.bounds)&&Ra(this.diagram))if(e instanceof Yc){var r={offsetX:e.offsetX,offsetY:e.offsetY};if(e.offsetX+=t,e.offsetY+=i,e.children&&!e.container){for(var o=this.getAllDescendants(e,[]),a=0;a<o.length;a++)n=this.diagram.nameTable[o[a].id],this.drag(n,t,i);this.updateInnerParentProperties(e)}if(ls(this.diagram,e,!0)?cs(this.diagram,e):(e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,r,{offsetX:e.offsetX,offsetY:e.offsetY},void 0,void 0,!1),e.wrapper.measureChildren=!1),"SwimLane"===e.shape.type&&!this.diagram.currentSymbol){var s=e.wrapper.children[0];Ts(xs(this.diagram,s),this.diagram)}}else{var l=e,c=(r={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint},"Bezier"===l.type),h=!1;if(l.sourceWrapper?h=!0:this.dragSourceEnd(l,t,i,!0,null,"",c),l.targetWrapper?h=!0:this.dragTargetEnd(l,t,i,!0,null,"",c),!h){this.dragControlPoint(l,t,i,!0);var d={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint};this.diagram.connectorPropertyChange(l,r,d)}}},e.prototype.connectorSegmentChange=function(e,t,i){var n,r,o=!0;if(!1===t.equals(t,e.wrapper.bounds)&&e.outEdges.length>0)for(var a=0;a<e.outEdges.length;a++){var s=this.diagram.nameTable[e.outEdges[a]];if(o=""!==s.targetID?!this.isSelected(this.diagram.nameTable[s.targetID]):!this.isSelected(this.diagram.nameTable[s.id]),"Orthogonal"===s.type&&s.segments&&s.segments.length>1)if(i){var l=s.segments[0],c=s.segments[1],h=ar(Qn(e.wrapper,e.wrapper.corners,e.wrapper.bounds),l.direction),d=fr({corners:void 0,point:h=lr(s,s.sourceWrapper,h,{x:s.sourceWrapper.offsetX,y:s.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:c.points[1],margin:void 0,direction:void 0});l.length=ni.distancePoints(d[0],d[1]),c.direction&&c.length&&(c.length=ni.distancePoints(d[1],d[2]))}else if(o){switch(s.segments[0].direction){case"Bottom":n=e.wrapper.bounds.bottomCenter.x-t.bottomCenter.x,r=e.wrapper.bounds.bottomCenter.y-t.bottomCenter.y;break;case"Top":n=e.wrapper.bounds.topCenter.x-t.topCenter.x,r=e.wrapper.bounds.topCenter.y-t.topCenter.y;break;case"Left":n=e.wrapper.bounds.middleLeft.x-t.middleLeft.x,r=e.wrapper.bounds.middleLeft.y-t.middleLeft.y;break;case"Right":n=e.wrapper.bounds.middleRight.x-t.middleRight.x,r=e.wrapper.bounds.middleRight.y-t.middleRight.y}this.dragSourceEnd(s,n,r,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!0)}}},e.prototype.updateEndPoint=function(e,t){e.sourcePoint,e.targetPoint,e.sourceID&&e.sourceID,e.targetID&&e.targetID,e.sourcePortID&&e.sourcePortID,e.targetPortID&&e.targetPortID,e.segments&&e.segments;var i={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};e.sourceID&&(i.sourceID=e.sourceID),e.targetID&&(i.targetID=e.targetID),e.sourcePortID&&(i.sourcePortID=e.sourcePortID),e.targetPortID&&(i.targetPortID=e.targetPortID),e.segments&&(i.segments=e.segments),this.diagram.connectorPropertyChange(e,t||{},i),this.diagram.updateSelector()},e.prototype.dragSourceEnd=function(e,t,i,n,r,o,a,s,l,c,h){var d=this.diagram.nameTable[e.id],p={},u=this.checkBoundaryConstraints(t,i,d.wrapper.bounds);if(ga(d)&&u&&"BezierSourceThumb"!==o&&Ra(this.diagram)&&(p={sourcePoint:d.sourcePoint},d.sourcePoint.x+=t,d.sourcePoint.y+=i,"ConnectorSourceEnd"===o&&"Orthogonal"===d.type&&this.changeSegmentLength(d,s,l,c),"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&this.updatePathElementOffset(d)),"Bezier"===d.type)if(p={sourcePoint:d.sourcePoint},h)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,i,h,r,!a);else for(var f=0;f<e.segments.length;f++)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,i,e.segments[f],r,!a);return n||this.updateEndPoint(d,p),this.diagram.refreshCanvasLayers(),u},e.prototype.updatePathElementOffset=function(e){e.wrapper.children.splice(3,1);var t=new yn,i=e.intermediatePoints;t=rc(i,e),e.wrapper.children.splice(3,0,t)},e.prototype.changeSegmentLength=function(e,t,i,n){if(e.segments&&null!==e.segments[0].direction&&(!t&&""===e.sourceID||n)){var r=e.segments[0],o=e.segments[1],a=this.diagram.nameTable[e.sourceID],s=void 0;if(r.points[0]=e.sourcePoint,"Top"===r.direction||"Bottom"===r.direction?(r.points[r.points.length-1].x=e.sourcePoint.x,o.points[0].y=r.points[r.points.length-1].y):(r.points[r.points.length-1].y=e.sourcePoint.y,o.points[0].x=r.points[r.points.length-1].x),r.direction&&(r.length||0===r.length)&&(r.length=ni.distancePoints(r.points[0],r.points[r.points.length-1])),o.direction&&(o.length||0===o.length)&&(o.length=ni.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]),o.direction=ni.direction(r.points[r.points.length-1],o.points[o.points.length-1])),""!==e.sourcePortID&&r.length<10)if(e.segments.length>2){var l=e.segments[2],c=ni.direction(l.points[0],l.points[1]);r.direction===xr(c)?("Right"===r.direction?l.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleRight.x+20:"Left"===r.direction?l.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleLeft.x-20:"Top"===r.direction?l.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.topCenter.y-20:l.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.bottomCenter.y+20,l.direction&&l.length&&(l.length=ni.distancePoints(l.points[0],l.points[l.points.length-1])),r.length=ni.distancePoints(r.points[0],r.points[r.points.length-1])):r.direction===c&&l.direction&&l.length?("Top"===r.direction||"Bottom"===r.direction?(l.points[0]=r.points[0],l.points[l.points.length-1].x=l.points[0].x):(l.points[0]=r.points[0],l.points[l.points.length-1].y=l.points[0].y),l.length=ni.distancePoints(l.points[0],l.points[l.points.length-1]),e.segments.splice(0,2)):r.length=20}else r.length=20;else if(r.length<1)if(""!==e.sourceID){if("Right"===o.direction?(s=a.wrapper.corners.middleRight,o.points[o.points.length-1].y=s.y):"Left"===o.direction?(s=a.wrapper.corners.middleLeft,o.points[o.points.length-1].y=s.y):"Top"===o.direction?(s=a.wrapper.corners.topCenter,o.points[o.points.length-1].x=s.x):(s=a.wrapper.corners.bottomCenter,o.points[o.points.length-1].x=s.x),o.length=ni.distancePoints(s,o.points[o.points.length-1]),e.segments.length>2)(l=e.segments[2]).direction&&l.length&&(l.length=ni.distancePoints(o.points[o.points.length-1],l.points[l.points.length-1]));e.segments.splice(0,1)}else e.segments.splice(0,1)}else t&&!i&&e.sourceID!==t.id&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof Yc&&this.changeSourceEndToNode(e,t),t&&i&&e.sourcePortID!==i&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof Yc&&this.changeSourceEndToPort(e,t,i)},e.prototype.changeSourceEndToPort=function(e,t,i){var n=this.diagram.getWrapper(t.wrapper,i),r={x:n.offsetX,y:n.offsetY},o=br(r,Ph(t.wrapper),t.wrapper.bounds),a=e.segments[0],s=e.segments[1];if(a.direction!==o){var l=[],c={};if(a.direction===xr(o)){c={};var h=void 0;"Top"===o||"Bottom"===o?(h="Top"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(a.points[0].y-r.y)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.y-a.points[0].y)},c=a.points[0].x>r.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:a.points[0].x-r.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:r.x-a.points[0].x}):(h="Right"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(a.points[0].x-r.x)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.x-a.points[0].x)},c=a.points[0].y>r.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:a.points[0].y-r.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:r.y-a.points[0].y}),l.push(new qo(e,"segments",h,!0)),l.push(new qo(e,"segments",c,!0))}else c={type:"Orthogonal",direction:o,length:20,isTerminal:!0},l.push(new qo(e,"segments",c,!0));a.direction!==xr(o)&&("Top"===o||"Bottom"===o?(a.points[0].x=r.x,a.points[0].y=a.points[a.points.length-1].y="Top"===o?r.y-20:r.y+20):(a.points[0].y=r.y,a.points[0].x=a.points[a.points.length-1].x="Right"===o?r.x+20:r.x-20),a.length=ni.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=ni.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1])),e.segments=l.concat(e.segments)}else a.points[0]=r,"Top"===o||"Bottom"===o?a.points[a.points.length-1].x=r.x:a.points[a.points.length-1].y=r.y,a.length=ni.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=ni.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1])},e.prototype.removeTerminalSegment=function(e,t){for(var i=0;i<e.segments.length-2;i++){var n=e.segments[0];n.isTerminal&&(t?n.isTerminal=!1:(e.segments.splice(i,1),i--))}},e.prototype.changeSourceEndToNode=function(e,t){this.removeTerminalSegment(e);var i,n,r=t.wrapper.children[0].corners,o=e.segments[0],a=e.segments[1],s=[];if("Right"===o.direction||"Left"===o.direction)if(i="Left"===o.direction?r.middleLeft:r.middleRight,o.length>r.width||"Left"===o.direction&&i.x>=o.points[0].x||"Right"===o.direction&&i.x<=o.points[0].x)o.points[0].y=o.points[o.points.length-1].y=i.y,o.points[0].x=i.x,o.length=ni.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=ni.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);else{var l=void 0;n="Bottom"===(l=a.direction?a.direction:ni.direction(a.points[0],a.points[a.points.length-1]))?r.bottomCenter:r.topCenter,a.length&&a.direction&&(a.length="Top"===l?o.points[o.points.length-1].y-(n.y+20):n.y+20-o.points[o.points.length-1].y),o.length=o.points[o.points.length-1].x-n.x,o.direction=o.length>0?"Right":"Left";var c={type:"Orthogonal",direction:l,length:20};s.push(new qo(e,"segments",c,!0)),e.segments=s.concat(e.segments)}else if(i="Bottom"===o.direction?r.bottomCenter:r.topCenter,o.length>r.height||"Top"===o.direction&&i.y>=o.points[0].y||"Bottom"===o.direction&&i.y<=o.points[0].y)o.points[0].x=o.points[o.points.length-1].x=i.x,o.points[0].y=i.y,o.length=ni.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=ni.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);else{n="Left"===a.direction?r.middleLeft:r.middleRight;l=void 0;l=a.direction?a.direction:ni.direction(a.points[0],a.points[a.points.length-1]),a.length&&a.direction&&(a.length="Left"===l?o.points[o.points.length-1].x-(n.x+20):n.x+20-o.points[o.points.length-1].x),o.length=o.points[o.points.length-1].y-n.y,o.direction=o.length>0?"Bottom":"Top";c={type:"Orthogonal",direction:l,length:20};s.push(new qo(e,"segments",c,!0)),e.segments=s.concat(e.segments)}},e.prototype.translateBezierPoints=function(e,t,i,n,r,o,a){var s=e.segments.indexOf(r),l=e.segments[s];l&&("BezierSourceThumb"===t&&(l.vector1.angle||l.vector1.distance)?l.vector1={distance:e.distance(e.sourcePoint,o),angle:ni.findAngle(e.sourcePoint,o)}:"BezierTargetThumb"===t&&(l.vector2.angle||l.vector2.distance)?l.vector2={distance:e.distance(e.targetPoint,o),angle:ni.findAngle(e.targetPoint,o)}:("ConnectorSourceEnd"===t&&!e.sourceID||"ConnectorTargetEnd"===t&&!e.targetID)&&a&&Qo(l.vector1)&&Qo(l.vector2)?(ni.isEmptyPoint(l.point1)&&(l.bezierPoint1=Ko(e.sourcePoint,e.targetPoint)),ni.isEmptyPoint(l.point2)&&(l.bezierPoint2=Ko(e.targetPoint,e.sourcePoint))):"BezierSourceThumb"===t||"ConnectorSourceEnd"===t&&!a&&Qo(l.vector1)?(l.bezierPoint1.x+=i,l.bezierPoint1.y+=n,ni.isEmptyPoint(l.point1)&&!a||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===t||"ConnectorTargetEnd"===t&&!a&&Qo(l.vector2))&&(l.bezierPoint2.x+=i,l.bezierPoint2.y+=n,ni.isEmptyPoint(l.point2)&&!a||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y})))},e.prototype.dragTargetEnd=function(e,t,i,n,r,o,a,s){var l,c=this.diagram.nameTable[e.id],h=this.checkBoundaryConstraints(t,i,c.wrapper.bounds);if(ma(c)&&"BezierTargetThumb"!==o&&h&&Ra(this.diagram)){if(l={targetPoint:c.targetPoint},c.targetPoint.x+=t,c.targetPoint.y+=i,"ConnectorTargetEnd"===o&&"Orthogonal"===c.type&&c.segments&&c.segments.length>0){var d=c.segments[c.segments.length-2];d&&2===c.segments[c.segments.length-1].points.length&&("Left"===d.direction||"Right"===d.direction?d.points[d.points.length-1].x=c.targetPoint.x:d.points[d.points.length-1].y=c.targetPoint.y,d.length=ni.distancePoints(d.points[0],d.points[d.points.length-1]),d.direction=ni.direction(d.points[0],d.points[d.points.length-1]))}"Bpmn"===c.shape.type&&"Default"===c.shape.sequence&&this.updatePathElementOffset(c)}if("Bezier"===c.type)if(l={targetPoint:c.targetPoint},s)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,i,s,r,!a);else for(var p=0;p<e.segments.length;p++)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,i,e.segments[p],r,!a);return n||this.updateEndPoint(c,l),this.diagram.refreshCanvasLayers(),h},e.prototype.dragControlPoint=function(e,t,i,n,r){var o=this.diagram.nameTable[e.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==r&&o.segments[r])o.segments[r].point.x+=t,o.segments[r].point.y+=i;else for(var a=0;a<o.segments.length-1;a++)o.segments[a].point.x+=t,o.segments[a].point.y+=i;n||this.updateEndPoint(o)}return!0},e.prototype.rotateObjects=function(e,t,i,n,r){n=n||{};var o,a=vi();xi(a,i,n.x,n.y);for(var s=0,l=t;s<l.length;s++){var c=l[s];if(c instanceof Yc){if(va(c)&&Ra(this.diagram)){if(!1!==r||e!==c){o={rotateAngle:c.rotateAngle},c.rotateAngle+=i,c.rotateAngle=(c.rotateAngle+360)%360;var h=bi(a,{x:c.offsetX,y:c.offsetY});c.offsetX=h.x,c.offsetY=h.y,this.diagram.nodePropertyChange(c,o,{rotateAngle:c.rotateAngle})}if(c.processId){var d=this.diagram.nameTable[c.processId],p=this.diagram.bpmnModule.getChildrenBound(d,c.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(p,c,this.diagram)}c.children&&c.children.length&&!c.container&&this.getChildren(c,t)}}else this.rotatePoints(c,i,n||{x:c.wrapper.offsetX,y:c.wrapper.offsetY});this.diagram.updateDiagramObject(c)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},e.prototype.snapConnectorEnd=function(e){return this.diagram.snapSettings.constraints&Ti.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(e),e},e.prototype.snapAngle=function(e){return this.diagram.snapSettings.constraints&Ti.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,e):0},e.prototype.rotatePoints=function(e,t,i){if(!e.sourceWrapper||!e.targetWrapper){var n=vi();xi(n,t,i.x,i.y),e.sourcePoint=bi(n,e.sourcePoint),e.targetPoint=bi(n,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e);var r={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};this.diagram.connectorPropertyChange(e,{},r)}},e.prototype.updateInnerParentProperties=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var i=this.getAllDescendants(e,[],!1,!0),n=0;n<i.length;n++){var r=this.diagram.nameTable[i[n].id];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,r.width=r.wrapper.width,r.height=r.wrapper.height}this.diagram.protectPropertyChange(t)},e.prototype.scale=function(e,t,i,n,r){var o=this.diagram.nameTable[e.id],a=o,s=o.wrapper;r||(r=e);var l=r.wrapper,c=Jl(l.offsetX-l.actualSize.width*l.pivot.x,l.offsetY-l.actualSize.height*l.pivot.y,l.actualSize.width,l.actualSize.height,l.rotateAngle,l.offsetX,l.offsetY,n);if(void 0!==s.actualSize.width&&void 0!==s.actualSize.height&&Ra(this.diagram)){if(a.children&&!a.container){for(var h=0,d=this.getAllDescendants(a,[]);h<d.length;h++){var p=d[h];this.scaleObject(t,i,c,p,s,r)}e.wrapper.measure(new ei),e.wrapper.arrange(e.wrapper.desiredSize),this.diagram.updateGroupOffset(o),this.updateInnerParentProperties(a)}else this.scaleObject(t,i,c,o,s,r);var u=Eh(e.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,u))return this.scale(e,1/t,1/i,n),!1;this.diagram.updateDiagramObject(e)}return!0},e.prototype.getAllDescendants=function(e,t,i,n){for(var r=e,o=[],a=0;a<r.children.length;a++)(e=this.diagram.nameTable[r.children[a]])&&(e.children?(i&&t.push(e),n&&o.push(e),t=this.getAllDescendants(e,t)):t.push(e));return n?o:t},e.prototype.getChildren=function(e,t){var i=e;if(e.children)for(var n=0;n<i.children.length;n++)e=this.diagram.nameTable[i.children[n]],t.push(e);return t},e.prototype.cloneChild=function(e){return this.diagram.nameTable[e]},e.prototype.scaleObject=function(e,t,i,n,r,o){t=t<0?1:t;var a={};if(1!==(e=e<0?1:e)||1!==t){var s=void 0,l=void 0;if(n instanceof Yc){var c=n,h=void 0,d=void 0;a={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:c.margin.top,left:c.margin.left}},"Bpmn"===c.shape.type&&c.shape.activity.subProcess.processes&&c.shape.activity.subProcess.processes.length>0&&(d=this.diagram.bpmnModule.getChildrenBound(c,c.id,this.diagram),h=c.wrapper.bounds.containsRect(d)),s=c.wrapper.actualSize.width*e,l=c.wrapper.actualSize.height*t,void 0!==c.maxWidth&&0!==c.maxWidth&&(s=Math.min(c.maxWidth,s)),void 0!==c.minWidth&&0!==c.minWidth&&(s=Math.max(c.minWidth,s)),void 0!==c.maxHeight&&0!==c.maxHeight&&(l=Math.min(c.maxHeight,l)),void 0!==c.minHeight&&0!==c.minHeight&&(l=Math.max(c.minHeight,l)),h&&(s=Math.max(s,d.right-c.wrapper.bounds.x),l=Math.max(l,d.bottom-c.wrapper.bounds.y)),e=s/c.actualSize.width,t=l/c.actualSize.height}var p,u=vi();if(o||(o=n),xi(u,-(p=o.wrapper).rotateAngle,i.x,i.y),Si(u,e,t,i.x,i.y),xi(u,p.rotateAngle,i.x,i.y),n instanceof Yc){var f,g,m=bi(u,{x:(c=n).wrapper.offsetX,y:c.wrapper.offsetY}),y=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,v=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y;if(s>0)if(c.processId){var b=this.diagram.nameTable[c.processId];(!b.maxWidth||c.margin.left+s<b.maxWidth)&&(c.width=s,c.offsetX=m.x)}else c.width=s,c.offsetX=m.x;if(l>0)if(c.processId){var w=this.diagram.nameTable[c.processId];(!w.maxHeight||c.margin.top+l<w.maxHeight)&&(c.height=l,c.offsetY=m.y)}else c.height=l,c.offsetY=m.y;f=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,g=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y,this.diagram.nameTable[c.processId]&&(c.margin.top+(g-v)<=0||c.margin.left+(f-y)<=0)?this.diagram.nodePropertyChange(n,{},{margin:{top:c.margin.top,left:c.margin.left}}):ls(this.diagram,n,!0)?cs(this.diagram,n):this.diagram.nodePropertyChange(n,a,{width:c.width,height:c.height,offsetX:c.offsetX,offsetY:c.offsetY,margin:{top:c.margin.top+(g-v),left:c.margin.left+(f-y)}})}else{var x=n,S={sourcePoint:x.sourcePoint,targetPoint:x.targetPoint};x.sourceWrapper&&x.targetWrapper||this.scaleConnector(x,u,S)}var C=this.diagram.nameTable[n.processId];if(C){C.wrapper.bounds,n.wrapper.bounds,d=this.diagram.bpmnModule.getChildrenBound(C,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,n,this.diagram)}}},e.prototype.scaleConnector=function(e,t,i){e.sourcePoint=bi(t,e.sourcePoint),e.targetPoint=bi(t,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e);var n={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};this.diagram.connectorPropertyChange(e,i,n)},e.prototype.portDrag=function(e,t,i,n){var r,o,a=this.findTarget(t,e),s=Eh(e.wrapper);a&&ja(a,this.diagram)&&(r=this.getPortChanges(e,a),a.offset.x+=i/s.width,a.offset.y+=n/s.height,o=this.getPortChanges(e,a),this.diagram.nodePropertyChange(e,r,o),this.diagram.updateDiagramObject(e))},e.prototype.labelDrag=function(e,t,i,n){var r,o,a;a=this.findTarget(t,e);var s=Ph(e.wrapper);r=this.getAnnotationChanges(e,a),a instanceof Ln?(a.offset.x+=i/s.width,a.offset.y+=n/s.height):(this.updatePathAnnotationOffset(e,a,i,n),a instanceof Dn&&(a.alignment="Center")),o=this.getAnnotationChanges(e,a),e instanceof Yc?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e),wd(this.diagram,a,!1,t)||this.labelSelect(e,t)},e.prototype.updatePathAnnotationOffset=function(e,t,i,n,r,o){var a,s,l,c,h=this.diagram.getWrapper(e.wrapper,t.id),d=h.offsetX,p=h.offsetY,u=e.intermediatePoints,f=0,g=r||{x:d+i,y:p+n},m=this.getInterceptWithSegment(g,u),y=u[u.length-1];if(l=ni.getLengthFromListOfPoints(u),m.length>0){if(t.dragLimit.top||t.dragLimit.bottom||t.dragLimit.left||t.dragLimit.right){var v={minDistance:null};y=this.getRelativeOffset(g,u,v);var b={minDistance:null};if(c=this.getRelativeOffset(g,m,b),null!=v&&b.minDistance<v.minDistance)y=c;else y=fl(e.intermediatePoints,t,e.wrapper.bounds).point}else y=c=m[m.length-1];if(y){var w=void 0;for(w=0;w<u.length;w++){if(null!=s){if(mi.toBounds([s,u[w]]).containsPoint(y)){f+=ni.findLength(s,y);break}f+=ni.findLength(s,u[w])}s=u[w]}a={x:f/l,y:0}}this.updateLabelMargin(e,t,a,g,o,i,n)}else this.updateLabelMargin(e,t,null,g,o,i,n)},e.prototype.getRelativeOffset=function(e,t,i){var n,r,o,a;for(a=0;a<t.length;a++)o=t[a],r=Math.round(Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(r))!==Math.abs(r)||(n=o,i.minDistance=r);return n},e.prototype.dragLimitValue=function(e,t,i,n){var r=!1,o=!1;return i.x>=t.x-e.dragLimit.left-n.width/2&&i.x<=t.x+e.dragLimit.right+n.width/2&&(r=!0),i.y>=t.y-e.dragLimit.top-n.height/2&&i.y<=t.y+e.dragLimit.bottom+n.height/2&&(o=!0),{x:r,y:o}},e.prototype.updateLabelMargin=function(e,t,i,n,r,o,a){if(i=i||{x:t.offset,y:0},t&&i&&i.x>0&&i.x<1){var s,l=ni.getLengthFromListOfPoints(e.intermediatePoints);s=this.getPointAtLength(l*i.x,e.intermediatePoints,0);var c=this.diagram.scrollSettings.currentZoom,h=t.dragLimit;if(h.top||h.bottom||h.left||h.right){this.diagram.getWrapper(e.wrapper,t.id);var d=new mi(0,0,0,0),p=this.diagram.getWrapper(e.wrapper,t.id);d.x=p.offsetX/c+o,d.y=p.offsetY/c+a,d.width=p.bounds.width/c,d.height=p.bounds.height/c;var u=new mi(s.x-(h.left||0)-d.width/2,s.y-(h.top||0)-d.height/2,(h.left||0)+(h.right||0)+d.width,(h.top||0)+(h.bottom||0)+d.height);if(u.containsPoint(n))n=n;else for(var f=[s,n],g=0,m=this.boundsInterSects(f,u,!1);g<m.length;g++){n=m[g]}var y=this.dragLimitValue(t,s,n,d);t.margin={left:y.x?n.x-s.x:t.margin.left,top:y.y?n.y-s.y:t.margin.top,right:0,bottom:0}}else t.margin={left:n.x-s.x,top:n.y-s.y,right:0,bottom:0};t.offset=i.x,r&&(t.width=r.width,t.height=r.height)}},e.prototype.boundsInterSects=function(e,t,i){var n;if(t){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height},{x:t.x,y:t.y}];n=this.intersect(e,r,i)}return n},e.prototype.intersect=function(e,t,i){for(var n=[],r=0;r<e.length-1;r++)for(var o=0;o<t.length-1;o++){var a=sl(e[r],e[r+1],t[o],t[o+1]);0!==a.x&&0!==a.y&&n.push(a)}return n},e.prototype.getPointAtLength=function(e,t,i){for(var n,r,o=0,a={x:0,y:0},s=0;s<t.length;s++)if(r=t[s],n){var l=ni.findLength(n,r),c=void 0,h=void 0,d=void 0,p=void 0;if(o+l>=e){c=e-o,h=ni.findAngle(n,r),d=c*Math.cos(h*Math.PI/180),p=c*Math.sin(h*Math.PI/180),a={x:n.x+d,y:n.y+p},h;break}o+=l,n=r}else n=r;return a},e.prototype.getInterceptWithSegment=function(e,t){var i,n,r,o=[],a=[],s=[];r=ni.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var l=1;l<t.length;l++){s=[t[l-1],t[l]],a=[],n=Math.round(ni.findAngle(s[0],s[1])%360),i=Math.round(ni.findAngle(s[1],s[0])%360);var c=n>0&&n<=90||n>180&&n<=270?90:-90;a.push(ni.transform(e,n+c,r)),a.push(ni.transform(e,i+c,r));var h=al({x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y},{x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y});h.enabled&&o.push(h.intersectPt)}return o},e.prototype.getAnnotationChanges=function(e,t){var i={};return i[Xl(e,t.id,!0)]={width:t.width,height:t.height,offset:e instanceof Yc?{x:t.offset.x,y:t.offset.y}:t.offset,rotateAngle:t.rotateAngle,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},horizontalAlignment:t.horizontalAlignment,verticalAlignment:t.verticalAlignment,alignment:e instanceof na?t.alignment:void 0},{annotations:i}},e.prototype.getPortChanges=function(e,t){var i={};return i[Xl(e,t.id,!1)]={offset:t.offset},{ports:i}},e.prototype.labelRotate=function(e,t,i,n){var r,o;r=this.getAnnotationChanges(e,t);vi(),t.rotateAngle;var a=this.diagram.getWrapper(e.wrapper,t.id),s=or({x:a.offsetX,y:a.offsetY},i)+90,l=this.snapAngle(s);(s=0!==l?l:s,t instanceof Dn&&t.segmentAngle)&&(s-=ul(e.intermediatePoints,t,e.wrapper.bounds).angle);s=(s+360)%360,t.rotateAngle+=s-(t.rotateAngle+a.parentTransform),t.margin.bottom+="Top"===a.verticalAlignment?-t.height/2:"Bottom"===a.verticalAlignment?t.height/2:0,t.margin.right+="Left"===a.horizontalAlignment?-t.width/2:"Right"===a.horizontalAlignment?t.width/2:0,t instanceof Dn?t.alignment="Center":t.horizontalAlignment=t.verticalAlignment="Center",n.wrapper.rotateAngle=n.rotateAngle=t.rotateAngle,o=this.getAnnotationChanges(e,t),e instanceof Yc?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e)},e.prototype.labelResize=function(e,t,i,n,r,o){var a,s,l;a=this.getAnnotationChanges(e,t);var c=o.wrapper.children[0];if(i&&1!==i||n&&1!==n){var h=vi(),d=vi();xi(h,-e.rotateAngle,e.offsetX,e.offsetY),xi(d,-(l=(c.rotateAngle+(e instanceof Yc?e.rotateAngle:0)+360)%360),r.x,r.y),Si(d,i,n,r.x,r.y),xi(d,l,r.x,r.y);var p=bi(d,{x:c.offsetX,y:c.offsetY}),u=c.actualSize.height*n,f=c.actualSize.width*i,g=this.findTarget(c,e);if(g instanceof Dn)this.updatePathAnnotationOffset(e,t,0,0,p,new ei(f,u));else{var m=Ph(e.wrapper);(p=bi(h,p)).x=p.x-c.margin.left+c.margin.right,p.y=p.y-c.margin.top+c.margin.bottom,p.y+="Top"===g.verticalAlignment?-u/2:"Bottom"===g.verticalAlignment?u/2:0,p.x+="Left"===g.horizontalAlignment?-f/2:"Right"===g.horizontalAlignment?f/2:0;var y=m.width/(p.x-m.x),v=m.height/(p.y-m.y);f>1&&(g.width=f,g.offset.x=1/y),u>1&&(g.height=u,g.offset.y=1/v)}}t instanceof Dn&&(t.alignment="Center"),s=this.getAnnotationChanges(e,t),e instanceof Yc?this.diagram.nodePropertyChange(e,a,s):this.diagram.connectorPropertyChange(e,a,s),this.diagram.updateDiagramObject(e)},e.prototype.getSubProcess=function(e){var t,i={nodes:[],connectors:[]};return e instanceof Yc?t=e.processId:e&&e.nodes&&e.nodes.length&&e.nodes[0].processId&&(t=e.nodes[0].processId),t?(i.nodes.push(Oh(this.diagram.nameTable[t])),i):i},e.prototype.checkBoundaryConstraints=function(e,t,i){var n=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var a=i?void 0:this.diagram.selectedItems.wrapper.bounds,s="Page"===r?n.width:o.viewPortWidth,l="Page"===r?n.height:o.viewPortHeight,c=i,h=(i?c.right:a.right)+(e||0),d=(i?c.left:a.left)+(e||0),p=(i?c.top:a.top)+(t||0),u=(i?c.bottom:a.bottom)+(t||0);return h<=s&&d>=0&&u<=l&&p>=0}return!0},e.prototype.dragSelectedObjects=function(e,t){var i=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY),i=ss(this.diagram,i)||i,!!this.checkBoundaryConstraints(e,t)&&(this.diagram.drag(i,e,t),this.diagram.refreshCanvasLayers(),!0)},e.prototype.scaleSelectedItems=function(e,t,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=ss(this.diagram,n)||n,this.diagram.scale(n,e,t,i)},e.prototype.rotateSelectedItems=function(e){var t=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=t.rotateAngle),t=ss(this.diagram,t)||t,this.diagram.rotate(t,e)},e.prototype.hasSelection=function(){return vd(this.diagram)},e.prototype.isSelected=function(e){return wd(this.diagram,e)},e.prototype.initExpand=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=e.target||e.source,n={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=Wi.PreventIconsUpdate,this.diagram.nodePropertyChange(i,n,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~Wi.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1,this.diagram.protectPropertyChange(t)},e.prototype.expandNode=function(e,t){var i,n=this.diagram.preventNodesUpdate,r=e.isExpanded;if(this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(e,r,this.diagram),e.isExpanded=r,this.diagram.layout.fixedNode=e.id,this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),i=this.diagram.doLayout(),this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,i,e,this.diagram);else{var o={element:sc(Oh(e)),state:!!e.isExpanded};this.triggerEvent(Vi.expandStateChange,o)}return i},e.prototype.getparentexpand=function(e,t,i,n){for(var r,o=0;o<e.inEdges.length;o++){var a=t.nameTable[e.inEdges[o]],s=t.nameTable[a.sourceID];if(s.isExpanded&&!i&&s.id!==n.sourceID&&a.visible)return!1;r=!0}return r},e.prototype.expandCollapse=function(e,t,i){for(var n=0;n<e.outEdges.length;n++){var r=i.nameTable[e.outEdges[n]],o=i.nameTable[r.targetID],a=this.getparentexpand(o,i,t,r);r.visible=t;var s={visible:o.visible,style:{opacity:o.style.opacity}},l={visible:o.visible,style:{opacity:o.style.opacity}};a&&(o.isExpanded&&this.expandCollapse(o,t,i),o.visible=t,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&t?.1:o.style.opacity,i.nodePropertyChange(o,s,l)),i.connectorPropertyChange(r,s,l)}},e.prototype.updateNodeDimension=function(e,t){e instanceof Yc&&(e.offsetX=t.x+t.width/2,e.offsetY=t.y+t.height/2,e.width=t.width,e.height=t.height,e.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(e,{},{width:t.width,height:t.height,offsetX:e.offsetX,offsetY:e.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},e.prototype.updateConnectorPoints=function(e,t){e instanceof na&&(this.diagram.connectorPropertyChange(e,{},{targetPoint:e.targetPoint}),this.diagram.updateDiagramObject(e))},e.prototype.updateSelectedNodeProperties=function(e){if(this.diagram.lineRoutingModule&&this.diagram.constraints&Ni.LineRouting){var t=[],i=[],n=this.diagram.selectedObject.actualObject,r=this.diagram.selectedObject.helperObject;if(r&&n){var o=r.offsetX-n.offsetX,a=r.offsetY-n.offsetY,s=r.width-n.width,l=r.height-n.height,c=r.rotateAngle-n.rotateAngle;if(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=r.rotateAngle,n instanceof Yc)n.offsetX+=o,n.offsetY+=a,n.width+=s,n.height+=l,n.rotateAngle+=c,this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),t=this.diagram.spatialSearch.findObjects(n.wrapper.outerBounds);else if(n instanceof Zc)for(var h=0;h<n.nodes.length;h++){var d=n.nodes[h];d.offsetX+=o,d.offsetY+=a,d.width+=s,d.height+=l,d.rotateAngle+=c,this.diagram.nodePropertyChange(d,{},{offsetX:d.offsetX,offsetY:d.offsetY,width:d.width,height:d.height,rotateAngle:d.rotateAngle}),t=t.concat(this.diagram.spatialSearch.findObjects(n.wrapper.outerBounds))}}else e instanceof na?t.push(e):e instanceof Zc&&e.connectors.length&&(t=t.concat(e.connectors));for(h=0;h<t.length;h++)t[h]instanceof na&&-1===i.indexOf(t[h].id)&&i.push(t[h].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(h=0;h<i.length;h++){var p=this.diagram.nameTable[i[h]];p instanceof na&&this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,p,!0)}}},e.prototype.drawSelectionRectangle=function(e,t,i,n){this.diagram.drawSelectionRectangle(e,t,i,n)},e.prototype.startGroupAction=function(){this.diagram.startGroupAction()},e.prototype.endGroupAction=function(){this.diagram.endGroupAction()},e.prototype.removeChildFromBPmn=function(e,t,i){var n=this.diagram.nameTable[e.id]||e.nodes[0];if(i&&n&&n.processId&&n.processId===i.wrapper.id){var r=Oh(n);r.processId=n.processId,this.diagram.startGroupAction();for(var o=[],a=(o=o.concat(n.outEdges,n.inEdges)).length-1;a>=0;a--){var s=this.diagram.nameTable[o[a]];s&&this.diagram.remove(s)}var l=void 0;(l=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[]).splice(l.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var c={type:"PositionChanged",redoObject:{nodes:[Oh(n)]},undoObject:{nodes:[r]},category:"Internal"};this.addHistoryEntry(c),this.diagram.endGroupAction()}},e.prototype.isDroppable=function(e,t){var i=this.diagram.nameTable[e.id]||e.nodes[0];return!!i&&("TextAnnotation"===i.shape.shape||(!i||"Bpmn"!==i.shape.type||!(i.processId===t.id||i.id===t.processId||"Bpmn"===t.shape.type&&t.shape.activity.subProcess.collapsed)))},e.prototype.renderHighlighter=function(e,t,i){new mi;if(e.target instanceof Yc||t&&e.source instanceof Yc){var n=t?e.source:e.target,r=t?e.sourceWrapper:e.targetWrapper,o=this.findTarget(r,n,i,!0),a=void 0;if(o instanceof Tc)for(var s=o.id,l=e.target,c=0,h=l.wrapper.children[0].children[0].children[2].children;c<h.length;c++){var d=h[c];if(d.id===l.id+"_"+s){a=d.children[0];break}}else a=o instanceof Yc?o.wrapper:t?e.sourceWrapper:e.targetWrapper;this.diagram.renderHighlighter(a)}},e.prototype.mouseOver=function(e,t,i){return!0},e.prototype.snapPoint=function(e,t,i,n){var r,o=this.diagram.selectedItems,a=t.x<e.x,s=t.y<e.y,l=r={x:i,y:n};return this.snappingModule&&(l=this.diagram.snappingModule.snapPoint(this.diagram,o,a,s,r,e,t)),l},e.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&Ti.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},e.prototype.dropAnnotation=function(e,t){var i=e instanceof Yc?e:e.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===t.shape.type&&"TextAnnotation"===i.shape.shape){i.hasTarget=t.id,i.shape.annotation.nodeId=t.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,t),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}},e.prototype.drop=function(e,t,i){this.diagram.bpmnModule&&(this.diagram.bpmnModule.dropBPMNchild(t,e instanceof Yc?e:e.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())},e.prototype.addHistoryEntry=function(e){this.diagram.addHistoryEntry(e)},e.prototype.align=function(e,t,i){if(e.length>0){var n=0;e[0]=this.diagram.nameTable[e[0].id]||e[0];var r="Object"===i?Eh(e[0].wrapper):this.diagram.selectedItems.wrapper.bounds,o={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<e.length;n++){var s=0,l=0;e[n]=this.diagram.nameTable[e[n].id]||e[n];var c=Eh(e[n].wrapper);"Left"===t?s=r.left+c.width/2-c.center.x:"Right"===t?s=r.right-c.width/2-c.center.x:"Top"===t?l=r.top+c.height/2-c.center.y:"Bottom"===t?l=r.bottom-c.height/2-c.center.y:"Center"===t?s=r.center.x-c.center.x:"Middle"===t&&(l=r.center.y-c.center.y),o=this.storeObject(o,e[n]),this.drag(e[n],s,l),this.diagram.updateSelector(),a=this.storeObject(a,e[n])}o=Oh(o),a=Oh(a);var h={type:"Align",category:"Internal",undoObject:Oh(o),redoObject:Oh(a)};this.addHistoryEntry(h)}},e.prototype.distribute=function(e,t){if(e.length>0){var i=0,n=(new mi,0),r=0,o=0,a=0,s=0,l=0,c=0,h={nodes:[],connectors:[]},d={nodes:[],connectors:[]};for(i=0;i<e.length;i++)e[i]=this.diagram.nameTable[e[i].id]||e[i];for(e=pl(e,t),i=1;i<e.length;i++)n=n+e[i].wrapper.bounds.topRight.x-e[i-1].wrapper.bounds.topRight.x,r=r+e[i].wrapper.bounds.topLeft.x-e[i-1].wrapper.bounds.topLeft.x,o=o+e[i].wrapper.bounds.topRight.y-e[i-1].wrapper.bounds.topRight.y,a=a+e[i].wrapper.bounds.bottomRight.y-e[i-1].wrapper.bounds.bottomRight.y,s=s+e[i].wrapper.bounds.center.x-e[i-1].wrapper.bounds.center.x,l=l+e[i].wrapper.bounds.center.y-e[i-1].wrapper.bounds.center.y,c=c+e[i].wrapper.bounds.topRight.y-e[i-1].wrapper.bounds.bottomRight.y;for(i=1;i<e.length-1;i++){var p=0,u=0,f=Eh(e[i-1].wrapper),g=Eh(e[i].wrapper);"RightToLeft"===t||"Center"===t?p=f.center.x-g.center.x+s/(e.length-1):"Right"===t?p=f.topRight.x-g.topRight.x+n/(e.length-1):"Left"===t?p=f.topLeft.x-g.topLeft.x+r/(e.length-1):"Middle"===t?u=f.center.y-g.center.y+l/(e.length-1):"Top"===t?u=f.topRight.y-g.topRight.y+o/(e.length-1):"Bottom"===t?u=f.bottomRight.y-g.bottomRight.y+a/(e.length-1):"BottomToTop"===t&&(u=f.bottomRight.y-g.topRight.y+c/(e.length-1)),h=this.storeObject(h,e[i]),this.drag(e[i],p,u),this.diagram.updateSelector(),d=this.storeObject(d,e[i])}h=Oh(h),d=Oh(d);var m={type:"Distribute",category:"Internal",undoObject:Oh(h),redoObject:Oh(d)};this.addHistoryEntry(m)}},e.prototype.sameSize=function(e,t){if(e.length>0){var i,n=0;i={x:.5,y:.5},e[0]=this.diagram.nameTable[e[0].id]||e[0];var r=Eh(e[0].wrapper),o={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n=1;n<e.length;n++){e[n]=this.diagram.nameTable[e[n].id]||e[0];var s=Eh(e[n].wrapper),l=1,c=1;"Width"===t?l=r.width/s.width:"Height"===t?c=r.height/s.height:"Size"===t&&(l=r.width/s.width,c=r.height/s.height),o=this.storeObject(o,e[n]),this.scale(e[n],l,c,i),a=this.storeObject(a,e[n])}this.diagram.updateSelector(),o=Oh(o),a=Oh(a);var h={type:"Sizing",category:"Internal",undoObject:Oh(o),redoObject:Oh(a)};this.addHistoryEntry(h)}},e.prototype.storeObject=function(e,t){return t instanceof Yc?e.nodes.push(Oh(t)):e.connectors.push(Oh(t)),e},e.prototype.scroll=function(e,t,i){var n=this.diagram.constraints&Ni.PanX,r=function(e){return e.constraints&Ni.PanY}(this.diagram);this.diagram.pan((e=n?e:0)*this.diagram.scroller.currentZoom,(t=r?t:0)*this.diagram.scroller.currentZoom,i)},e.prototype.drawHighlighter=function(e){this.diagram.renderHighlighter(e.wrapper)},e.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},e.prototype.renderContainerHelper=function(e){return ss(this.diagram,e)},e.prototype.isParentAsContainer=function(e,t){return ls(this.diagram,e,t)},e.prototype.dropChildToContainer=function(e,t){ds(this.diagram,e,t)},e.prototype.checkSelection=function(e,t){var i;if(1===e.nodes.length&&0===e.connectors.length)if(ls(this.diagram,e.nodes[0],!0)){i="SwimLane"===e.nodes[0].shape?e.nodes[0]:this.diagram.nameTable[e.nodes[0].parentId];var n=e.nodes[0];if("SwimLane"===i.shape.type){var r="Horizontal"===i.shape.orientation;(n.isPhase&&(r&&"ResizeSouth"===t||!r&&"ResizeEast"===t)||n.isLane&&(r&&"ResizeEast"===t||!r&&"ResizeSouth"===t))&&Bs(this.diagram,i,t)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===t)for(var o=0;o<this.diagram.nodes.length;o++){if((a=this.diagram.nodes[o]).rowIndex===i.rows.length-1&&0===a.columnIndex){this.select(a);break}}}else if("ResizeEast"===t)for(o=0;o<this.diagram.nodes.length;o++){var a;if(1===(a=this.diagram.nodes[o]).rowIndex&&a.columnIndex===i.columns.length-1){this.select(a);break}}}else Bs(this.diagram,e.nodes[0],t)},e.prototype.zoom=function(e,t,i,n){this.diagram.scroller.zoom(e,t*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},e}(),Qd=function(){function e(e){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=e,this.objects=[],this.transform=e.scroller?e.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=e.scrollSettings.viewPortWidth,this.vPortHeight=e.scrollSettings.viewPortHeight,this.currentZoomFActor=e.scrollSettings.currentZoom,this.hOffset=e.scrollSettings.horizontalOffset,this.vOffset=e.scrollSettings.verticalOffset}return Object.defineProperty(e.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(e){this.vPortHeight=e,this.diagram.scrollSettings.viewPortHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(e){this.currentZoomFActor=e,this.diagram.scrollSettings.currentZoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(e){this.vPortWidth=e,this.diagram.scrollSettings.viewPortWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(e){this.hOffset=e,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Yi.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(e){this.vOffset=e,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Yi.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=e},enumerable:!0,configurable:!0}),e.prototype.updateScrollOffsets=function(e,t){var i,n,r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,i=Math.max(0,e-r.left),n=Math.max(0,t-r.top),void 0!==e&&void 0!==t?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),this.transform={tx:Math.max(this.horizontalOffset,-r.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-r.top)/this.currentZoom,scale:this.currentZoom}},e.prototype.setScrollOffset=function(e,t){this.scrolled=!1;var i=this.getPageBounds(void 0,void 0,!0);i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,r=-i.top,o=!1,a=this.viewPortWidth*this.currentZoom,s=this.viewPortHeight*this.currentZoom,l=n-e;if(l!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=e:this.horizontalOffset=l,o=!0);var c=Math.max(i.right+this.vScrollSize,a);if(!o&&c<-l+this.viewPortWidth){var h=-l+a-this.vScrollSize,d=-this.horizontalOffset+a-this.vScrollSize;h<d?this.horizontalOffset=l:h-i.right>h-d?this.horizontalOffset=l:this.horizontalOffset=-(i.right+this.vScrollSize-a),o=!0}o||(this.horizontalOffset=n-e)}o=!1;var p=r-t;if(p!==this.verticalOffset){r<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=t:this.verticalOffset=p,o=!0);var u=Math.max(i.bottom+this.hScrollSize,s);if(!o&&u<-p+s){var f=-p+s-this.hScrollSize,g=-this.verticalOffset+s-this.hScrollSize;f<g?this.verticalOffset=p:f-i.bottom>f-g?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-s),o=!0}o||(this.verticalOffset=r-t)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},e.prototype.getObjects=function(e,t){for(var i=[],n=0;n<e.length;n++){for(var r=!1,o=0;o<t.length;o++)if(e[n]===t[o]){r=!0;break}r||i.push(e[n])}return i},e.prototype.virtualizeElements=function(){for(var e=this.viewPortWidth/this.currentZoom,t=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new mi(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,e,t)),n=[],r=0;r<i.length;r++)n.push(i[r].id);var o=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var a=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(o,!1,a),this.oldCollectionObjects=n},e.prototype.setSize=function(){var e=this.getPageBounds(void 0,void 0,!0);e.x*=this.currentZoom,e.y*=this.currentZoom,e.width*=this.currentZoom,e.height*=this.currentZoom;var t=Math.min(e.x,-this.horizontalOffset),i=Math.min(e.y,-this.verticalOffset),n=(this.horizontalOffset,this.viewPortWidth,e.right,this.verticalOffset,this.viewPortHeight,e.bottom,this.scrollerWidth),r=this.scrollerWidth;-this.verticalOffset<=e.y&&-this.verticalOffset+this.viewPortHeight>=e.bottom&&(r=0),-this.horizontalOffset<=e.x&&-this.horizontalOffset+this.viewPortWidth>=e.right&&(n=0),this.hScrollSize=n,this.vScrollSize=r;var o=this.diagramWidth,a=this.diagramHeight;this.diagramWidth=Math.max(e.right,-this.horizontalOffset+this.viewPortWidth-r)-t,this.diagramHeight=Math.max(e.bottom,-this.verticalOffset+this.viewPortHeight-n)-i,o===this.diagramWidth&&a===this.diagramHeight||this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},e.prototype.setViewPortSize=function(e,t){this.viewPortWidth=e,this.viewPortHeight=t},e.prototype.getPageBounds=function(e,t,i){var n,r=new mi;if("Content"!==t&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var o=this.diagram.pageSettings.width,a=this.diagram.pageSettings.height,s=0,l=0;if(this.diagram.pageSettings.multiplePage){if((r=this.diagram.spatialSearch.getPageBounds(0,0)).right>o)o*=c=Math.ceil(r.right/o);if(r.bottom>a)a*=c=Math.ceil(r.bottom/a);if(r.left<0&&Math.abs(r.left)>s){var c=Math.ceil(Math.abs(r.left)/this.diagram.pageSettings.width);s=this.diagram.pageSettings.width*c}if(r.top<0&&Math.abs(r.top)>l){c=Math.ceil(Math.abs(r.top)/this.diagram.pageSettings.height);l=this.diagram.pageSettings.height*c}}n=new mi(-s,-l,o+s,a+l)}else{var h=e?void 0:0;n=this.diagram.spatialSearch.getPageBounds(h,h)}if(i){var d=this.diagram.scrollSettings.padding;n.x-=d.left,n.y-=d.top,n.width+=d.left+d.right,n.height+=d.top+d.bottom}return n},e.prototype.getPageBreak=function(e){for(var t=0,i=0,n=-1,r=[],o=0,a=0,s=0,l=0,c=this.diagram.pageSettings.margin.left,h=this.diagram.pageSettings.margin.right,d=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,f=1,g={x1:o,y1:s,x2:a,y2:l};e.width>t;)(t+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:e.width)===this.diagram.pageSettings.width&&(g={x1:e.left+c,y1:e.top+d,x2:e.left+c,y2:e.bottom-p},r[++n]=g),t<e.width&&(g={x1:o=e.topLeft.x+this.diagram.pageSettings.width*u,y1:s=e.topLeft.y+d,x2:a=e.bottomLeft.x+this.diagram.pageSettings.width*u,y2:l=e.bottomLeft.y-p},r[++n]=g,u++),e.width===t&&(g={x1:e.right-h,y1:e.top+d,x2:e.right-h,y2:e.bottom-p},r[++n]=g);for(;e.height>i;)(i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:e.height)===this.diagram.pageSettings.height&&(g={x1:e.left+c,y1:e.top+d,x2:e.right-h,y2:e.top+d},r[++n]=g),i<e.height&&(g={x1:o=e.topLeft.x+c,y1:s=e.topLeft.y+this.diagram.pageSettings.height*f,x2:a=e.topRight.x-h,y2:l=e.topRight.y+this.diagram.pageSettings.height*f},r[++n]=g,f++),e.height===i&&(g={x1:e.left+c,y1:e.bottom-p,x2:e.right-h,y2:e.bottom-p},r[++n]=g);return r},e.prototype.zoom=function(e,t,i,n){if(this.diagram.constraints&Ni.Zoom&&1!==e||function(e){return e.constraints&Ni.Pan}(this.diagram)&&1===e){var r=vi();if(Si(r,this.currentZoom,this.currentZoom),Ci(r,this.horizontalOffset,this.verticalOffset),n=bi(r,n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*e>=this.diagram.scrollSettings.minZoom&&this.currentZoom*e<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=e;var o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom;var a=vi();Si(a,e,e,n.x,n.y),Ci(a,t||0,i||0),Pi(r,a);var s=bi(r,{x:0,y:0});1===e&&(s=this.applyScrollLimit(s.x,s.y)),this.transform={tx:Math.max(s.x,-o.left)/this.currentZoom,ty:Math.max(s.y,-o.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=s.x,this.verticalOffset=s.y,this.setSize(),"SVG"!==this.diagram.mode&&Oa(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||Oa(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),la(this.diagram)}}},e.prototype.fitToPage=function(e){var t=(e=e||{}).mode,i=e.region,n=e.margin||{},r=e.canZoomIn,o=e.customBounds;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var a,s=o,l=-this.horizontalOffset,c=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){t=t||"Page","CustomBounds"!==i&&(s=this.getPageBounds(!0,i,!0));var h={x:0,y:0};h.x=(this.viewPortWidth-(n.left+n.right))/s.width,h.y=(this.viewPortHeight-(n.top+n.bottom))/s.height,!r&&s.width-this.horizontalOffset<this.viewPortWidth&&s.height-this.verticalOffset<this.viewPortHeight&&(h.x=Math.min(1,h.x),h.y=Math.min(1,h.y));var d=void 0,p=void 0,u=void 0;switch(t){case"Width":a=(d=h.x)/this.currentZoom,l+=(p=(this.viewPortWidth-s.width*d)/2-s.x*d)+(n.left-n.right)/2*d,c-=-this.verticalOffset*a,c="CustomBounds"!==i?c:c-this.verticalOffset*a;break;case"Height":a=(d=h.y)/this.currentZoom,p=(this.viewPortWidth-s.width*d)/2-s.x*d,u=(this.viewPortHeight-s.height*d)/2-s.y*d,l+=p+(n.left-n.right)/2*d,c+=u+(n.top-n.bottom)/2*d;break;case"Page":a=(d=Math.min(h.x,h.y))/this.currentZoom,p=(this.viewPortWidth-s.width*d)/2-s.x*d,u=(this.viewPortHeight-s.height*d)/2-s.y*d,l+=p+(n.left-n.right)/2*d,c+=u+(n.top-n.bottom)/2*d}this.zoom(a,l,c,{x:0,y:0})}else a=1/this.currentZoom,this.zoom(a,l,c,{x:0,y:0})},e.prototype.bringIntoView=function(e){var t=0,i=0,n=this.currentZoom,r=e,o=-this.horizontalOffset,a=-this.verticalOffset;r=new mi(r.x*n,r.y*n,r.width*n,r.height*n),new mi(o,a,this.viewPortWidth,this.viewPortHeight).containsRect(r)||(r.right>-o+this.viewPortWidth&&(t=r.right-this.viewPortWidth),r.x<-o&&(t=r.x),r.bottom>-a+this.viewPortHeight&&(i=r.bottom-this.viewPortHeight),r.y<-a&&(i=r.y),this.zoom(1,-this.horizontalOffset-t,-this.verticalOffset-i,null))},e.prototype.bringToCenter=function(e){var t=this.currentZoom,i=new mi(e.x*t,e.y*t,e.width*t,e.height*t),n=i.x+i.width/2-this.viewPortWidth/2,r=i.y+i.height/2-this.viewPortHeight/2;this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-r,null)},e.prototype.applyScrollLimit=function(e,t){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var i=void 0;"Limited"===this.diagram.scrollSettings.scrollLimit&&(i=this.diagram.scrollSettings.scrollableArea),(i=i||this.getPageBounds(!0)).x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom,e*=-1,t*=-1;var n=Math.max(i.right,this.viewPortWidth);if(!(e<=i.x&&(e+this.viewPortWidth>=i.right||e>=i.right-this.viewPortWidth)||e>=i.x&&e+this.viewPortWidth<=n))if(e>=i.x)e=Math.max(i.x,Math.min(e,e-(e+this.viewPortWidth-this.vScrollSize-n)));else{var r=i.right-this.viewPortWidth;e=Math.min(r,i.x)}var o=Math.max(i.bottom,this.viewPortHeight);if(!(t<=i.y&&t+this.viewPortHeight>=i.bottom||t>=i.y&&t+this.viewPortHeight<=o))if(t>=i.y)t=Math.max(i.y,Math.min(t,t-(t+this.viewPortHeight-this.hScrollSize-o)));else{r=i.bottom-this.viewPortHeight;t=Math.min(i.y,r)}e*=-1,t*=-1}return{x:e,y:t}},e}(),Kd=function(){function e(e,t,i,n,r){this.objects=[],this.left=e,this.top=t,this.width=i,this.height=n,this.spatialSearch=r}return e.prototype.findQuads=function(e,t){null!=this.first&&this.first.isIntersect(e)&&this.first.findQuads(e,t),null!=this.second&&this.second.isIntersect(e)&&this.second.findQuads(e,t),null!=this.third&&this.third.isIntersect(e)&&this.third.findQuads(e,t),null!=this.fourth&&this.fourth.isIntersect(e)&&this.fourth.findQuads(e,t),this.objects.length>0&&t.push(this)},e.prototype.isIntersect=function(e){return!(this.left+this.width<e.left||this.top+this.height<e.top||this.left>e.right||this.top>e.bottom)},e.prototype.selectQuad=function(){for(var e,t=null,i=this;null!=i;)e=i.getQuad(t),i=e.source,t=e.target||t;return t},e.prototype.getQuad=function(t){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var r=this.left+i,o=this.top+n;if(this.spatialSearch.childRight<=r){if(this.spatialSearch.childBottom<=o){if(!this.first)(a=new e(this.left,this.top,i,n,this.spatialSearch)).parent=this,this.first=a;return{source:this.first}}if(this.spatialSearch.childTop>=o){if(!this.third)(a=new e(this.left,o,i,n,this.spatialSearch)).parent=this,this.third=a;return{source:this.third}}}else if(this.spatialSearch.childLeft>=r){if(this.spatialSearch.childBottom<=o){if(!this.second)(a=new e(r,this.top,i,n,this.spatialSearch)).parent=this,this.second=a;return{source:this.second}}if(this.spatialSearch.childTop>=o){var a;if(!this.fourth)(a=new e(r,o,i,n,this.spatialSearch)).parent=this,this.fourth=a;return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},e.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},e.prototype.addIntoAQuad=function(e){var t={};this.spatialSearch.setCurrentNode(e);for(var i=null;!t.isAdded;)i=(t=this.spatialSearch.parentQuad.add(i)).quad;return i},e.prototype.add=function(t){if(t=null,this.isContained())return{isAdded:!0,quad:t=this.selectQuad()};var i=void 0,n=0===this.objects.length&&!this.first&&!this.second&&!this.third&&!this.fourth,r=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new e(this.left-this.width,this.top-this.height,r,o,this.spatialSearch),n||(i.fourth=this)):(i=new e(this.left-this.width,this.top,r,o,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new e(this.left,this.top-this.height,r,o,this.spatialSearch),n||(i.third=this)):(i=new e(this.left,this.top,r,o,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:t}},e}(),$d=function(){function e(e){this.quadSize=500,this.objectTable=e,this.parentQuad=new Kd(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return e.prototype.removeFromAQuad=function(e){if(this.quadTable[e.id]){var t=this.quadTable[e.id],i=this.objectIndex(t.objects,e);-1!==i&&(t.objects.splice(i,1),this.update(t),delete this.quadTable[e.id])}},e.prototype.update=function(e){if(e.parent&&0===e.objects.length&&e.first&&e.second&&e.third&&e.fourth){var t=e.parent;t.first===e?t.first=null:t.second===e?t.second=null:t.third===e?t.third=null:t.fourth===e&&(t.fourth=null),this.update(e.parent)}else e!==this.parentQuad||e.first||e.second||e.third||e.fourth||(e.left=0,e.width=1e3,e.top=0,e.height=1e3)},e.prototype.addIntoAQuad=function(e){var t=this.parentQuad.addIntoAQuad(e);this.quadTable[e.id]=t},e.prototype.objectIndex=function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t.id)return i;return-1},e.prototype.updateQuad=function(e){this.setCurrentNode(e);var t=e.outerBounds;if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return!1;this.quadTable[e.id]?this.quadTable[e.id].isContained()||(this.removeFromAQuad(e),this.addIntoAQuad(e)):this.addIntoAQuad(e);if(!this.isWithinPageBounds(t)||this.leftElement===e||this.topElement===e||this.rightElement===e||this.bottomElement===e){var i=!1;return this.pageLeft===this.childLeft&&e===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=e,i=!0):e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&e===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=e,i=!0):e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&e===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=e):e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&e===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=e,i=!0):e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},e.prototype.isWithinPageBounds=function(e){return e.left>=this.pageLeft&&e.right<=this.pageRight&&e.top>=this.pageTop&&e.bottom<=this.pageBottom},e.prototype.findQuads=function(e){var t=[];return this.parentQuad.findQuads(e,t),t},e.prototype.findObjects=function(e){for(var t=[],i=0,n=this.findQuads(e);i<n.length;i++)for(var r=0,o=n[i].objects;r<o.length;r++){var a=o[r];a.outerBounds.intersects(e)&&t.push(this.objectTable[a.id])}return t},e.prototype.updateBounds=function(e){var t=!1;return e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),t=!0),e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),t=!0),e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),t=!0),e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),t=!0),t},e.prototype.findBottom=function(e){e.third||e.fourth?(e.third&&this.findBottom(e.third),e.fourth&&this.findBottom(e.fourth)):(e.second&&this.findBottom(e.second),e.first&&this.findBottom(e.first));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},e.prototype.findRight=function(e){e.second||e.fourth?(e.second&&this.findRight(e.second),e.fourth&&this.findRight(e.fourth)):(e.first&&this.findRight(e.first),e.third&&this.findRight(e.third));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},e.prototype.findLeft=function(e){e.first||e.third?(e.first&&this.findLeft(e.first),e.third&&this.findLeft(e.third)):(e.second&&this.findLeft(e.second),e.fourth&&this.findLeft(e.fourth));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},e.prototype.findTop=function(e){e.first||e.second?(e.first&&this.findTop(e.first),e.second&&this.findTop(e.second)):(e.third&&this.findTop(e.third),e.fourth&&this.findTop(e.fourth));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},e.prototype.setCurrentNode=function(e){if(this.childNode=e,e){var t=e.outerBounds;this.childLeft=Number(t.left),this.childTop=Number(t.top),this.childRight=Number(t.right),this.childBottom=Number(t.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},e.prototype.getPageBounds=function(e,t){if(this.pageLeft===Number.MAX_VALUE)return new mi(0,0,0,0);var i=void 0!==e?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==t?Math.min(this.pageTop,0):this.pageTop;return new mi(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},e.prototype.getQuad=function(e){return this.quadTable[e.id]},e}(),Jd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ep=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jd(t,e),ep([pe(!1)],t.prototype,"preventDefaults",void 0),t}(ke),ip=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),np=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},rp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ip(t,e),np([pe("")],t.prototype,"action",void 0),np([pe("")],t.prototype,"cursor",void 0),t}(ke),op=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ap=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},sp=function(e){function t(t,i){var n,r,o=e.call(this,t,i)||this;o.version=17.1,o.connectorTable={},o.groupTable={},o.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},o.textEditing=!1,o.isTriggerEvent=!1,o.preventNodesUpdate=!1,o.preventConnectorsUpdate=!1,o.selectionConnectorsList=[],o.deleteVirtualObject=!1,o.crudDeleteNodes=[],o.selectedObject={helperObject:void 0,actualObject:void 0},o.renderTimer=null;for(var a=0;t&&t.nodes&&a<t.nodes.length;a++)n=t.nodes[a],r=o.nodes[a],n.children&&n.children.length>0&&(n.style&&n.style.fill||(r.style.fill="transparent"),n.style&&n.style.strokeColor||(r.style.strokeColor="transparent")),n.shape&&"UmlActivity"===n.shape.type&&$s(n,r),n.shape&&"SwimLane"===n.shape.type&&Ks(n,r),o.nodeDefaults&&nl(r,n,o.nodeDefaults);if(t&&t.connectors&&o.connectorDefaults)for(a=0;t&&t.connectors&&a<t.connectors.length;a++)n=t.connectors[a],nl(r=o.connectors[a],n,o.connectorDefaults);for(a=0;t&&t.connectors&&a<t.connectors.length;a++){var s=t.connectors[a],l=o.connectors[a];s.shape&&"None"!==s.shape.type&&Js(s,l)}return o}return op(t,e),t.prototype.clearCollection=function(e){for(var t,i=[],n=0,r=Object.keys(this.nameTable);n<r.length;n++){var o=r[n];(t=this.nameTable[o])&&(e&&t instanceof na||!e&&t instanceof Yc)&&i.push(t)}this.clearObjects(i)},t.prototype.onPropertyChanged=function(i,n){for(var r=!0,o=!1,a=!1,s=0,l=Object.keys(i);s<l.length;s++){switch(l[s]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var c=0,h=this.views;c<h.length;c++){var d=h[c];(T=this.views[d])instanceof t||T.updateView(T)}break;case"nodes":if(i.nodes.length>0&&0===n.nodes.length)this.clearCollection(),a=!0;else{for(var p=0,u=Object.keys(i.nodes);p<u.length;p++){var f=u[p],g=Number(f),m=this.nodes[g],v=i.nodes[g];o=o||void 0!==v.excludeFromLayout,this.nodePropertyChange(m,n.nodes[g],v,void 0,!0,!0);var b={element:sc(m),cause:this.diagramActions,oldValue:sc(n.nodes[g]),newValue:sc(i.nodes[g])};y()&&(b.element={node:sc(m)},b.oldValue={node:sc(void 0)},b.newValue={node:sc(void 0)}),this.triggerEvent(Vi.propertyChange,b),r&&(r=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===n.connectors.length)this.clearCollection(!0),a=!0;else{for(var w=0,x=Object.keys(i.connectors);w<x.length;w++){f=x[w],g=Number(f),m=this.connectors[g],v=i.connectors[g];this.connectorPropertyChange(m,n.connectors[g],v,!0,!0);b={element:sc(m),cause:this.diagramActions,oldValue:sc(n.connectors[g]),newValue:sc(i.connectors[g])};y()&&(b.element={connector:sc(m)},b.oldValue={connector:sc(void 0)},b.newValue={connector:sc(void 0)}),this.triggerEvent(Vi.propertyChange,b),m&&m.parentId&&"UmlClassifier"===this.nameTable[m.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[m.parentId]||m),r&&(r=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":o=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?a=!0:o=!0;break;case"tooltip":Oo(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.updateScrollSettings(i);break;case"locale":this.realActions|=Yi.PreventDataInit,e.prototype.refresh.call(this),this.realActions&=~Yi.PreventDataInit;break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items)for(var S=i.contextMenuSettings.items,C=0,P=Object.keys(S);C<P.length;C++){f=P[C],g=Number(f);this.contextMenuSettings.items[g]=S[g]}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults)}}if(o&&this.doLayout(),r){b={element:sc(this),cause:this.diagramActions,oldValue:sc(n),newValue:sc(i)};y()&&(b.element={diagram:sc(this)},b.oldValue={diagram:sc(void 0)},b.newValue={diagram:sc(void 0)}),this.triggerEvent(Vi.propertyChange,b)}if(!a&&this.canLogChange()&&this.modelChanged(i,n)){var E={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.addHistoryEntry(E)}if(this.resetDiagramActions(),a&&(this.initObjects(!0),this.refreshDiagramLayer()),!a)for(var O=0,M=this.views;O<M.length;O++){var T=M[O];(d=this.views[T])instanceof t||(i.scrollSettings&&i.scrollSettings.currentZoom!=n.scrollSettings.currentZoom&&d.updateHtmlLayer(d),this.refreshCanvasDiagramLayer(d))}this.resetTemplate()},t.prototype.updateSnapSettings=function(e){(void 0!==e.snapSettings.constraints||e.snapSettings.horizontalGridlines||e.snapSettings.verticalGridlines)&&this.diagramRenderer.updateGrid(this.snapSettings,sh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.updateRulerSettings=function(e){void 0!==e.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,sh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==e.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===e.rulerSettings.horizontalRuler&&void 0===e.rulerSettings.verticalRuler||(void 0!==e.rulerSettings.horizontalRuler.thickness||void 0!==e.rulerSettings.verticalRuler.thickness?(ca(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):la(this)),this.diagramRenderer.updateGrid(this.snapSettings,sh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new Zh,this.initializeServices(),this.setCulture();window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},t.prototype.initializePrivateVariables=function(){this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new Zd(this),this.eventHandler=new Xd(this,this.commandHandler),this.spatialSearch=new $d(this.nameTable),this.scroller=new Qd(this)},t.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new xt(this.getModuleName(),this.defaultLocale,this.locale))},t.prototype.setCulture=function(){this.localeObj=new xt(this.getModuleName(),this.defaultLocale,this.locale)},t.prototype.render=function(){var e=[];this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new Yh(this.element.id,new Fh,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0),this.lineRoutingModule&&this.lineRoutingModule.lineRouting(this),this.doLayout(),this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,sh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),J.isDevice&&(this.tool=ji.ZoomPan|ji.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=Oo(this),this.diagramActions=Wi.Render;for(var t=this.nodes,i=0;i<t.length;i++)t[i].isExpanded||e.push(t[i]);if(e.length)for(i=e.length-1;i>=0;i--)this.commandHandler.expandNode(e[i],this);this.initCommands(),this.updateTemplate(),this.isLoading=!1,y()&&(this.tool=ji.ZoomPan),this.renderComplete()},t.prototype.updateTemplate=function(){for(var e,t,i,n=0;n<this.nodes.length;n++)t=(e=this.nodes[n]).annotations[0],"HTML"===e.shape.type||"Native"===e.shape.type?Kt(e.id+"content_diagram","Content",this.nodes[n].shape):t&&t.template instanceof HTMLElement&&Kt(this.element.id+"template_diagram","Template",t);for(n=0;n<this.connectors.length;n++)(i=this.connectors[n].annotations[0])&&i.template instanceof HTMLElement&&Kt(this.element.id+"template_diagram","Template",i)},t.prototype.resetTemplate=function(){for(var e,t,i,n=0;n<this.nodes.length;n++)t=(e=this.nodes[n]).annotations[0],"HTML"===e.shape.type&&e.shape.content instanceof HTMLElement?$t(e.id+"content"):t&&t.template instanceof HTMLElement&&$t(this.element.id+"template");for(n=0;n<this.connectors.length;n++)(i=this.connectors[n].annotations[0])&&i.template instanceof HTMLElement&&$t(this.element.id+"template")},t.prototype.renderInitialCrud=function(){var e,t=this;t.dataSourceSettings.crudAction.read&&((e=new x(t.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then());t.dataSourceSettings.connectionDataSource.crudAction.read&&((e=new x(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then())},t.prototype.getModuleName=function(){return"diagram"},t.prototype.getClassName=function(){return"Diagram"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e.push({member:"Bridging",args:[]}),e.push({member:"ConnectorEditingTool",args:[]}),this.constraints&Ni.UndoRedo&&e.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&e.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&e.push({member:"Snapping",args:[this]}),e.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||e.push({member:"OrganizationalChart",args:[]}),"ComplexHierarchicalTree"===this.layout.type&&e.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&e.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&e.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&e.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&e.push({member:"DataBinding",args:[]}),this.constraints&Ni.LineRouting&&e.push({member:"LineRouting",args:[]}),e},t.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var t=document.getElementsByClassName("e-tooltip-wrap");t.length>0;)t[0].parentNode.removeChild(t[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);window.measureElement&&(window.measureElement.usageCount-=1,0===window.measureElement.usageCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null))}},t.prototype.wireEvents=function(){var e=J.touchStartEvent,t=J.touchEndEvent,i=J.touchMoveEvent,n=J.isPointer?"pointerleave":"mouseleave",r=J.isPointer,o="mozilla"===J.info.name?r?"mousewheel":"DOMMouseScroll":"mousewheel";S.add(this.diagramCanvas,e,this.eventHandler.mouseDown,this.eventHandler),S.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),S.add(this.diagramCanvas,t,this.eventHandler.mouseUp,this.eventHandler),S.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),S.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),S.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),S.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),S.add(this.diagramCanvas,o,this.eventHandler.mouseWheel,this.eventHandler),S.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},t.prototype.unWireEvents=function(){var e=J.touchStartEvent,t=J.touchMoveEvent,i=J.isPointer?"pointerleave":"mouseleave",n=J.isPointer,r="mozilla"===J.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",o=J.touchEndEvent;S.remove(this.diagramCanvas,e,this.eventHandler.mouseDown),S.remove(this.diagramCanvas,t,this.eventHandler.mouseMove),S.remove(this.diagramCanvas,o,this.eventHandler.mouseUp),S.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),S.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),S.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),S.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),S.remove(this.diagramCanvas,r,this.eventHandler.mouseWheel),S.remove(window,"resize",this.eventHandler.windowResize)},t.prototype.select=function(e,t){if(y()){for(var i=0;i<e.length;i++)e[i]=this.nameTable[e[i].id];e=this.nameTable[e.id]||e}null!=e&&this.commandHandler.selectObjects(e,t)},t.prototype.selectAll=function(){var e;e=this.getObjectsOfLayer(this.activeLayer.objects),this.select(e)},t.prototype.unSelect=function(e){y()&&(e=this.nameTable[e.id]||e),e&&wd(this,e)&&this.commandHandler.unSelect(e)},t.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},t.prototype.updateViewPort=function(){this.eventHandler.updateViewPortSize(this.element)},t.prototype.cutCommand=function(){this.cut()},t.prototype.cut=function(){this.commandHandler.cut()},t.prototype.addProcess=function(e,t){this.bpmnModule&&this.bpmnModule.addProcess(e,t,this)},t.prototype.removeProcess=function(e){this.bpmnModule&&this.bpmnModule.removeProcess(e,this)},t.prototype.pasteCommand=function(){this.paste()},t.prototype.paste=function(e){this.commandHandler.paste(e)},t.prototype.fitToPage=function(e){this.scroller.fitToPage(e)},t.prototype.bringIntoView=function(e){this.scroller.bringIntoView(e)},t.prototype.bringToCenter=function(e){this.scroller.bringToCenter(e)},t.prototype.copyCommand=function(){this.copy()},t.prototype.copy=function(){return this.commandHandler.copy()},t.prototype.group=function(){this.commandHandler.group()},t.prototype.unGroup=function(){this.commandHandler.unGroup()},t.prototype.sendToBack=function(){this.commandHandler.sendToBack()},t.prototype.setActiveLayer=function(e){var t=this.commandHandler.getLayer(e);this.activeLayer=t},t.prototype.addLayer=function(e,t){this.commandHandler.addLayer(e,t)},t.prototype.removeLayer=function(e){this.commandHandler.removeLayer(e)},t.prototype.moveObjects=function(e,t){this.commandHandler.moveObjects(e,t)},t.prototype.sendLayerBackward=function(e){this.commandHandler.sendLayerBackward(e)},t.prototype.bringLayerForward=function(e){this.commandHandler.bringLayerForward(e)},t.prototype.cloneLayer=function(e){this.commandHandler.cloneLayer(e)},t.prototype.bringToFront=function(){this.commandHandler.bringToFront()},t.prototype.moveForward=function(){this.commandHandler.sendForward()},t.prototype.sendBackward=function(){this.commandHandler.sendBackward()},t.prototype.getObject=function(e){return this.nameTable[e]},t.prototype.getNodeObject=function(e){return Oh(this.nameTable[e])},t.prototype.getConnectorObject=function(e){return Oh(this.nameTable[e])},t.prototype.getActiveLayer=function(){return this.activeLayer},t.prototype.nudgeCommand=function(e,t,i){"object"!==typeof e&&this.nudge(e)},t.prototype.nudge=function(e,t,i){var n=0,r=0;"Left"===e||"Right"===e?n=("Left"===e?-1:1)*(t||1):r=("Up"===e?-1:1)*(i||1);var o=this.selectedItems,a=this.selectedItems.wrapper.children[0];a instanceof dn?this.commandHandler.labelDrag(o.nodes[0],a,n,r):this.drag(o,n,r),this.refreshCanvasLayers()},t.prototype.drag=function(e,t,i){if((y()&&e.id&&(e=this.nameTable[e.id]||e),this.bpmnModule&&e instanceof Yc)&&this.bpmnModule.updateAnnotationDrag(e,this,t,i))return;if(e instanceof Zc){if(this.preventConnectorsUpdate=!0,e.nodes&&e.nodes.length)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];if(this.drag(o,t,i),o.parentId){var a=this.nameTable[o.parentId];if(a.isLane)ps(a,this.nameTable[a.parentId],o,this)}}if(e.connectors&&e.connectors.length)for(var s=0,l=e.connectors;s<l.length;s++){var c=l[s];this.drag(c,t,i),-1===this.selectionConnectorsList.indexOf(c)&&this.selectionConnectorsList.push(c)}this.updateSelector()}else e instanceof Yc&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(e,this,t,i),this.commandHandler.drag(e,t,i);if(e instanceof Zc){this.preventConnectorsUpdate=!1;for(var h=0,d=this.selectionConnectorsList;h<d.length;h++){var p=d[h];this.updateConnectorProperties(this.nameTable[p.id]),"Bpmn"===p.shape.type&&"Default"===p.shape.sequence&&this.commandHandler.updatePathElementOffset(p)}this.selectionConnectorsList=[]}this.diagramActions&Wi.ToolAction||this.updateSelector()},t.prototype.scale=function(e,t,i,n){var r=!0;if(e.id&&(e=this.nameTable[e.id]||e),e instanceof Zc){if(e.nodes&&e.nodes.length)for(var o=0,a=e.nodes;o<a.length;o++){var s=a[o];r=this.commandHandler.scale(s,t,i,n,e)}if(e.connectors&&e.connectors.length)for(var l=0,c=e.connectors;l<c.length;l++){var h=c[l];this.commandHandler.scale(h,t,i,n,e)}this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(e,t,i,n,e.children?e:void 0);return r},t.prototype.rotate=function(e,t,i){var n;if(e.id&&(e=this.nameTable[e.id]||e),e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof Zc){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var r=Eh(e.wrapper);if(!(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r)))return e.rotateAngle-=t,e.wrapper.rotateAngle-=t,n;var o=[];o=(o=o.concat(e.nodes)).concat(e.connectors),this.commandHandler.rotateObjects(e,o,t,i)}else this.commandHandler.rotateObjects(e,[e],t,i);return n},t.prototype.dragSourceEnd=function(e,t,i){this.commandHandler.dragSourceEnd(e,t,i)},t.prototype.dragTargetEnd=function(e,t,i){this.commandHandler.dragTargetEnd(e,t,i)},t.prototype.findObjectsUnderMouse=function(e,t){return this.eventHandler.findObjectsUnderMouse(e,t)},t.prototype.findObjectUnderMouse=function(e,t,i){return this.eventHandler.findObjectUnderMouse(e,t,i)},t.prototype.findTargetObjectUnderMouse=function(e,t,i,n,r){return this.eventHandler.findTargetUnderMouse(e,t,i,n,r)},t.prototype.findElementUnderMouse=function(e,t){return this.eventHandler.findElementUnderMouse(e,t)},t.prototype.findActionToBeDone=function(e,t,i,n){return this.eventHandler.findActionToBeDone(e,t,i,n)},t.prototype.getTool=function(e){var t,i=_h(this.getCustomTool);return i&&(t=i(e))?t:this.eventHandler.getTool(e)},t.prototype.getCursor=function(e,t){var i,n=_h(this.getCustomCursor);if(n&&(i=n(e,t)))return i;if(this.customCursor.length)for(var r=0;r<this.customCursor.length;r++)if(this.customCursor[r].action===e)return this.customCursor[r].cursor;return this.eventHandler.getCursor(e)},t.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},t.prototype.addHistoryEntry=function(e){if(this.undoRedoModule&&this.constraints&Ni.UndoRedo&&!this.currentSymbol){if(e.undoObject&&"helper"===e.undoObject.id)return;this.undoRedoModule.addHistoryEntry(e,this),"StartGroup"!==e.type&&"EndGroup"!==e.type&&this.historyChangeTrigger(e)}},t.prototype.historyChangeTrigger=function(e){var t={},i=[];if("Internal"===e.category){switch(e&&e.redoObject&&e.redoObject.nodes instanceof Array&&e.redoObject.connectors instanceof Array?i=e.redoObject.nodes.concat(e.redoObject.connectors):e.redoObject&&i.push(e.redoObject),t.type=e.type,e.type){case"PositionChanged":t.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},t.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY};break;case"RotationChanged":t.oldValue={rotateAngle:e.undoObject.rotateAngle},t.newValue={rotateAngle:e.redoObject.rotateAngle};break;case"SizeChanged":t.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY,width:e.undoObject.width,height:e.undoObject.height},t.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY,width:e.redoObject.width,height:e.redoObject.height};break;case"CollectionChanged":t[e.changeType]=i;break;case"ConnectionChanged":t.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},t.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY}}var n=void 0;if(n={cause:e.category,source:sc(i),change:sc(t)},y()){var r=(n={cause:e.category,change:sc(t),source:{connectors:void 0,nodes:void 0}}).source;r.connectors=[],r.nodes=[];for(var o=void 0,a=0;a<i.length;a++)o=sc(i[a]),ec(i[a])===na?r.connectors.push(o):r.nodes.push(o);n.source=r}i.length&&this.triggerEvent(Vi.historyChange,n)}},t.prototype.startGroupAction=function(){this.addHistoryEntry({type:"StartGroup",category:"Internal"})},t.prototype.endGroupAction=function(){this.addHistoryEntry({type:"EndGroup",category:"Internal"})},t.prototype.undo=function(){this.undoRedoModule&&this.constraints&Ni.UndoRedo&&this.undoRedoModule.undo(this)},t.prototype.redo=function(){this.undoRedoModule&&this.constraints&Ni.UndoRedo&&this.undoRedoModule.redo(this)},t.prototype.align=function(e,t,i){t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Wi.PublicMethod,this.commandHandler.align(t,e,i||"Object")},t.prototype.distribute=function(e,t){t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Wi.PublicMethod,this.commandHandler.distribute(t,e)},t.prototype.sameSize=function(e,t){t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Wi.PublicMethod,this.commandHandler.sameSize(t,e)},t.prototype.zoom=function(e,t){this.scroller.zoom(e,0,0,t)},t.prototype.zoomTo=function(e){var t=e.zoomFactor?e.zoomFactor:.2;t="ZoomOut"===e.type?1/(1+t):1+t,this.scroller.zoom(t,0,0,e.focusPoint)},t.prototype.pan=function(e,t,i){this.scroller.zoom(1,e,t,i)},t.prototype.reset=function(){this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0})},t.prototype.triggerEvent=function(e,t){t&&this.updateEventValue(t),this.trigger(Vi[e],t)},t.prototype.updateEventValue=function(e){var t=e.element;e.element&&t instanceof Zc&&t.nodes.length+t.connectors.length===1&&(e.element=1===t.nodes.length?t.nodes[0]:t.connectors[0])},t.prototype.addNodeToLane=function(e,t,i){if(this.nameTable[t]){var n=this.nameTable[t];if(this.protectPropertyChange(!0),this.historyManager.startGroupAction(),this.nameTable[e.id]||(e.offsetX=n.wrapper.bounds.width/2+n.wrapper.bounds.x,e.offsetY=n.wrapper.bounds.height/2+n.wrapper.bounds.y,e=this.add(e)),e.parentId="",n.shape.phases.length)for(var r=0;r<n.shape.phases.length;r++){l=t+i+r;if(this.nameTable[l]&&this.nameTable[l].isLane){var o=this.nameTable[l].wrapper.bounds,a={x:o.x+(o.x-n.wrapper.bounds.x+e.margin.left+e.wrapper.bounds.width/2),y:o.y+n.wrapper.bounds.y-e.margin.top};if("Horizontal"===n.shape.orientation)a.y=o.y;else{a.x=o.x;var s=this.nameTable[l].parentId+n.shape.lanes[0].id+"_0_header";a.y=o.y+(n.wrapper.bounds.y-this.nameTable[s].wrapper.bounds.height+e.margin.top+e.wrapper.bounds.height/2)}if(o.containsPoint(a)||l===t+i+(n.shape.phases.length-1)){ds(this,this.nameTable[l],e,void 0,!0),ps(this.nameTable[l],n,e,this);break}}}else{var l=t+i+"0";this.nameTable[l]&&(ds(this,this.nameTable[l],e,void 0,!0),ps(this.nameTable[l],n,e,this))}this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}},t.prototype.showTooltip=function(e){var t=Eh(e.wrapper),i={x:0,y:0},n=e.tooltip.content?e.tooltip.content:"X:"+Math.round(t.x)+" Y:"+Math.round(t.y);e&&"Custom"===e.tooltip.openOn&&(i=e instanceof Yc?{x:e.offsetX+e.width/2,y:e.offsetY+e.height/2}:{x:e.targetPoint.x,y:e.targetPoint.x},this.commandHandler.showTooltip(e,i,n,"SelectTool",!0))},t.prototype.hideTooltip=function(e){e&&"Custom"===e.tooltip.openOn&&this.tooltipObject.close()},t.prototype.addNode=function(e,t){return this.add(e,t)},t.prototype.addConnector=function(e){return this.add(e)},t.prototype.add=function(e,i){var n,r=this.isProtectedOnChange;if(this.protectPropertyChange(!0),e){var o=void 0;o={element:e=Oh(e),cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1},y()&&(o=Kl(o,e,"Changing","Addition")),"helper"!==e.id&&this.triggerEvent(Vi.collectionChange,o),this.diagramActions=this.diagramActions|Wi.PublicMethod,e.id=e.id||Ch();var a=this.activeLayer;if(!o.cancel&&!a.lock){if(a.objects.indexOf(e.id)<0&&!a.lock&&(a.visible||(a.visible=!0,this.dataBind()),a.objects.push(e.id)),ec(e)===na)(n=new na(this,"connectors",e,!0)).status="New",nl(n,e,this.connectorDefaults),this.connectors.push(n),this.initObject(n),!1===e.visible&&this.updateElementVisibility(n.wrapper,n,e.visible),this.updateEdges(n);else{if(nl(n=new Yc(this,"nodes",e,!0),e,this.nodeDefaults),n.parentId=e.parentId,n.umlIndex=e.umlIndex,n.status="New",this.nodes.push(n),this.initObject(n,a,void 0,i),this.bpmnModule){if(n.shape.annotations&&0!==n.shape.annotations.length)for(var s=0,l=this.bpmnModule.getTextAnnotationConn(n);s<l.length;s++){var c=l[s];this.initConnectors(c,a,!1)}n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this)}if(this.lineRoutingModule&&this.constraints&Ni.LineRouting)for(var h=this.spatialSearch.findObjects(n.wrapper.outerBounds),d=0;d<h.length;d++){var p=h[d];p instanceof na&&this.connectorPropertyChange(p,{},{sourceID:p.sourceID,targetID:p.targetID,sourcePortID:p.sourcePortID,targetPortID:p.targetPortID,sourcePoint:p.sourcePoint,targetPoint:p.targetPoint})}if(n.umlIndex>-1&&e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type){var u=this.nameTable[e.parentId];u.children.splice(n.umlIndex,0,n.id),u.wrapper.children.splice(n.umlIndex,0,n.wrapper),u.wrapper.measure(new ei),u.wrapper.arrange(u.wrapper.desiredSize),this.updateDiagramObject(u)}}if(o={element:n,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.updateBlazorCollectionChange(n,!0),y()&&(o=Kl(o,e,"Changed","Addition")),"helper"!==e.id&&this.triggerEvent(Vi.collectionChange,o),!(this.diagramActions&Wi.UndoRedo)&&!(this.diagramActions&Wi.Group)&&!(this.diagramActions&Wi.PreventHistory)){var f={type:"CollectionChanged",changeType:"Insert",undoObject:Oh(e),redoObject:Oh(e),category:"Internal"};this.addHistoryEntry(f)}"SVG"===this.mode&&(this.updateSvgNodes(n),this.updateDiagramObject(n),n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging())}}this.protectPropertyChange(r),this.resetDiagramActions(Wi.PublicMethod),n&&this.layers.length>1&&this.moveNode(n);for(var g=0,m=this.views;g<m.length;g++){var v=m[g],b=this.views[v];b instanceof t||this.refreshCanvasDiagramLayer(b)}return n},t.prototype.updateBlazorCollectionChange=function(e,t){if(window&&window.ejsInterop){var i={},n=e instanceof Yc?"nodes":"connectors";i["nodes"===n?this.nodes.indexOf(e).toString():this.connectors.indexOf(e).toString()]=Oh(e),window.ejsInterop.updateDiagramCollection&&window.ejsInterop.updateDiagramCollection.call(this,n,i,{},!t,!1)}},t.prototype.updateSvgNodes=function(e){if(e.children)for(var t=0,i=e.children;t<i.length;t++){var n=i[t];if(this.nameTable[n]&&this.nameTable[n].parentId){var r=th(n+"_groupElement",this.element.id);r&&r.parentNode.removeChild(r)}}},t.prototype.updateProcesses=function(e){if(this.bpmnModule&&e&&e.shape&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length){var t=e.shape.activity.subProcess.processes;this.moveSvgNode(e.id);for(var i=0,n=t;i<n.length;i++){var r=n[i];this.moveSvgNode(r);for(var o=[],a=(o=o.concat(this.nameTable[r].outEdges,this.nameTable[r].inEdges)).length-1;a>=0;a--)this.moveSvgNode(o[a])}for(var s=0,l=t;s<l.length;s++){r=l[s];this.nameTable[r].shape.activity.subProcess.processes&&this.nameTable[r].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[r])}}else this.moveSvgNode(e.id)},t.prototype.moveSvgNode=function(e){var t=th(e+"_groupElement",this.element.id),i=t.parentElement;t.parentNode.removeChild(t),i.appendChild(t)},t.prototype.addTextAnnotation=function(e,t){if(this.bpmnModule){var i=this.bpmnModule.addAnnotation(t,e,this);if(this.initConnectors(i,this.commandHandler.getObjectLayer(t.id),!1),this.updateDiagramObject(t),!(this.diagramActions&Wi.UndoRedo)&&!(this.diagramActions&Wi.Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:Oh(e),redoObject:Oh(e),category:"Internal"};this.addHistoryEntry(n)}}},t.prototype.spliceConnectorEdges=function(e,t){var i,n=[];if(i=t?this.nameTable[e.sourceID]:this.nameTable[e.targetID])for(var r=(n=t?i.outEdges:i.inEdges).length-1;r>=0;r--)n[r]===e.id&&n.splice(r,1)},t.prototype.removeDependentConnector=function(e){for(var t,i=[],n=(i=i.concat(e.outEdges,e.inEdges)).length-1;n>=0;n--)(t=this.nameTable[i[n]])&&(this.connectorTable[t.id]=Oh(t),this.remove(t))},t.prototype.removeObjectsFromLayer=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var i=this.nameTable[e.children[t]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(e.id)),r=this.layers[n].objects.indexOf(e.id);r>-1&&(wd(this,e)&&this.unSelect(e),this.layers[n].objects.splice(r,1),delete this.layers[n].zIndexTable[this.nameTable[e.id].zIndex])},t.prototype.removeElements=function(e){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===e.shape.type){var t=th(e.id+"_groupElement",this.element.id);t&&t.parentNode.removeChild(t)}this.refreshCanvasLayers();for(var i,n=e.wrapper.children,r=0;r<n.length;r++){if(n[r]instanceof xn||n[r].id&&n[r].id.indexOf("icon_content")>0){n[r].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((i=th(n[r].id+"_shape_groupElement",this.element.id)).parentNode.removeChild(i),(i=th(n[r].id+"_rect_groupElement",this.element.id)).parentNode.removeChild(i));for(var o=0,a=this.views;o<a.length;o++){var s=a[o];yh(n[r].id+"_groupElement",s)}}else if(n[r]instanceof No)for(var l=0,c=this.views;l<c.length;l++){s=c[l];yh(e.id+"_html_element",s),yh(n[r].id+"_html_element",s)}Rl(n[r].id)}},t.prototype.removeCommand=function(){this.remove()},t.prototype.remove=function(e){var t,i=[];i=i.concat(this.selectedItems.nodes,this.selectedItems.connectors);var n=!1;if(e){if((e=this.nameTable[e.id])&&e.shape&&"SwimLane"===e.shape.type&&function(e,t){var i,n,r,o,a,s,l=t.wrapper.children[0].rows;for(n=0;n<l.length;n++)for(r=0;r<l[n].cells.length;r++){if((a=Ys(l[n].cells[r]))&&a.children)for(o=0;o<a.children.length;o++)a.children[o].children&&(s=e.nameTable[a.children[o].id])&&(s.isLane?Xs(e,s):(e.removeDependentConnector(s),e.diagramActions|=Wi.PreventHistory,e.remove(s),e.diagramActions&=~Wi.PreventHistory,o--));a&&(i=e.nameTable[a.id])&&Xs(e,i)}}(this,e),e&&(function(e){return e instanceof na?e.constraints&Li.Delete:e.constraints&ki.Delete}(e)||this.diagramActions&Wi.Clear)&&(t={element:e,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},y()&&(t=Kl(t,e,"Changing","Removal")),this.diagramActions&Wi.Clear||"helper"===e.id||this.triggerEvent(Vi.collectionChange,t),!t.cancel)){if(this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(e,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&Wi.UndoRedo)&&!(this.diagramActions&Wi.PreventHistory)&&(e instanceof Yc||e instanceof na)){var r={type:"CollectionChanged",changeType:"Remove",undoObject:Oh(e),redoObject:Oh(e),category:"Internal"};this.updateBlazorCollectionChange(e,!1),this.diagramActions&Wi.Clear||i.length>0&&this.undoRedoModule&&!this.layout.type&&(this.historyManager.startGroupAction(),n=!0),e instanceof Yc&&this.removeDependentConnector(e),e.isLane||e.isPhase||this.diagramActions&Wi.Clear||this.isStackChild(e)||this.addHistoryEntry(r)}!e.children||e.isLane||e.isPhase||this.deleteGroup(e),e.parentId&&(this.deleteChild(e),this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[e.parentId]),this.updateConnectorEdges(this.nameTable[e.parentId])));var o=void 0;this.diagramActions=this.diagramActions|Wi.PublicMethod;var a=this.nameTable[e.id];if(a instanceof Yc){if("Bpmn"===a.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(a,this),a.isLane||a.isPhase||"SwimLane"===a.shape.type){(s=a.isLane||a.isPhase?this.nameTable[a.parentId]:this.nameTable[a.id]).wrapper.children[0];a.isLane?Vs(this,a,s):a.isPhase&&Gs(this,a,s)}-1!==(o=this.nodes.indexOf(a))&&(this.crudDeleteNodes.push(this.nameTable[a.id]),this.nodes.splice(o,1),this.updateNodeEdges(a))}else-1!==(o=this.connectors.indexOf(a))&&(this.crudDeleteNodes.push(this.nameTable[a.id]),this.connectors.splice(o,1)),this.updateEdges(a),this.spliceConnectorEdges(e,!0),this.spliceConnectorEdges(e,!1);if(n&&this.historyManager.endGroupAction(),wd(this,a)&&this.unSelect(a),!a.isPhase){if(this.removeObjectsFromLayer(e),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[e.id],i.length>0&&i[0].id===a.id&&a.parentId){var s,l=this.nameTable[a.parentId];if(l&&l.isLane&&"SwimLane"===this.nameTable[l.parentId].shape.type)Fs(this,s=this.nameTable[l.parentId],l,a)}this.removeElements(a),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&Wi.Clear||(this.removeFromAQuad(a),t={element:e,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},y()&&(t=Kl(t,e,"Changed","Removal")),"helper"!==e.id&&this.triggerEvent(Vi.collectionChange,t),this.resetTool())}}}else if(i.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),n=!0);for(var c=0;c<i.length;c++){i[c];if(this.nameTable[i[c].id]){if(i[c]instanceof na&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(i[c])>-1)return void this.remove(this.nameTable[i[c].targetID]);this.remove(i[c])}}n&&this.historyManager.endGroupAction(),this.clearSelection()}this.tooltipObject.close()},t.prototype.isStackChild=function(e){var t,i=this.nameTable[e.parentId];if(e&&e.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[e.parentId].shape.type){t=!0;var n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:e,target:void 0,targetIndex:void 0},undoObject:{sourceIndex:i.wrapper.children.indexOf(e.wrapper),source:e,target:void 0,targetIndex:void 0},category:"Internal"};this.diagramActions&Wi.UndoRedo||this.addHistoryEntry(n)}return t},t.prototype.deleteChild=function(e,t){var i;if(t=t?this.nameTable[t.id]:this.nameTable[e.parentId],i="string"===typeof e?e:e.id,t&&t.children){for(var n=0;n<t.children.length;n++)if(t.children[n]===i){t.children.splice(n,1);for(var r=0;r<t.wrapper.children.length;r++)t.wrapper.children[r].id===i&&t.wrapper.children.splice(r,1)}t.wrapper.measure(new ei),t.wrapper.arrange(t.wrapper.desiredSize)}},t.prototype.addChild=function(e,t,i){var n,r=this.nameTable[e.id];if(r.children||(r.children=[]),r.children&&("string"===typeof t?this.nameTable[t]&&(n=t):(n=t.id=t.id||Ch(),this.add(t)),n&&(!t.umlIndex||-1===t.umlIndex))){var o=this.nameTable[n];o.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,o),i?(r.children.splice(i,0,n),r.wrapper.children.splice(i,0,o.wrapper)):(r.children.push(n),r.wrapper.children.push(o.wrapper)),r.wrapper.measure(new ei),r.wrapper.arrange(r.wrapper.desiredSize),void 0!==r.container&&(o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}},t.prototype.clear=function(){this.clearObjects()},t.prototype.clearObjects=function(e){var t=[];t=e||(t=t.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|Wi.Clear;for(var i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}this.diagramActions=this.diagramActions&~Wi.Clear,this.spatialSearch=new $d(this.nameTable),this.initHistory()},t.prototype.startEditCommad=function(){var e,t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(t&&t instanceof Yc)if(t.isLane&&t.parentId)for(var i=this.nameTable[t.parentId],n=i.shape.lanes,r=t.id.slice(i.id.length),o=r.substring(0,r.length-1),a=0;a<n.length;a++)t.isLane&&o===n[a].id&&(e=this.nameTable[n[a].header.id]);else if("SwimLane"===t.shape.type&&t.shape.header&&t.shape.hasHeader){var s=t.wrapper.children[0].rows[0].cells[0].children[0].id;e=this.nameTable[s]}this.startTextEdit(e)},t.prototype.startTextEdit=function(e,t){if(!Ta(this)||Ma(this)){y()&&(e=this.nameTable[e.id]||e),this.textEditing=!0;var i=this.scroller.transform,n=Ia(this)?i.scale:1,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;if(e||(e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),e){e.shape&&"UmlClassifier"===e.shape.type&&(e=this.nameTable[e.children[0]]);var c=!1;if(this.bpmnModule&&(l=this.bpmnModule.getTextAnnotationWrapper(e,t))&&(e=this.nameTable[e.id.split("_textannotation_")[0]]),l?c=!0:("Text"!==e.shape.type&&0===e.annotations.length&&(e.constraints&ki.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(e,[{id:Ch(),content:""}]))),!t&&("Text"!==e.shape.type&&e.annotations.length>0||"Text"===e.shape.type)&&(t="Text"===e.shape.type?e.wrapper.children[0].id.split("_")[1]:e.annotations[0].id),t&&(l=this.getWrapper(e.wrapper,t))),e&&l&&!(l instanceof No)&&(!function(e,t){var i;return i=t instanceof na?Li.ReadOnly:ki.ReadOnly,"Text"===t.shape.type?t.constraints&ki.ReadOnly:t.constraints&i?e.constraints&Di.InheritReadOnly?1:0:e.constraints&Di.ReadOnly?1:0}(l,e)||c)){var h=l.style,d=void 0;d=90>(d=l.bounds.width<e.wrapper.bounds.width?l.bounds.width:e.wrapper.bounds.width)?90:d;var p=document.getElementById(this.element.id+"_editTextBoxDiv"),u=document.getElementById(this.element.id+"_editBox");r=u?u.value:l.content,this.activeLabel.text=r,p||u||(p=ph("div",{}),u=ph("textarea",{}),this.diagramCanvas.appendChild(p),p.appendChild(u),u.appendChild(document.createTextNode(r))),(o=$c(l.style,r,void 0,void 0,d)).isEmpty()&&(o="Text"!==e.shape.type?new ei(Wl(e,l.id.split(e.id+"_")[1]).width||50,l.style.fontSize):new ei(e.width>50?50:e.width,l.style.fontSize)),e.parentId&&"UmlClassifier"===this.nameTable[e.parentId].shape.type?(o.width=e.wrapper.bounds.width-20,a=(e.wrapper.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,s=(e.wrapper.bounds.center.y+i.ty)*i.scale-o.height/2*n-3,l.style.textAlign="Left"):(o.width=Math.max(o.width,50),a=(l.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,s=(l.bounds.center.y+i.ty)*i.scale-o.height/2*n-3),wh(p,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+a+"px;top:"+s+"px;width:"+(o.width+1)*n+"px;height:"+o.height*n+"px; containerName:"+e.id+";"}),wh(u,{id:this.element.id+"_editBox",style:"width:"+(o.width+1)*n+"px;height:"+o.height*n+"px;resize: none;outline: none;overflow: hidden;;font-family:"+h.fontFamily+";font-size:"+h.fontSize*n+"px;text-align:"+l.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),u.style.fontWeight=h.bold?"bold":"",u.style.fontStyle=h.italic?"italic":"",u.style.lineHeight=(1.2*h.fontSize+"px;").toString(),u.style.textDecoration=h.textDecoration?h.textDecoration:"",this.activeLabel.parentId=e.id,this.activeLabel.id=t,l.visible=!1,this.updateDiagramObject(e),this.diagramActions=this.diagramActions|Wi.TextEdit,this.isTriggerEvent||(S.add(u,"input",this.eventHandler.inputChange,this.eventHandler),S.add(u,"focusout",this.focusOutEdit,this),u.select())}}}},t.prototype.updateNodeExpand=function(e,t){for(var i=0;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]],r=this.nameTable[n.targetID];n.visible=t,t||(this.updateElementVisibility(n.wrapper,n,!1),r.isExpanded=t),this.updateNodeExpand(r,r.isExpanded),r.visible=t,t||this.updateElementVisibility(r.wrapper,r,!1)}},t.prototype.updateConnectorAnnotation=function(e){if(e.annotations.length)for(var t=void 0,i=0,n=e.annotations;i<n.length;i++){var r=n[i];t=this.getWrapper(e.wrapper,r.id),e.updateAnnotation(r,e.intermediatePoints,e.wrapper.bounds,t,this.diagramActions&Wi.Interactions)}e.wrapper.measure(new ei(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.removeChildrenFromLayout=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n]).parentId||t.processId||i.push(t);return i},t.prototype.doLayout=function(){var e,t=!1,i=this.isProtectedOnChange;this.protectPropertyChange(!0);var n=this.removeChildrenFromLayout(this.nodes),r={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if(this.organizationalChartModule)e=this.organizationalChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.diagramActions),t=!0,this.layoutAnimateModule&&e.rootNode&&!this.diagramActions&&this.updateNodeExpand(e.rootNode,e.rootNode.isExpanded);else if(this.mindMapChartModule)this.mindMapChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.dataSourceSettings.root),t=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(n,this.nameTable,this.layout,r),t=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(n,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,r),t=!0;else if(this.complexHierarchicalTreeModule){var o=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);o.length>0&&this.complexHierarchicalTreeModule.doLayout(o,this.nameTable,this.layout,r),t=!0}if(t){this.preventUpdate=!0;for(var a={},s=0,l=n;s<l.length;s++){var c=l[s];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&Wi.PreventIconsUpdate||(this.updateIcon(c),this.updateDefaultLayoutIcons(c)),this.preventNodesUpdate=!0,this.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY},!0),this.preventNodesUpdate=!1,c.wrapper.measure(new ei(c.wrapper.width,c.wrapper.height)),c.wrapper.arrange(c.wrapper.desiredSize),this.updateDiagramObject(c,!0),c.inEdges.length>0)for(var h=0;h<c.inEdges.length;h++){a[(g=this.nameTable[c.inEdges[h]]).id]=g}if(c.outEdges.length>0)for(var d=0;d<c.outEdges.length;d++){var p=this.nameTable[c.outEdges[d]];a[p.id]=p}}for(var u=0,f=Object.keys(a);u<f.length;u++){var g;jl(g=a[f[u]],this.getPoints(g)),"Bpmn"===g.shape.type&&"Default"===g.shape.sequence&&this.commandHandler.updatePathElementOffset(g),g.wrapper.measure(new ei(void 0,void 0)),g.wrapper.arrange(g.wrapper.desiredSize),this.updateConnectorAnnotation(g),this.updateQuad(g),this.updateDiagramObject(g,!0)}this.preventUpdate=!1,this.updatePage(),this.diagramActions&Wi.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}return i||this.protectPropertyChange(i),e},t.prototype.saveDiagram=function(){return wl(this)},t.prototype.loadDiagram=function(e){return Cl(e,this)},t.prototype.getDiagramContent=function(e){return this.printandExportModule?this.printandExportModule.getDiagramContent(e):""},t.prototype.exportImage=function(e,t){this.printandExportModule&&this.printandExportModule.exportImages(e,t)},t.prototype.printImage=function(e,t){this.printandExportModule&&(t.printOptions=!0,this.printandExportModule.exportImages(e,t))},t.prototype.setStackLimit=function(e){this.undoRedoModule&&e&&(this.historyManager.stackLimit=e,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,e,this,!0))},t.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},t.prototype.getDiagramBounds=function(){if(this.printandExportModule){var e=this.printandExportModule.getDiagramBounds("",{});return e.width=e.width>this.scrollSettings.viewPortWidth?e.width+(e.x>0?e.x:0):this.scrollSettings.viewPortWidth,e.height=e.height>this.scrollSettings.viewPortHeight?e.height+(e.y>0?e.y:0):this.scrollSettings.viewPortHeight,e.x=e.x>0?0:e.x,e.y=e.y>0?0:e.y,e}return new mi},t.prototype.exportDiagram=function(e){return this.printandExportModule?this.printandExportModule.exportDiagram(e):""},t.prototype.print=function(e){this.printandExportModule&&this.printandExportModule.print(e)},t.prototype.addPorts=function(e,t){var i;this.protectPropertyChange(!0),e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var n=0;n<t.length;n++){if(i=new En(e,"ports",t[n],!0),e.ports.push(i),e.children){var r=e.wrapper;e.initPorts(this.getDescription,e.wrapper.children[r.children.length-1])}else{e.wrapper.children.push(e.initPortWrapper(e.ports[e.ports.length-1]))}if(!(this.diagramActions&Wi.UndoRedo)&&!(this.diagramActions&Wi.Group)){var o={type:"PortCollectionChanged",changeType:"Insert",undoObject:Oh(i),redoObject:Oh(e),category:"Internal"};this.addHistoryEntry(o)}}t.length>1&&this.endGroupAction(),e.wrapper.measure(new ei(e.width,e.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addConstraints=function(e,t){return e|t},t.prototype.removeConstraints=function(e,t){return e&~t},t.prototype.addNodeLabels=function(e,t){this.addLabels(e,t)},t.prototype.addConnectorLabels=function(e,t){this.addLabels(e,t)},t.prototype.addLabels=function(e,t){this.protectPropertyChange(!0);var i,n=(e=this.nameTable[e.id]||e).wrapper;t.length>1&&this.startGroupAction();for(var r=0;r<t.length;r++){if(e instanceof Yc)if(i=new Ln(e,"annotations",t[r],!0),e.annotations.push(i),e.children)for(var o=e,a=0;a<o.wrapper.children.length;a++){if(o.wrapper.children[a].id===o.id+"group_container")o.wrapper.children[a].children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id))}else n.children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id));else if(e instanceof na){i=new Dn(e,"annotations",t[r],!0),e.annotations.push(i);var s=n.children[0],l=new mi(s.offsetX-s.width/2,s.offsetY-s.height/2,s.width,s.height);n.children.push(e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,l,this.getDescription,this.element.id))}if(!(this.diagramActions&Wi.UndoRedo)&&!(this.diagramActions&Wi.Group)){var c={type:"LabelCollectionChanged",changeType:"Insert",undoObject:Oh(i),redoObject:Oh(e),category:"Internal"};this.addHistoryEntry(c)}}t.length>1&&this.endGroupAction(),e.wrapper.measure(new ei(n.width,n.height)),e.wrapper.arrange(n.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addLanes=function(e,t,i){e=this.nameTable[e.id]||e;for(var n=0;n<t.length;n++)Ns(this,e,t[n],i),void 0!==i&&(i+=1)},t.prototype.addPhases=function(e,t){e=this.nameTable[e.id]||e;for(var i=0;i<t.length;i++)zs(this,e,t[i])},t.prototype.removeLane=function(e,t){Vs(this,void 0,e,t)},t.prototype.removePhase=function(e,t){Gs(this,void 0,e,t)},t.prototype.removelabelExtension=function(e,t,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if((o instanceof dn||o instanceof No)&&o.id.match("_"+t[i].id+"$")){for(var a=0;a<e.annotations.length;a++)if(o.id.match("_"+e.annotations[a].id+"$")){if(!(this.diagramActions&Wi.UndoRedo)){var s={type:"LabelCollectionChanged",changeType:"Remove",undoObject:Oh(e.annotations[a]),redoObject:Oh(e),category:"Internal"};this.addHistoryEntry(s)}e.annotations.splice(a,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=th(o.id,this.element.id);if(l){var c=th(o.id,this.element.id);c.parentNode.removeChild(c)}th(o.id+"_text",this.element.id)&&(l=th(o.id+"_text",this.element.id)).parentNode.removeChild(l);var h=th(o.id+"_html_element",this.element.id);h&&h.parentNode.removeChild(h)}else this.refreshCanvasLayers()}}},t.prototype.removeLabels=function(e,t){e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var i=t.length-1;i>=0;i--)if(e.children&&e.children.length>0)for(var n=0;n<e.wrapper.children.length;n++)this.removelabelExtension(e,t,i,e.wrapper.children[n]);else this.removelabelExtension(e,t,i,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.removePortsExtenion=function(e,t,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if(o instanceof yn&&o.id.match("_"+t[i].id+"$")){for(var a=0;a<e.ports.length;a++)if(o.id.match("_"+e.ports[a].id+"$")){if(!(this.diagramActions&Wi.UndoRedo)){var s={type:"PortCollectionChanged",changeType:"Remove",undoObject:Oh(e.ports[a]),redoObject:Oh(e),category:"Internal"};this.addHistoryEntry(s)}e.ports.splice(a,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=th(o.id,this.element.id);l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},t.prototype.removePorts=function(e,t){e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var i=t.length-1;i>=0;i--)if(e.children&&e.children.length>0)for(var n=0;n<e.wrapper.children.length;n++)this.removePortsExtenion(e,t,i,e.wrapper.children[n]);else this.removePortsExtenion(e,t,i,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.getSizeValue=function(e,t){var i;if(i=e.toString().indexOf("px")>0?e.toString():e.toString().indexOf("%")>0?void 0!==t?"100%":e.toString():e.toString()+"px",t){ha(this);i="calc("+i+" - "+t+"px)"}return i},t.prototype.renderRulers=function(){this.rulerSettings.showRulers?(!function(e){var t=ha(e),i=ph("div",{id:e.element.id+"_overlapRuler",style:"height:"+t.height+"px;width:"+t.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"});e.element.insertBefore(i,e.element.firstChild)}(this),sa(this,!0),sa(this,!1)):ca(this)},t.prototype.intOffPageBackground=function(){var e=new ei;e=ha(this);var t=document.getElementById(this.element.id+"content"),i=this.getSizeValue(this.width,e.width),n=this.getSizeValue(this.height,e.height),r=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+e.height+"px;left:"+e.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",o={id:this.element.id+"content",tabindex:"0",style:r};t?(this.diagramCanvas=t,this.diagramCanvas.setAttribute("style",r)):(this.diagramCanvas=ph("div",o),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},t.prototype.initDiagram=function(){this.intOffPageBackground(),wh(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},t.prototype.renderBackgroundLayer=function(e,t){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",e.width,e.height);i.setAttribute("style",t);var n=uh("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var r=uh("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});i.appendChild(r),this.diagramCanvas.appendChild(i)},t.prototype.renderGridLayer=function(e,t){var i=this.createSvg(this.element.id+"_gridline_svg",e.width,e.height);i.setAttribute("class","e-grid-layer");var n=uh("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),r=uh("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%",fill:"url(#"+this.element.id+"_pattern)"});n.appendChild(r),i.appendChild(n),this.diagramCanvas.appendChild(i),bh(i,{style:t})},t.prototype.renderDiagramLayer=function(e,t){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+e.width+"px; height:"+e.height+"px;"+t};if(this.diagramLayerDiv=ph("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",e.width,e.height);n.setAttribute("style"," pointer-events: none; "),n.setAttribute("class","e-diagram-layer");var r=uh("g",{id:this.element.id+"_diagramLayer"}),o=uh("g",{});this.diagramLayer=r,r.setAttribute("style","pointer-events: all;"),o.appendChild(r),n.appendChild(o),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=Wh.createCanvas(this.element.id+"_diagram",e.width,e.height),this.diagramLayer.setAttribute("style","position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},t.prototype.initLayers=function(){var e="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",t=document.getElementById(this.element.id).getBoundingClientRect(),i=function(){var e=ph("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=ph("div",{style:"width:100%"});e.appendChild(i);var n=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),t-n}();this.scroller.scrollerWidth=i,this.scroller.setViewPortSize(t.width,t.height),this.renderRulers();window.measureElement&&(window.measureElement=null,document.getElementById("measureElement").remove());xh(),this.renderBackgroundLayer(t,e),this.renderGridLayer(t,e),this.renderDiagramLayer(t,e),this.renderHTMLLayer(t,e),this.renderPortsExpandLayer(t,e),this.renderNativeLayer(t,e),this.renderAdornerLayer(t,e)},t.prototype.renderAdornerLayer=function(e,t){var i=ph("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t}),n=this.createSvg(this.element.id+"_diagramAdorner_svg",e.width,e.height);n.setAttribute("class","e-adorner-layer"),n.setAttribute("style","pointer-events:none;"),this.adornerLayer=uh("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.setAttribute("style"," pointer-events: all; "),n.appendChild(this.adornerLayer),i.appendChild(n),this.diagramCanvas.appendChild(i);var r=uh("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(r),bh(n,{style:"pointer-events:none;"})},t.prototype.renderPortsExpandLayer=function(e,t){var i=this.createSvg(this.element.id+"_diagramPorts_svg",e.width,e.height);i.setAttribute("class","e-ports-expand-layer");var n=uh("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var r=uh("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(r),this.diagramCanvas.appendChild(i),bh(i,{style:t})},t.prototype.renderHTMLLayer=function(e,t){this.htmlLayer=ph("div",{id:this.element.id+"_htmlLayer",style:"width:"+e.width+"px; height:"+e.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=ph("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},t.prototype.renderNativeLayer=function(e,t){var i=this.createSvg(this.element.id+"_nativeLayer_svg",e.width,e.height),n=uh("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),bh(i,{class:"e-native-layer",style:t})},t.prototype.createSvg=function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return bh(n,{id:e,width:t,height:i}),n},t.prototype.initObjects=function(e){this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(e)},t.prototype.initLayerObjects=function(){for(var e=this.layers.length>1,t=[],i={},n={},r=[],o=0,a=this.nodes;o<a.length;o++){(y=a[o]).id=y.id||Ch(),this.addToLayer(y,e),i[y.id]=y}for(var s=0,l=this.connectors;s<l.length;s++){(y=l[s]).id=y.id||Ch(),this.addToLayer(y,e),i[y.id]=y}for(var c=0,h=this.layers;c<h.length;c++){for(var d=0,p=(S=h[c]).objects;d<p.length;d++){if(i[y=p[d]])if(i[y]instanceof na)if((E=i[y]).sourceID&&E.targetID){var u=i[E.sourceID],f=i[E.targetID];u&&u.wrapper&&f&&f.wrapper?this.initConnectors(i[y],S):t.push(i[y])}else this.initConnectors(i[y],S);else i[y].children?r.push(y):i[y].shape instanceof Ic&&i[y].shape.activity.subProcess.processes&&i[y].shape.activity.subProcess.processes.length>0?n[i[y].id]=y:this.initNodes(i[y],S)}if(this.bpmnModule)for(var g=0,m=this.bpmnModule.textAnnotationConnectors;g<m.length;g++){var y=m[g];this.initConnectors(y,S,!1)}}for(var v=0,b=Object.keys(n);v<b.length;v++){y=b[v];this.initObject(i[y]),this.bpmnModule.updateDocks(i[y],this)}for(var w=0,x=r;w<x.length;w++){y=x[w];var S=this.commandHandler.getObjectLayer(y);this.initNodes(i[y],S)}for(var C=0,P=t;C<P.length;C++){var E=P[C];S=this.commandHandler.getObjectLayer(E.id);this.initConnectors(E,S)}},t.prototype.addToLayer=function(e,t){var i;t&&(i=this.commandHandler.getObjectLayer(e.id)),t&&i||-1===this.activeLayer.objects.indexOf(e.id)&&this.activeLayer.objects.push(e.id),this.setZIndex(i||this.activeLayer,e)},t.prototype.updateLayer=function(e){for(var t=0,i=Object.keys(e.layers);t<i.length;t++){for(var n=i[t],r=0,o=this.layers[n].objects;r<o.length;r++){var a=o[r],s=this.nameTable[a];void 0!==e.layers[n].visible?this.updateElementVisibility(s.wrapper,s,e.layers[n].visible):!0===e.layers[n].lock&&this.unSelect(s)}void 0!==e.layers[n].lock&&(this.layers[n].lock=e.layers[n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},t.prototype.updateScrollSettings=function(e){var t=-this.scroller.horizontalOffset+e.scrollSettings.horizontalOffset||0,i=this.scroller.verticalOffset-e.scrollSettings.verticalOffset||0,n={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===t&&0===i||this.pan(t,i);var r={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},o={oldValue:n,newValue:r,source:this};y()&&(o={oldValue:n,newValue:r,source:sc(this)}),this.triggerEvent(Vi.scrollChange,o),"Canvas"===this.mode&&this.constraints&Ni.Virtualization&&this.refreshDiagramLayer()},t.prototype.initData=function(){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(this.dataBindingModule&&!(this.realActions&Yi.PreventDataInit))if(e&&this.dataSourceSettings.connectionDataSource.dataManager){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(t,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else e&&e.dataSource&&(e.dataSource.url||"BlazorAdaptor"===e.adaptorName&&!e.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},t.prototype.generateData=function(e,t){var i,n=[];for(i=0;i<e.length;i++){var r=e[i],o=t?this.makeData(r,!0):this.makeData(r,!1);!o||!o.id||Zs(n,o.id)&&Zs(n,o.id)||n.push(o)}return n},t.prototype.makeData=function(e,t){var i,n=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,r={};if(r.id=e[n.id]?e[n.id]:Ch(),n.sourceID&&(r.sourceID=e[n.sourceID]),n.targetID&&(r.targetID=e[n.targetID]),e[n.sourcePointX]&&e[n.sourcePointY]&&(r.sourcePoint={x:Number(e[n.sourcePointX]),y:Number(e[n.sourcePointY])}),e[n.targetPointX]&&e[n.targetPointY]&&(r.targetPoint={x:Number(e[n.targetPointX]),y:Number(e[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)r[n.crudAction.customFields[i]]=e[n.crudAction.customFields[i]];return r},t.prototype.initNodes=function(e,t){this.preventUpdate=!0,this.initObject(e,t),this.preventUpdate=!1},t.prototype.initConnectors=function(e,t,i){this.preventUpdate=!0,this.initObject(e,t,i),this.updateEdges(e),this.preventUpdate=!1},t.prototype.setZIndex=function(e,t){var i=e;if(-1===t.zIndex){for(;i.zIndexTable[i.objectZIndex+1];)e.objectZIndex++;t.zIndex=++i.objectZIndex}else{var n=t.zIndex;if(i.zIndexTable[n])for(var r=Object.keys(i.zIndexTable).length,o=0;o<r;o++){if(o===n){for(var a=r;a>n;a--)i.zIndexTable[a]=i.zIndexTable[a-1],this.nameTable[i.zIndexTable[a]]&&(this.nameTable[i.zIndexTable[a]].zIndex=a);i.zIndexTable[o]=t.id}0}}},t.prototype.initializeDiagramLayers=function(){this.layers;for(var e=0;e<this.layers.length;e++)if(-1!==this.layers[e].zIndex){var t=this.layers[e];this.layers[e]=this.layers[this.layers[e].zIndex],this.layers[t.zIndex]=t}for(var i=0,n=this.layers;i<n.length;i++){var r=n[i];r.zIndex=-1!==r.zIndex?r.zIndex:this.layers.indexOf(r),this.layerZIndexTable[r.zIndex]=r.id}for(e=0;e<this.layers.length;e++)for(var o=e+1;o<this.layers.length;o++)if(this.layers[e].zIndex>this.layers[o].zIndex){t=this.layers[e];this.layers[e]=this.layers[o],this.layers[o]=t}if(0===this.layers.length){this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}})}this.setActiveLayer(this.layers[this.layers.length-1].id)},t.prototype.resetTool=function(){this.eventHandler.resetTool()},t.prototype.initObjectExtend=function(e,t,i){if(i){var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds);if(t.zIndexTable[e.zIndex]=e.id,!n){for(var r=e instanceof Yc?this.nodes:this.connectors,o=0;o<=r.length;o++)r[o]&&e.id===r[o].id&&r.splice(o,1);delete t.zIndexTable[e.zIndex]}}},t.prototype.initObject=function(e,t,i,n){if(void 0===i&&(i=!0),void 0!==e){if(i&&(t||(this.addToLayer(e,!1),t=this.activeLayer),(e instanceof Yc||e instanceof na)&&this.setZIndex(t,e)),e instanceof Yc){if(i){if("helper"!==e.id)if(r=_h(this.getNodeDefaults))(o=r(e,this))&&o!==e&&Ah(o,e);this.initNode(e,this.element.id)}}else if(e instanceof na){var r,o;if(r=_h(this.getConnectorDefaults))(o=r(e,this))&&o!==e&&Ah(o,e),e.segments.length&&e.type!==e.segments[0].type&&(e.segments=[]);var a=this.nameTable[e.sourceID],s=this.nameTable[e.targetID],l=this.getConnectedPort(a,e),c=this.getConnectedPort(s,e),h=this.findInOutConnectPorts(a,!1),d=this.findInOutConnectPorts(s,!0);if((void 0!==a&&Sa(a)||""!==e.sourcePortID&&Ca(h))&&(e.sourceWrapper=this.getEndNodeWrapper(a,e,!0),e.sourcePortID&&(!l||!l.constraints||l.constraints&Ui.None||(e.sourcePortWrapper=this.getWrapper(a.wrapper,e.sourcePortID)))),(void 0!==s&&wa(s)||""!==e.targetPortID&&xa(d))&&(e.targetWrapper=this.getEndNodeWrapper(s,e,!1),e.targetPortID&&(!c||!c.constraints||c.constraints&Ui.None||(e.targetPortWrapper=this.getWrapper(s.wrapper,e.targetPortID)))),!i){var p=e.getConnectorPoints(e.type);jl(e,p)}i&&e.init(this);for(var u=0;u<e.wrapper.children.length;u++)this.pathTable[e.wrapper.children[u].data]&&(e.wrapper.children[u].absoluteBounds=this.pathTable[e.wrapper.children[u].data].absoluteBounds);e.wrapper.measure(new ei(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize);for(var f=0;f<e.wrapper.children.length;f++)this.pathTable[e.wrapper.children[f].data]={},this.pathTable[e.wrapper.children[f].data].absoluteBounds=e.wrapper.children[f].absoluteBounds}if(e instanceof Yc&&e.children&&e.container)for(var g=0;g<e.children.length;g++)this.nameTable[e.children[g]].offsetX=this.nameTable[e.children[g]].wrapper.offsetX,this.nameTable[e.children[g]].offsetY=this.nameTable[e.children[g]].wrapper.offsetY;if(this.bpmnModule&&e instanceof Yc&&"Bpmn"===e.shape.type&&e.shape.annotations.length>0&&this.bpmnModule.updateQuad(e,this),this.initObjectExtend(e,t,i),this.nameTable[e.id]=e,e instanceof Yc&&e.children){n||e.container||this.updateGroupOffset(e,!0),this.groupTable[e.id]=e.children;for(g=0;g<e.children.length;g++){var m=this.nameTable[e.children[g]];m&&(m.parentId=e.id)}this.isLoading||!e.rotateAngle||e.container||this.commandHandler.rotateObjects(e,[e],e.rotateAngle,{x:e.offsetX,y:e.offsetY},!1)}this.updateQuad(e)}!1===e.visible&&this.updateElementVisibility(e.wrapper,e,!1)},t.prototype.getConnectedPort=function(e,t){if(e&&e.ports)for(var i=0,n=e.ports;i<n.length;i++){var r=n[i];if(r.id===t.sourcePortID)return r;if(r.id===t.targetPortID)return r}return null},t.prototype.scaleObject=function(e,t,i){var n=i?e.wrapper.actualSize.width:e.wrapper.actualSize.height,r=i?1+(t-n)/n:1,o=i?1:1+(t-n)/n;e.offsetX,e.offsetY;this.realActions|=Yi.PreventDrag,this.scale(e,r,o,{x:.5,y:.5}),this.realActions&=~Yi.PreventDrag},t.prototype.updateDefaultLayoutIcons=function(e){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(e,e.expandIcon),this.updateDefaultLayoutIcon(e,e.collapseIcon))},t.prototype.updateDefaultLayoutIcon=function(e,t){if("None"!==t.shape&&"Auto"===t.horizontalAlignment&&"Auto"===t.verticalAlignment&&.5===t.offset.x&&1===t.offset.y){var i=this.getWrapper(e.wrapper,"icon_content"),n=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,r=.5),i.setOffsetWithRespectToBounds(n,r,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",e.wrapper.measure(new ei(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)}},t.prototype.updateGroupOffset=function(e,t){if(e.children&&e.children.length>0&&!e.container||e.processId){var i=this.nameTable[e.id];if(!(this.realActions&Yi.PreventScale)&&!(this.realActions&Yi.PreventDrag)){if(!i.offsetX||this.diagramActions&Wi.ToolAction||this.diagramActions&Wi.PublicMethod)i.offsetX=e.wrapper.offsetX;else{this.realActions|=Yi.PreventScale;var n=i.offsetX-e.wrapper.offsetX;i.offsetX=e.wrapper.offsetX;var r=i.offsetY-e.wrapper.offsetY;i.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(i,n,r),this.realActions&=~Yi.PreventScale}if(!i.offsetY||this.diagramActions&Wi.ToolAction)i.offsetY=e.wrapper.offsetY;else{this.realActions|=Yi.PreventScale;r=i.offsetY-e.wrapper.offsetY;i.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(i,0,r),this.realActions&=~Yi.PreventScale}this.diagramActions&&(i.width=e.wrapper.actualSize.width,i.height=e.wrapper.actualSize.height)}}t&&e.children&&e.children.length>0&&(void 0!==this.nameTable[e.id].width?this.scaleObject(e,this.nameTable[e.id].width,!0):this.nameTable[e.id].width=e.wrapper.actualSize.width,void 0!==this.nameTable[e.id].height?this.scaleObject(e,this.nameTable[e.id].height,!1):this.nameTable[e.id].height=e.wrapper.actualSize.height)},t.prototype.initNode=function(e,t,i){var n,r,o=e.initContainer(),a=new un;if(o.children||(o.children=[]),e.children){if(o.measureChildren=!1,e.container&&"Grid"===e.container.type)for(var s=0;s<e.children.length;s++){var l=new un,c=this.nameTable[e.children[s]];l.children=[],l.children.push(c.wrapper),c&&o.addObject(c.wrapper,c.rowIndex,c.columnIndex,c.rowSpan,c.columnSpan)}else for(s=0;s<e.children.length;s++)if(this.nameTable[e.children[s]]){c=this.nameTable[e.children[s]];this.updateStackProperty(e,c,s),o.children.push(c.wrapper),o.elementActions=o.elementActions|Ii.ElementIsGroup,c.wrapper.flip="None"===c.wrapper.flip?e.wrapper.flip:c.wrapper.flip}a.id=e.id+"group_container",a.style.fill="none",a.style.strokeColor="none",a.horizontalAlignment="Stretch",a.verticalAlignment="Stretch",o.style=e.style,a.children=[],a.preventContainer=!0,e.container&&(a.relativeMode="Object"),e.container&&"Grid"===e.container.type||o.children.push(a)}else{var h=_h(this.setNodeTemplate);h&&(n=h(e,this)),n||(n=e.init(this)),o.children.push(n)}r=_h(this.getDescription),(e.children?o:n).description=r||(e.annotations.length?e.annotations[0].content:e.id);var d=e.children?a:o;e.initAnnotations(this.getDescription,d,this.element.id,!!Oa(this)),e.initPorts(this.getDescription,d),e.initIcons(this.getDescription,this.layout,d,t),"SwimLane"===e.shape.type&&e.wrapper&&e.wrapper.children.length>0&&e.wrapper.children[0]instanceof Ka?(Ss(e),Ps(this,e)):(o.measure(new ei(e.width,e.height)),o instanceof Ka?o.arrange(o.desiredSize,!0):o.arrange(o.desiredSize)),"None"!==e.wrapper.flip&&e.wrapper.elementActions&Ii.ElementIsGroup&&nc(e.wrapper,e.wrapper.offsetX,e.wrapper.offsetY,this,e.wrapper.flip),e instanceof Yc&&e.container&&(e.width<o.outerBounds.width||e.height<o.outerBounds.height)&&o.bounds.x<=o.outerBounds.x&&o.bounds.y<=o.outerBounds.y&&(e.width=o.width=o.outerBounds.width,e.height=o.height=o.outerBounds.height,o.measure(new ei(e.width,e.height)),o.arrange(o.desiredSize)),e.container&&"Grid"===e.container.type&&e.children&&e.children.length>0&&this.updateChildPosition(e)},t.prototype.updateChildPosition=function(e){for(var t=0;t<e.children.length;t++){var i=this.getObject(e.children[t]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},t.prototype.canExecute=function(){return!0},t.prototype.updateStackProperty=function(e,t,i){e.container&&"Stack"===e.container.type&&(t.width||(t.wrapper.horizontalAlignment="Stretch",t.horizontalAlignment="Stretch"),t.height||(t.verticalAlignment="Stretch",t.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===e.shape.type&&(t.umlIndex=i))},t.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},t.prototype.initCommands=function(){var e=this.commandManager.commands,t={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.C,keyModifiers:Bi.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.V,keyModifiers:Bi.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.X,keyModifiers:Bi.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.A,keyModifiers:Bi.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.Z,keyModifiers:Bi.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.Y,keyModifiers:Bi.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:_i.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:_i.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:_i.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:_i.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:_i.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:_i.Tab,keyModifiers:Bi.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:_i.Enter}}};this.initCommandManager(e,t)},t.prototype.overrideCommands=function(e,t){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(i=t[o],e.gesture.key===i.gesture.key&&e.gesture.keyModifiers===i.gesture.keyModifiers){delete t[o];break}}},t.prototype.initCommandManager=function(e,t){var i=0;if(e)for(i=0;i<e.length;i++)t[e[i].name]&&e[i]?(e[i].canExecute&&(t[e[i].name].canExecute=e[i].canExecute),e[i].execute&&(t[e[i].name].execute=e[i].execute),(e[i].gesture.key||e[i].gesture.keyModifiers)&&(t[e[i].name].gesture=e[i].gesture),""!==e[i].parameter&&(t[e[i].name].parameter=e[i].parameter)):(this.overrideCommands(e[i],t),t[e[i].name]={execute:e[i].execute,canExecute:e[i].canExecute,gesture:e[i].gesture,parameter:e[i].parameter});this.commands=t},t.prototype.updateNodeEdges=function(e){for(var t=0,i=e.inEdges;t<i.length;t++){var n=i[t];this.nameTable[n]&&(this.nameTable[n].targetID="")}for(var r=0,o=e.outEdges;r<o.length;r++){n=o[r];this.nameTable[n]&&(this.nameTable[n].sourceID="")}e.inEdges=[],e.outEdges=[]},t.prototype.updateIconVisibility=function(e,t){for(var i=0;i<e.wrapper.children.length;i++){var n=e.wrapper.children[i];if(n.id){var r=n.id.split(e.id)[1];r&&r.match("^_icon")&&(n.visible=t,this.updateDiagramContainerVisibility(n,t))}}},t.prototype.updateEdges=function(e){var t;void 0!==e.sourceID&&""!==e.sourceID&&((t=this.nameTable[e.sourceID])&&t.outEdges&&0===t.outEdges.length&&(t.outEdges=[]),t&&t.outEdges&&-1===t.outEdges.indexOf(e.id)&&t.outEdges.push(e.id));if(void 0!==e.targetID&&""!==e.targetID&&((t=this.nameTable[e.targetID])&&t.inEdges&&0===t.inEdges.length&&(t.inEdges=[]),t&&t.inEdges&&-1===t.inEdges.indexOf(e.id)&&t.inEdges.push(e.id),t&&t.visible&&t.outEdges)){var i=0!==t.outEdges.length;this.updateIconVisibility(t,i)}},t.prototype.refreshDiagram=function(){this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize()},t.prototype.updateCanupdateStyle=function(e,t){for(var i=0;i<e.length;i++)e[i].children&&this.updateCanupdateStyle(e[i].children,t),e[i].canApplyStyle=t},t.prototype.getZindexPosition=function(e,t){var i,n=[],r=void 0;if(n=(n=n.concat(this.nodes)).concat(this.connectors),-1!==e.zIndex)for(var o=0;o<n.length;o++)n[o].zIndex>e.zIndex&&("HTML"!==e.shape.type&&"Native"!==e.shape.type||(i="HTML"===e.shape.type?"html":"native"),r=ih(t,n[o].id,i));return r},t.prototype.updateDiagramObject=function(e,t){for(var i,n=0,r=this.views;n<r.length;n++){var o=r[n];if(i=this.views[o],this.diagramActions&&"SVG"===i.mode){var a=void 0;if(this.layers.length>1&&(a=this.commandHandler.getObjectLayer(e.id)),void 0===a||a&&a.visible){var s=dh(this.element.id),l=document.getElementById(i.element.id+"_diagramLayer");this.diagramActions&Wi.Interactions&&this.updateCanupdateStyle(e.wrapper.children,!0),this.diagramRenderer.updateNode(e.wrapper,l,s,void 0,t?void 0:this.getZindexPosition(e,i.element.id)),this.updateCanupdateStyle(e.wrapper.children,!0)}}}},t.prototype.updateGridContainer=function(e){for(var t,i=dh(this.element.id),n=0,r=this.views;n<r.length;n++){var o=r[n];if("SVG"===(t=this.views[o]).mode&&this.diagramActions){var a=document.getElementById(t.element.id+"_diagramLayer");this.diagramRenderer.updateNode(e,a,i,void 0)}else this.refreshCanvasDiagramLayer(t)}},t.prototype.getObjectsOfLayer=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];this.nameTable[r]&&t.push(this.nameTable[r])}return t},t.prototype.refreshDiagramLayer=function(){for(var e,t=0,i=this.views;t<i.length;t++){var n=i[t];switch((e=this.views[n]).mode){case"SVG":this.refreshSvgDiagramLayer(e);break;case"Canvas":this.refreshCanvasLayers(e)}}},t.prototype.refreshCanvasLayers=function(e){if(e)this.refreshCanvasDiagramLayer(e);else for(var t=0,i=this.views;t<i.length;t++){var n=i[t],r=this.views[n];this.refreshCanvasDiagramLayer(r)}},t.prototype.renderBasicElement=function(e){for(var t=dh(e.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[i];n instanceof cn&&(n.prevRotateAngle=0),n.measure(new ei(n.width,n.height)),n.arrange(n.desiredSize),e.diagramRenderer.renderElement(n,e.diagramLayer,t)}},t.prototype.refreshElements=function(e){if(!this.isDestroyed){this.clearCanvas(e),e instanceof t&&(e.diagramLayer.getContext("2d").setTransform(e.scroller.currentZoom,0,0,e.scroller.currentZoom,0,0),e.diagramLayer.getContext("2d").scale(1.5,1.5));var i=dh(e.element.id);this.spatialSearch.getPageBounds();this.renderDiagramElements(e.diagramLayer,e.diagramRenderer,i);for(var n=0;n<this.basicElements.length;n++){var r=this.basicElements[n];r.measure(new ei(r.width,r.height)),r.arrange(r.desiredSize),e.diagramRenderer.renderElement(r,e.diagramLayer,i)}e instanceof t&&(e.diagramLayer.style.transform="scale("+2/3+")",e.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},t.prototype.refreshCanvasDiagramLayer=function(e){var t=this;"SVG"===e.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(e),!this.diagramActions||0===(this.diagramActions&Wi.Render)||Wi.ToolAction&this.diagramActions||Oa(this)||1!==this.scroller.currentZoom?this.refreshElements(e):this.renderTimer||(this.renderTimer=setTimeout(function(){t.refreshElements(e)},40)))},t.prototype.updatePortVisibility=function(e,t,i){var n,r=!this.drawingObject||!this.drawingObject.shape;if(e instanceof Yc&&r&&fa(e)){for(var o=e.ports,a=!1,s=0;s<o.length;s++)n=this.getWrapper(e.wrapper,o[s].id),(t&Mi.Hover||t&Mi.Connect)&&_l(o[s],t)&&(n.visible=!i,a=!0);a&&this.updateDiagramObject(e)}},t.prototype.refreshSvgDiagramLayer=function(e){var t,i=document.getElementById(e.element.id+"_diagramLayer"),n=dh(e.element.id);if(Oa(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)(t=this.basicElements[r]).measure(new ei(t.width,t.height)),t.arrange(t.desiredSize,!(this.diagramActions&Wi.Render)),this.diagramRenderer.renderElement(t,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},t.prototype.removeVirtualObjects=function(e){if(this.deleteVirtualObject){for(var t=0;t<this.scroller.removeCollection.length;t++){var i=this.nameTable[this.scroller.removeCollection[t]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(e)},t.prototype.updateTextElementValue=function(e){for(var t=0;t<e.wrapper.children.length;t++){var i=e.wrapper.children[t];i instanceof dn&&(i.canMeasure=!0,i.measure(new ei(e.width,e.height)),i.arrange(i.desiredSize))}},t.prototype.updateVirtualObjects=function(e,t,i){var n=document.getElementById(this.element.id+"_diagramLayer"),r=dh(this.element.id);if("SVG"===this.mode){for(var o=0;o<e.length;o++){var a=this.scroller.removeCollection.indexOf(e[o]);a>=0&&this.scroller.removeCollection.splice(a,1);var s=this.nameTable[e[o]];this.updateTextElementValue(s),this.diagramRenderer.renderElement(s.wrapper,n,r,void 0,void 0,void 0,void 0,s.zIndex)}for(var l=0;l<i.length;l++)this.scroller.removeCollection.push(i[l]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},t.prototype.renderDiagramElements=function(e,t,i,n,r,o){void 0===n&&(n=!0);var a=this.scroller.getPageBounds();a.x*=this.scroller.currentZoom,a.y*=this.scroller.currentZoom,a.width*=this.scroller.currentZoom,a.height*=this.scroller.currentZoom;for(var s=-this.scroller.horizontalOffset-a.x,l=-this.scroller.verticalOffset-a.y,c=0,h=Object.keys(this.layerZIndexTable);c<h.length;c++){var d=h[c],p=this.commandHandler.getLayer(this.layerZIndexTable[d]),u=void 0,f=void 0;"Canvas"===this.mode&&Oa(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var g="Canvas"===this.mode&&Oa(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,m=0,y=Object.keys(g||p.zIndexTable);m<y.length;m++){var v=y[m],b=g?this.nameTable[g[v]]:this.nameTable[p.zIndexTable[v]];if(b&&!b.parentId&&p.visible&&!b.processId){var w={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};if(Oa(this)){if(this.scroller.currentZoom<1){if(a.x<0||this.scroller.horizontalOffset<0){var x=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;u=(s>0?s:0)+"px",f=(this.realActions&Yi.vScrollbarMoved?0:-x)+"px"}else u="0px",f="0px";this.realActions&Yi.hScrollbarMoved&&(this.realActions=this.realActions&~Yi.hScrollbarMoved),this.realActions&Yi.vScrollbarMoved&&(this.realActions=this.realActions&~Yi.vScrollbarMoved)}else u=(a.x<0?s:-this.scroller.horizontalOffset)+"px",f=(a.y<0?l:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=u,this.diagramLayer.style.top=f,w.tx=this.scroller.horizontalOffset/w.scale,w.ty=this.scroller.verticalOffset/w.scale}var S=!0;r&&(S=!1),this.updateTextElementValue(b),t.renderElement(b.wrapper,e,i,!t.isSvgMode&&n?w:void 0,void 0,void 0,S&&(!this.diagramActions||o))}}}},t.prototype.updateBridging=function(e){if(this.bridgingModule)for(var t=0;t<this.connectors.length;t++){var i=this.connectors[t];this.bridgingModule.updateBridging(i,this);var n=this.connectors[t].wrapper;if(n){var r=n.children[0],o=r.data;i.getSegmentElement(i,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),r.data!==o&&(n.measure(new ei),n.arrange(n.desiredSize),"SVG"!==this.mode||e||this.updateDiagramObject(i))}}},t.prototype.setCursor=function(e){this.diagramRenderer.setCursor(this.diagramCanvas,e)},t.prototype.clearCanvas=function(e){var t,i;(t=e.contentWidth||e.diagramLayer.width/this.scroller.currentZoom,i=e.contentHeight||e.diagramLayer.height/this.scroller.currentZoom,"SVG"!==e.mode)&&Wh.getContext(e.diagramLayer).clearRect(0,0,t,i)},t.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),la(this),Oa(this)&&this.scroller.virtualizeElements()},t.prototype.setOffset=function(e,t){var i=document.getElementById(this.element.id+"content");i&&(i.scrollLeft=e,i.scrollTop=t)},t.prototype.setSize=function(e,t){if(this.diagramLayer&&!this.preventUpdate){var i=ha(this);e-=i.width,t-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var r="SVG"===this.mode?1:1.5,o="SVG"===this.mode?eh(this.element.id):this.diagramLayer,a="Canvas"===this.mode&&this.constraints&Ni.Virtualization?this.scroller.viewPortWidth:e,s="Canvas"===this.mode&&this.constraints&Ni.Virtualization?this.scroller.viewPortHeight:t;o.setAttribute("width",(r*a).toString()),o.setAttribute("height",(r*s).toString());var l={width:e.toString(),height:t.toString()};this.diagramLayerDiv.style.width=e+"px",this.diagramLayerDiv.style.height=t+"px",bh(ah(this.element.id),l),bh(th(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],l);var c=nh(this.element.id);bh(c,l),c.parentNode.style.width=e+"px",c.parentNode.style.height=t+"px";var h=sh(this.element.id);bh(h,l),this.diagramRenderer.updateGrid(this.snapSettings,h,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),bh(lh(this.element.id),l),this.htmlLayer.style.width=e+"px",this.htmlLayer.style.height=t+"px","SVG"===this.mode||Oa(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&Oa(this)&&this.scroller.virtualizeElements()}},t.prototype.transformLayers=function(){var e=this.spatialSearch.getPageBounds();e.x*=this.scroller.currentZoom,e.y*=this.scroller.currentZoom,e.width*=this.scroller.currentZoom,e.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,sh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.updateSelector(),this.renderPageBreaks(e)},t.prototype.removePageBreaks=function(){if(this.diagramLayer){var e=ch(this.element.id);if(e&&e.childNodes)for(var t=e.childNodes.length,i=0;i<t;i++)e.removeChild(e.childNodes[0])}},t.prototype.renderPageBreaks=function(e){this.removePageBreaks();var t=ch(this.element.id);if(t){var i=0;e=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+e.x)*this.scroller.currentZoom,r=(this.scroller.transform.ty+e.y)*this.scroller.currentZoom,o=e.height*this.scroller.currentZoom,a=e.width*this.scroller.currentZoom;Yh.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,r,a,o);var s={id:t.id+"rect",x:n,y:r,height:o,width:a,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(t,s),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(e);for(i=0;i<l.length;i++)this.diagramRenderer.drawLine(t,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[i].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[i].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[i].y1===l[i].y2?"HorizontalLines":"VerticalLines"})}}},t.prototype.validatePageSize=function(){var e=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(e=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=e):this.pageSettings.height>this.pageSettings.width&&(e=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=e)},t.prototype.setOverview=function(e,t){if(e)e&&(this.views.push(e.id),this.views[e.id]=e,e.renderDocument(e),e.diagramRenderer.setLayers(),e.updateView(e),this.renderNodes(e));else{for(var i=0;i<this.views.length;i++)this.views[i]===t&&(e=this.views[t]);this.views[t]=void 0;var n=this.views.indexOf(t);this.views.splice(n,1)}},t.prototype.renderNodes=function(e){if(e){var t=new Yh(e.id,new Fh,!1),i=document.getElementById(e.element.id+"_diagramLayer"),n=dh(e.element.id);this.renderDiagramElements(i,e.diagramRenderer||t,n,void 0,void 0,!0)}},t.prototype.updateThumbConstraints=function(e,t,i){for(var n=e.length,r=0;r<n;r++){var o=e[r],a=!1,s=!1,l=t.thumbsConstraints;o instanceof Yc?(a="Bpmn"===o.shape.type&&"Activity"===o.shape.shape&&!1===o.shape.activity.subProcess.collapsed||"TextAnnotation"===o.shape.shape,s="Bpmn"===o.shape.type&&"TextAnnotation"===o.shape.shape,va(o)&&l&Ri.Rotate&&!a||(l&=~Ri.Rotate),Pa(o,"SouthEast")&&l&Ri.ResizeSouthEast&&!s||(l&=~Ri.ResizeSouthEast),Pa(o,"NorthWest")&&l&Ri.ResizeNorthWest&&!s||(l&=~Ri.ResizeNorthWest),Pa(o,"East")&&l&Ri.ResizeEast&&!s||(l&=~Ri.ResizeEast),Pa(o,"West")&&l&Ri.ResizeWest&&!s||(l&=~Ri.ResizeWest),Pa(o,"North")&&l&Ri.ResizeNorth&&!s||(l&=~Ri.ResizeNorth),Pa(o,"South")&&l&Ri.ResizeSouth&&!s||(l&=~Ri.ResizeSouth),Pa(o,"NorthEast")&&l&Ri.ResizeNorthEast&&!s||(l&=~Ri.ResizeNorthEast),Pa(o,"SouthWest")&&l&Ri.ResizeSouthWest&&!s||(l&=~Ri.ResizeSouthWest)):o instanceof na?(i||(l|=Ri.Default),ga(o)?l|=Ri.ConnectorSource:l&=~Ri.ConnectorSource,ma(o)?l|=Ri.ConnectorTarget:l&=~Ri.ConnectorTarget):(i||(l|=Ri.Default),Pa(o)||(l&=~(Ri.ResizeSouthEast|Ri.ResizeSouthWest|Ri.ResizeSouth|Ri.ResizeEast|Ri.ResizeWest|Ri.ResizeNorth|Ri.ResizeNorthEast|Ri.ResizeNorthWest)),va(o)||(l&=~Ri.Rotate)),t.thumbsConstraints=l}},t.prototype.renderSelector=function(e,t){var i=new ei,n=this.selectedItems,r=(n.constraints,this.diagramRenderer.rendererActions);if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(r,Fi.DrawSelectorBorder):this.removeConstraints(r,Fi.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===n.nodes.length&&0===n.connectors.length&&(n.rotateAngle=n.nodes[0].rotateAngle,n.pivot=n.nodes[0].pivot),n.wrapper.measure(i),n.wrapper.arrange(n.wrapper.desiredSize),n.width=n.wrapper.actualSize.width,n.height=n.wrapper.actualSize.height,n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY,0!==n.rotateAngle){for(var o=0,a=n.nodes;o<a.length;o++){var s=a[o];s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY}for(var l=0,c=n.connectors;l<c.length;l++)c[l]}var h;this.spatialSearch.getPageBounds();if(h=rh(this.element.id),n.thumbsConstraints=Ri.Default,n.annotation?this.updateThumbConstraints([n.annotation],n):(this.updateThumbConstraints(n.nodes,n),this.updateThumbConstraints(n.connectors,n,!0)),n.annotation)this.renderSelectorForAnnotation(n,h);else if(n.nodes.length+n.connectors.length===1){if(n.nodes[0]instanceof Yc){var d=n.nodes[0];ls(this,d)&&(t||"UmlClassifier"===d.shape.type||d.parentId&&this.nameTable[d.parentId]&&"UmlClassifier"===this.nameTable[d.parentId].shape.type||((!d.container||"Canvas"!==d.container.type&&"Grid"!==d.container.type)&&(n.nodes[0].constraints&=~(ki.Rotate|ki.HideThumbs)),n.thumbsConstraints&=~Ri.Rotate));var p=!!t||!!(d.constraints&ki.HideThumbs),u=!!("SwimLane"===d.shape.type||d.isLane||d.isPhase||t);this.diagramRenderer.renderResizeHandle(n.wrapper.children[0],h,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,void 0,fa(d),p,u)}else if(n.connectors[0]instanceof na&&za(this.diagramRenderer.rendererActions)){var f=n.connectors[0];this.diagramRenderer.renderEndPointHandle(f,h,n.thumbsConstraints,n.constraints,this.scroller.transform,void 0!==f.sourceWrapper,void 0!==f.targetWrapper,!(!this.connectorEditingToolModule||!ya(f)))}}else this.diagramRenderer.renderResizeHandle(n.wrapper,h,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,void 0,fa(n));n.annotation||this.currentSymbol||this.diagramRenderer.renderUserHandler(n,h,this.scroller.transform)}},t.prototype.updateSelector=function(){var e=new ei,t=this.selectedItems,i=t.constraints;if(this.diagramActions&Wi.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==t.wrapper&&t.wrapper.children&&t.wrapper.children.length)){if(t.wrapper.measure(e),t.wrapper.arrange(t.wrapper.desiredSize),0!==t.rotateAngle||t.rotateAngle!==t.wrapper.prevRotateAngle)for(var n=0,r=t.nodes;n<r.length;n++){var o=r[n];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY}t.width=t.wrapper.actualSize.width,t.height=t.wrapper.actualSize.height,t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY;var a;a=rh(this.element.id);var s=this.eventHandler.canHideResizers();if(t.thumbsConstraints=Ri.Default,t.annotation?this.updateThumbConstraints([t.annotation],t):(this.updateThumbConstraints(t.nodes,t),this.updateThumbConstraints(t.connectors,t,!0)),this.selectedItems.constraints&Ai.UserHandle&&!t.annotation&&!this.currentSymbol&&this.diagramRenderer.renderUserHandler(t,a,this.scroller.transform),t.annotation)this.renderSelectorForAnnotation(t,a);else if(t.nodes.length+t.connectors.length===1){if(t.connectors[0]instanceof na&&za(this.diagramRenderer.rendererActions)){var l=t.connectors[0];this.diagramRenderer.renderEndPointHandle(l,a,t.thumbsConstraints,i,this.scroller.transform,void 0!==l.sourceWrapper,void 0!==l.targetWrapper,!(!this.connectorEditingToolModule||!ya(l)))}else if(t.nodes[0]instanceof Yc){var c=t.nodes[0];ls(this,t.nodes[0])&&("UmlClassifier"===c.shape.type||c.parentId&&this.nameTable[c.parentId]&&"UmlClassifier"===this.nameTable[c.parentId].shape.type||((!c.container||"Canvas"!==c.container.type&&"Grid"!==c.container.type)&&(t.nodes[0].constraints&=~(ki.HideThumbs|ki.Rotate)),t.thumbsConstraints&=~Ri.Rotate));var h=!("SwimLane"!==c.shape.type&&!c.isLane&&!c.isPhase);this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],a,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,s,fa(t.nodes[0]),!!(t.nodes[0].constraints&ki.HideThumbs),h)}}else this.diagramActions&Wi.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Fi.PreventRenderSelector),this.diagramRenderer.renderResizeHandle(t.wrapper,a,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,s,fa(t)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Fi.PreventRenderSelector}},t.prototype.renderSelectorForAnnotation=function(e,t){this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],t,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,void 0,fa(e.annotation))},t.prototype.drawSelectionRectangle=function(e,t,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(e,t,i,n,this.adornerLayer,this.scroller.transform)},t.prototype.renderHighlighter=function(e){var t=nh(this.element.id);this.diagramRenderer.renderHighlighter(e,t,this.scroller.transform)},t.prototype.clearHighlighter=function(){var e=nh(this.element.id),t=e.getElementById(e.id+"_highlighter");t&&t.parentNode.removeChild(t)},t.prototype.getNodesConnectors=function(e){for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];e.push(i)}for(t=0;t<this.connectors.length;t++){var n=this.connectors[t];e.push(n)}return e},t.prototype.clearSelectorLayer=function(){var e=nh(this.element.id);if(this.currentSymbol){var t=e.getElementById("borderRect_symbol");t&&t.parentNode.removeChild(t)}else{var i=e.getElementById(this.adornerLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter();for(var n=rh(this.element.id).childNodes,r=void 0,o=n.length;o>0;o--)(r=n[o-1]).parentNode.removeChild(r)}},t.prototype.getWrapper=function(e,t){var i;t=e.id+"_"+t;for(var n=e instanceof un?e:this.getPortContainer(this.nameTable[e.id]),r=0;r<n.children.length;r++)t===n.children[r].id&&(i=n.children[r]);return i},t.prototype.getEndNodeWrapper=function(e,t,i){if("Bpmn"===e.shape.type&&e.wrapper.children[0]instanceof un){if("Activity"===e.shape.shape){if(i&&"Transaction"===e.shape.activity.subProcess.type&&t.sourcePortID){var n=t.sourcePortID,r=e.wrapper.children[0].children[0].children[2];if(r.children)for(var o=0,a=r.children;o<a.length;o++){var s=a[o];if(s.visible&&s.id===e.id+"_"+n)return s.children[0]}}return e.wrapper.children[0].children[0].children[0]}return e.wrapper.children[0].children[0]}return this.containsMargin(e.wrapper.children[0])||e.children?e.wrapper:e.wrapper.children[0]},t.prototype.containsMargin=function(e){return e.margin&&(0!==e.margin.left||0!==e.margin.top||0!==e.margin.right||0!==e.margin.bottom)},t.prototype.focusOutEdit=function(){this.endEdit()},t.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},t.prototype.endEdit=function(){if(this.diagramActions&Wi.TextEdit){var e=document.getElementById(this.element.id+"_editBox"),t=e.value;S.remove(e,"input",this.eventHandler.inputChange),S.remove(e,"focusout",this.focusOutEdit);var i=document.getElementById(this.element.id+"_editTextBoxDiv"),n={oldValue:this.activeLabel.text,newValue:t,cancel:!1},r=!1,o=void 0;i.parentNode.removeChild(i);var a=void 0;if(this.bpmnModule&&(o=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),a=this.bpmnModule.getTextAnnotationWrapper(o,this.activeLabel.id),(r=!!o)&&(i.textContent===t&&t===this.activeLabel.text||(this.triggerEvent(Vi.textEdit,n),n.cancel||this.bpmnModule.updateTextAnnotationContent(o,this.activeLabel,t,this)))),!r){o=this.nameTable[this.activeLabel.parentId];var s=this.eventHandler.isAddTextNode(o,!0);s||i.textContent===t&&t===this.activeLabel.text||this.triggerEvent(Vi.textEdit,n),a||(a=this.getWrapper(o.wrapper,this.activeLabel.id));var l=Wl(o,this.activeLabel.id);if(l.content===t||n.cancel||(o.parentId&&"UmlClassifier"===this.nameTable[o.parentId].shape.type&&-1===t.indexOf("+")&&-1===t.indexOf("-")&&-1===t.indexOf("#")&&-1===t.indexOf("~")&&-1===o.id.indexOf("_umlClass_header")&&(t=" + "+t),(o.isLane||o.isPhase)&&this.protectPropertyChange(!0),l.content=t,this.dataBind(),this.updateSelector(),(o.isLane||o.isPhase)&&this.protectPropertyChange(!1)),s&&(this.removeObjectsFromLayer(o),this.removeFromAQuad(o),delete this.nameTable[this.activeLabel.parentId],""!==t)){this.clearSelection();var c=Oh(o);o=this.add(c),this.updateDiagramObject(o),this.commandHandler.select(this.nameTable[o.id])}}if(this.selectedItems.nodes.length){var h=this.nameTable[this.activeLabel.parentId],d=this.nameTable[h.parentId];if(d&&"SwimLane"===d.shape.type||"SwimLane"===h.shape.type){if("SwimLane"===h.shape.type&&(d=this.nameTable[this.activeLabel.parentId],h=o),h.isLane||h.isPhase)for(var p=h.isLane?d.shape.lanes:d.shape.phases,u=0;u<p.length;u++)p[u].id===(h.LaneHeaderParent||h.PhaseHeaderParent)&&(p[u].header.annotation.content=h.annotations[0].content);else h.isHeader&&d.shape.hasHeader&&(d.shape.header.annotation.content=h.annotations[0].content)}this.dataBind()}a.visible=!0,this.updateDiagramObject(o),this.diagramActions=this.diagramActions&~Wi.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0}}},t.prototype.canLogChange=function(){return!(!(this.diagramActions&Wi.Render)||this.diagramActions&Wi.ToolAction||this.diagramActions&Wi.UndoRedo||this.diagramActions&Wi.PublicMethod)},t.prototype.modelChanged=function(e,t){return!!(e.connectors||t.connectors||e.nodes||t.connectors||e.pageSettings||t.pageSettings||e.bridgeDirection||t.bridgeDirection)},t.prototype.resetDiagramActions=function(e){var t=!!e;this.diagramActions&Wi.UndoRedo&&(!t||e===Wi.UndoRedo)&&(this.diagramActions=this.diagramActions&~Wi.UndoRedo),this.diagramActions&Wi.PublicMethod&&(!t||e===Wi.PublicMethod)&&(this.diagramActions=this.diagramActions&~Wi.PublicMethod)},t.prototype.removeNode=function(e){this.removeObjectsFromLayer(e),this.removeFromAQuad(this.nameTable[e.id]),delete this.nameTable[e.id],e.children&&delete this.groupTable[e.id],this.nodes.splice(this.nodes.indexOf(e),1)},t.prototype.deleteGroup=function(e){var t=[];e.children&&(t=this.commandHandler.getChildren(e,[]));for(var i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}},t.prototype.updateObject=function(e,t,i){if(!(this.diagramActions&Wi.ToolAction)){var n=e.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,n))if(e instanceof Yc){for(var r=t,o=0,a=Object.keys(i);o<a.length;o++){switch(c=a[o]){case"width":e.width=r.width;break;case"height":e.height=r.height;break;case"offsetX":e.offsetX=r.offsetX;break;case"offsetY":e.offsetY=r.offsetY;break;case"rotateAngle":e.rotateAngle=r.rotateAngle}}this.nodePropertyChange(e,i,t)}else{for(var s=0,l=Object.keys(i);s<l.length;s++){var c=l[s],h=t,d=e.sourcePoint,p=e.targetPoint;switch(c){case"sourcePoint":d.x=h.sourcePoint.x||d.x,d.y=h.sourcePoint.y||d.y;break;case"targetPoint":p.x=h.targetPoint.x||p.x,p.y=h.targetPoint.y||p.y}}this.connectorPropertyChange(e,i,t)}}},t.prototype.nodePropertyChangeExtend=function(e,t,i,n){return void 0!==i.style&&"Bpmn"!==e.shape.type&&(El(i.style,e.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(e.shadow,i.shadow),n=!0),void 0!==i.constraints&&(t.constraints&ki.Select&&!(i.constraints&ki.Select)&&wd(this,e)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(e,t,i,n),n},t.prototype.swimLaneNodePropertyChange=function(e,t,i,n){if("SwimLane"===e.shape.type&&!this.currentSymbol){if(t.shape){var r=i.shape,o=e.shape,a="Horizontal"===o.orientation,s=o.padding,l=t.shape,c=e.wrapper.children[0],h=void 0,d=void 0,p=void 0;if(l.lanes||l.phases){if(l.lanes)for(var u=0,f=Object.keys(r.lanes);u<f.length;u++){var g=f[u],m=Number(g),y=l.lanes[m],v=void 0,b=r.lanes[m];if(b&&b.header&&(p=o.lanes[m].header.id,h=y.header,d=b.header,this.nodePropertyChange(this.nameTable[p],h,d)),y.children)for(var w=0,x=Object.keys(y.children);w<x.length;w++){var S=x[w];p=o.lanes[m].children[Number(S)].id;var C=this.nameTable[p];h=y.children[Number(S)],d=b.children[Number(S)],this.nodePropertyChange(C,h,d)}y.width&&!a&&(v=o.phases&&o.phaseSize?m+1:m,c.updateColumnWidth(v,b.width,!0,s)),y.height&&a&&(v=o.header&&o.hasHeader?m+1:m,v+=o.phases&&o.phaseSize?1:0,c.updateRowHeight(v,b.height,!0,s))}if(r.phases)for(var P=0,E=Object.keys(r.phases);P<E.length;P++){var O=E[P],M=(m=Number(O),r.phases[m]),T=void 0,A=o.header&&o.hasHeader?1:0;if(M&&M.header&&(p=o.phases[m].header.id,h=l.phases[m].header,d=M.header,this.nodePropertyChange(this.nameTable[p],h,d)),M.offset){if(0===m)T=M.offset;else{var L=o.phases[m-1];(T=M.offset-L.offset)<=0&&(T=M.offset)}a?(c.updateColumnWidth(m,T,!0,s),Is(e,this,c.rows[A].cells[m],m)):c.updateRowHeight(A+m,T,!0,s)}}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===l.phaseSize)if(l.phaseSize)a?(c.removeRow(o.header&&o.hasHeader?1:0),e.height=e.wrapper.height=c.height):(o.header&&o.hasHeader&&(c.rows[0].cells[1].children=c.rows[0].cells[0].children,c.rows[0].cells[1].columnSpan=c.rows[0].cells[0].columnSpan-1,c.rows[0].cells[0].children=[]),c.removeColumn(0));else{if(a){var D=new $a;D.height=r.phaseSize,c.addRow(o.header&&o.hasHeader?1:0,D,!0),e.height=e.wrapper.height+=r.phaseSize}else{var k=new Ja;k.width=r.phaseSize,c.addColumn(0,k,!0),o.header&&o.hasHeader&&(c.rows[0].cells[0].children=c.rows[0].cells[1].children,c.rows[0].cells[1].children=[],c.rows[0].cells[1].columnSpan=1,c.rows[0].cells[1].minWidth=void 0,c.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var I=0;I<o.phases.length;I++)""===o.phases[I].id&&(o.phases[I].id=Ch()),ys(c,this,e,o.header&&o.hasHeader?1:0,a,I)}else a?c.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):c.updateColumnWidth(0,r.phaseSize,!1);if(o.header&&o.hasHeader&&l.header){var R=c.rows[0].cells[0].children[0].id,N=this.nameTable[R];this.nodePropertyChange(N,l.header,r.header)}e.height=e.wrapper.height=c.height,e.width=e.wrapper.width=c.width}n=!0}return n},t.prototype.nodePropertyChange=function(e,t,i,n,r,o){var a,s=e.wrapper.outerBounds,l=e.wrapper.bounds,c=!1;if(void 0!==i.width&&(e.children?e.container?e.wrapper.width=i.width:this.scaleObject(e,i.width,!0):(e.wrapper.children[0].width=i.width,a=!0,c=!0)),void 0!==i.height&&(e.children?e.container?e.wrapper.height=i.height:this.scaleObject(e,i.height,!1):(e.wrapper.children[0].height=i.height,a=!0,c=!0)),a=this.nodePropertyChangeExtend(e,t,i,a),void 0!==i.constraints&&ba(t)!==ba(i)&&(e.wrapper.children[0].shadow=ba(e)?e.shadow:null),void 0!==i.offsetX){if("None"!==e.wrapper.flip){if(e.offsetX!==e.wrapper.offsetX&&void 0!==t.offsetX){var h=i.offsetX-t.offsetX;e.wrapper.offsetX=e.wrapper.offsetX+h,this.updateFlipOffset(e.wrapper,h,0,e.wrapper.flip)}}else e.wrapper.offsetX=i.offsetX;a=!0,c=!0}if(void 0!==i.offsetY){if("None"!==e.wrapper.flip){if(e.offsetY!==e.wrapper.offsetY&&void 0!==t.offsetY){var d=i.offsetY-t.offsetY;e.wrapper.offsetY=e.wrapper.offsetY+d,this.updateFlipOffset(e.wrapper,0,d,e.wrapper.flip)}}else e.wrapper.offsetY=i.offsetY;a=!0,c=!0}if(void 0!==i.pivot&&(e.wrapper.pivot=i.pivot,a=!0),void 0!==i.minWidth&&(e.wrapper.minWidth=e.wrapper.children[0].minWidth=i.minWidth,a=!0,c=!0),void 0!==i.minHeight&&(e.wrapper.minHeight=e.wrapper.children[0].minHeight=i.minHeight,a=!0,c=!0),void 0!==i.maxWidth&&(e.wrapper.maxWidth=i.maxWidth,a=!0,c=!0),void 0!==i.maxHeight&&(e.wrapper.maxHeight=i.maxHeight,a=!0,c=!0),void 0!==i.flip)if(e.wrapper.flip=i.flip,a=!0,c=!0,e.wrapper.elementActions&Ii.ElementIsGroup){if(nc(e.wrapper,e.offsetX,e.offsetY,this,i.flip),e&&e.children)for(var p=0,u=e.children;p<u.length;p++){var f=u[p],g=this.nameTable[f];g.wrapper.flip=i.flip,this.updatePorts(g,i.flip)}}else e.wrapper.children[0].flip=i.flip,this.updatePorts(e,i.flip);if(void 0!==i.rotateAngle&&(e.children&&r&&this.commandHandler.rotateObjects(e,[e],e.rotateAngle-e.wrapper.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),e.wrapper.rotateAngle=i.rotateAngle,a=!0,c=!0),void 0!==i.backgroundColor&&(e.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==i.shape&&"Bpmn"!==e.shape.type&&(a=!0,Al(i,e,t,this),c=!0),i.margin&&(a=!0,this.updateMargin(e,i),c=!0),(void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.height||void 0!==i.style)&&"Bpmn"===e.shape.type&&this.bpmnModule&&(a=!0,c=!0,this.bpmnModule.updateBPMN(i,t,e,this)),"UmlActivity"===e.shape.type&&"FinalNode"===e.shape.shape&&(a=!0,c=!0,this.updateUMLActivity(i,t,e,this)),(e.shape&&"UmlClassifier"===e.shape.type||e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type)&&(a=!0,c=!0),void 0!==i.ports)for(var m=0,v=Object.keys(i.ports);m<v.length;m++){var b=v[m],w=Number(b);a=!0;var x=i.ports[b],S=e.ports[w];this.updatePort(x,S,e.wrapper),c=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var C=0,P=Object.keys(i.annotations||e.annotations);C<P.length;C++){b=P[C],w=Number(b);a=!0;x=void 0;x=i.annotation?i.annotation:i.annotations?i.annotations[b]:e.annotations;var E=e.annotations[w];if(E){var O=!!e.width;this.updateAnnotation(x,E,e.wrapper,e,O)}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(e),this.updateDefaultLayoutIcons(e),void 0!==i.isExpanded&&this.commandHandler.expandNode(e,this),a=!0),void 0!==i.tooltip&&this.updateTooltip(e,i),a){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(e,{offsetX:t.offsetX||e.offsetX,offsetY:t.offsetY||e.offsetY},this),e.wrapper.measure(new ei(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateObject(e,t,i),"SwimLane"===e.shape.type&&!this.currentSymbol&&!(this.diagramActions&Wi.ToolAction)){Rs(this,e);var M=e.wrapper.children[0],T=e.shape,A=M.columnDefinitions().length;if("Horizontal"===T.orientation){w=T.header&&T.hasHeader?1:0;Is(e,this,M.rows[w].cells[A-1],A-1)}e.wrapper.measure(new ei(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}this.diagramActions&Wi.ToolAction&&!(this.diagramActions&Wi.UndoRedo)||this.checkSelectedItem(e)&&this.updateSelector(),!1===s.equals(s,e.wrapper.outerBounds)&&this.updateQuad(e),n?e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length):this.commandHandler.connectorSegmentChange(e,l,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(e,this),this.updateGroupOffset(e);var L=[];if(0===(L=L.concat(this.selectedItems.nodes,this.selectedItems.connectors)).length&&e.parentId&&this.nameTable[e.parentId]){var D=this.nameTable[e.parentId];D.wrapper.measure(new ei(D.wrapper.width,e.wrapper.height)),D.wrapper.arrange(D.wrapper.desiredSize),D.offsetX=D.wrapper.offsetX,D.offsetY=D.wrapper.offsetY}if(!1===l.equals(l,e.wrapper.bounds)&&(this.updateGroupSize(e),e.children&&this.updateGroupOffset(e)),"SwimLane"===e.shape.type&&!this.currentSymbol&&this.diagramActions&Wi.Render)Ts(xs(this,e.wrapper.children[0]),this);if(!this.preventNodesUpdate&&((!Oa(this)||Oa(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&this.updateDiagramObject(e),!n&&c&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&Ni.LineRouting&&"helper"!==e.id&&(this.diagramActions&Wi.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(e),"helper"!==e.id&&!(this.diagramActions&Wi.ToolAction))))for(var k=this.spatialSearch.findObjects(e.wrapper.outerBounds),I=0;I<k.length;I++){var R=k[I];R instanceof na&&this.connectorPropertyChange(k[I],{},{sourceID:R.sourceID,targetID:R.targetID,sourcePortID:R.sourcePortID,targetPortID:R.targetPortID,sourcePoint:R.sourcePoint,targetPoint:R.targetPoint})}"New"!==e.status&&this.diagramActions&&(e.status="Update")}if(!o){var N=e,j={element:sc(N),cause:this.diagramActions,oldValue:sc(t),newValue:sc(i)};y()&&(j.element={node:sc(N)},j.oldValue={node:sc(t)},j.newValue={node:sc(i)}),this.triggerEvent(Vi.propertyChange,j)}},t.prototype.updatePorts=function(e,t){if(e&&e.ports.length>0)for(var i=0,n=Object.keys(e.ports);i<n.length;i++){var r=n[i],o=Number(r),a=e.ports[o],s=this.getWrapper(e.wrapper,a.id);(s=ic(s,t,a)).relativeMode="Point",s.measure(new ei(s.width,s.height)),s.arrange(s.desiredSize)}},t.prototype.updateFlipOffset=function(e,t,i,n){if(e.hasChildren())for(var r=0,o=e.children;r<o.length;r++){var a=o[r];"Horizontal"!==n&&"Both"!==n||(a.flipOffset.x=a.flipOffset.x+t),"Vertical"!==n&&"Both"!==n||(a.flipOffset.y=a.flipOffset.y+i),(a instanceof un||a instanceof cn)&&this.updateFlipOffset(a,t,i,n)}},t.prototype.updateUMLActivity=function(e,t,i,n){if(void 0!==e.width||void 0!==e.height){var r=i.wrapper.children[0].children[0];r.width=e.width,r.height=e.height;var o=i.wrapper.children[0].children[1];o.width=e.width/1.5,o.height=e.height/1.5}},t.prototype.updateConnectorProperties=function(e){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(e)&&this.selectionConnectorsList.push(e)}else{var t={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint,sourceID:e.sourceID,targetID:e.targetID,sourcePortID:e.sourcePortID,targetPortID:e.targetPortID};this.connectorPropertyChange(e,{},t,void 0,!0)}},t.prototype.updateConnectorEdges=function(e){if(e.inEdges.length>0)for(var t=0;t<e.inEdges.length;t++)this.updateConnectorProperties(this.nameTable[e.inEdges[t]]);if(e.outEdges.length>0)for(var i=0;i<e.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[e.outEdges[i]]);e.parentId&&this.nameTable[e.parentId]&&this.updateConnectorEdges(this.nameTable[e.parentId])},t.prototype.connectorProprtyChangeExtend=function(e,t,i,n){return void 0!==i.type&&i.type!==t.type&&e.segments.length>0&&void 0===i.segments&&(e.segments=[]),void 0!==i.shape&&void 0!==e.shape&&e.shape&&"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(e,t,i,this),void 0!==e.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):n},t.prototype.connectorPropertyChange=function(e,t,i,n,r){var o,a,s,l,c=e.wrapper.bounds,h=!1,d=[];if(h=this.connectorProprtyChangeExtend(e,t,i,h),void 0!==i.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==t.sourceID||i.sourcePortID){var p=this.nameTable[e.sourceID];if(a=this.findInOutConnectPorts(p,!1),(!p||Sa(p)||""!==e.sourcePortID&&Ca(a))&&(e.sourceWrapper=p?this.getEndNodeWrapper(p,e,!0):void 0),void 0!==i.sourceID&&void 0!==t.sourceID&&""!==t.sourceID){var u=this.nameTable[t.sourceID];void 0!==u&&u.outEdges&&-1!==u.outEdges.indexOf(e.id)&&Nl(u.outEdges,e.id)}this.updateEdges(e)}if(void 0!==i.targetID&&i.targetID!==t.targetID){var f=this.nameTable[i.targetID];if(o=this.findInOutConnectPorts(f,!0),(!f||wa(f)||""!==e.targetPortID&&xa(o))&&(e.targetWrapper=f?this.getEndNodeWrapper(f,e,!1):void 0),void 0!==t&&void 0!==t.targetID&&""!==t.targetID){var g=this.nameTable[t.targetID];void 0!==g&&g.inEdges&&-1!==g.inEdges.indexOf(e.id)&&Nl(g.inEdges,e.id)}this.updateEdges(e)}if(void 0!==i.sourcePortID&&i.sourcePortID!==t.sourcePortID)e.sourceID&&this.nameTable[e.sourceID]&&(s=this.nameTable[e.sourceID].wrapper),(!(p=this.nameTable[e.sourceID])||Sa(p)||""!==e.sourcePortID&&Ca(a))&&(e.sourcePortWrapper=s?this.getWrapper(s,i.sourcePortID):void 0);if(void 0!==i.targetPortID&&i.targetPortID!==t.targetPortID){f=this.nameTable[e.targetID];e.targetID&&this.nameTable[e.targetID]&&(l=this.nameTable[e.targetID].wrapper),(!f||wa(f)||""!==e.targetPortID&&xa(o))&&(e.targetPortWrapper=l?this.getWrapper(l,i.targetPortID):void 0)}void 0!==i.flip&&(e.flip=i.flip,tc(e)),this.lineRoutingModule&&this.diagramActions&&this.constraints&Ni.LineRouting&&!(this.diagramActions&Wi.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),this.lineRoutingModule.refreshConnectorSegments(this,e,!1)),d=this.getPoints(e)}void 0!==i.style&&El(i.style,e.wrapper.children[0]),(d.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&-1===Object.keys(i.targetDecorator).indexOf("style")||void 0!==i.cornerRadius)&&(jl(e,d.length>0?d:e.intermediatePoints),void 0!==i.type&&(h=!0),d.length>0&&(e.wrapper.measure(new ei(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateConnectorAnnotation(e),this.updateObject(e,t,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===Wi.Render&&(h=!0),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.commandHandler.updatePathElementOffset(e),n||this.updateBridging(),this.updateAnnotations(i,e),e.wrapper.measure(new ei(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),!1===c.equals(c,e.wrapper.bounds)&&(this.updateQuad(e),this.updateGroupSize(e)),!0!==h||!this.checkSelectedItem(e)||this.diagramActions&Wi.ToolAction&&!(this.diagramActions&Wi.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!Oa(this)||Oa(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&this.updateDiagramObject(e),this.diagramActions&&"New"!==e.status&&(e.status="Update"),this.triggerPropertyChange(r,e,t,i)},t.prototype.getpropertyChangeArgs=function(e,t,i,n){return n.element={connector:sc(e)},n.oldValue={connector:sc(t)},n.newValue={connector:sc(i)},n},t.prototype.triggerPropertyChange=function(e,t,i,n){if(!e){var r=t,o={element:sc(r),cause:this.diagramActions,oldValue:sc(i),newValue:sc(n)};y()&&(o=this.getpropertyChangeArgs(r,i,n,o)),this.triggerEvent(Vi.propertyChange,o)}},t.prototype.findInOutConnectPorts=function(e,t){var i={};return e&&(i=Yl(e,t)),i},t.prototype.getPoints=function(e,t){return e.getConnectorPoints(e.type,t,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0)},t.prototype.updateNodeProperty=function(e,t,i){if(void 0===t)this.updateElementVisibility(e,this.nameTable[e.id],t);else{e.style.opacity=i;for(var n=0;n<e.children.length;n++)e.children[n]instanceof cn&&this.updateNodeProperty(e.children[n],void 0,i),e.children[n].style.opacity=i}},t.prototype.checkSelectedItem=function(e){var t=this.selectedItems,i=!1,n=[];return(n=n.concat(t.nodes,t.connectors)).length>0&&e.id===n[n.length-1].id&&(i=!0),i},t.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof cn)for(var i=0;i<e.children.length;i++)this.updateDiagramContainerVisibility(e.children[i],t);e.visible=t},t.prototype.updateElementVisibility=function(e,t,i){if(void 0!==i){if(e.visible=i,t instanceof Yc){if(t.children)for(var n=0,r=t.children;n<r.length;n++){var o=r[n];this.updateElementVisibility(this.nameTable[o].wrapper,this.nameTable[o],i)}else e.children[0].visible=i,this.updateDiagramContainerVisibility(e.children[0],i),"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(t,i,this);if(t.ports)for(var a=0,s=t.ports;a<s.length;a++){var l=s[a];if(l.visibility&Mi.Visible)(g=this.getWrapper(e,l.id)).visible=i}if(t.annotations)for(var c=0,h=t.annotations;c<h.length;c++){var d=h[c];(g=this.getWrapper(e,d.id)).visible=i}}else for(var p=0;p<3;p++)e.children[p].visible=i;if(t.annotations)for(var u=0,f=t.annotations;u<f.length;u++){d=f[u];(g=this.getWrapper(e,d.id)).visible=i}if(t.expandIcon||t.collapseIcon){var g;if(g=this.getWrapper(e,"icon_content")){for(p=0;p<g.children.length;p++)g.children[p].visible=i;g.visible=i}t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length)}!1===i&&this.unSelect(this.nameTable[e.id]),(t instanceof Yc&&!this.preventNodesUpdate||t instanceof na&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[e.id])}},t.prototype.updateAnnotations=function(e,t){if(void 0!==e.annotations)for(var i=0,n=Object.keys(e.annotations);i<n.length;i++){var r=n[i],o=Number(r),a=e.annotations[r],s=t.annotations[o];this.updateAnnotation(a,s,t.wrapper,t)}},t.prototype.updateAnnotation=function(e,t,i,n,r){var o,a=!1;if(void 0!==(o=this.getWrapper(i,t.id))){if(void 0!==e.width&&void 0!==e.height&&(o.width=e.width,o.height=e.height,a=!0),void 0!==e.rotateAngle&&(o.rotateAngle=e.rotateAngle),!r||o instanceof No||o.refreshTextElement(),t instanceof Dn&&void 0!==e.segmentAngle&&(o.rotateAngle=t.rotateAngle),t instanceof Ln&&void 0!==e.offset){var s=e.offset;a=!0;var l=void 0!==s.x?s.x:t.offset.x,c=void 0!==s.y?s.y:t.offset.y;o.setOffsetWithRespectToBounds(l,c,"Fraction"),o.relativeMode="Point"}else t instanceof Dn&&(void 0!==e.offset||void 0!==e.segmentAngle)&&n.updateAnnotation(t,n.intermediatePoints,n.wrapper.bounds,o);if(t instanceof Dn&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(a=!0)),void 0!==e.margin&&(a=!0,void 0!==e.margin.bottom&&(o.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(o.margin.top=e.margin.top),void 0!==e.margin.left&&(o.margin.left=e.margin.left),void 0!==e.margin.right&&(o.margin.right=e.margin.right)),(a||r)&&(o.width=t.width||n.width,t.template&&(o.width=o.width||o.actualSize.width,o.height=t.height||n.height||o.actualSize.height)),void 0!==e.horizontalAlignment&&(o.horizontalAlignment=e.horizontalAlignment,a=!0),void 0!==e.verticalAlignment&&(o.verticalAlignment=e.verticalAlignment,a=!0),void 0!==e.visibility&&(o.visible=!(!i.visible||!e.visibility)),void 0!==e.constraints){var h=!1;o.constraints&Di.Select&&!(e.constraints&Di.Select)&&wd(this,n,!1,o)&&(h=!0),o.constraints=e.constraints,h&&this.clearSelection()}void 0!==e.style&&El(e.style,o),void 0!==e.hyperlink&&Ml(e.hyperlink,o,t),this.updateAnnotationContent(e,a,o,n,t,i),!0===a&&(o.measure(new ei(o.width,o.height)),o.arrange(o.desiredSize)),o instanceof No||o.refreshTextElement()}},t.prototype.updateAnnotationContent=function(e,t,i,n,r,o){void 0!==e.content&&(i&&(!0,"UmlActivity"===n.shape.type&&"StructuredNode"===n.shape.shape?i.content="<<"+e.content+">>":i.content=e.content),i instanceof No&&this.updateAnnotationWrapper(i,n,r,o)),void 0!==e.template&&(i.content=e.template,this.updateAnnotationWrapper(i,n,r,o))},t.prototype.updateAnnotationWrapper=function(e,t,i,n){for(var r=0,o=this.views;r<o.length;r++){var a=o[r];yh(e.id+"_groupElement",a),yh(e.id+"_html_element",a)}if(t instanceof Yc)e=t.initAnnotationWrapper(i,this.element.id);else if(t instanceof na){var s=t.wrapper.children[0],l=new mi(s.offsetX-s.width/2,s.offsetY-s.height/2,s.width,s.height);e=t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,l,this.getDescription,this.element.id)}for(var c=0;c<n.children.length;c++)e.id===n.children[c].id&&n.children.splice(c,1,e)},t.prototype.updatePort=function(e,t,i){var n,r=!1;if(void 0!==(n=this.getWrapper(i,t.id))){if(void 0!==e.offset){r=!0;var o=void 0!==e.offset.x?e.offset.x:t.offset.x,a=void 0!==e.offset.y?e.offset.y:t.offset.y;n.setOffsetWithRespectToBounds(o,a,"Fraction"),n.relativeMode="Point"}if(void 0!==e.width&&(r=!0,n.width=e.width),void 0!==e.height&&(r=!0,n.height=e.height),void 0!==e.visibility&&(n.visible=!(!i.visible||!_l(t,Mi.Visible))),void 0!==e.margin&&(r=!0,void 0!==e.margin.bottom&&(n.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(n.margin.top=e.margin.top),void 0!==e.margin.right&&(n.margin.right=e.margin.right),void 0!==e.margin.left&&(n.margin.left=e.margin.left)),void 0!==e.horizontalAlignment&&(r=!0,n.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(r=!0,n.verticalAlignment=e.verticalAlignment),void 0!==e.style&&(void 0!==e.style.fill&&(n.style.fill=e.style.fill),void 0!==e.style.opacity&&(n.style.opacity=e.style.opacity),void 0!==e.style.strokeColor&&(n.style.strokeColor=e.style.strokeColor),void 0!==e.style.strokeWidth&&(n.style.strokeWidth=e.style.strokeWidth),void 0!==e.style.strokeDashArray&&(n.style.strokeDashArray=e.style.strokeDashArray)),void 0!==e.shape&&n){var s=kn(e.shape);n.data=s}void 0!==e.pathData&&(n.data=String(e.pathData),r=!0),!0===r&&(n.measure(new ei(n.width,n.height)),n.arrange(n.desiredSize))}},t.prototype.updateIcon=function(e){var t=this.getWrapper(e.wrapper,"icon_content"),i=this.diagramActions&Wi.Render?this.element.id:void 0;if(t){if("SVG"===this.mode){var n=th(e.wrapper.id+"_icon_content",i);if(n){var r=th(n.id+"_rect",i),o=th(n.id+"_shape",i),a=th(o.id+"_native_element",i);a&&a.parentNode.removeChild(a),o.parentNode.removeChild(o),r.parentNode.removeChild(r),n.parentNode.removeChild(n)}}var s=e.wrapper.children.indexOf(t);e.wrapper.children.splice(s,1)}var l=this.getPortContainer(e);e.initIcons(this.getDescription,this.layout,l,this.element.id)},t.prototype.getPortContainer=function(e){if(e.children)for(var t=0;t<e.wrapper.children.length;t++)if(e.wrapper.children[t].id===e.id+"group_container")return e.wrapper.children[t];return e.wrapper},t.prototype.updateTooltip=function(e,t){void 0!==t.tooltip.content&&(e.tooltip.content=t.tooltip.content),void 0!==t.tooltip.position&&(e.tooltip.position=t.tooltip.position),void 0!==t.tooltip.height&&(e.tooltip.height=t.tooltip.height),void 0!==t.tooltip.width&&(e.tooltip.width=t.tooltip.width),void 0!==t.tooltip.showTipPointer&&(e.tooltip.showTipPointer=t.tooltip.showTipPointer)},t.prototype.updateQuad=function(e){this.spatialSearch.updateQuad(e.wrapper)&&!this.preventUpdate&&this.updatePage()},t.prototype.removeFromAQuad=function(e){if(e.children)for(var t=void 0,i=e.children,n=0;n<i.length;n++)(t=this.nameTable[i[n]])&&this.removeFromAQuad(t);this.spatialSearch.removeFromAQuad(e.wrapper),this.spatialSearch.updateBounds(e.wrapper)&&!this.preventUpdate&&this.updatePage()},t.prototype.updateGroupSize=function(e){var t;e.parentId&&(t=this.nameTable[e.parentId])&&(t.parentId?this.updateGroupSize(t):(t.wrapper.measure(new ei),t.wrapper.arrange(t.wrapper.desiredSize),this.updateGroupOffset(t),this.updateDiagramObject(t)))},t.prototype.updatePage=function(){if(this.diagramActions&Wi.Render){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var e=0,i=this.views;e<i.length;e++){var n=i[e],r=this.views[n];r instanceof t||r.updateView(r)}}},t.prototype.protectPropertyChange=function(e){this.isProtectedOnChange=e},t.prototype.updateShadow=function(e,t){void 0!==t.angle&&(e.angle=t.angle),void 0!==t.color&&(e.color=t.color),void 0!==t.distance&&(e.distance=t.distance),void 0!==t.opacity&&(e.opacity=t.opacity)},t.prototype.updateMargin=function(e,t){void 0!==t.margin.top&&(e.margin.top=t.margin.top),void 0!==t.margin.bottom&&(e.margin.bottom=t.margin.bottom),void 0!==t.margin.left&&(e.margin.left=t.margin.left),void 0!==t.margin.right&&(e.margin.right=t.margin.right)},t.prototype.initDroppables=function(){var e,t,i=this,n={},r={};this.droppable=new mt(this.element),this.droppable.over=function(o){if(i.currentSymbol)o.event.touches&&o.event.touches.length&&i.eventHandler.mouseMove(o.event,o.event.touches);else if(o.dragData){var a=void 0,s=void 0;document.getElementById(i.element.id+"content").focus();var l=i.eventHandler.getMousePosition(o.event),c=void 0,h=o.dragData.helper,d=h.getAttribute("paletteId");if(d){var p=document.getElementById(d).ej2_instances[0];i.droppable.sourceElement=p;if(p){var u=p.selectedSymbols;c=Oh(p.selectedSymbols),n=p.childTable;var f=u.wrapper.children[0].children[0];if(p.selectedSymbols instanceof Yc){c.offsetX=l.x+5+(c.width||f.actualSize.width)/2,c.offsetY=l.y+(c.height||f.actualSize.height)/2;var g=new Yc(i,"nodes",c,!0);if("Bpmn"===g.shape.type&&g.shape.activity.subProcess.processes&&g.shape.activity.subProcess.processes.length&&(g.shape.activity.subProcess.processes=[]),"SwimLane"===g.shape.type){if(i.diagramActions|=Wi.PreventHistory,g.shape.isLane){g.children=[],e={id:"header"+Ch()},"Horizontal"===g.shape.orientation?(e.width=g.shape.lanes[0].header.width,e.height=g.shape.lanes[0].height):(e.width=g.shape.lanes[0].width,e.height=g.shape.lanes[0].header.height),e.style=g.shape.lanes[0].header.style,e.offsetX=l.x+5+e.width/2,e.offsetY=l.y+e.height/2,e=i.add(e),t={id:"body"+Ch()},"Horizontal"===g.shape.orientation?(t.width=g.shape.lanes[0].width-e.width,t.height=g.shape.lanes[0].height,t.offsetX=l.x+5+(g.shape.lanes[0].header.width+t.width/2),t.offsetY=l.y+t.height/2):(t.width=g.shape.lanes[0].width,t.height=g.shape.lanes[0].height-e.height,t.offsetX=l.x+5+t.width/2,t.offsetY=l.y+(g.shape.lanes[0].header.height+t.height/2)),t.style=g.shape.lanes[0].style,t=i.add(t);var m={id:"group"+Ch(),children:[e.id,t.id]};m.shape=g.shape,m.width=g.shape.lanes[0].width,m.height=g.shape.lanes[0].height,g=i.add(m)}i.diagramActions&=~Wi.PreventHistory}if(g.shape.isPhase&&((s="Horizontal"===g.shape.orientation)?(g.offsetX=l.x+5+(g.width||f.actualSize.width)/2,g.offsetY=l.y,g.shape.data="M20,"+g.height/2+" L"+(g.width-20)+","+g.height/2+"z",g.height=1):(g.offsetX=l.x+5,g.offsetY=l.y+(g.height||f.actualSize.height)/2,g.shape.data="M"+g.width/2+",20 L"+g.width/2+","+(g.height-20)+"z",g.width=1)),a=g,c.children){var v=c;r=i.getChildren(v,{},n),Gl(v,-v.offsetX,-v.offsetY,r,!0,i)}}else if(p.selectedSymbols instanceof na){a=new na(i,"connectors",c,!0);var b=mi.toBounds([a.sourcePoint,a.targetPoint]),w=l.x-b.left,x=l.y-b.top;a.sourcePoint.x+=w,a.sourcePoint.y+=x,a.targetPoint.x+=w,a.targetPoint.y+=x}a.shape.isLane||(a.id+=Ch());var S={source:p,element:a,cancel:!1,diagram:i};if(y()&&(S=i.getBlazorDragEventArgs(S)),i.enterObject=a,i.enterTable=r,i.triggerEvent(Vi.dragEnter,S),a instanceof Yc&&"SwimLane"===a.shape.type&&a.shape.isLane){var C,P,E=S.element,O=E.shape.lanes[0];s="Horizontal"===E.shape.orientation,C=i.nameTable[a.children[0]],P=i.nameTable[a.children[1]],s?(e.width=O.header.width,e.height=O.height,t.width=O.width-e.width,t.height=O.height,t.offsetX=l.x+5+(O.header.width+P.width/2),t.offsetY=l.y+P.height/2):(e.width=O.width,e.height=O.header.height,t.width=O.width,t.height=O.height-e.height,t.offsetX=l.x+5+P.width/2,t.offsetY=l.y+(O.header.height+P.height/2)),e.offsetX=l.x+5+C.width/2,e.offsetY=l.y+C.height/2,a.width=O.width,a.height=O.height}a instanceof Yc&&a.shape.isPhase&&(s?a.height=1:a.width=1),i.activeLayer.lock||S.cancel||(i.preventUpdate=!0,a.children&&i.findChild(a,r),i.preventUpdate=!0,-1!==a.zIndex&&(a.zIndex=-1),i.initObject(a,void 0,void 0,!0),i.currentSymbol=a,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.commandHandler.select(a),i.eventHandler.mouseDown(o.event),i.eventHandler.mouseMove(o.event,o),i.preventUpdate=!1,i.updatePage(),h.style.opacity="0"),delete i.enterObject,delete i.enterTable}i.droppable.selectedSymbols=h}}},this.droppable.drop=function(e){var t,n="sourceElement";if(i.currentSymbol){var r,o,a=!1;o=i.currentSymbol instanceof na,e.event.touches&&i.eventHandler.mouseUp(e.event);var s=void 0,l=void 0;l={source:i.droppable[n],element:i.currentSymbol,target:i.eventHandler.hoverNode||i.eventHandler.lastObjectUnderMouse||i,cancel:!1,position:{x:i.currentSymbol.wrapper.offsetX,y:i.currentSymbol.wrapper.offsetY}},y()&&(l={source:sc(i.droppable[n]),element:ec(i.currentSymbol)===na?{connector:sc(i.currentSymbol)}:{node:sc(i.currentSymbol)},cancel:!1,position:{x:i.currentSymbol.wrapper.offsetX,y:i.currentSymbol.wrapper.offsetY}},i.getDropEventArgs(l)),i.triggerEvent(Vi.drop,l);var c=void 0,h="id";if((c=Oh(i.currentSymbol)).hasTarget=i.currentSymbol.hasTarget,i.removeFromAQuad(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),i.removeElements(i.currentSymbol),(i.currentSymbol.shape.isLane||i.currentSymbol.shape.isPhase)&&i.removeChildInNodes(i.currentSymbol),l.cancel&&vl(i.currentSymbol,i),i.currentSymbol.shape.isPhase&&(a=!0,r=i.currentSymbol.shape.orientation),delete i.nameTable[i.currentSymbol.id],i.currentSymbol=null,i.protectPropertyChange(!0),!l.cancel){if(i.startGroupAction(),c&&(c.shape.isLane||a)&&(a&&(c.shape.isPhase=a,c.shape.orientation=r),i.eventHandler.addSwimLaneObject(c)),"Bpmn"===c.shape.type&&c.shape.annotation&&c.hasTarget){var d=c.shape.annotation.nodeId;c.shape.annotation.id=c.id,i.addTextAnnotation(c.shape.annotation,i.nameTable[d]),c.nodeId=""}c.shape.isLane||a||(c.children&&i.addChildNodes(c),l.target&&l.target instanceof Yc&&!o&&ls(i,l.target)&&Ea(l.target)?ds(i,l.target,c):t=i.add(c,!0),(c||t)&&Ma(i)&&i.select([i.nameTable[c[h]]]))}i.protectPropertyChange(!1),s=i.nameTable[c[h]],c.hasTarget&&(c.nodeId=c.hasTarget,i.remove(c)),i.bpmnModule&&s instanceof Yc&&c.processId&&(s.processId=c.processId,i.bpmnModule.dropBPMNchild(i.nameTable[s.processId],s,i)),i.endGroupAction(),"SVG"!==i.mode&&i.refreshDiagramLayer(),delete i.droppable[n];I(i.droppable.selectedSymbols)}else{l={source:sc(e.droppedElement),element:void 0,target:sc(i.eventHandler.hoverNode||i.eventHandler.lastObjectUnderMouse||i),cancel:!1,position:void 0};y()&&(l={source:sc(e.droppedElement),element:void 0,cancel:!1,position:void 0},i.getDropEventArgs(l)),i.triggerEvent(Vi.drop,l);c=void 0,h="id"}},this.droppable.out=function(e){if(i.currentSymbol&&!i.eventHandler.focus){i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),delete i.nameTable[i.currentSymbol.id],i.triggerEvent(Vi.dragLeave,{element:sc(i.currentSymbol),diagram:sc(i)}),"SVG"!==i.mode?i.refreshDiagramLayer():i.removeElements(i.currentSymbol),i.currentSymbol=null;i.droppable.selectedSymbols.style.opacity="1";delete i.droppable.sourceElement,i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,Fi.DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},t.prototype.getDropEventArgs=function(e){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var t=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;e.target=ec(t)===na?{connector:sc(t)}:{node:sc(t)}}else e.target.diagram=sc(this)},t.prototype.removeChildInNodes=function(e){if(e){if(e.children)for(var t=0;t<e.children.length;t++)this.removeChildInNodes(this.nameTable[e.children[t]]);var i=this.nodes.indexOf(e);-1!==i&&this.nodes.splice(i,1)}},t.prototype.getBlazorDragEventArgs=function(e){return e={source:sc(e.source),element:ec(e.element)===na?{connector:sc(e.element)}:{node:sc(e.element)},cancel:e.cancel,diagram:sc(this)}},t.prototype.findChild=function(e,t){for(var i,n,r=0;r<e.children.length;r++)(i=t[e.children[r]])&&(i.children&&this.findChild(i,t),i.id=i.id+Ch(),t[i.id]=i,e.children[r]=i.id,n=new Yc(this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},t.prototype.getChildren=function(e,t,i){for(var n,r=0;r<e.children.length;r++)(n=i[e.children[r]])&&(n.children&&(t=this.getChildren(n,t,i)),t[n.id]=Oh(n));return t},t.prototype.addChildNodes=function(e){for(var t,i=0;i<e.children.length;i++)(t=this.nameTable[e.children[i]])&&(t.children&&this.addChildNodes(t),this.add(t,!0))},t.prototype.moveNode=function(e){for(var t,i=this.commandHandler.getObjectLayer(e.id),n=i.zIndex,r=i.objects.length,o=0;o<this.layers.length;o++)n===this.layers[o].zIndex&&(t=this.layers[o+1]);if(r>1)this.commandHandler.moveSvgNode(e.id,i.objects[r-2]),this.commandHandler.moveSvgNode(i.objects[r-2],e.id);else if(t){var a=this.commandHandler.getLayer(this.layerZIndexTable[t.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(e.id,a),this.commandHandler.updateNativeNodeIndex(e.id,a)):this.moveObjectsUp(e,i)}else this.moveObjectsUp(e,i)},t.prototype.moveObjectsUp=function(e,t){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[n],t.id!==i.id){var r=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(r){this.commandHandler.moveSvgNode(e.id,r),this.commandHandler.moveSvgNode(r,e.id);break}}},t.prototype.insertData=function(e){return this.crudOperation(e,"create",this.getNewUpdateNodes("New"))},t.prototype.updateData=function(e){return this.crudOperation(e,"update",this.getNewUpdateNodes("Update"))},t.prototype.removeData=function(e){return this.crudOperation(e,"destroy",this.getDeletedNodes())},t.prototype.crudOperation=function(e,t,i){if(e){var n=this.parameterMap(e,!(e instanceof na));if(n){var r=e instanceof na?this.dataSourceSettings.connectionDataSource.crudAction[t]:this.dataSourceSettings.crudAction[t];this.raiseAjaxPost(JSON.stringify(n),r)}return n}var o=i;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[t],this.dataSourceSettings.connectionDataSource.crudAction[t]),o},t.prototype.processCrudCollection=function(e,t,i){if(e.nodes){var n=[],r=void 0;for(r=0;r<e.nodes.length;r++)n.push(this.parameterMap(e.nodes[r],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),t)}if(e.connectors){n=[],r=void 0;for(r=0;r<e.connectors.length;r++)n.push(this.parameterMap(e.connectors[r],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},t.prototype.parameterMap=function(e,t){var i,n={},r=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(r.id&&(n[r.id]=e.id),r.sourcePointX&&r.sourcePointY&&(n[r.sourcePointX]=e.sourcePoint.x,n[r.sourcePointY]=e.sourcePoint.y),r.targetPointX&&r.targetPointY&&(n[r.targetPointX]=e.targetPoint.x,n[r.targetPointY]=e.targetPoint.y),r.sourceID&&(n[r.sourceID]=e.sourceID),r.targetID&&(n[r.targetID]=e.targetID),r.crudAction&&r.crudAction.customFields&&r.crudAction.customFields.length>0)for(i=0;i<r.crudAction.customFields.length;i++)n[r.crudAction.customFields[i]]=e[r.crudAction.customFields[i]];return n},t.prototype.getNewUpdateNodes=function(e){var t=[],i=[];for(var n in this.nameTable){var r=this.nameTable[n];r.status==e&&(r&&r instanceof na?(r.status="None",i.push(r)):(r.status="None",t.push(r)))}return{nodes:t,connectors:i}},t.prototype.getDeletedNodes=function(){var e,t=[],i=[];for(e=0;e<this.crudDeleteNodes.length;e++){var n=this.crudDeleteNodes[e];n&&n.segments?i.push(n):n&&t.push(n)}return this.crudDeleteNodes=[],{nodes:t,connectors:i}},t.prototype.raiseAjaxPost=function(e,t){var i=new x(t,"POST",!0,"application/json"),n=JSON.stringify(JSON.parse(e));i.send(n).then(),i.onSuccess=function(e){}},ap([pe("100%")],t.prototype,"width",void 0),ap([pe("SVG")],t.prototype,"mode",void 0),ap([pe("100%")],t.prototype,"height",void 0),ap([ue({},Za)],t.prototype,"contextMenuSettings",void 0),ap([pe(Ni.Default)],t.prototype,"constraints",void 0),ap([pe(ji.Default)],t.prototype,"tool",void 0),ap([pe("Top")],t.prototype,"bridgeDirection",void 0),ap([pe("transparent")],t.prototype,"backgroundColor",void 0),ap([ue({},Jh)],t.prototype,"snapSettings",void 0),ap([ue({},nd)],t.prototype,"rulerSettings",void 0),ap([ue({},Gh)],t.prototype,"pageSettings",void 0),ap([ue({},tp)],t.prototype,"serializationSettings",void 0),ap([ge([],Yc)],t.prototype,"nodes",void 0),ap([pe()],t.prototype,"drawingObject",void 0),ap([ge([],na)],t.prototype,"connectors",void 0),ap([pe([])],t.prototype,"basicElements",void 0),ap([ue({},Eo)],t.prototype,"tooltip",void 0),ap([ue({},dd)],t.prototype,"dataSourceSettings",void 0),ap([pe()],t.prototype,"addInfo",void 0),ap([pe()],t.prototype,"historyManager",void 0),ap([pe()],t.prototype,"getNodeDefaults",void 0),ap([pe()],t.prototype,"nodeDefaults",void 0),ap([pe()],t.prototype,"getConnectorDefaults",void 0),ap([pe()],t.prototype,"connectorDefaults",void 0),ap([pe()],t.prototype,"setNodeTemplate",void 0),ap([pe()],t.prototype,"getDescription",void 0),ap([pe()],t.prototype,"getCustomProperty",void 0),ap([pe()],t.prototype,"getCustomTool",void 0),ap([pe()],t.prototype,"getCustomCursor",void 0),ap([ge([],rp)],t.prototype,"customCursor",void 0),ap([pe()],t.prototype,"updateSelection",void 0),ap([ue({},Zc)],t.prototype,"selectedItems",void 0),ap([ue({},qh)],t.prototype,"scrollSettings",void 0),ap([ue({},fd)],t.prototype,"layout",void 0),ap([ue({},qa)],t.prototype,"commandManager",void 0),ap([ye()],t.prototype,"dataLoaded",void 0),ap([ye()],t.prototype,"dragEnter",void 0),ap([ye()],t.prototype,"dragLeave",void 0),ap([ye()],t.prototype,"dragOver",void 0),ap([ye()],t.prototype,"click",void 0),ap([ye()],t.prototype,"historyChange",void 0),ap([ye()],t.prototype,"historyStateChange",void 0),ap([ye()],t.prototype,"doubleClick",void 0),ap([ye()],t.prototype,"textEdit",void 0),ap([ye()],t.prototype,"scrollChange",void 0),ap([ye()],t.prototype,"selectionChange",void 0),ap([ye()],t.prototype,"sizeChange",void 0),ap([ye()],t.prototype,"connectionChange",void 0),ap([ye()],t.prototype,"sourcePointChange",void 0),ap([ye()],t.prototype,"targetPointChange",void 0),ap([ye()],t.prototype,"propertyChange",void 0),ap([ye()],t.prototype,"positionChange",void 0),ap([ye()],t.prototype,"animationComplete",void 0),ap([ye()],t.prototype,"rotateChange",void 0),ap([ye()],t.prototype,"collectionChange",void 0),ap([ye()],t.prototype,"onUserHandleMouseDown",void 0),ap([ye()],t.prototype,"onUserHandleMouseUp",void 0),ap([ye()],t.prototype,"onUserHandleMouseEnter",void 0),ap([ye()],t.prototype,"onUserHandleMouseLeave",void 0),ap([ye()],t.prototype,"segmentCollectionChange",void 0),ap([ye()],t.prototype,"expandStateChange",void 0),ap([ye()],t.prototype,"created",void 0),ap([ye()],t.prototype,"mouseEnter",void 0),ap([ye()],t.prototype,"mouseLeave",void 0),ap([ye()],t.prototype,"mouseOver",void 0),ap([ye()],t.prototype,"contextMenuOpen",void 0),ap([ye()],t.prototype,"contextMenuBeforeItemRender",void 0),ap([ye()],t.prototype,"contextMenuClick",void 0),ap([ye()],t.prototype,"commandExecute",void 0),ap([ge([],qd)],t.prototype,"layers",void 0),ap([ye()],t.prototype,"drop",void 0),t}(lt),lp=function(){function e(e){this.diagram=e}return e.prototype.exportDiagram=function(e){var t,i,n,r,o="data",a=[],s=e.margin||{},l=e&&e.region?e.region:"Content";r=e&&e.mode?e.mode:"Download";var c=this.getDiagramBounds(l,e);e.bounds&&(i=!0,c.x=e.bounds.x?e.bounds.x:c.x,c.y=e.bounds.y?e.bounds.y:c.y,c.width=e.bounds.width||c.width,c.height=e.bounds.height||c.height),s={top:void 0!==s.top?s.top:25,bottom:void 0!==s.bottom?s.bottom:25,right:void 0!==s.right?s.right:25,left:void 0!==s.left?s.left:25};this.diagram.nodes;"PageSettings"!==l&&(c.x-=s.left,c.y-=s.top,c.width+=s.left+s.right,c.height+=s.top+s.bottom);var h=e.fileName||"diagram";if("SVG"!==e.format){if(null!==(o=this.setCanvas(e,c,s,r,i,l,h)))return o}else{t=e.format,e.bounds=c,e.margin=s;var d=n=this.diagramAsSvg(e,s);if("Data"===r)return n;var p=(new XMLSerializer).serializeToString(d);a.push(p)}if("Download"===r&&null!==o)for(var u=0;u<a.length;u++){var f=new Blob([a[u]],{type:"application/octet-stream"});if("msie"===J.info.name)window.navigator.msSaveOrOpenBlob(f,h+"."+t);else{var g=ph("a",{download:h+"."+t}),m=URL.createObjectURL(f);g.href=m;var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(y)}}return null},e.prototype.setCanvas=function(e,t,i,n,r,o,a){var s;e.bounds=t,e.region=o;this.setScaleValueforCanvas(e,t);var l=this.diagramAsCanvas({bounds:t,margin:i,region:o,scaleX:e.scaleX,scaleY:e.scaleY,scaleOffsetX:e.scaleOffsetX,scaleOffsetY:e.scaleOffsetY},r),c=s=l.toDataURL();return"Data"===n?s:(this.canvasMultiplePage(e,l,i,c,a),null)},e.prototype.canvasMultiplePage=function(e,t,i,n,r){var o=this,a=[],s=e.format||"JPG";if(e.multiplePage){if(e.pageHeight=e.pageHeight?e.pageHeight:this.diagram.pageSettings.height,e.pageWidth=e.pageWidth?e.pageWidth:this.diagram.pageSettings.width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.pageOrientation&&("Landscape"===e.pageOrientation&&e.pageHeight>e.pageWidth||"Portrait"===e.pageOrientation&&e.pageWidth>e.pageHeight)){var l=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=l}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c=ph("img",{id:this.diagram.element.id+"_printImage",src:n});c.onload=function(){a=o.getMultipleImage(c,e,!0),o.exportImage(a,r,s,n)}}else a=[n],this.exportImage(a,r,s,n)},e.prototype.exportImage=function(e,t,i,n){for(var r=[],o=e instanceof HTMLElement?0:e.length,a=0;a<o;a++){for(var s=e[a].replace(/^data:[a-z]*;,/,"").split(","),l=atob(s[1]),c=new ArrayBuffer(l.length),h=new Uint8Array(c),d=0;d<l.length;d++)h[d]=l.charCodeAt(d);r.push(c)}for(var p=function(e){var n=new Blob([r[e]],{type:"application/octet-stream"});if("msie"===J.info.name)window.navigator.msSaveOrOpenBlob(n,t+"."+i);else{var o=ph("a",{download:t+"."+i}),a=URL.createObjectURL(n);o.href=a;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){o.dispatchEvent(s)},5*(e+1))}},u=0;u<r.length;u++)p(u)},e.prototype.getObjectsBound=function(e){for(var t,i=0,n=this.diagram.nodes;i<n.length;i++){var r=n[i];r.visible&&(("SVG"===e.format||r instanceof xn||r instanceof No)&&("SVG"!==e.format||r instanceof No)||(t=t?t.uniteRect(r.wrapper.outerBounds):r.wrapper.outerBounds))}for(var o=0,a=this.diagram.connectors;o<a.length;o++){var s=a[o];s.visible&&(t=t?t.uniteRect(s.wrapper.outerBounds):s.wrapper.outerBounds)}return t||new mi(0,0,0,0)},e.prototype.getDiagramBounds=function(e,t){var i=this.getObjectsBound(t),n=i.left,r=i.top,o=i.right-i.left,a=i.bottom-i.top;"Content"!==e&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(n=i.left,r=i.top,this.diagram.pageSettings.width&&(n=Math.floor(n/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,o=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-n),this.diagram.pageSettings.height&&(r=Math.floor(r/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,a=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-r),0===i.width&&null!==this.diagram.pageSettings.width&&(o=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(a=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(n=0,o=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(r=0,a=this.diagram.pageSettings.height)));var s=new mi;return s.x=n,s.y=r,s.width=o,s.height=a,s},e.prototype.setScaleValueforCanvas=function(e,t){e.scaleX=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||this.diagram.pageSettings.height,e.pageWidth=e.pageWidth||this.diagram.pageSettings.width;var i=e.pageOrientation||this.diagram.pageSettings.orientation;if(i||(i="Portrait"),"Portrait"===i){if(e.pageWidth>e.pageHeight){var n=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=n}}else if(e.pageHeight>e.pageWidth){n=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=n}e.pageWidth&&e.pageHeight&&!e.multiplePage&&(e.stretch="Meet");var r=e.pageHeight||t.height,o=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e.scaleX=o/t.width,e.scaleY=r/t.height,"Meet"===e.stretch?(e.scaleX=e.scaleY=Math.min(e.scaleX,e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e.scaleX)/2,e.scaleOffsetX=(e.pageWidth-t.width*e.scaleX)/2):"Slice"===e.stretch&&(e.scaleX=e.scaleY=Math.max(e.scaleX,e.scaleY)),t.width=o,t.height=r),t.x*=e.scaleX,t.y*=e.scaleY},e.prototype.diagramAsSvg=function(e,t){var i=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",e.bounds.width,e.bounds.height);document.body.appendChild(i);var n=uh("g",{id:this.diagram.element.id+"_pageBackground"}),r=e&&e.region?e.region:"Content",o=this.getDiagramBounds(r,e),a=o.x,s=o.y,l=o.width,c=o.height;i.appendChild(n);var h={x:String(a),y:String(s),width:String(l),height:String(c)};bh(n,h),this.setTransform(n,e.bounds,t);var d=document.getElementById(this.diagram.element.id+"gradient_pattern");d&&i.appendChild(d),h={x:0,y:0,width:String(l+t.left+t.right),height:String(c+t.top+t.bottom)};var p=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);bh(p,h),i.appendChild(p),this.setTransform(p,o,t);var u=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(bh(u,h),i.appendChild(u),this.setTransform(u,o,t),"SVG"===this.diagram.mode){var f=void 0,g=void 0,m=eh(this.diagram.element.id);for(i.appendChild(m.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),g=0;g<i.childNodes.length;g++)(f=i.childNodes[g]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(f,o,t)}else{n=uh("g",{id:this.diagram.element.id+"_diagramLayer"}),i.appendChild(n),this.setTransform(n,e.bounds,t);var y=new Yh("",null,!0),v=dh(this.diagram.element.id);this.diagram.renderDiagramElements(i,y,v,!1)}return document.body.removeChild(i),i},e.prototype.setTransform=function(e,t,i){e.setAttribute("transform","translate("+(-t.x+i.left)+", "+(-t.y+i.top)+")")},e.prototype.diagramAsCanvas=function(e,t){var i=e.bounds,n=e.margin,r=e&&e.region?e.region:"Content",o=this.getDiagramBounds(r,e),a=this.diagram.pageSettings.background.color,s=Wh.createCanvas(this.diagram.element.id+"_diagram",e.bounds.width,e.bounds.height),l=s.getContext("2d");l.translate(-i.x,-i.y),l.save(),l.fillStyle=this.diagram.pageSettings.background.color,i="Content"===r?o:i,l.fillRect(i.x,i.y,i.width,i.height);var c=this.diagram.pageSettings.background;if(c&&c.source){o=this.getDiagramBounds(r,e);var h=new Image;h.src=c.source;var d=o.width/h.width,p=o.height/h.height,u=o.x,f=o.y,g=o.width,m=o.height,y=this.isImageExportable(c);if("None"!==c.scale&&"None"!==c.align){var v="Meet"===c.scale?Math.min(d,p):Math.max(d,p);g=v*h.width,m=v*h.height,c.align.indexOf("xmid")>-1?u+=(o.width-g)/2:c.align.indexOf("xmax")>-1&&(u=u+o.width-g),c.align.indexOf("ymid")>-1?f+=(o.height-m)/2:c.align.indexOf("ymax")>-1&&(f=f+o.height-m),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(l.fillStyle="white",l.fillRect(o.x*e.scaleX,o.y*e.scaleY,o.width*e.scaleX,o.height*e.scaleY)),y&&l.drawImage(h,u,f,v*h.width,v*h.height)}else y&&l.drawImage(h,u,f,o.width,o.height)}else l.fillStyle="transparent"===a?"white":a,l.fillRect(o.x*e.scaleX-n.left,o.y*e.scaleY-n.top,o.width*e.scaleX+n.left+n.right,e.scaleY*o.height+n.top+n.bottom);var b=this.diagram.pageSettings.background.color,w=this.diagram.pageSettings.width;w&&(l.strokeStyle="none"===b?"transparent":b,l.lineWidth=w,l.strokeRect(o.x*e.scaleX,o.y*e.scaleY,o.width*e.scaleX,o.height*e.scaleY)),l.restore();var x=dh(this.diagram.element.id),S=new Yh("",null,!1);return this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!0),this.diagram.renderDiagramElements(s,S,x,!1,!0),this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!1),s},e.prototype.updateWrapper=function(e,t,i,n,r){if(e&&e.length>0)for(var o=0;o<e.length;o++)e[o].children&&this.updateWrapper(e[o].children,t,i,n,r),e[o].exportScaleValue.x=t,e[o].exportScaleValue.y=t,e[o].exportScaleOffset.x=i,e[o].exportScaleOffset.y=n,e[o].isExport=r},e.prototype.updateObjectValue=function(e,t,i,n){for(var r,o=0;o<this.diagram.nodes.length;o++)r=this.diagram.nodes[o].wrapper,this.updateWrapper(r.children,e,t,i,n),r.exportScaleValue.x=e,r.exportScaleValue.y=e,r.exportScaleOffset.x=t,r.exportScaleOffset.y=i,r.isExport=n;for(var a=0;a<this.diagram.connectors.length;a++){r=this.diagram.connectors[a].wrapper;for(var s=0;s<r.children.length;s++)r.children[s].isExport=n,n&&(r.children[s].exportScaleValue.x=e,r.children[s].exportScaleValue.y=e,r.children[s].exportScaleOffset.x=t,r.children[s].exportScaleOffset.y=i)}},e.prototype.isImageExportable=function(e){var t,i=!0;if(e.source)try{var n=(t=Wh.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");n.save();var r=new Image;r.src=e.source,n.drawImage(r,0,0,100,100),n.restore(),t.toDataURL()}catch(o){i=!1}return i},e.prototype.getPrintCanvasStyle=function(e,t){var i=0,n=0,r=new ei;if(i=e.width,n=e.height,(t.pageHeight||t.pageWidth)&&(n=t.pageHeight?t.pageHeight:n,i=t.pageWidth?t.pageWidth:i),t.pageOrientation&&("Landscape"===t.pageOrientation&&n>i||"Portrait"===t.pageOrientation&&i>n)){var o=i;i=n,n=o}return r.height=n,r.width=i,r},e.prototype.getMultipleImage=function(e,t,i){var n,r,o=[],a=ph("div",{}),s=this.getPrintCanvasStyle(e,t),l=t.margin,c=l.left,h=l.top,d=l.right,p=l.bottom,u=0;n=s.width+u,r=s.height+0;var f=0,g=0;if(t&&t.multiplePage){a.style.height="auto",a.style.width="auto";var m=e.height,y=e.width,v=0,b=0,w=void 0,x=0,S=0,C=void 0,P=void 0;do{do{x=s.width,S=s.height,f+s.width>=y&&(x=y-f),g+s.height>=m&&(S=m-g),(C=(P=Wh.createCanvas(this.diagram.element.id+"_multiplePrint",s.width,s.height)).getContext("2d")).drawImage(e,u+f+c,0+g+h,x-d-c,S-p-h,0+c,0+h,x-d-c,S-p-h),f+s.width>=y&&(f-=f-y),w=P.toDataURL(),C.restore(),f+=n,i?o.push(w):this.printImage(a,w,v+""+b,n+"px;",r+"px;"),v++}while(f<y);b++,v=u=f=0,g+s.height>=m&&(g-=g-m),g+=r}while(g<m)}else{var E,O,M=this.getPrintCanvasStyle(e,t);E=M.width,O=M.height;C=void 0,P=void 0,w=void 0;(C=(P=Wh.createCanvas(this.diagram.element.id+"_diagram",E,O)).getContext("2d")).drawImage(e,0+c,0+h,e.width-(d+c),e.height-(h+p),0+c,0+h,E-(d+c),O-(h+p)),w=P.toDataURL(),C.restore(),i?o.push(w):this.printImage(a,w,0)}return i?o:a},e.prototype.printImage=function(e,t,i,n,r){var o={class:"e-diagram-print-page",style:"width:"+n+"height:"+r},a=ph("img",o),s=ph("div",o);wh(a,o={id:this.diagram.element.id+"_multiplePrint_img"+i,style:"float:left",src:t}),s.appendChild(a),e.appendChild(s)},e.prototype.print=function(e){e.mode="Data";var t=this.exportDiagram(e);this.printImages(t,e)},e.prototype.printImages=function(e,t){var i=this,n={id:this.diagram.element.id+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var r=ph("img",n);r.onload=function(){var e=i.getMultipleImage(r,t),n=window.open("");null!=n&&e instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.document.write('<BODY onload="setTimeout(function(){window.print();}, 100)">'),n.document.write("<center>"+e.innerHTML+"</center>"),n.document.close())}},e.prototype.getDiagramContent=function(e){var t=document.getElementById(this.diagram.element.id+"content"),i=t.scrollLeft,n=t.scrollTop,r=this.diagram.scrollSettings.currentZoom,o=this.diagram.scroller.horizontalOffset,a=this.diagram.scroller.verticalOffset,s=Number(String(this.diagram.width).split("px")[0]),l=Number(String(this.diagram.height).split("px")[0]),c=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/r);var h,d;h=c.x,d=c.y,this.diagram.scroller.transform={tx:-h,ty:-d,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-h,this.diagram.scroller.verticalOffset=-d,this.diagram.scroller.setSize(),this.diagram.setSize(c.width,c.height);var p=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~Ti.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),e=e||document.styleSheets;for(var u="",f=0;f<e.length;f++)(e[f].href||"string"===typeof e[f])&&(u+="<link href='"+(e[f].href||e[f])+"' rel='stylesheet' />");var g=document.getElementById(this.diagram.element.id+"content").innerHTML;return g=(g=u+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+g+"</div></body>").replace(/ transform: t/g," -webkit-transform: t"),this.diagram.setSize(s,l),this.diagram.scroller.zoom(r/this.diagram.scrollSettings.currentZoom),this.diagram.snapSettings.constraints=p,this.diagram.dataBind(),i||n?this.diagram.setOffset(i,n):(this.diagram.scroller.transform={tx:o/this.diagram.scroller.currentZoom,ty:a/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=o,this.diagram.scroller.verticalOffset=a),this.diagram.renderSelector(!1),g},e.prototype.exportImages=function(e,t){var i=this,n=t&&t.region?t.region:"Content",r=t.margin||{};r={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var o=this.getDiagramBounds(n,{});t.bounds&&(o.x=isNaN(t.bounds.x)?o.x:t.bounds.x,o.y=isNaN(t.bounds.y)?o.y:t.bounds.y,o.width=t.bounds.width||o.width,o.height=t.bounds.height||o.height);var a=document.createElement("img");wh(a,{src:e});var s=this;a.onload=function(){var n=Wh.createCanvas(s.diagram.element.id+"innerImage",o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l=n.getContext("2d");if(l.fillStyle="transparent",l.fillRect(0,0,o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l.drawImage(a,o.x,o.y,o.width,o.height,r.left,r.top,o.width,o.height),e=n.toDataURL(),t.printOptions)s.printImages(e,t);else{l.restore();var c=t.fileName||"diagram";i.canvasMultiplePage(t,n,r,e,c)}}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"PrintandExport"},e}(),cp=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"===typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,i,n){return(e=e||this.dataManager)?e.executeQuery(this,t,i,n):pp.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):pp.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"===typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,i,n,r){t=t?t.toLowerCase():null;var o=null;return"string"===typeof e?o=new hp(e,t,i,n,r):e instanceof hp&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},e.prototype.search=function(e,t,i,n,r){"string"===typeof t&&(t=[t]),i=i||"contains";var o=pp.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:n,ignoreAccent:r,comparer:o}}),this},e.prototype.sortBy=function(t,i,n){var r,o,a="ascending";if("string"===typeof t&&pp.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),i&&"string"!==typeof i||(a=i?i.toLowerCase():"ascending",i=pp.fnSort(i)),n){r=e.filterQueries(this.queries,"onSortBy");for(var s=0;s<r.length;s++)if("string"===typeof(o=r[s].e.fieldName)){if(o===t)return this}else if(o instanceof Array)for(var l=0;l<o.length;l++)if(o[l]===t||t.toLowerCase()===o[l]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:a}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"===typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter(function(e){return e.fn===t})},e.filterQueryLists=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},e}(),hp=function(){function e(t,i,n,r,o){return void 0===r&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"===typeof t?(this.field=t,this.operator=i.toLowerCase(),this.value=n,this.ignoreCase=r,this.ignoreAccent=o,this.isComplex=!1,this.comparer=pp.fnOperators.processOperator(this.operator)):(t instanceof e&&n instanceof e||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return e.and=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,i,n,r,o){return e.combine(this,t,i,n,"and",r,o)},e.or=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,i,n,r,o){return e.combine(this,t,i,n,"or",r,o)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}var r=e;return this.fromJSONData(r)},e.prototype.validate=function(e){var t,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,pp.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var r=0;r<n.length;r++)if(i=n[r].validate(e),t){if(!i)return!1}else if(i)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}},e.combinePredicates=function(t,i){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],i,t.slice(1))},e.combine=function(t,i,n,r,o,a,s){return i instanceof e?e[o](t,i):"string"===typeof i?e[o](t,new e(i,n,r,a,s)):pp.throwError("Predicate - "+o+" : invalid arguments")},e.fromJSONData=function(t){for(var i=t.predicates||[],n=i.length,r=[],o=0;o<n;o++)r.push(this.fromJSONData(i[o]));return t.isComplex?new e(r[0],t.condition,r.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),dp={GroupGuid:"{271bbba0-1ee7}"},pp=function(){function e(){}return e.getValue=function(e,t){return"function"===typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return null===t||void 0===t?-1:"string"===typeof e?e.localeCompare(t):null===e||void 0===e?1:e-t},e.fnDescending=function(e,t){return null===t||void 0===t?1:"string"===typeof e?-1*e.localeCompare(t):null===e||void 0===e?-1:t-e},e.extractFields=function(e,t){for(var i={},n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i},e.select=function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i},e.group=function(t,i,n,r,o,a){r=r||1;var s=t;if(s.GroupGuid===dp.GroupGuid){for(var l=function(e){if(d(o))s[e].items=c.group(s[e].items,i,n,s.level+1,null,a),s[e].count=s[e].items.length;else{var t,r=o.filter(function(t){return t.key===s[e].key});t=o.indexOf(r[0]),s[e].items=c.group(s[e].items,i,n,s.level+1,o[t].items,a),s[e].count=o[t].count}},c=this,h=0;h<s.length;h++)l(h);return s.childLevels+=1,s}var p={},u=[];u.GroupGuid=dp.GroupGuid,u.level=r,u.childLevels=0,u.records=s;for(var f=function(e){var t=g.getVal(s,e,i);if(d(a)||(t=a(t,i)),!p[t]&&(p[t]={key:t,count:0,items:[],aggregates:{},field:i},u.push(p[t]),!d(o))){var n=o.filter(function(e){return e.key===p[t].key});p[t].count=n[0].count}p[t].count=d(o)?p[t].count+=1:p[t].count,p[t].items.push(s[e])},g=this,m=0;m<s.length;m++)f(m);if(n&&n.length){var y=function(t){for(var i={},r=void 0,a=n,s=0;s<n.length;s++)if(r=e.aggregates[n[s].type],d(o))r&&(i[a[s].field+" - "+a[s].type]=r(u[t].items,a[s].field));else{var l=o.filter(function(e){return e.key===u[t].key});r&&(i[a[s].field+" - "+a[s].type]=r(l[0].items,a[s].field))}u[t].aggregates=i};for(m=0;m<u.length;m++)y(m)}return s.length&&u||s},e.buildHierarchy=function(e,t,i,n,r){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++){(a[s=this.getObject(e,n[o])]||(a[s]=[])).push(n[o])}for(o=0;o<i.length;o++){var s=this.getObject(r||e,i[o]);i[o][t]=a[s]}},e.getFieldList=function(e,t,i){if(void 0===i&&(i=""),void 0===t||null===t)return this.getFieldList(e,[],i);for(var n=e,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];"object"!==typeof n[a]||n[a]instanceof Array?t.push(i+a):this.getFieldList(n[a],t,i+a+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var i=t,n=e.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i}},e.setValue=function(e,t,i){var n,r,o=e.toString().split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?void 0:t:d(s[r])&&(s[r]={}),s=s[r];return a},e.sort=function(e,t,i){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),r=e.slice(0,n),o=e.slice(n);return r=this.sort(r,t,i),o=this.sort(o,t,i),this.merge(r,o,t,i)},e.ignoreDiacritics=function(t){return"string"!==typeof t?t:t.split("").map(function(t){return t in e.diacritics?e.diacritics[t]:t}).join("")},e.merge=function(e,t,i,n){for(var r,o=[];e.length>0||t.length>0;)r=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,o.push(r.shift());return o},e.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"===typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,i,n){if(t in e){var r=e[t](i,n);d(r)||(i=r)}return i},e.getAddParams=function(t,i,n){var r={};return e.callAdaptorFunction(t,"addParams",{dm:i,query:n,params:n.params,reqParams:r}),r},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(t){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})},e.isNull=function(e){return void 0===e||null===e},e.getItemFromComparer=function(t,i,n){var r,o,a,s=0,l="string"===typeof e.getVal(t,0,i);if(t.length)for(;d(r)&&s<t.length;)r=e.getVal(t,s,i),a=t[s++];for(;s<t.length;s++)d(o=e.getVal(t,s,i))||(l&&(r=+r,o=+o),n(r,o)>0&&(r=o,a=t[s]));return a},e.distinct=function(t,i,n){n=!d(n)&&n;var r,o=[],a={};return t.forEach(function(s,l){(r=e.getVal(t,l,i))in a||(o.push(n?t[l]:r),a[r]=1)}),o},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},e.aggregates={sum:function(t,i){for(var n,r=0,o="number"!==typeof e.getVal(t,0,i),a=0;a<t.length;a++)n=e.getVal(t,a,i),isNaN(n)||null===n||(o&&(n=+n),r+=n);return r},average:function(t,i){return e.aggregates.sum(t,i)/t.length},min:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnAscending))},max:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnDescending))},truecount:function(e,t){return new wp(e).executeLocal((new cp).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new wp(e).executeLocal((new cp).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},e.fnOperators={equal:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?e.toLowerCase(t)===e.toLowerCase(i):t===i},notequal:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),!e.fnOperators.equal(t,i,n)},lessthan:function(t,i,n){return n?e.toLowerCase(t)<e.toLowerCase(i):t<i},greaterthan:function(t,i,n){return n?e.toLowerCase(t)>e.toLowerCase(i):t>i},lessthanorequal:function(t,i,n){return n?e.toLowerCase(t)<=e.toLowerCase(i):t<=i},greaterthanorequal:function(t,i,n){return n?e.toLowerCase(t)>=e.toLowerCase(i):t>=i},contains:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?!d(t)&&!d(i)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(i)):!d(t)&&!d(i)&&-1!==t.toString().indexOf(i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.startsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.startsWith(t,i)},endswith:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.endsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.endsWith(t,i)},processSymbols:function(t){var i=e.operatorSymbols[t];return i?e.fnOperators[i]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var i=e.fnOperators[t];return i||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"===typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"===typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var i=0;i<t.length;i++)"object"===typeof t[i]&&null!==t[i]?e.parse.iterateAndReviveJson(t[i]):"string"!==typeof t[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i])?t[i]=e.parse.parseJson(t[i]):t[i]=e.parse.jsonReviver("",t[i])},iterateAndReviveJson:function(t){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e.startsWith(o,"__")||("object"===typeof(i=t[o])?i instanceof Array?e.parse.iterateAndReviveArray(i):i&&e.parse.iterateAndReviveJson(i):t[o]=e.parse.jsonReviver(t[o],i))}},jsonReviver:function(t,i){var n=i;if("string"===typeof i){var r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),o=e.timeZoneHandling?e.serverTimezoneOffset:null;if(r)return e.dateParse.toTimeZone(new Date(parseInt(r[1],10)),o,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var a=n.split(/[^0-9]/);i=e.dateParse.toTimeZone(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),o,!0)}}return i},isJson:function(t){return"string"===typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,i){return e.isPlainObject(t)?e.parse.jsonReplacer(t,i):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},i).val:t},jsonReplacer:function(t,i){for(var n,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];if((n=t[a])instanceof Date){var s=n;t[a]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(s),e.serverTimezoneOffset).toJSON()}}return t},arrayReplacer:function(t){for(var i=0;i<t.length;i++)e.isPlainObject(t[i])?t[i]=e.parse.jsonReplacer(t[i]):t[i]instanceof Date&&(t[i]=e.parse.jsonReplacer({date:t[i]}).date);return t},jsonDateReplacer:function(t,i){if("value"===t&&i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.split(/[^0-9]/);i=e.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(i instanceof Date)return i=e.dateParse.addSelfOffset(i),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i),null).toJSON():(i=e.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-e.serverTimezoneOffset,!1)).toJSON()}return i}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,i,n){if(null===i)return t;var r=n?e.dateParse.toUTC(t):t;return new Date(+r-36e5*i)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",r=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+n+r(i/60)+":"+r(i%60)}},e}(),up=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fp=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,i,n){return e},e}(),gp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return up(t,e),t.prototype.processQuery=function(e,t){for(var i,n,r=e.dataSource.json.slice(0),o=r.length,a=!0,s={},l=0;l<t.queries.length;l++)i=this[(n=t.queries[l]).fn].call(this,r,n.e,t),"onAggregates"===n.fn?s[n.e.field+" - "+n.e.type]=i:r=void 0!==i?i:r,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(a=!1),a&&(o=r.length);return t.isCountRequired&&(r={result:r,count:o,aggregates:s}),r},t.prototype.batchRequest=function(e,t,i){var n,r=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,i.key,t.changedRecords[n]);for(n=0;n<r;n++)this.remove(e,i.key,t.deletedRecords[n]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter(function(e){if(t)return t.validate(e)}):e},t.prototype.onAggregates=function(e,t){var i=pp.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&pp.getFieldList(e[0],t.fieldNames),e.filter(function(e){for(var i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,pp.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,t,i){if(!e||!e.length)return e;var n,r=pp.getValue(t.fieldName,i);if(!r)return e.sort(t.comparer);if(r instanceof Array){for(var o=(r=r.slice(0)).length-1;o>=0;o--)r[o]&&(n=t.comparer,pp.endsWith(r[o]," desc")&&(n=pp.fnSort("descending"),r[o]=r[o].replace(" desc","")),e=pp.sort(e,r[o],n));return e}return pp.sort(e,r,t.comparer)},t.prototype.onGroup=function(e,t,i){if(!e||!e.length)return e;var n=cp.filterQueries(i.queries,"onAggregates"),r=[];if(n.length)for(var o=void 0,a=0;a<n.length;a++)o=n[a].e,r.push({type:o.type,field:pp.getValue(o.field,i)});return pp.group(e,pp.getValue(t.fieldName,i),r,null,null,t.comparer)},t.prototype.onPage=function(e,t,i){var n=pp.getValue(t.pageSize,i),r=(pp.getValue(t.pageIndex,i)-1)*n,o=r+n;return e&&e.length?e.slice(r,o):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(pp.getValue(t.start),pp.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,pp.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(pp.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?pp.select(e,pp.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,i,n,r){return d(r)?e.dataSource.json.push(t):e.dataSource.json.splice(r,0,t)},t.prototype.remove=function(e,t,i,n){var r,o=e.dataSource.json;for("object"!==typeof i||i instanceof Date||(i=i[t]),r=0;r<o.length&&o[r][t]!==i;r++);return r!==o.length?o.splice(r,1):null},t.prototype.update=function(e,t,i,n){var r,o=e.dataSource.json,a=i[t];for(r=0;r<o.length&&o[r][t]!==a;r++);return r<o.length?c(o[r],i):null},t}(fp),mp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return up(t,e),t.prototype.processQuery=function(e,t,i){var n,r,o=this.getQueryRequest(t),a=cp.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t.params,l=e.dataSource.url,c=null,h=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in a?(n=a.onPage,r=((r=pp.getValue(n.pageIndex,t))-1)*(c=pp.getValue(n.pageSize,t))):"onRange"in a&&(r=(n=a.onRange).start,c=n.end-n.start);for(var p=0;p<o.sorts.length;p++)n=pp.getValue(o.sorts[p].e.fieldName,t),d.sorts.push(pp.callAdaptorFunction(this,"onEachSort",{name:n,direction:o.sorts[p].e.direction},t));i&&(n=this.getFiltersFrom(i,t))&&d.filters.push(pp.callAdaptorFunction(this,"onEachWhere",n.toJson(),t));for(p=0;p<o.filters.length;p++){d.filters.push(pp.callAdaptorFunction(this,"onEachWhere",o.filters[p].e.toJson(),t));for(var u=0,f="object"===typeof d.filters[p]?Object.keys(d.filters[p]):[];u<f.length;u++){var g=f[u];pp.isNull(d[g])&&delete d[g]}}for(p=0;p<o.searches.length;p++)n=o.searches[p].e,d.searches.push(pp.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(p=0;p<o.groups.length;p++)d.groups.push(pp.getValue(o.groups[p].e.fieldName,t));for(p=0;p<o.aggregates.length;p++)n=o.aggregates[p].e,d.aggregates.push({type:n.type,field:pp.getValue(n.field,t)});var m={};this.getRequestQuery(h,t,a,d,m),pp.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:s,reqParams:m});for(var y=0,v=Object.keys(m);y<v.length;y++){g=v[y];(pp.isNull(m[g])||""===m[g]||0===m[g].length)&&delete m[g]}h.skip in m&&h.take in m||null===c||(m[h.skip]=pp.callAdaptorFunction(this,"onSkip",r,t),m[h.take]=pp.callAdaptorFunction(this,"onTake",c,t));var b=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(m,pp.parse.jsonDateReplacer),url:l,pvtData:b,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(m,t,e),{type:"GET",url:(n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n).length?l.replace(/\/*$/,n):l,pvtData:b})},t.prototype.getRequestQuery=function(e,t,i,n,r){var o=r;o[e.from]=t.fromTable,e.apply&&t.distincts.length&&(o[e.apply]="onDistinct"in this?pp.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(o[e.expand]="onExpand"in this&&"onSelect"in i?pp.callAdaptorFunction(this,"onExpand",{selects:pp.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),o[e.select]="onSelect"in i&&!t.distincts.length?pp.callAdaptorFunction(this,"onSelect",pp.getValue(i.onSelect.fieldNames,t),t):"",o[e.count]=t.isCountRequired?pp.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",o[e.search]=n.searches.length?pp.callAdaptorFunction(this,"onSearch",n.searches,t):"",o[e.skip]="onSkip"in i?pp.callAdaptorFunction(this,"onSkip",pp.getValue(i.onSkip.nos,t),t):"",o[e.take]="onTake"in i?pp.callAdaptorFunction(this,"onTake",pp.getValue(i.onTake.nos,t),t):"",o[e.where]=n.filters.length||n.searches.length?pp.callAdaptorFunction(this,"onWhere",n.filters,t):"",o[e.sortBy]=n.sorts.length?pp.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",o[e.group]=n.groups.length?pp.callAdaptorFunction(this,"onGroup",n.groups,t):"",o[e.aggregates]=n.aggregates.length?pp.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",o.param=[]},t.prototype.convertToQueryString=function(e,t,i){return""},t.prototype.processResponse=function(e,t,i,n,r,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){var a=pp.timeZoneHandling;t&&!t.timeZoneHandling&&(pp.timeZoneHandling=!1),e=pp.parse.parseJson(e),pp.timeZoneHandling=a}var s=r,l=s.pvtData||{},c=e?e.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var h=JSON.parse(s.data);if(h&&"batch"===h.action&&e&&e.addedRecords)return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);var d={};return e&&"count"in e&&(d.count=e.count),d.result=e&&e.result?e.result:e,this.getAggregateResult(l,e,d,c,i),pp.isNull(d.count)?d.result:{result:d.result,count:d.count,aggregates:d.aggregates}},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(h({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},pp.getAddParams(this,e,n)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,i,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(h({},{value:t,table:i,action:"insert"},pp.getAddParams(this,e,n)))}},t.prototype.remove=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(h({},{key:i,keyColumn:t,table:n,action:"remove"},pp.getAddParams(this,e,r)))}},t.prototype.update=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(h({},{value:i,action:"update",keyColumn:t,key:i[t],table:n},pp.getAddParams(this,e,r)))}},t.prototype.getFiltersFrom=function(e,t){var i,n=t.fKey,r=n,o=t.key,a=[];"object"!==typeof e[0]&&(r=null);for(var s=0;s<e.length;s++)i="object"===typeof e[0]?pp.getObject(o||r,e[s]):e[s],a.push(new hp(n,"equal",i));return hp.or(a)},t.prototype.getAggregateResult=function(e,t,i,n,r){var o=t;if(t&&t.result&&(o=t.result),e&&e.aggregates&&e.aggregates.length){var a=e.aggregates,s=void 0,l=o,c={};t.aggregate&&(l=t.aggregate);for(var h=0;h<a.length;h++)(s=pp.aggregates[a[h].type])&&(c[a[h].field+" - "+a[h].type]=s(l,a[h].field));i.aggregates=c}if(e&&e.groups&&e.groups.length){var p=e.groups;for(h=0;h<p.length;h++){d(n)||(n=pp.group(n,p[h]));var u=cp.filterQueries(r.queries,"onGroup")[h].e;o=pp.group(o,p[h],e.aggregates,null,n,u.comparer)}i.result=o}return i},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=cp.filterQueries(e.queries,"onSortBy"),t.groups=cp.filterQueries(e.queries,"onGroup"),t.filters=cp.filterQueries(e.queries,"onWhere"),t.searches=cp.filterQueries(e.queries,"onSearch"),t.aggregates=cp.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var i=0,n=e.params;i<n.length;i++){var r=n[i];if(t[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[r.key]=r.value,r.fn&&(t[r.key]=r.fn.call(e.query,r.key,e.query,e.dm)),t.params[r.key]=t[r.key]}},t}(fp),yp=function(e){function t(t){var i=e.call(this)||this;return i.options=h({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),h(i.options,t||{}),i}return up(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var r,o,a="",s=e.value,l=typeof s,c=e.field?t.getField(e.field):null;if(s instanceof Date&&(s="datetime'"+pp.parse.replacer(s)+"'"),"string"===l&&(s="'"+(s=encodeURIComponent(s))+"'",n&&(c="cast("+c+", 'Edm.String')"),pp.parse.isGuid(s)&&(o="guid"),e.ignoreCase&&(o||(c="tolower("+c+")"),s=s.toLowerCase())),r=pp.odBiOperator[e.operator])return a+=c,a+=r,o&&(a+=o),a+s;if("substringof"===(r=d(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?pp.odUniOperator[e.operator]:pp.odv4UniOperator[e.operator])){var h=s;s=c,c=h}return a+=r+"(",a+=c+",",o&&(a+=o),a+=s+")"},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,i){for(var n=[],r=0;r<e.predicates.length;r++)n.push("("+this.onEachWhere(e.predicates[r],t,i)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&pp.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new hp(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=hp.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,i){pp.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,i,n,r,o){if(r&&"GET"===r.type&&!this.rootUrl&&e["odata.metadata"]){var a=e["odata.metadata"].split("/$metadata#");this.rootUrl=a[0],this.resourceTableName=a[1]}if(!d(e.d)){var s=i&&i.isCountRequired?e.d.results:e.d;if(!d(s))for(var l=0;l<s.length;l++)d(s[l].__metadata)||delete s[l].__metadata}var c=r&&r.pvtData,h=this.processBatchResponse(e,i,n,r,o);if(h)return h;var p=n&&r.getResponseHeader("DataServiceVersion"),u=null,f=p&&parseInt(p,10)||2;if(i&&i.isCountRequired){(e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"])}3===f&&e.value&&(e=e.value),e.d&&(e=e.d),f<3&&e.results&&(e=e.results);var g={};return g.count=u,g.result=e,this.getAggregateResult(c,e,g,null,i),pp.isNull(u)?g.result:{result:g.result,count:g.count,aggregates:g.aggregates}},t.prototype.convertToQueryString=function(e,t,i){var n=[],r=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n.push(s+"="+e[s])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""},t.prototype.localTimeReplacer=function(e,t){for(var i=0,n=d(t)?[]:Object.keys(t);i<n.length;i++){var r=n[i];t[r]instanceof Date&&(t[r]=pp.dateParse.toLocalTime(t[r]))}return t},t.prototype.insert=function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,i,n){var r;return r="string"!==typeof i||pp.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+r}},t.prototype.update=function(e,t,i,n,r,o){var a;return"PATCH"!==this.options.updateType||d(o)||(i=this.compareAndRemove(i,o,t)),a="string"!==typeof i[t]||pp.parse.isGuid(i[t])?"("+i[t]+")":"('"+i[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+a,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,i,n,r){var o=i.guid=pp.getGuid(this.options.batchPre),a=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var s={url:i.url,key:i.key,cid:1,cSet:pp.getGuid(this.options.changeSet)},l="--"+o+"\n";return l+="Content-Type: multipart/mixed; boundary="+s.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,s,e),l+=this.generateUpdateRequest(t.changedRecords,s,e,r?r.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,s,e),l+=s.cSet+"--\n",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:l+="--"+o+"--"}},t.prototype.generateDeleteRequest=function(e,t,i){if(!e)return"";var n={method:"DELETE ",url:function(e,t,i){var n=pp.getObject(i,e[t]);return"number"===typeof n||pp.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][i].toJSON()+")":"('"+n+"')"},data:function(e,t){return""}};return this.generateBodyContent(e,t,n,i)+"\n"},t.prototype.generateInsertRequest=function(e,t,i){if(!e)return"";var n={method:"POST ",url:function(e,t,i){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,n,i)},t.prototype.generateUpdateRequest=function(e,t,i,n){var r=this;if(!e)return"";e.forEach(function(e){return e=r.compareAndRemove(e,n.filter(function(i){return pp.getObject(t.key,i)===pp.getObject(t.key,e)})[0],t.key)});var o={method:this.options.updateType+" ",url:function(e,t,i){return"number"===typeof e[t][i]||pp.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":"('"+e[t][i]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,o,i)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,i,n){for(var r="",o=0;o<e.length;o++)r+="\n"+t.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(n.dataSource.insertUrl||n.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(n.dataSource.updateUrl||n.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(n.dataSource.removeUrl||n.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",d(e[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+e[o]["@odata.etag"]+"\n\n",delete e[o]["@odata.etag"]),r+=i.data(e,o);return r},t.prototype.processBatchResponse=function(e,t,i,n,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&pp.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var o=i.getResponseHeader("Content-Type"),a=void 0,s=void 0,l=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),(l=l.split(o)).length<2)return{};l=l[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);c&&l.replace(c[0],"");for(var d=c?c[1]:"",p=(l=l.split(d)).length;p>-1;p--)/\bContent-ID:/i.test(l[p])&&/\bHTTP.+201/.test(l[p])&&(a=parseInt(/\bContent-ID: (\d+)/i.exec(l[p])[1],10),r.addedRecords[a]&&(s=pp.parse.parseJson(/^\{.+\}/m.exec(l[p])[0]),h({},r.addedRecords[a],this.processResponse(s))));return r}return null},t.prototype.compareAndRemove=function(e,t,i){var n=this;return d(t)?e:(Object.keys(e).forEach(function(r){r!==i&&"@odata.etag"!==r&&(pp.isPlainObject(e[r])?(n.compareAndRemove(e[r],t[r]),0===Object.keys(e[r]).filter(function(e){return"@odata.etag"!==e}).length&&delete e[r]):e[r]===t[r]?delete e[r]:e[r]&&t[r]&&e[r].valueOf()===t[r].valueOf()&&delete e[r])}),e)},t}(mp),vp=(function(e){function t(t){var i=e.call(this,t)||this;return i.options=h({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),h(i.options,t||{}),i}up(t,e),t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,i,n){var r="",o=t.value instanceof Date;return r=e.prototype.onPredicate.call(this,t,i,n),o&&(r=r.replace(/datetime'(.*)'$/,"$1")),r},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var t=this,i={},n={},r=e.expands.slice(),o=[];return e.selects.filter(function(e){return e.indexOf(".")>-1}).forEach(function(e){var t=e.split(".");t[0]in i||(i[t[0]]=[]),i[t[0]].push(t[1])}),Object.keys(i).forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r.forEach(function(e){n[e]=e in i?e+"("+t.options.select+"="+i[e].join(",")+")":e}),Object.keys(n).forEach(function(e){return o.push(n[e])}),o.join(",")},t.prototype.onDistinct=function(e){return"groupby(("+e.map(function(e){return yp.getField(e)}).join(",")+"))"},t.prototype.onSelect=function(t){return e.prototype.onSelect.call(this,t.filter(function(e){return-1===e.indexOf(".")}))},t.prototype.beforeSend=function(e,t,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||t.setRequestHeader("Prefer","return=representation"),t.setRequestHeader("Accept",this.options.accept)},t.prototype.processResponse=function(t,i,n,r,o,a){if(o&&"GET"===o.type&&!this.rootUrl&&t["@odata.context"]){var s=t["@odata.context"].split("/$metadata#");this.rootUrl=s[0],this.resourceTableName=s[1]}var l=o&&o.pvtData,c=e.prototype.processBatchResponse.call(this,t,n,r,o,a);if(c)return c;var h=null;n&&n.isCountRequired&&"@odata.count"in t&&(h=t["@odata.count"]),t=d(t.value)?t:t.value;var p={};return p.count=h,p.result=t,this.getAggregateResult(l,t,p,null,n),pp.isNull(h)?p.result:{result:p.result,count:h,aggregates:p.aggregates}}}(yp),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}up(t,e),t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,i,n){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},t.prototype.update=function(e,t,i,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},t.prototype.batchRequest=function(e,t,i){var n=this,r=i.guid=pp.getGuid(this.options.batchPre),o=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var a=[],s=function(n,o){t.addedRecords.forEach(function(o,s){var l=function(e,t,i){return""};a.push("--"+r),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||i.url)+l(t.addedRecords,n,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",o?JSON.stringify(o):"")})},l=0,c=t.addedRecords.length;l<c;l++)s(l);var h=function(o,s){t.changedRecords.forEach(function(s,l){n.options.updateType;var c=function(e,t,i){return""};a.push("--"+r),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||i.url)+c(t.changedRecords,o,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",s?JSON.stringify(s):"")})};for(l=0,c=t.changedRecords.length;l<c;l++)h(l);var d=function(n,o){t.deletedRecords.forEach(function(o,s){var l=function(e,t,i){var n=pp.getObject(i,e[t]);return"number"===typeof n||pp.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+e[t][i].toJSON():"/'"+n+"'"};a.push("--"+r),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||i.url)+l(t.deletedRecords,n,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",o?JSON.stringify(o):"")})};for(l=0,c=t.deletedRecords.length;l<c;l++)d(l);return a.push("--"+r+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+r,data:a.join("\r\n")}},t.prototype.beforeSend=function(e,t,i){t.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,i,n,r,o){var a=r&&r.pvtData,s=null,l={};if(r&&"post"!==r.type.toLowerCase()){var c=n&&r.getResponseHeader("DataServiceVersion"),h=c&&parseInt(c,10)||2;i&&i.isCountRequired&&(pp.isNull(e.Count)||(s=e.Count)),h<3&&e.Items&&(e=e.Items),l.count=s,l.result=e,this.getAggregateResult(a,e,l,null,i)}return l.result=l.result||e,pp.isNull(s)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}}}(yp),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}up(t,e),t.prototype.processQuery=function(e,t,i){var n=(new mp).processQuery(e,t,i),r=pp.parse.parseJson(n.data),o={};if(r.param)for(var a=0;a<r.param.length;a++){var s=r.param[a],l=Object.keys(s)[0];o[l]=s[l]}o.value=r;return{data:JSON.stringify(o),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}(mp),function(e){function t(){var t=e.call(this)||this;return s("beforeSend",mp.prototype.beforeSend,t),t}return up(t,e),t.prototype.insert=function(e,t,i,n,r){return this.pvt.position=r,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(h({},{value:t,table:i,action:"insert"},pp.getAddParams(this,e,n)))}},t.prototype.remove=function(t,i,n,r,o){return e.prototype.remove.call(this,t,i,n),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(h({},{key:n,keyColumn:i,table:r,action:"remove"},pp.getAddParams(this,t,o)))}},t.prototype.update=function(e,t,i,n,r){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(h({},{value:i,action:"update",keyColumn:t,key:i[t],table:n},pp.getAddParams(this,e,r)))}},t.prototype.processResponse=function(t,i,n,r,o,a,s){var l;if("add"===this.updateType&&e.prototype.insert.call(this,i,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(l=0;l<t.added.length;l++)e.prototype.insert.call(this,i,t.added[l]);if(t.changed)for(l=0;l<t.changed.length;l++)e.prototype.update.call(this,i,s.key,t.changed[l]);if(t.deleted)for(l=0;l<t.deleted.length;l++)e.prototype.remove.call(this,i,s.key,t.deleted[l]);return t},t.prototype.batchRequest=function(e,t,i){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key})}},t.prototype.addParams=function(e){(new mp).addParams(e)},t}(gp)),bp=function(e){function t(t,i,n){var r=e.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,d(t)||(r.cacheAdaptor=t),r.pageSize=n,r.guidId=pp.getGuid("cacheAdaptor");window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var o=r.guidId;return d(i)||setInterval(function(){var e;e=pp.parse.parseJson(window.localStorage.getItem(o));for(var t=[],n=0;n<e.results.length;n++){var r=+new Date,a=+new Date(e.results[n].timeStamp);e.results[n].timeStamp=r-a,r-a>i&&t.push(n)}for(n=0;n<t.length;n++)e.results.splice(t[n],1),e.keys.splice(t[n],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(e))},i),r}return up(t,e),t.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),n=cp.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e;"onPage"in n&&(r+=n.onPage.pageIndex),i.sorts.forEach(function(e){r+=e.e.direction+e.e.fieldName}),i.groups.forEach(function(e){r+=e.e.fieldName}),i.searches.forEach(function(e){r+=e.e.searchKey});for(var o=0;o<i.filters.length;o++){var a=i.filters[o];if(a.e.isComplex){var s=t.clone();s.queries=[];for(var l=0;l<a.e.predicates.length;l++)s.queries.push({fn:"onWhere",e:a.e.predicates[l],filter:t.queries.filter});r+=a.e.condition+this.generateKey(e,s)}else r+=a.e.field+a.e.operator+a.e.value}return r},t.prototype.processQuery=function(e,t,i){var n,r=this.generateKey(e.dataSource.url,t),o=(n=pp.parse.parseJson(window.localStorage.getItem(this.guidId)))?n.results[n.keys.indexOf(r)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o},t.prototype.processResponse=function(e,t,i,n,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&pp.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,n,r,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var a=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,s={},l=(s=pp.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(a);for(-1!==l&&(s.results.splice(l,1),s.keys.splice(l,1)),s.results[s.keys.push(a)-1]={keys:a,result:e.result,timeStamp:new Date,count:e.count};s.results.length>this.pageSize;)s.results.splice(0,1),s.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(s)),e},t.prototype.beforeSend=function(e,t,i){!d(this.cacheAdaptor.options.batch)&&pp.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,n)},t.prototype.insert=function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)},t.prototype.remove=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,n)},t.prototype.batchRequest=function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)},t}(mp),wp=function(){function e(e,t,i){var n,r=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?n={json:e,offline:!0}:"object"===typeof e?(e.json||(e.json=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof vp)&&!e.url,requiresFormat:e.requiresFormat}):pp.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||pp.isCors()||(n.requiresFormat=!!d(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=t,n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new yp,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new cp),this.ready.then(function(e){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=e.result,r.adaptor=new gp})):this.adaptor=n.offline?new gp:new yp,!n.jsonp&&this.adaptor instanceof yp&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new bp(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof cp||pp.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||pp.throwError("DataManager - executeLocal() : Json data is required to execute"),t=t||this.defaultQuery;var i=this.adaptor.processQuery(this,t);if(t.subQuery){var n=t.subQuery.fromTable,r=t.subQuery.lookups,o=t.isCountRequired?i.result:i;r&&r instanceof Array&&pp.buildHierarchy(t.subQuery.fKey,n,o,r,t.subQuery.key);for(var a=0;a<o.length;a++)o[a][n]instanceof Array&&(o[a]=h({},{},o[a]),o[a][n]=this.adaptor.processResponse(t.subQuery.using(new e(o[a][n].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(i,this,t)},e.prototype.executeQuery=function(t,i,n,r){var o=this;"function"===typeof t&&(r=n,n=i,i=t,t=null),t||(t=this.defaultQuery),t instanceof cp||pp.throwError("DataManager - executeQuery() : A query is required to execute");var a=new xp,s={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!d(this.adaptor.makeRequest)){var l=this.adaptor.processQuery(this,t);d(this.adaptor.makeRequest)?d(l.url)?(s=e.getDeferedArgs(t,l,s),a.resolve(s)):this.makeRequest(l,a,s,t):this.adaptor.makeRequest(l,a,s,t)}else e.nextTick(function(){var i=o.executeLocal(t);s=e.getDeferedArgs(t,i,s),a.resolve(s)});return(i||n)&&a.promise.then(i,n),r&&a.promise.then(r,r),a.promise},e.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,i){return h({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},e.prototype.makeRequest=function(e,t,i,n){var r=this,o=!!n.subQuerySelector,a=function(e){i.error=e,t.reject(i)},s=function(e,n,r,o,a,s,l){i.xhr=r,i.count=n?parseInt(n.toString(),10):0,i.result=e,i.request=o,i.aggregates=s,i.actual=a,i.virtualSelectRecords=l,t.resolve(i)},l=function(e,t){var l=new xp,c={parent:i};n.subQuery.isChild=!0;var h=r.adaptor.processQuery(r,n.subQuery,e?r.adaptor.processResponse(e):t),d=r.makeRequest(h,l,c,n.subQuery);return o||l.then(function(t){e&&(pp.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,e,t,n.subQuery.key),s(e,t.count,t.xhr))},a),d},c=this.extendRequest(e,function(e,t){-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(e=pp.parse.parseJson(e));var i=r.adaptor.processResponse(e,r,n,t.httpRequest,t),a=0,c=null,h=e.virtualSelectRecords;n.isCountRequired&&(a=i.count,c=i.aggregates,i=i.result),n.subQuery?o||l(i,t):s(i,a,t.httpRequest,t.type,e,c,h)},a),h=new x(c);if(h.beforeSend=function(){r.beforeSend(h.httpRequest,h)},(c=h.send()).catch(function(e){return!0}),this.requests.push(h),o){var d=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});d&&d.length?Promise.all([c,l(null,d)]).then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],a=r.adaptor.processResponse(i[0],r,n,r.requests[0].httpRequest,r.requests[0]),l=0;n.isCountRequired&&(l=a.count,a=a.result);var c=r.adaptor.processResponse(i[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);l=0,n.subQuery.isCountRequired&&(l=c.count,c=c.result),pp.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,a,c,n.subQuery.key),o=!1,s(a,l,r.requests[0].httpRequest)}):o=!1}return c},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,n=this.dataSource.headers,r=0;n&&r<n.length;r++){i=[];for(var o=0,a=Object.keys(n[r]);o<a.length;o++){var s=a[o];i.push(s),e.setRequestHeader(s,n[r][s])}}},e.prototype.saveChanges=function(e,t,i,n,r){var o=this;i instanceof cp&&(n=i,i=null);var a={url:i,key:t||this.dataSource.key},s=this.adaptor.batchRequest(this,e,a,n||new cp,r);if(this.dataSource.offline)return s;if(d(this.adaptor.doAjaxRequest)){var l=new xp,c=new x(s);return c.beforeSend=function(){o.beforeSend(c.httpRequest,c)},c.onSuccess=function(t,i){l.resolve(o.adaptor.processResponse(t,o,null,i.httpRequest,i,e,a))},c.onFailure=function(e){l.reject([{error:e}])},c.send().catch(function(e){return!0}),l.promise}return this.adaptor.doAjaxRequest(s)},e.prototype.insert=function(e,t,i,n){t instanceof cp&&(i=t,t=null);var r=this.adaptor.insert(this,e,t,i,n);return this.dataSource.offline?r:d(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)},e.prototype.remove=function(e,t,i,n){"object"===typeof t&&(t=t[e]),i instanceof cp&&(n=i,i=null);var r=this.adaptor.remove(this,e,t,i,n);return this.dataSource.offline?r:d(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)},e.prototype.update=function(e,t,i,n,r){i instanceof cp&&(n=i,i=null);var o=this.adaptor.update(this,e,t,i,n,r);return this.dataSource.offline?o:d(this.adaptor.doAjaxRequest)?this.doAjaxRequest(o):this.adaptor.doAjaxRequest(o)},e.prototype.doAjaxRequest=function(e){var t=this,i=new xp;e=h({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e);var n=new x(e);return n.beforeSend=function(){t.beforeSend(n.httpRequest,n)},n.onSuccess=function(e,n){try{pp.parse.parseJson(e)}catch(r){e=[]}e=t.adaptor.processResponse(pp.parse.parseJson(e),t,null,n.httpRequest,n),i.resolve(e)},n.onFailure=function(e){i.reject([{error:e}])},n.send().catch(function(e){return!0}),i.promise},e}(),xp=function(){return function(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),Sp=function(){function e(){this.dataTable={}}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"DataBinding"},e.prototype.initData=function(e,t){var i,n=e.dataManager||e.dataSource||{};(i=n.data||n.json||(n.dataSource?n.dataSource.json:void 0))&&0===i.length&&n.dataSource.data&&(i=n.dataSource.data),i&&i.length&&this.applyDataSource(e,i,t)},e.prototype.initSource=function(e,t){var i,n=this,r=e,o=e;if(r.dataManager instanceof wp||r.dataSource instanceof wp){var a=(o.dataManager||o.dataSource).defaultQuery||new cp;(e.dataManager||e.dataSource).executeQuery(a).then(function(r){i=r.result,t.isDestroyed||(n.applyDataSource(e,i,t),t.refreshDiagram(),t.trigger("dataLoaded",{diagram:sc(t)}))})}},e.prototype.applyDataSource=function(e,t,i){var n,r;this.dataTable={};var o,a,s=[],l=[];if(void 0!==t){for(var c=0;c<t.length;c++)void 0===(n=t[c])[e.parentId]||null===n[e.parentId]||"object"!==typeof n[e.parentId]?void 0!==s[n[e.parentId]]?s[n[e.parentId]].items.push(n):s[n[e.parentId]]={items:[n]}:s=this.updateMultipleRootNodes(n,s,e,t),e.root===n[e.id]&&(r={items:[n]});if(r)l.push(r);else for(var h=0,d=Object.keys(s);h<d.length;h++){var p=d[h];p&&"undefined"!==p&&"''"!==p&&"null"!==p||l.push(s[p])}for(var u=0;u<l.length;u++)for(var f=0;f<l[u].items.length;f++){o=l[u].items[f];var g=this.applyNodeTemplate(e,o,i);i.nodes.push(g),this.dataTable[o[e.id]]=g,void 0!==(a=s[g.data[e.id]])&&this.renderChildNodes(e,a,g.id,s,i)}}this.dataTable=null},e.prototype.updateMultipleRootNodes=function(e,t,i,n){for(var r,o=e[i.parentId],a=0;a<o.length;a++)t[r=o[a]]?t[r].items.push(e):t[r]={items:[e]};return t},e.prototype.applyNodeTemplate=function(e,t,i){var n={id:Ch(),data:t},r=_h(e.doBinding);r&&r(n,t,i);var o=new Yc(i,"nodes",n,!0);if(nl(o,n,i.nodeDefaults),e.dataMapSettings)for(var a=void 0,s=[],l=[],c=0;c<e.dataMapSettings.length;c++){if(-1!==e.dataMapSettings[c].property.indexOf(".")){l=this.splitString(e.dataMapSettings[c].property);for(var h=0;h<l.length;h++)-1!==l[h].indexOf("[")&&(a=l[h].indexOf("["),s=l[h].split("["));if(a)if(l[2])o[s[0]][l[0].charAt(a+1)][l[1]][l[2]]=t[e.dataMapSettings[c].field];else{var d=t[e.dataMapSettings[c].field];o[s[0]][l[0].charAt(a+1)][l[1]]=d}else l[2]?o[l[0]][l[1]][l[2]]=t[e.dataMapSettings[c].field]:o[l[0]][l[1]]=t[e.dataMapSettings[c].field]}else{var p=e.dataMapSettings[c].property;o[p=p.charAt(0).toLowerCase()+p.slice(1)]=t[e.dataMapSettings[c].field]}a=0,s=[],l=[]}return this.collectionContains(o,i,e.id,e.parentId)?this.dataTable[t[e.id]]:o},e.prototype.splitString=function(e){var t=[];t=e.split(".");for(var i=0;i<t.length;i++)t[i]=t[i].charAt(0).toLowerCase()+t[i].slice(1);return t},e.prototype.renderChildNodes=function(e,t,i,n,r){for(var o,a,s,l=0;l<t.items.length;l++){o=t.items[l],s=this.applyNodeTemplate(e,o,r);var c=!1;this.collectionContains(s,r,e.id,e.parentId)?c=!0:(this.dataTable[o[e.id]]=s,r.nodes.push(s)),this.containsConnector(r,i,s.id)||r.connectors.push(this.applyConnectorTemplate(i,s.id,r)),c||void 0!==(a=n[s.data[e.id]])&&this.renderChildNodes(e,a,s.id,n,r)}},e.prototype.containsConnector=function(e,t,i){if(""!==t&&""!==i)for(var n=0;n<e.connectors.length;n++){var r=e.connectors[n];if(void 0!==r&&r.sourceID===t&&r.targetID===i)return!0}return!1},e.prototype.collectionContains=function(e,t,i,n){var r=this.dataTable[e.data[i]];return void 0!==r&&r.data[i]===e.data[i]&&r.data[n]===e.data[n]},e.prototype.applyConnectorTemplate=function(e,t,i){var n={id:Ch(),sourceID:e,targetID:t},r=new na(i,"connectors",n,!0);return nl(r,n,i.connectorDefaults),r},e}(),Cp={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper"};function Pp(e,t){var i={};if(d(e)||"string"===typeof e||"number"===typeof e||!d(e.isHeader))return e;for(var n=0,r=Object.keys(t);n<r.length;n++){var o=t[r[n]],s=d(o)||"string"!==typeof o?void 0:a(o,e);d(s)||(i[o]=s)}return i}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right"};function n(e,t,i,n){return S(e,r(e,t,i,n),null,n)}function r(e,t,n,r){var o=[],a=h({},i,r);Cp=b(a.moduleName);for(var s=m(),l=0;l<t.length;l++)if(!d(t[l])){var c=void 0;if(a.itemCreating&&"function"===typeof a.itemCreating){var p={dataSource:t,curData:t[l],text:t[l],options:a};a.itemCreating(p)}if(c=n?v(e,t[l],void 0,null,null,[],null,s,l,r):x(e,t[l],void 0,null,null,r),a.itemCreated&&"function"===typeof a.itemCreated){p={dataSource:t,curData:t[l],text:t[l],item:c,options:a};a.itemCreated(p)}o.push(c)}return o}function o(n,r,o,a,s){var l=h({},i,o);Cp=b(l.moduleName);var p,g=h({},e.defaultMappedFields,l.fields),w=h({},t,l.ariaAttributes);a&&(w.level=a);var S,C=[];r&&r.length&&!d(u(r).item)&&!u(r).item.hasOwnProperty(g.id)&&(p=m());for(var P=0;P<r.length;P++){var E=Pp(r[P],g);if(!d(r[P])){if(l.itemCreating&&"function"===typeof l.itemCreating){var O={dataSource:r,curData:r[P],text:E[g.text],options:l,fields:g};l.itemCreating(O)}var M=r[P];l.itemCreating&&"function"===typeof l.itemCreating&&(E=Pp(r[P],g)),E.hasOwnProperty(g.id)&&!d(E[g.id])&&(p=E[g.id]);var T=[];if(l.showCheckBox&&T.push(n("input",{className:Cp.check,attrs:{type:"checkbox"}})),!0===s)l.showIcon&&E.hasOwnProperty(g.iconCss)&&!d(E[g.iconCss])&&T.push(n("span",{className:Cp.icon+" "+E[g.iconCss]})),S=v(n,M,E,g,l.itemClass,T,!(!M.hasOwnProperty("isHeader")||!M.isHeader),p,P,o);else{if((S=x(n,M,E,g,l.itemClass,o)).classList.add(Cp.level+"-"+w.level),S.setAttribute("aria-level",w.level.toString()),E.hasOwnProperty(g.tooltip)&&S.setAttribute("title",E[g.tooltip]),E.hasOwnProperty(g.htmlAttributes)&&E[g.htmlAttributes]&&f(S,E[g.htmlAttributes]),E.hasOwnProperty(g.enabled)&&!1===E[g.enabled]&&S.classList.add(Cp.disabled),E.hasOwnProperty(g.isVisible)&&!1===E[g.isVisible]&&(S.style.display="none"),E.hasOwnProperty(g.imageUrl)&&!d(E[g.imageUrl])&&!l.template){var L={src:E[g.imageUrl]};c(L,E[g.imageAttributes]),A([n("img",{className:Cp.image,attrs:L})],S.firstElementChild)}l.showIcon&&E.hasOwnProperty(g.iconCss)&&!d(E[g.iconCss])&&!l.template&&A([n("div",{className:Cp.icon+" "+E[g.iconCss]})],S.firstElementChild),T.length&&A(T,S.firstElementChild),y(n,E,g,r,l,S,w.level)}if(l.itemCreated&&"function"===typeof l.itemCreated){O={dataSource:r,curData:r[P],text:E[g.text],item:S,options:l,fields:g};l.itemCreated(O)}C.push(S)}}return C}function a(e,t,n,r,a){var s=h({},i,n);return S(e,o(e,t,n,r,a),s.listClass,n)}function s(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function l(e,t,i){if(void 0===i&&(i=new cp),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function p(e,t){return new wp(e).executeLocal(t)}function u(e){for(var t={typeof:null,item:null},i=0;i<e.length;i++)if(!d(e[i]))return{typeof:typeof e[i],item:e[i]};return t}function f(e,t){var i={};c(i,t),i.class&&(E([e],i.class.split(" ")),delete i.class),R(e,i)}function g(e){for(var t={},i=e.attributes,n=0;n<i.length;n++)t[i[n].nodeName]=i[n].nodeValue;return t}function m(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function y(e,t,i,n,r,o,s){var l=t[i.child]||[],c=t[i.hasChildren];if(l.length&&(c=!0,o.classList.add(Cp.hasChild),r.processSubChild)){var h=a(e,l,r,++s);o.appendChild(h)}r.expandCollapse&&c&&!r.template&&(o.firstElementChild.classList.add(Cp.iconWrapper),("Left"===r.expandIconPosition?A:L)([e("div",{className:"e-icons "+r.expandIconClass})],o.querySelector("."+Cp.textContent)))}function v(e,n,r,o,a,s,l,c,p,u){var g,m,y=h({},i,u),v=h({},t,y.ariaAttributes),b=n,x=n;"string"!==typeof n&&"number"!==typeof n&&"boolean"!==typeof n&&(g=n,b="boolean"===typeof r[o.text]||"number"===typeof r[o.text]?r[o.text]:r[o.text]||"",x=r[o.value]),m=d(g)||d(r[o.id])||""===r[o.id]?c+"-"+p:c;var S=e("li",{className:(!0===l?Cp.group:Cp.li)+" "+(d(a)?"":a),id:m,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===l?v.groupItemRole:v.itemRole}:{}});return g&&r.hasOwnProperty(o.enabled)&&"false"===r[o.enabled].toString()&&S.classList.add(Cp.disabled),l?S.innerText=b:(d(x)||S.setAttribute("data-value",x),S.setAttribute("role","option"),g&&r.hasOwnProperty(o.htmlAttributes)&&r[o.htmlAttributes]&&f(S,r[o.htmlAttributes]),s.length&&L(s,S),g&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href)?S.appendChild(w(e,g,o,b)):S.appendChild(document.createTextNode(b))),S}function b(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper"}}function w(e,t,i,n){var r=Pp(t,i),o={href:r[i.url]};r.hasOwnProperty(i.urlAttributes)&&r[i.urlAttributes]&&(c(o,r[i.urlAttributes]),o.href=r[i.url]?r[i.url]:r[i.urlAttributes].href);var a=e("a",{className:Cp.text+" "+Cp.url,innerHTML:n});return f(a,o),a}function x(e,n,r,o,a,s){var l,c,p,u=h({},i,s),f=h({},t,u.ariaAttributes),g=n;"string"!==typeof n&&"number"!==typeof n&&(p=n,g=r[o.text]||"",l=r[o.id],c=!(!n.hasOwnProperty("isHeader")||!n.isHeader));var y=e("li",{className:(!0===c?Cp.group:Cp.li)+" "+(d(a)?"":a),attrs:""!==f.groupItemRole&&""!==f.itemRole?{role:!0===c?f.groupItemRole:f.itemRole}:{}});if(d(l)?y.setAttribute("data-uid",m()):y.setAttribute("data-uid",l),c&&s&&s.groupTemplate)L(Qt(s.groupTemplate)(n,null,null,u.groupTemplateID,!!u.isStringTemplate),y);else if(!c&&s&&s.template){L(Qt(s.template)(n,null,null,u.templateID,!!u.isStringTemplate),y)}else{var v=e("div",{className:Cp.textContent,attrs:""!==f.wrapperRole?{role:f.wrapperRole}:{}});p&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href)?v.appendChild(w(e,p,o,g)):v.appendChild(e("span",{className:Cp.text,innerHTML:g,attrs:""!==f.itemText?{role:f.itemText}:{}})),y.appendChild(v)}return y}function S(e,n,r,o){var a=h({},i,o),s=h({},t,a.ariaAttributes),l=e("ul",{className:(Cp=b(a.moduleName)).ul+" "+(d(r)?"":r),attrs:""!==s.listRole?{role:s.listRole}:{}});return L(n,l),l}e.createList=function(e,r,o,s){var l=h({},i,o),c=h({},t,l.ariaAttributes),d=u(r).typeof;return"string"===d||"number"===d?n(e,r,s,o):a(e,r,o,c.level,s)},e.createListFromArray=n,e.createListItemFromArray=r,e.createListItemFromJson=o,e.createListFromJson=a,e.getSiblingLI=function(e,t,n){if(Cp=b(i.moduleName),e&&e.length){var r,o,a=Array.prototype.slice.call(e);for(r=a[(o=t?s(t,a):!0===n?a.length:-1)+(!0===n?-1:1)];r&&(!T(r)||r.classList.contains(Cp.disabled));)r=a[o+=!0===n?-1:1];return r}},e.indexOf=s,e.groupDataSource=function(t,i,n){void 0===n&&(n="None");var r=h({},e.defaultMappedFields,i),o=(new cp).group(r.groupBy),a=p(t,o=l(n,"key",o));t=[];for(var s=0;s<a.length;s++){var c=a[s].items,d={};d[r.text]=a[s].key,d.isHeader=!0,d.id="group-list-item-"+(a[s].key?a[s].key.toString().trim():"undefined"),d.items=c,t.push(d);for(var u=0;u<c.length;u++)t.push(c[u])}return t},e.addSorting=l,e.getDataSource=p,e.createJsonFromElement=function t(n,r){var o=h({},i,r),a=h({},e.defaultMappedFields,o.fields),s=n.cloneNode(!0),l=[];s.classList.add("json-parent");var c=s.querySelectorAll(".json-parent>li");s.classList.remove("json-parent");for(var d=0;d<c.length;d++){for(var p=c[d],u=p.querySelector("a"),f=p.querySelector("ul"),y={},v=u?u.childNodes:p.childNodes,b=Object.keys(v),w=0;w<v.length;w++)v[Number(b[w])].hasChildNodes()||(y[a.text]=v[Number(b[w])].textContent);var x=g(p);x.id?(y[a.id]=x.id,delete x.id):y[a.id]=m(),Object.keys(x).length&&(y[a.htmlAttributes]=x),u&&(x=g(u),Object.keys(x).length&&(y[a.urlAttributes]=x)),f&&(y[a.child]=t(f,r)),l.push(y)}return l},e.renderContentTemplate=function(t,n,r,o,a){for(var s=t("ul",{className:(Cp=b(i.moduleName)).ul,attrs:{role:"presentation"}}),l=h({},i,a),c=h({},e.defaultMappedFields,o),d=Qt(n),p=[],u=m(),f=0;f<r.length;f++){var g=Pp(r[f],c),y=r[f],v=y.isHeader,w=g[c.value];if(l.itemCreating&&"function"===typeof l.itemCreating){var x={dataSource:r,curData:y,text:w,options:l,fields:c};l.itemCreating(x)}l.itemCreating&&"function"===typeof l.itemCreating&&(w=(g=Pp(r[f],c))[c.value]);var S=t("li",{id:u+"-"+f,className:v?Cp.group:Cp.li,attrs:{role:"presentation"}});v?S.innerText=g[c.text]:(L(d(y,null,null,v?l.groupTemplateID:l.templateID,!!l.isStringTemplate),S),S.setAttribute("data-value",w),S.setAttribute("role","option")),l.itemCreated&&"function"===typeof l.itemCreated&&(x={dataSource:r,curData:y,text:w,item:S,options:l,fields:c},l.itemCreated(x)),p.push(S)}return L(p,s),s},e.renderGroupTemplate=function(t,n,r,o,a){for(var s=Qt(t),l=h({},e.defaultMappedFields,r),c=h({},i,a),d=l.groupBy,p=0,u=o;p<u.length;p++){var f=u[p],g={};g[d]=f.textContent,f.innerHTML="",L(s(g,null,null,c.groupTemplateID,!!c.isStringTemplate),f)}return o},e.generateId=m,e.generateUL=S,e.generateIcon=function(e,t,n,r){var o=h({},i,r);return Cp=b(o.moduleName),("Left"===o.expandIconPosition?A:L)([e("div",{className:"e-icons "+o.expandIconClass+" "+(d(n)?"":n)})],t.querySelector("."+Cp.textContent)),t}}(Sd||(Sd={}));var Ep=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Op=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Mp=function(e){function t(t,i){return e.call(this,t,i)||this}return Ep(t,e),t.prototype.preRender=function(){this.browser=J.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=J.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=u("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Ot(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),S.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){d(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var i=j(".e-"+t.id+"_nav.e-scroll-nav",t),n=j(".e-scroll-overlay",t);[].slice.call(n).forEach(function(e){k(e)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var a=o[r];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),k(this.scrollEle),i.length>0&&(k(i[0]),d(i[1])||k(i[1])),S.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=j(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a=this.createElement("div",{id:t.concat("_left"),className:o+" e-overlay"});a.setAttribute("aria-disabled","true");var s=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new Ot(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),S.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){t.eleScrolling(10,i,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.scrollEle,r=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(r,"e-rtl")&&this.browserCheck&&(e=-e);n.scrollLeft;!this.contains(r,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.02,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(j(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetWidth});!function i(){var r,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(r=-e,o=-10):(r=e,o=10),r<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(d(e)?t:e).querySelector(".e-nav-arrow");d(e)?B(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):B(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),a=this.element.querySelector(".e-scroll-left-overlay"),s=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(a=this.element.querySelector(".e-scroll-right-overlay"),s=this.element.querySelector(".e-scroll-left-overlay")),a.style.width=l<40?l+"px":"40px",t.scrollWidth-Math.ceil(i+l)<40?s.style.width=t.scrollWidth-Math.ceil(i+l)+"px":s.style.width="40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var c=this.element.querySelector(".e-scroll-nav.e-overlay");c&&(c.classList.remove("e-overlay"),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Op([pe(null)],t.prototype,"scrollStep",void 0),t=Op([ve],t)}(lt),Tp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ap=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Lp=function(e){function t(t,i){return e.call(this,t,i)||this}return Tp(t,e),t.prototype.preRender=function(){this.browser=J.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=J.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=u("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Ot(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),S.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),S.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){d(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=P("div",{className:"e-vscroll-content"}),t=P("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",O([this.element],["e-vscroll","e-scroll-device"]);var i=j(".e-"+t.id+"_nav.e-scroll-nav",t),n=j(".e-scroll-overlay",t);[].slice.call(n).forEach(function(e){k(e)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var a=o[r];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),k(this.scrollEle),i.length>0&&(k(i[0]),d(i[1])||k(i[1])),S.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=j(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=P("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=P("div",{id:t.concat("down"),className:n}),o=P("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=P("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=P("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=P("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),a=P("div",{id:t.concat("_up"),className:o+" e-overlay"});a.setAttribute("aria-disabled","true");var s=P("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new Ot(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),S.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){t.eleScrolling(10,i,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){this.element;var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(j(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetHeight});!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(d(e)?t:e).querySelector(".e-nav-arrow");d(e)?B(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):B(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=(this.element,this.element.querySelector(".e-scroll-up-nav")),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),a=this.element.querySelector(".e-scroll-down-overlay"),s=t.scrollTop;if(s<=0&&(s=-s),this.isDevice&&(o.style.height=s<40?s+"px":"40px",t.scrollHeight-Math.ceil(i+s)<40?a.style.height=t.scrollHeight-Math.ceil(i+s)+"px":a.style.height="40px"),0===s)this.arrowDisabling(n,r);else if(Math.ceil(i+s+.1)>=t.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Ap([pe(null)],t.prototype,"scrollStep",void 0),t=Ap([ve],t)}(lt),Dp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kp=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ip="e-focused",Rp="e-menu-header",Np="e-selected",jp="e-menu-item",zp="e-menu-hide",Hp="e-menu-popup",Bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dp(t,e),kp([pe("id")],t.prototype,"itemId",void 0),kp([pe("parentId")],t.prototype,"parentId",void 0),kp([pe("text")],t.prototype,"text",void 0),kp([pe("iconCss")],t.prototype,"iconCss",void 0),kp([pe("url")],t.prototype,"url",void 0),kp([pe("separator")],t.prototype,"separator",void 0),kp([pe("items")],t.prototype,"children",void 0),t}(ke),_p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dp(t,e),kp([pe(null)],t.prototype,"iconCss",void 0),kp([pe("")],t.prototype,"id",void 0),kp([pe(!1)],t.prototype,"separator",void 0),kp([ge([],t)],t.prototype,"items",void 0),kp([pe("")],t.prototype,"text",void 0),kp([pe("")],t.prototype,"url",void 0),t}(ke),Wp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dp(t,e),kp([pe("SlideDown")],t.prototype,"effect",void 0),kp([pe(400)],t.prototype,"duration",void 0),kp([pe("ease")],t.prototype,"easing",void 0),t}(ke),Fp=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.navIdx=[],n.animation=new Se({}),n.isTapHold=!1,n.tempItem=[],n}return Dp(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:u(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=a("ej2_instances",this.element);O([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,s("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:u(this.getModuleName())}),L([].slice.call(this.element.cloneNode(!0).children),e);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(e,i):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,r=a("ej2_instances",n),o=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),l=0,c=n.attributes.length;l<c;l++)e.setAttribute(n.attributes[l].nodeName,n.attributes[l].nodeValue);n.parentNode.insertBefore(o,n),k(n),n=e,o.appendChild(n),s("ej2_instances",r,n),this.clonedElement=o,this.element=n,this.element.id||(this.element.id=u(this.getModuleName()))}},t.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&this.isBlazor()){var e=this.element.id+"Template";$t(e),Object.keys(Zt).length&&h(this.tempItem,Zt[e],[],!0),Kt(e,"Template",this)}this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&E([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e))},t.prototype.renderItems=function(){if(!this.items.length){var e=Sd.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),this.isBlazor()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);L(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent");var i=this.getWrapper();this.element.classList.contains("e-vertical")?this.addScrolling(i,this.element,"vscroll",i.offsetHeight,this.element.offsetHeight):this.addScrolling(i,this.element,"hscroll",i.offsetWidth,this.element.offsetWidth)},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,i=j(this.target),n=0,r=i.length;n<r;n++)t=i[n],this.isMenu?S.add(t,"click",this.menuHeaderClickHandler,this):J.isIos?new Ot(t,{tapHold:this.touchHandler.bind(this)}):S.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu)for(var o=0,a=mo(this.targetElement);o<a.length;o++){var s=a[o];S.add(s,"scroll",this.scrollHandler,this)}}J.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),S.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),S.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),S.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=Ce(e,{selector:"."+jp})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(t.home="home",t.end="end"),new wt(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){z(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||z(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",i=e.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Ip,Np],[z(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(e.action){case"rightarrow":t="rightarrow",e.action="downarrow";break;case"leftarrow":t="leftarrow",e.action="uparrow";break;case"downarrow":t="downarrow",e.action="rightarrow";break;case"uparrow":t="uparrow",e.action=""}else if(this.enableRtl)switch(e.action){case"leftarrow":n=!0,t="leftarrow",e.action="rightarrow";break;case"rightarrow":n=!0,t="rightarrow",e.action="leftarrow"}switch(e.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(e);break;case"rightarrow":this.rightEnterKeyHandler(e);break;case"leftarrow":this.leftEscKeyHandler(e);break;case"enter":this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case"escape":this.leftEscKeyHandler(e)}n&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),i="downarrow"===e.action||"home"===e.action?0:t.childElementCount-1,n=i,r=this.getLIByClass(t,Ip);r&&("end"!==e.action&&"home"!==e.action&&(n=this.getIdx(t,r)),r.classList.remove(Ip),"end"!==e.action&&"home"!==e.action&&("downarrow"===e.action?n++:n--,n===("downarrow"===e.action?t.childElementCount:-1)&&(n=i)));var o=t.children[n];n=this.isValidLI(o,n,e.action),t.children[n].classList.add(Ip),t.children[n].focus()},t.prototype.isValidLI=function(e,t,i){this.getWrapper();var n=this.getUlByNavIdx();return(e.classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(zp))&&("downarrow"===i||"rightarrow"===i?t++:t--),((e=n.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(zp))&&(t=this.isValidLI(e,t,i)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(j("."+Hp)))[e];return d(t)?null:N(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t,i=this.getUlByNavIdx(),n=this.getLIByClass(i,Ip);if(n){var r=this.getIdx(i,n),o=this.navIdx.concat(r),a=this.getItem(o);a.items.length?(this.navIdx.push(r),this.keyType="right",this.action=e.action,this.openMenu(n,a,null,null,e)):"enter"===e.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([Np],[this.getWrapper()]):n.classList.remove(Ip),n.classList.add(Np),t={element:n,item:a,event:e},this.trigger("select",t),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):"escape"===e.action&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var n,r,o,a=void 0,s=void 0,l=this.getWrapper(),c=this.getPopups(),h=!1,d=this.isMenu?c.length+1:l.childElementCount;n=this.isMenu&&1!==d?N(".e-ul",c[d-2]):j(".e-menu-parent",l)[d-1],this.isMenu&&n.classList.contains("e-menu")&&((a=this.getLIByClass(n,Np))&&a.classList.remove(Np),h=!0),h||(r=this.navIdx.length?this.getItem(this.navIdx):null,o=r?r.items:this.items,s={element:n,parentItem:r,items:o,event:t,cancel:!1},this.trigger("beforeClose",s,function(a){var s,l,c,h=!a.cancel;if((h||i.isCMenu)&&(i.isMenu?(s=z(n,"."+Hp),i.hamburgerMode&&(s.parentElement.style.minHeight=""),i.unWireKeyboardEvent(s),i.destroyScrollObj(v(s.children[0],Lp),s.children[0]),(c=v(s,go)).hide(),c.destroy(),k(s)):i.toggleAnimation(n,!1),l={element:n,parentItem:r,items:o},i.trigger("onClose",l),i.navIdx.pop()),i.isCMenu)i.canOpen(t.target)&&i.openMenu(null,null,i.pageY,i.pageX,t),i.isCMenu=!1;else if(h&&i.hamburgerMode&&null!==e)i.afterCloseMenu(t);else if(h&&!e&&i.navIdx.length)i.closeMenu(null,t);else if(!h||i.isMenu||e||0!==i.navIdx.length||i.isMenusClosed)if(h&&i.isMenu&&t&&t.target&&0!==i.navIdx.length&&z(t.target,".e-menu-parent.e-control"))i.closeMenu(0,t);else if(!h||"right"!==i.keyType&&"click"!==i.keyType){var d=i.getUlByNavIdx(),p=i.getLIByClass(d,Np);p&&(p.setAttribute("aria-expanded","false"),p.classList.remove(Np),p.classList.add(Ip),p.focus())}else i.afterCloseMenu(t);else i.isMenusClosed=!0,i.closeMenu(0,t);i.removeStateWrapper()}))}},t.prototype.destroyScrollObj=function(e,t){e&&(e.destroy(),t.parentElement.appendChild(N(".e-menu-parent",t)),k(t))},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+Hp)).forEach(function(i){e.getIndex(i.querySelector("."+jp).id,!0).length&&t.push(i)}),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&T(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var i=this.filter.split(" "),n=0,r=i.length;n<r;n++)if(z(e,"."+i[n])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=this.targetElement);var a=this.getWrapper();this.lItem=e;var s=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&J.isDevice){a.lastChild.style.display="none";var l={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},c=new _p(this.items[0],"items",l,!0),h=this.createItems([c]).children[0];h.classList.add(Rp),this.uList.insertBefore(h,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+Hp,id:e.id+"-ej2menu-"+s+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&E([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),this.triggerBeforeOpen(e,this.uList,t,r,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=yo(o||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,r,i,n,"none");if(this.isMenu&&this.template&&this.isBlazor()){var d=this.element.id+"Template";if(Object.keys(Zt).length){var p=Zt[d];this.tempItem=this.tempItem.concat(p),Zt[d]=this.tempItem}Kt(d,"Template",this)}},t.prototype.calculateIndentSize=function(e,t){var i=getComputedStyle(t),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?n*=2:n+=n/4,e.style.textIndent=n+"px";var r=e.querySelectorAll(".e-blankicon");if(r&&r.length){var o=e.querySelector(".e-menu-icon"),a=getComputedStyle(o),s=parseInt(a.marginRight,10)+o.offsetWidth+n;r.forEach(function(e){return e.style.textIndent=s+"px"})}},t.prototype.generatePopup=function(e,t,i,n){var r=this,o=new go(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=N(".e-menu-vscroll",o.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=N(".e-ul",o.element);o.element.style.maxHeight="",t.focus(),r.triggerOpen(t)}});return o},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:this.title}),n=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(i),t.appendChild(n),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){if(this.hamburgerMode){this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}},t.prototype.closeHamburgerMenu=function(e){var t=this;if(this.hamburgerMode){var i;i={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},this.trigger("beforeClose",i,function(i){i.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))})}},t.prototype.callFit=function(e,t,i,n,r){return Yr(e,null,{X:t,Y:i},{top:n,left:r})},t.prototype.triggerBeforeOpen=function(e,t,i,n,r,o,a){var s=this,l=(this.getIndex(e?e.id:null,!0),{element:t,items:e?i[this.getField("children",this.navIdx.length-1)]:this.items,parentItem:i,event:n,cancel:!1,top:r,left:o}),c=a;this.trigger("beforeOpen",l,function(t){switch(c){case"menu":s.hamburgerMode||(s.top=t.top,s.left=t.left),s.popupWrapper.style.display="block",s.hamburgerMode||(s.popupWrapper.style.maxHeight=s.popupWrapper.getBoundingClientRect().height+"px",s.addScrolling(s.popupWrapper,s.uList,"vscroll",s.popupWrapper.offsetHeight,s.uList.offsetHeight),s.checkScrollOffset(n));var r=void 0;if(s.hamburgerMode||s.left||s.top)s.popupObj.collision={X:"none",Y:"none"};else{if(s.popupObj.refreshPosition(s.lItem,!0),s.left=parseInt(s.popupWrapper.style.left,10),s.top=parseInt(s.popupWrapper.style.top,10),s.enableRtl&&(s.left=s.isNestedOrVertical?s.left-s.popupWrapper.offsetWidth-s.lItem.parentElement.offsetWidth:s.left-s.popupWrapper.offsetWidth+s.lItem.offsetWidth),r=Xr(s.popupWrapper,null,s.left,s.top),(s.isNestedOrVertical||s.enableRtl)&&(r.indexOf("right")>-1||r.indexOf("left")>-1)){s.popupObj.collision.X="none";var o=z(s.lItem,".e-"+s.getModuleName()+"-wrapper").offsetWidth;s.left=s.enableRtl?kr(s.lItem,s.isNestedOrVertical?"right":"left","top").left:s.left-s.popupWrapper.offsetWidth-o}((r=Xr(s.popupWrapper,null,s.left,s.top)).indexOf("left")>-1||r.indexOf("right")>-1)&&(s.left=s.callFit(s.popupWrapper,!0,!1,s.top,s.left).left),s.popupWrapper.style.left=s.left+"px"}s.popupWrapper.style.display="";break;case"none":s.top=t.top,s.left=t.left;break;case"hamburger":t.cancel||(s.element.classList.remove("e-hide-menu"),s.triggerOpen(s.element))}if("hamburger"!==c)if(t.cancel)s.isMenu&&(s.popupObj.destroy(),k(s.popupWrapper)),s.navIdx.pop();else if(s.isMenu)if(s.hamburgerMode)s.popupWrapper.style.top=s.top+"px",s.popupWrapper.style.left="0px",s.toggleAnimation(s.popupWrapper);else{s.wireKeyboardEvent(s.popupWrapper),Ce(s.popupWrapper,{selector:"."+jp}),s.popupWrapper.style.left=s.left+"px",s.popupWrapper.style.top=s.top+"px";var a="None"!==s.animationSettings.effect?{name:s.animationSettings.effect,duration:s.animationSettings.duration,timingFunction:s.animationSettings.easing}:null;s.popupObj.show(a,s.lItem)}else s.setPosition(s.lItem,s.uList,s.top,s.left),s.toggleAnimation(s.uList);if("right"===s.keyType){var l=s.getUlByNavIdx();if(e.classList.remove(Ip),s.isMenu&&1===s.navIdx.length&&s.removeLIStateByClass([Np],[s.getWrapper()]),e.classList.add(Np),"enter"===s.action){var h={element:e,item:i,event:n};s.trigger("select",h)}e.focus(),l=s.getUlByNavIdx();var d=s.isValidLI(l.children[0],0,s.action);l.children[d].classList.add(Ip),l.children[d].focus()}})},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i,n,r=d(e)?this.element:z(e.target,"."+jp),o=N(".e-hscroll-bar",t);o.scrollLeft>r.offsetLeft&&(o.scrollLeft-=o.scrollLeft-r.offsetLeft),(i=o.scrollLeft+o.offsetWidth)<(n=r.offsetLeft+r.offsetWidth)&&(o.scrollLeft+=n-i)}},t.prototype.addScrolling=function(e,t,i,n,r){if(this.enableScrolling&&n<r){var o=this.createElement("div",{className:"e-menu-"+i});e.appendChild(o),o.appendChild(t),o.style.maxHeight=e.style.maxHeight;e.style.overflow="hidden","vscroll"===i?new Lp({enableRtl:this.enableRtl},o).scrollStep=N(".e-"+i+"-bar",e).offsetHeight/2:new Mp({enableRtl:this.enableRtl},o).scrollStep=N(".e-"+i+"-bar",e).offsetWidth}},t.prototype.setPosition=function(e,t,i,n){if(this.toggleVisiblity(t),t===this.element||!d(n)&&!d(i)){if((o=Xr(t,null,n,i)).indexOf("right")>-1&&(n-=t.offsetWidth),o.indexOf("bottom")>-1)i=(r=this.callFit(t,!1,!0,i,n)).top-20;if((o=Xr(t,null,n,i)).indexOf("left")>-1)n=(r=this.callFit(t,!0,!1,i,n)).left}else if(J.isDevice)i=Number(this.element.style.top.replace("px","")),n=Number(this.element.style.left.replace("px",""));else{var r;i=(r=kr(e,this.enableRtl?"left":"right","top")).top,n=r.left;var o,a=(o=Xr(t,null,this.enableRtl?n-t.offsetWidth:n,i)).indexOf("left")>-1||o.indexOf("right")>-1;a&&(n=(r=kr(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||a)&&(n=this.enableRtl&&a?n:n-t.offsetWidth),o.indexOf("bottom")>-1&&(i=(r=this.callFit(t,!1,!0,i,n)).top)}this.toggleVisiblity(t,!1),t.style.top=i+"px",t.style.left=n+"px"},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,i=this.navIdx?this.navIdx.length:0,n=this.hasField(e,this.getField("iconCss",i)),r={showIcon:n,moduleName:"menu",fields:this.getFields(i),template:this.template,itemCreating:function(e){e.curData[e.fields.id]||(e.curData[e.fields.id]=u("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",i)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields.iconCss]&&(e.curData[e.fields.iconCss]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",i)]&&(e.item.classList.add("e-separator"),e.item.removeAttribute("role")),!n||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",i)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var r=t.createElement("span",{className:"e-icons e-caret"});e.item.appendChild(r),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"));var o={item:e.curData,element:e.item};t.trigger("beforeItemRender",o)}};this.setProperties({items:this.items},!0),this.isMenu&&(r.templateID=this.element.id+"Template");var o=Sd.createList(this.createElement,e,r,!this.template);return o.setAttribute("tabindex","0"),this.isMenu&&o.setAttribute("role","menu"),o},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var i=this.getLI(t),n=i?z(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),a=!1;if(n){if((""!==n.id?o.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Ip,Np],[this.getWrapper()]),!this.navIdx.length)return;a=!0}i&&z(i,".e-"+this.getModuleName()+"-wrapper")&&!a&&(this.removeLIStateByClass([Ip],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Ip],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add(Ip),this.showItemOnClick||this.clickHandler(e)),this.isMenu&&(this.showItemOnClick||t.parentElement===n||z(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)?a&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Ip,Np],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=z(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Ip,Np],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var i,n=function(n){e.forEach(function(e){(i=N("."+e,t[n]))&&i.classList.remove(e)})},r=0;r<t.length;r++)n(r)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var i=this.fields[e];return"string"===typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e)},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),i=e.target,n=this.cli=this.getLI(i),r=n?z(n,".e-"+this.getModuleName()+"-wrapper"):null,o=n&&r&&(this.isMenu?this.getIndex(n.id,!0).length>0:t.firstElementChild.id===r.firstElementChild.id);if(o&&"click"===e.type&&!n.classList.contains(Rp)){this.setLISelected(n);var a=this.getIndex(n.id,!0),s={element:n,item:this.getItem(a),event:e};this.trigger("select",s)}if(o&&("mouseover"===e.type||J.isDevice||this.showItemOnClick)){var l=void 0;if(n.classList.contains(Rp))l=t.children[this.navIdx.length-1],this.toggleAnimation(l),(h=this.getLIByClass(l,Np))&&h.classList.remove(Np),k(n.parentNode),this.navIdx.pop();else if(!n.classList.contains("e-separator")){this.showSubMenu=!0;var c=n.parentNode;if(this.cliIdx=this.getIdx(c,n),this.isMenu||!J.isDevice){var h,d=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),z(c,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,c);if(this.navIdx[d]===this.cliIdx&&(this.showSubMenu=!1),d!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu))(h=this.getLIByClass(c,Np))&&h.classList.remove(Np),this.isClosed=!0,this.keyType="click",this.closeMenu(d+1,e)}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&z(i,".e-menu-vscroll")){var p=z(i,"."+Hp),u=Array.prototype.indexOf.call(this.getPopups(),p)+1;u<this.navIdx.length&&(this.closeMenu(u+1,e),this.removeLIStateByClass([Ip,Np],[p]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===i.tagName&&i.parentElement===t||n&&n.querySelector(".e-caret")||this.closeMenu(null,e)}},t.prototype.afterCloseMenu=function(e){if(this.showSubMenu){var t=this.navIdx.concat(this.cliIdx),i=this.getItem(t);i[this.getField("children",t.length-1)]&&i[this.getField("children",t.length-1)].length?(("mouseover"===e.type||J.isDevice&&this.isMenu)&&this.setLISelected(this.cli),this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,i,null,null,e)):"mouseover"!==e.type&&this.closeMenu(null,e)}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,Np);t&&t.classList.remove(Np),this.isMenu||e.classList.remove(Ip),e.classList.add(Np)},t.prototype.getLIByClass=function(e,t){for(var i=0,n=e.children.length;i<n;i++)if(e.children[i].classList.contains(t))return e.children[i];return null},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t},t.prototype.getIdx=function(e,t,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(e.querySelectorAll("li"),t);return n=this.isMenu&&this.template&&this.isBlazor()?Array.prototype.indexOf.call(e.querySelectorAll(t.tagName),t):Array.prototype.indexOf.call(e.children,t),i&&e.children[0].classList.contains(Rp)&&n--,n},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:z(e,"li.e-menu-item")},t.prototype.isBlazor=function(){return-1!==Object.keys(window).indexOf("ejsInterop")},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=this.getWrapper(),r=function(r){switch(r){case"cssClass":t.cssClass&&O([n],t.cssClass.split(" ")),e.cssClass&&E([n],e.cssClass.split(" "));break;case"enableRtl":n.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=e.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var a;o.element.classList.contains("e-vertical")?o.addScrolling(n,o.element,"vscroll",n.offsetHeight,o.element.offsetHeight):o.addScrolling(n,o.element,"hscroll",n.offsetWidth,o.element.offsetWidth),o.getPopups().forEach(function(e){a=N(".e-ul",e),i.addScrolling(e,a,"vscroll",e.offsetHeight,a.offsetHeight)})}else{var s=n.children[0];o.element.classList.contains("e-vertical")?o.destroyScrollObj(v(s,Lp),s):o.destroyScrollObj(v(s,Mp),s),n.style.overflow="",n.appendChild(o.element),o.getPopups().forEach(function(e){s=e.children[0],i.destroyScrollObj(v(s,Lp),s),e.style.overflow=""})}break;case"items":var l=void 0,c=void 0,h=void 0;if(Object.keys(t.items).length){var d=Object.keys(e.items);for(u=0;u<d.length;u++)(c=o.getChangedItemIndex(e,[],Number(d[u]))).length<=o.getWrapper().children.length&&(l=c.pop(),h=o.getItems(c),o.insertAfter([h[l]],h[l].text),h=o.getItems(c),o.removeItem(h,c,l)),c.length=0}else{var p=o.element;o.isBlazor()?p=o.removeChildElement(o.element):p.innerHTML="",[].slice.call(o.createItems(o.items).children).forEach(function(e){p.appendChild(e)});for(var u=1,f=n.childElementCount;u<f;u++)k(n.lastElementChild);o.navIdx=[]}}},o=this,a=0,s=Object.keys(e);a<s.length;a++){r(s[a])}},t.prototype.getChangedItemIndex=function(e,t,i){t.push(i);var n=Object.keys(e.items[i]).pop();if("items"===n){var r=e.items[i];this.getChangedItemIndex(r,t,Number(Object.keys(r.items).pop()))}else"isParentArray"===n&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,i){e.splice(i,1);var n=this.getWrapper().children;t.length<n.length&&k(n[t.length].children[i])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var i=void 0,n=void 0,r=j(e),o=0,a=r.length;o<a;o++)i=r[o],this.isMenu?S.remove(i,"click",this.menuHeaderClickHandler):J.isIos?(n=v(i,Ot))&&n.destroy():S.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu)for(var s=0,l=mo(this.targetElement);s<l.length;s++){var c=l[s];S.remove(c,"scroll",this.scrollHandler)}}J.isDevice||(S.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),S.remove(document,"mousedown",this.delegateMouseDownHandler)),S.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=v(e,wt);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var i,n,r=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){r.hamburgerMode?(n=e.element.parentElement,e.element.style.position="absolute",i=n.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",n.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){r.hamburgerMode&&(n.style.minHeight=i+e.element.offsetHeight+"px")},end:function(e){r.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",n.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),r.triggerOpen(e.element.children[0])):r.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,i={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",i)},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Ip))e.querySelector("."+Ip).focus();else{var i=void 0;(i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?i.querySelector("."+Np).focus():this.element.focus()}else if(e===this.element){var n=this.getLIByClass(this.element,Ip);n&&n.classList.remove(Ip);var r=this.getLIByClass(this.element,Np);r&&r.classList.remove(Np),e.style.display="none"}else k(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return z(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,i,n,r,o){var a;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===o&&(o=0),o=r?o+1:0;for(var s=0,l=i.length;s<l;s++){if(a=i[s],(t?a[this.getField("itemId",o)]:a[this.getField("text",o)])===e){n.push(s);break}if(a[this.getField("children",o)]&&a[this.getField("children",o)].length){if(-1!==(n=this.getIndex(e,t,a[this.getField("children",o)],n,!0,o))[n.length-1]){n.unshift(s);break}s!==l-1&&n.pop()}else s===l-1&&n.push(-1)}return r||-1!==n[0]?n:[]},t.prototype.enableItems=function(e,t,i){var n,r,o;void 0===t&&(t=!0);for(var a="e-disabled",s=0;s<e.length;s++)r=(o=this.getIndex(e[s],i)).pop(),(n=this.getUlByNavIdx(o.length))&&(t?this.isMenu?(n.children[r].classList.remove(a),n.children[r].removeAttribute("aria-disabled")):J.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(a):n.children[r].classList.remove(a):this.isMenu?(n.children[r].classList.add(a),n.children[r].setAttribute("aria-disabled","true")):J.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(a):n.children[r].classList.add(a))},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,i){for(var n,r,o,a=0;a<e.length;a++)r=(o=this.getIndex(e[a],i)).pop(),(n=this.getUlByNavIdx(o.length))&&(t?J.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(zp):n.children[r].classList.add(zp):J.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(zp):n.children[r].classList.remove(zp))},t.prototype.removeItems=function(e,t){for(var i,n,r,o=0;o<e.length;o++)i=(n=this.getIndex(e[o],t)).pop(),r=this.getItems(n),this.removeItem(r,n,i)},t.prototype.insertAfter=function(e,t,i){this.insertItems(e,t,i)},t.prototype.insertBefore=function(e,t,i){this.insertItems(e,t,i,!1)},t.prototype.insertItems=function(e,t,i,n){var r,o,a,s,l;void 0===n&&(n=!0);for(var c=0;c<e.length;c++){o=(a=this.getIndex(t,i)).pop(),s=this.getItems(a),l=new _p(s[0],"items",e[c],!0),s.splice(n?o+1:o,0,l);var h=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(a.length<h.length){o=n?o+1:o,this.hasField(s,this.getField("iconCss",a.length-1)),r=this.createItems(s).children[o];var d=this.isMenu?N(".e-menu-parent",h[a.length]):h[a.length];d.insertBefore(r,d.children[o])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach(function(t){e.element.style.removeProperty(t)}),["role","tabindex","class","style"].forEach(function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")})},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.isBlazor()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)E([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),this.isBlazor()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",L([].slice.call(this.clonedElement.children),this.element),k(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(k(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):k(t),e.prototype.destroy.call(this)}},kp([ye()],t.prototype,"beforeItemRender",void 0),kp([ye()],t.prototype,"beforeOpen",void 0),kp([ye()],t.prototype,"onOpen",void 0),kp([ye()],t.prototype,"beforeClose",void 0),kp([ye()],t.prototype,"onClose",void 0),kp([ye()],t.prototype,"select",void 0),kp([ye()],t.prototype,"created",void 0),kp([pe("")],t.prototype,"cssClass",void 0),kp([pe(!1)],t.prototype,"showItemOnClick",void 0),kp([pe("")],t.prototype,"target",void 0),kp([pe("")],t.prototype,"filter",void 0),kp([pe(null)],t.prototype,"template",void 0),kp([pe(!1)],t.prototype,"enableScrolling",void 0),kp([ue({},Bp)],t.prototype,"fields",void 0),kp([ge([],_p)],t.prototype,"items",void 0),kp([ue({},Wp)],t.prototype,"animationSettings",void 0),t=kp([ve],t)}(lt),Yp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xp=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Vp=function(e){function t(t,i){return e.call(this,t,i)||this}return Yp(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||u("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),R(this.element,{role:"menu",tabindex:"0"}),this.element.style.zIndex=yo(this.element).toString()},t.prototype.open=function(t,i,n){e.prototype.openMenu.call(this,null,null,t,i,null,n)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,i){e.prototype.onPropertyChanged.call(this,t,i);for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},t.prototype.getModuleName=function(){return"contextmenu"},Xp([pe("")],t.prototype,"target",void 0),Xp([pe("")],t.prototype,"filter",void 0),Xp([ge([],_p)],t.prototype,"items",void 0),t=Xp([ve],t)}(Fp),Up={content:".e-diagramcontent",copy:"e-copy",paste:"e-paste",undo:"e-undo",redo:"e-redo",cut:"e-cut",selectAll:"e-selectall",grouping:"e-grouping",group:"e-group",unGroup:"e-ungroup",bringToFront:"e-bringfront",sendToBack:"e-sendback",moveForward:"e-bringforward",sendBackward:"e-sendbackward",order:"e-order"},Gp=function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.serviceLocator=t,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=ph("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var e="#"+this.parent.element.id;this.contextMenu=new Vp({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)},e.prototype.getMenuItems=function(){var e=[],t=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var n=0,r=this.getDefaultItems();n<r.length;n++){var o=r[n];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&i.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&t.push(this.buildDefaultItems(o)):e.push(this.buildDefaultItems(o))}var a;if(i.length>0)(a=this.buildDefaultItems("grouping")).items=i,e.push(a);if(t.length>0)(a=this.buildDefaultItems("order")).items=t,e.push(a)}if(this.parent.contextMenuSettings.items)for(var s=0,l=this.parent.contextMenuSettings.items;s<l.length;s++){var c=l[s];e.push(c)}return e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.BeforeItemRender=function(e){this.parent.trigger("contextMenuBeforeItemRender",e)},e.prototype.contextMenuItemClick=function(e){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",e);var t=this.getKeyFromId(e.item.id);if(!e.cancel)switch(t){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof Vp&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.ensureItems=function(e,t){var i=this.getKeyFromId(e.id);this.defaultItems[i];-1!==this.getDefaultItems().indexOf(i)&&e.target&&t&&!this.ensureTarget(e)&&this.hiddenItems.push(e.id)},e.prototype.contextMenuBeforeOpen=function(e){var t=e;t.hiddenItems=[];for(var i=0,n=e.items;i<n.length;i++){var r=n[i];if(this.ensureItems(r,e.event),r.items.length)for(var o=0,a=r.items;o<a.length;o++){var s=a[o];this.ensureItems(s,e.event)}}this.eventArgs=e.event,this.parent.trigger("contextMenuOpen",t);var l=!0;this.hiddenItems=this.hiddenItems.concat(t.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0);var c=this;e.items.forEach(function(e){c.hiddenItems.indexOf(e.id)>-1&&c.contextMenu.hideItems([e.id],!0)}),c.contextMenu.items.forEach(function(e){-1===c.hiddenItems.indexOf(e.id)&&(l=!1,c.contextMenu.showItems([e.id],!0))}),l&&(t.cancel=l,this.hiddenItems=[])},e.prototype.ensureTarget=function(e){var t=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=!1;switch(this.getKeyFromId(e.id)){case"undo":i=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":i=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":i=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":i=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":i=!!(t>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":i=t>1;break;case"unGroup":i=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":i=!!t}return i},e.prototype.destroy=function(){this.contextMenu.destroy(),I(this.element),this.removeEventListener()},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.parent.element.id+"_contextMenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.parent.element.id+"_contextMenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"copy":t={target:Up.content,iconCss:Up.copy};break;case"cut":t={target:Up.content,iconCss:Up.cut};break;case"paste":t={target:Up.content,iconCss:Up.paste};break;case"undo":t={target:Up.content,iconCss:Up.undo};break;case"redo":t={target:Up.content,iconCss:Up.redo};break;case"grouping":t={target:Up.content};break;case"group":t={target:Up.content,iconCss:Up.group};break;case"unGroup":t={target:Up.content,iconCss:Up.unGroup};break;case"order":t={target:Up.content,iconCss:Up.order};break;case"bringToFrontOrder":t={target:Up.content,iconCss:Up.bringToFront};break;case"moveForwardOrder":t={target:Up.content,iconCss:Up.moveForward};break;case"sendToBackOrder":t={target:Up.content,iconCss:Up.sendToBack};break;case"sendBackwardOrder":t={target:Up.content,iconCss:Up.sendBackward};break;case"selectAll":t={target:Up.content}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},e.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},e}(),qp=function(){function e(){this.annotationObjects={}}return Object.defineProperty(e.prototype,"textAnnotationConnectors",{get:function(){for(var e=[],t=0,i=Object.keys(this.annotationObjects);t<i.length;t++)for(var n=i[t],r=this.annotationObjects[n],o=0,a=Object.keys(r);o<a.length;o++){var s=a[o];e.push(r[s].connector)}return e},enumerable:!0,configurable:!0}),e.prototype.getTextAnnotationConn=function(e){var t=[];if("Bpmn"===e.shape.type&&0!==e.shape.annotations.length)for(var i=this.annotationObjects[e.id],n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];t.push(i[o].connector)}return t},e.prototype.getSize=function(e,t){var i=new ei(e.width,e.height);if(void 0===i.width||void 0===i.height){if(t instanceof yn||(i.width=i.width||50,i.height=i.height||50),t.actualSize.width&&t.actualSize.height)return t.actualSize;t.measure(new ei),i.width=i.width||t.desiredSize.width,i.height=i.height||t.desiredSize.height,void 0!==e.maxWidth&&(i.width=Math.min(i.width,e.maxWidth)),void 0!==e.maxHeight&&(i.height=Math.min(i.height,e.maxHeight)),void 0!==e.minWidth&&(i.width=Math.max(i.width,e.minWidth)),void 0!==e.minHeight&&(i.height=Math.max(i.height,e.minHeight))}return i},e.prototype.initBPMNContent=function(e,t,i){var n=t.shape;if("Event"===n.shape&&(e=this.getBPMNEventShape(t,n.event)),"Gateway"===n.shape&&(e=this.getBPMNGatewayShape(t)),"DataObject"===n.shape&&(e=this.getBPMNDataObjectShape(t)),"Message"!==n.shape&&"DataSource"!==n.shape||(e=this.getBPMNShapes(t)),"Activity"===n.shape&&(e=this.getBPMNActivityShape(t)),"TextAnnotation"===n.shape&&(e=this.renderBPMNTextAnnotation(i,t,e)),n.annotations.length>0){for(var r=0;r<n.annotations.length&&n.annotations[r].text;r++)e.children.push(this.getBPMNTextAnnotation(t,i,n.annotations[r],e));e.style.strokeDashArray="2 2 6 2"}return e},e.prototype.getBPMNShapes=function(e){var t=new yn;this.setStyle(t,e),0!==(e.constraints&ki.Shadow)&&(t.shadow=e.shadow);var i=Zp(e.shape.shape);return t.data=i,t.id=e.id+"_"+e.shape.shape,void 0!==e.width&&void 0!==e.height&&(t.width=e.width,t.height=e.height),t},e.prototype.getBPMNGatewayShape=function(e){var t=new un,i=new yn;i.id=e.id+"_0_gateway",i.offsetX=e.offsetX,i.offsetY=e.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,e);var n=new yn;n.id=e.id+"_1_gatewayType",n.style.opacity=e.style.opacity,n.style.strokeColor=e.style.strokeColor,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object";var r,o=e.shape.gateway;r=Kp(o.type),"EventBased"===o.type||"ExclusiveEventBased"===o.type||"ParallelEventBased"===o.type?n.style.fill="white":n.style.fill="black",n.data=r,t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[i,n];var a=this.getSize(e,i);return this.setSizeForBPMNGateway(e.shape.gateway,t,a.width,a.height),t},e.prototype.getBPMNDataObjectShape=function(e){var t=new un,i=e.shape.dataObject,n=new yn;n.id=e.id+"_0_dataobj",n.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var r=this.getSize(e,n);n.width=r.width,n.height=r.height,this.setStyle(n,e);var o=new yn;o.id=e.id+"_1_type",o.width=25,o.height=20,o.margin.left=5,o.margin.top=5,o.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",o.style.opacity=e.style.opacity;var a=new yn;switch(a.id=e.id+"_2_collection",a.width=7.5,a.height=15,a.style.fill="black",a.visible=!0,a.horizontalAlignment="Center",a.verticalAlignment="Bottom",a.relativeMode="Object",a.style.opacity=e.style.opacity,a.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}return!1===i.collection&&(a.visible=!1),t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[n,o,a],t},e.prototype.getBPMNTaskShape=function(e){var t=e.shape.activity.task,i=new un,n=new sn;n.cornerRadius=10;var r=this.getSize(e,n);n.id=e.id+"_0_task",n.width=r.width,n.height=r.height,this.setStyle(n,e),void 0!==t.call&&!0===t.call&&(n.style.strokeWidth=4),i.width=r.width,i.height=r.height;var o,a=this.getTaskChildCount(e),s=12*a,l=r.width/2-s;o=1===a?l+8:l+8*(a-1);var c,h=new yn;if("Receive"===t.type||"Send"===t.type?(h.width=18,h.height=16):(h.width=20,h.height=20),h.id=e.id+"_1_tasktType",h.margin.left=5,h.margin.top=5,c=$p(t.type),h.data=c,h.style.fill="transparent",h.style.opacity=e.style.opacity,i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i.children=[n,h],"Service"===t.type){var d=new yn;d.id=e.id+"_1_taskTypeService",d.data=c,d.margin.left=h.margin.left+9,d.margin.top=h.margin.top+9,d.style.fill="white",d.style.opacity=e.style.opacity,i.children.push(d)}var p,u=t.loop,f=new yn;p=Jp(u),f.data=p,f.style.fill="black",f.visible="None"!==u,1===a&&(o=l+9),f.margin.left=o,!0===f.visible&&(o+=20),f.width=12,f.height=12,f.margin.bottom=5,f.id=e.id+"_2_loop",f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.style.fill="transparent",h.style.opacity=e.style.opacity,i.children.push(f);var g=new yn;return g=this.getBPMNCompensationShape(e,g),!0===t.compensation?g.visible=!0:g.visible=!1,1===a&&(o=l+9),g.margin.left=o-3,o+=18,i.children.push(g),i},e.prototype.getBPMNEventShape=function(e,t,i,n){var r,o,a,s,l=new un;n=n||e.id;var c="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",h=e.shape.event;if("Event"===e.shape.shape&&(r=h.event,o=h.trigger),a=t.width,s=t.height,i)a=a||20,s=s||20;else if(void 0===t.width||void 0===t.height){var d=new yn;d.data=c;var p=this.getSize(e,d);a=p.width,s=p.height}var u=e.shape.activity;if("Activity"===e.shape.shape){u.subProcess;r=t.event,o=t.trigger}var f=new yn;f.data=c,f.id=n+"_0_event",f.width=a,f.height=s,f.horizontalAlignment="Center",f.verticalAlignment="Center",f.relativeMode="Object",this.setStyle(f,e);var g=new yn;g.data=c,g.id=n+"_1_event",g.style.gradient=e.style.gradient,g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",g.style.strokeColor=e.style.strokeColor,g.style.opacity=e.style.opacity;var m=new yn,y=Qp(o);switch(m.data=y,m.id=n+"_2_trigger",m.horizontalAlignment="Center",m.verticalAlignment="Center",m.relativeMode="Object",m.style.strokeColor=e.style.strokeColor,m.style.opacity=e.style.opacity,r){case"Start":g.visible=!1;break;case"NonInterruptingStart":f.style.strokeDashArray="2 3",g.visible=!1;break;case"Intermediate":f.style.fill="white",f.style.gradient=null;break;case"NonInterruptingIntermediate":f.style.fill="white",f.style.gradient=null,f.style.strokeDashArray="2 3",g.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":f.style.fill="End"!==r?"white":"black",f.style.gradient=null,m.style.fill="black",m.style.strokeColor=e.style.strokeColor}return l.style.fill="transparent",l.style.strokeColor="transparent",l.style.strokeWidth=0,l.children=[f,g,m],this.setSizeForBPMNEvents(h,l,a,s),l},e.prototype.setEventVisibility=function(e,t){var i=e.shape.event.event,n=t[0],r=t[1];t[2];switch(i){case"Start":r.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",r.visible=!1}},e.prototype.setSubProcessVisibility=function(e){var t=e.shape.activity.subProcess,i=t.events.length,n="Transaction"===e.shape.activity.subProcess.type?2:0,r=e.wrapper.children[0].children[0];if(!1===t.adhoc&&(r.children[3+n+i].visible=!1),!1===t.compensation&&(r.children[4+n+i].visible=!1),i>0)for(var o=0;o<i;o++)this.setEventVisibility(e,r.children[2+o].children)},e.prototype.getBPMNSubProcessShape=function(e){var t,i,n,r=new un,o=new yn,a=(new un,new yn),s=e.shape.activity,l=s.subProcess,c=this.getSubprocessChildCount(e),h=new sn;h.id=e.id+"_0_Subprocess",h.style.fill="transparent",h.cornerRadius=10;var d=this.getSize(e,h);h.width=d.width,h.height=d.height,r.children=[h],"Transaction"===s.subProcess.type&&this.getBPMNSubProcessTransaction(e,e.shape,r);var p=12*c,u=d.width/2;n=1===c?u-6:u-p/2-4*(c-1)/2,this.setStyle(h,e),0!==(e.constraints&ki.Shadow)&&(r.shadow=e.shadow);var f=new yn;if(f.id=e.id+"_0_collapsed",f.width=12,f.height=12,f.style.fill="black",f.style.strokeColor=e.style.strokeColor,f.margin.bottom=5,f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.data=Zp("collapsedShape"),f.margin.left=n,!0!==l.collapsed||l.processes?f.visible=!1:f.visible=!0,!0===f.visible&&(n+=18),r.children.push(f),"Event"===l.type){h.style.strokeWidth=1,h.style.strokeDashArray="2 2",t=l.events;for(var g=0;g<t.length;g++)i=t[g],this.getBPMNSubEvent(i,e,r)}1===c&&(n=u+8),(a=this.getBPMNSubProcessLoopShape(e)).margin.left=n,!0===a.visible&&(n+=16),r.children.push(a),h.id=e.id+"_boundary","Default"===l.boundary&&(h.style.strokeWidth=1,h.style.strokeDashArray="1 0"),"Call"===l.boundary&&(h.style.strokeWidth=4,h.style.strokeDashArray="1 0"),"Event"===l.boundary&&(h.style.strokeWidth=1,h.style.strokeDashArray="2 2"),1===c&&(n=u+8),(o=this.getBPMNAdhocShape(e,o,l)).margin.left=n,!0===o.visible&&(n+=16),r.children.push(o);var m=new yn;return!0===l.compensation?m.visible=!0:m.visible=!1,1===c&&(n=u+8),(m=this.getBPMNCompensationShape(e,m)).margin.left=n,!0===m.visible&&(n+=16),r.children.push(m),r.style.strokeColor="transparent",r.style.strokeWidth=0,r.style.fill="transparent",r},e.prototype.getBPMNSubEvent=function(e,t,i,n){var r;i.children=i.children||[],r=this.getBPMNEventShape(t,e,!0,n),this.getBPMNSubprocessEvent(t,r,e),r.id=n||t.id+"_subprocessEvents",r.width=e.width||20,r.height=e.height||20,r.setOffsetWithRespectToBounds(e.offset.x,e.offset.y,"Fraction"),r.relativeMode="Point",r.margin=e.margin,r.horizontalAlignment=e.horizontalAlignment,r.verticalAlignment=e.verticalAlignment,r.style.fill="transparent",r.style.strokeColor="transparent",r.style.strokeWidth=0,i.children.push(r)},e.prototype.getBPMNSubProcessTransaction=function(e,t,i){var n=i.children[0].width,r=i.children[0].height,o=new sn;o.margin={left:3,right:0,top:3,bottom:0},o.id=e.id+"_0_Subprocess_innnerRect",o.cornerRadius=10,o.width=n-6,o.height=r-6,i.children.push(o);var a=new un;a.id=e.id+"_transaction_events",a.style.gradient=e.style.gradient;var s=t.activity.subProcess.transaction;this.getBPMNSubEvent(s.success,e,a,e.id+"_success"),this.getBPMNSubEvent(s.cancel,e,a,e.id+"_cancel"),this.getBPMNSubEvent(s.failure,e,a,e.id+"_failure"),this.updateDiagramContainerVisibility(a.children[0],s.success.visible),this.updateDiagramContainerVisibility(a.children[1],s.cancel.visible),this.updateDiagramContainerVisibility(a.children[2],s.failure.visible),a.float=!0,a.width=n,a.height=r,a.style.fill=a.style.strokeColor="transparent",i.children.push(a)},e.prototype.getBPMNSubProcessLoopShape=function(e){var t,i,n=e.shape.activity,r=new yn;return i=Jp(t=n.subProcess.loop),r.visible="None"!==t,r.id=e.id+"_loop",r.data=i,r.style.fill="black",r.width=12,r.height=12,r.horizontalAlignment="Left",r.verticalAlignment="Bottom",r.setOffsetWithRespectToBounds(0,1,"Fraction"),r.relativeMode="Point",r.margin.bottom=5,r.style.fill="transparent",r.style.strokeColor=e.style.strokeColor,r},e.prototype.drag=function(e,t,i,n){var r=n.nameTable[e.processId];e.margin.top+i>=0&&n.nodePropertyChange(e,{},{margin:{top:e.margin.top+i}}),e.margin.left+t>=0&&n.nodePropertyChange(e,{},{margin:{left:e.margin.left+t}});var o=this.getChildrenBound(r,e.id,n);this.updateSubProcessess(o,e,n),r.wrapper.measure(new ei(void 0,void 0)),r.wrapper.arrange(r.wrapper.desiredSize),n.refreshCanvasLayers(),n.updateSelector(),this.updateDocks(e,n)},e.prototype.dropBPMNchild=function(e,t,i){if(t&&"Bpmn"===t.shape.type&&"Bpmn"===e.shape.type&&"TextAnnotation"!==t.shape.shape){var n=i.nameTable[e.id].shape.activity.subProcess;if(i.currentSymbol&&"Bpmn"===e.shape.type&&!n.collapsed)return void(t.processId=e.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(t.id)&&!n.collapsed){n.processes.push(t.id);var r=Oh(t),o=i.nameTable[t.id].wrapper,a=i.nameTable[e.id].wrapper;o.margin.top=o.offsetY-o.actualSize.height/2-(e.offsetY-e.actualSize.height/2),o.margin.left=o.offsetX-o.actualSize.width/2-(e.offsetX-e.actualSize.width/2),o.margin.top=o.margin.top<0?0:o.margin.top,o.margin.left=o.margin.left<0?0:o.margin.left,i.nameTable[t.id].processId=e.id,a.children.push(i.nameTable[t.id].wrapper);var s=this.getChildrenBound(e,t.id,i);this.updateSubProcessess(s,t,i),a.measure(new ei(void 0,void 0)),a.arrange(a.desiredSize),i.refreshCanvasLayers(),i.updateSelector();for(var l=[],c=(l=l.concat(t.outEdges,t.inEdges)).length-1;c>=0;c--)-1===i.bpmnModule.textAnnotationConnectors.indexOf(i.nameTable[l[c]])&&i.remove(i.nameTable[l[c]]);var h={type:"PositionChanged",undoObject:{nodes:[r]},redoObject:{nodes:[Oh(t)]},category:"Internal"};i.addHistoryEntry(h),"SVG"===i.mode&&t.zIndex<e.zIndex&&i.updateProcesses(t),this.updateDocks(t,i)}}},e.prototype.updateDocks=function(e,t){if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&!e.shape.activity.subProcess.collapsed)for(var i=0,n=e.shape.activity.subProcess.processes;i<n.length;i++){var r=n[i],o=t.nameTable[r];o&&(t.updateConnectorEdges(o),o.wrapper.measure(new ei(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateDocks(o,t))}},e.prototype.removeBpmnProcesses=function(e,t){var i=t.nameTable[e.processId];if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=(r=e.shape.activity.subProcess.processes).length-1;n>=0;n--)t.remove(t.nameTable[r[n]]);if(i){t.removeDependentConnector(e);var r=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,e.id);var o=r.indexOf(e.id);r.splice(o,1)}},e.prototype.removeChildFromBPMN=function(e,t){for(var i=0,n=e.children;i<n.length;i++){var r=n[i];r.id===t?e.children.splice(e.children.indexOf(r),1):r.children&&this.removeChildFromBPMN(r,t)}},e.prototype.removeProcess=function(e,t){var i=t.nameTable[e];if(i){var n=t.nameTable[i.processId];if(n&&"Bpmn"===n.shape.type){var r=n.shape.activity.subProcess.processes;t.removeDependentConnector(i),this.removeChildFromBPMN(n.wrapper,e);var o=r.indexOf(e);r.splice(o,1),i.processId="",t.refreshDiagramLayer(),t.updateSelector()}}},e.prototype.addProcess=function(e,t,i){var n;e.id=e.id||Ch(),n=e.id;var r=i.nameTable[n];r||i.add(e),e.processId=t;var o=i.nameTable[t],a=o.shape.activity.subProcess;if(r&&o&&"Bpmn"===o.shape.type&&"Bpmn"===r.shape.type&&a.processes){r.processId=t;var s=o.shape.activity.subProcess.processes;if(s.indexOf(n)<0&&s.push(n),o.wrapper.children.push(r.wrapper),o.wrapper.measure(new ei),o.wrapper.arrange(o.wrapper.desiredSize),i.bpmnModule.updateDocks(o,i),i.refreshDiagramLayer(),"SVG"===i.mode&&r.shape&&r.shape.activity&&!r.shape.activity.subProcess.processes)th(t+"_groupElement").appendChild(th(e.id+"_groupElement"))}},e.prototype.getChildrenBound=function(e,t,i){var n,r=e.shape.activity.subProcess.processes;if(r&&r.length)for(var o=0,a=r;o<a.length;o++){var s=a[o];t!==s&&(n=n?i.nameTable[s].wrapper.bounds.uniteRect(n):i.nameTable[s].wrapper.bounds)}return n||i.nameTable[t].wrapper.bounds},e.prototype.updateSubProcessess=function(e,t,i){var n,r,o,a,s=i.nameTable[t.processId],l={x:.5,y:.5};s.wrapper.bounds.left+t.margin.left+t.width>s.wrapper.bounds.right&&(o=!0),s.wrapper.bounds.top+t.margin.top+t.height>s.wrapper.bounds.bottom&&(a=!0),o&&(l.x=0),a&&(l.y=0);var c=s.wrapper.actualSize;o&&(n=(t.wrapper.margin.left+t.wrapper.bounds.width)/c.width),a&&(r=(t.wrapper.margin.top+t.wrapper.bounds.height)/c.height),(n>0||r>0)&&i.commandHandler.scale(i.nameTable[t.processId],n||1,r||1,l)},e.prototype.getBPMNCompensationShape=function(e,t){return t.id=e.id+"_0_compensation",t.width=12,t.height=12,t.margin.bottom=5,t.style.fill="transparent",t.style.strokeColor=e.style.strokeColor,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",t},e.prototype.getBPMNActivityShape=function(e){var t,i=new un,n=e.shape.activity,r=n.activity,o=n.subProcess;n.activity;return"Task"===r&&(t=this.getBPMNTaskShape(e)),"SubProcess"===r&&o&&(t=this.getBPMNSubProcessShape(e)),t.id=r+e.id,i.children=[t],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},e.prototype.getBPMNSubprocessEvent=function(e,t,i){var n,r;if(0!==i.annotations.length)for(var o=0;o<i.annotations.length;o++){var a=i.annotations[o];(n=e.initAnnotationWrapper(a)).width=i.width,n.height=i.height,t.children.push(n)}if(0!==i.ports.length)for(o=0;o<i.ports.length;o++){var s=i.ports[o];r=e.initPortWrapper(s),t.children.push(r)}},e.prototype.getBPMNAdhocShape=function(e,t,i){return t.id=e.id+"_0_adhoc",t.width=12,t.height=8,t.style.fill="black",t.style.strokeColor=e.style.strokeColor,t.margin.bottom=5,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?t.visible=!0:t.visible=!1,t},e.prototype.getBPMNTextAnnotation=function(e,t,i,n){i.id=i.id||Ch(),i.nodeId=e.id;var r=new un,o=new yn,a=new dn;o.id=e.id+"_"+i.id+"_path",o.width=i.width,o.height=i.height,o.relativeMode="Object",a.id=e.id+"_"+i.id+"_text",a.content=i.text;var s=e.style;a.style={fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,bold:s.bold,textWrapping:s.textWrapping,color:s.color,fill:"white",fontFamily:s.fontFamily,whiteSpace:s.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textDecoration:s.textDecoration},a.horizontalAlignment="Center",a.verticalAlignment="Center",a.relativeMode="Object",a.margin={left:5,right:5,top:5,bottom:5},r.offsetX=e.offsetX+i.length*Math.cos(i.angle*(Math.PI/180)),r.offsetY=e.offsetY+i.length*Math.sin(i.angle*(Math.PI/180)),r.float=!0,r.transform=zi.Self,r.id=e.id+"_textannotation_"+i.id,r.style.strokeColor="transparent",r.margin={left:10,right:10,top:10,bottom:10},r.relativeMode="Object",r.rotateAngle=0,r.children=[o,a];var l=new Yc(e.shape,"annotations",{id:r.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);l.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],l.offsetX=r.offsetX,l.offsetY=r.offsetY,l.text=i.text,l.angle=i.angle,l.length=i.length,l.width=i.width,l.height=i.height,l.wrapper=r,r.children.push(l.initPortWrapper(l.ports[0]));var c=new mi(0,0,0,0),h=e.width||e.minWidth||0,d=e.height||e.minHeight||0;void 0!==h&&void 0!==d&&(c=new mi(e.offsetX-h/2,e.offsetY-d/2,h,d)),this.setAnnotationPath(c,r,{x:l.offsetX,y:l.offsetY},l,i.length,i.angle);var p={id:e.id+"_"+i.id+"_connector",constraints:Li.Default&~(Li.DragTargetEnd|Li.Drag),sourceID:e.id,targetID:r.id,targetDecorator:{shape:"None"}},u=new na(e.shape,"annotations",p,!0);u.targetPortID=l.ports[0].id,u.init(t),u.wrapper.float=!1,u.wrapper.transform=zi.Self,n.children.push(u.wrapper),u.zIndex=1e4;var f=this.annotationObjects[e.id];f||(f={}),f[i.id]||(f[i.id]={});return f[i.id].node=l,f[i.id].connector=u,this.annotationObjects[e.id]=f,t.initObject(l,void 0,!1),l.zIndex=1e4,r},e.prototype.renderBPMNTextAnnotation=function(e,t,i){t.id=t.id||Ch();var n=new un,r=new yn,o=new dn;r.id="_"+t.id+"_path",r.width=t.width,r.height=t.height,r.relativeMode="Object",o.id=t.id+"_text",o.content=t.shape.annotation.text;var a=t.style;o.style={fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,bold:a.bold,textWrapping:a.textWrapping,color:a.color,fill:"white",fontFamily:a.fontFamily,whiteSpace:a.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textDecoration:a.textDecoration},o.horizontalAlignment="Left",o.verticalAlignment="Center",o.relativeMode="Object",o.margin={left:5,right:5,top:5,bottom:5},n.offsetX=t.offsetX+t.shape.annotation.length*Math.cos(t.shape.annotation.angle*(Math.PI/180)),n.offsetY=t.offsetY+t.shape.annotation.length*Math.sin(t.shape.annotation.angle*(Math.PI/180)),n.float=!0,n.id=t.id+"_textannotation_"+t.id,n.style.strokeColor="transparent",n.margin={left:10,right:10,top:10,bottom:10},n.relativeMode="Object",n.rotateAngle=0,n.children=[r,o];var s=new Yc(t.shape,"annotations",{id:n.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);s.ports=[{id:r.id+"_port",shape:"Square",offset:{x:0,y:.5}}],s.offsetX=n.offsetX,s.offsetY=n.offsetY,s.shape&&s.shape.annotation&&(s.text=t.shape.annotation.text,s.angle=t.shape.annotation.angle,s.length=t.shape.annotation.length),s.width=t.width,s.height=t.height,s.wrapper=n,n.children.push(s.initPortWrapper(s.ports[0]));var l=new mi(0,0,0,0),c=t.width||0,h=t.height||0;return void 0!==c&&void 0!==h&&(l=new mi(t.offsetX-c/2,t.offsetY-h/2,c,h)),this.setAnnotationPath(l,n,{x:s.offsetX,y:s.offsetY},s,t.length,t.angle),n},e.prototype.getTextAnnotationWrapper=function(e,t){if(e&&"Bpmn"===e.shape.type){if("TextAnnotation"===e.shape.shape)return e.wrapper.children[1];if(this.annotationObjects[e.id]&&this.annotationObjects[e.id][t]){var i=this.annotationObjects[e.id][t].node;return this.getTextAnnotationWrapper(i,t)}}return null},e.prototype.addAnnotation=function(e,t,i){var n=e.wrapper.children[0],r=e.shape;t.nodeId=e.id;var o=new kc(r,"annotations",t,!0);return r.annotations.push(o),n.children.push(this.getBPMNTextAnnotation(e,i,t,n)),e.wrapper.measure(new ei),e.wrapper.arrange(e.wrapper.desiredSize),this.annotationObjects[e.id][t.id].connector},e.prototype.clearAnnotations=function(e,t){var i=e.shape;if(i.annotations.length)for(var n=i.annotations.length-1;n>=0;n--){var r=i.annotations[n];this.removeAnnotationObjects(e,r,t)}delete this.annotationObjects[e.id]},e.prototype.checkAndRemoveAnnotations=function(e,t){if("Bpmn"===e.shape.type)if("TextAnnotation"===e.shape.shape)for(var i=e.id.split("_"),n=i[i.length-1],r=i[i.length-3]||i[0],o=t.nameTable[r],a=o.shape,s=0,l=a.annotations;s<l.length;s++){var c=l[s];if(c.id===n)if(-1!==a.annotations.indexOf(c))return t.removeDependentConnector(e),this.removeAnnotationObjects(o,c,t),!0}else e.shape.annotations&&e.shape.annotations.length&&this.clearAnnotations(e,t);return!1},e.prototype.removeAnnotationObjects=function(e,t,i){var n=e.shape,r=n.annotations.indexOf(t);if(-1!==r){if(!(i.diagramActions&Wi.UndoRedo)&&!(i.diagramActions&Wi.Group)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:Oh(t),redoObject:Oh(t),category:"Internal"};i.addHistoryEntry(o)}n.annotations.splice(r,1);var a=this.annotationObjects[e.id];if(a&&a[t.id]){var s=a[t.id].node,l=a[t.id].connector;i.removeElements(s),i.removeElements(l);var c=e.wrapper.children[0];r=c.children.indexOf(s.wrapper),c.children.splice(r,1),r=c.children.indexOf(l.wrapper),c.children.splice(r,1),i.removeFromAQuad(s),i.removeFromAQuad(l),delete i.nameTable[s.id],delete i.nameTable[l.id],delete a[t.id]}}},e.prototype.setAnnotationPath=function(e,t,i,n,r,o){var a,s,l=this.getAnnotationPathAngle(i,e),c="",h=t.children[0],d=t.children[2],p=t.children[1];h.horizontalAlignment="Stretch",h.verticalAlignment="Stretch",p.margin.left=p.margin.right=5,p.margin.top=p.margin.bottom=5,0===l?(c="M10,20 L0,20 L0,0 L10,0",h.width=10,h.horizontalAlignment="Left",d.setOffsetWithRespectToBounds(0,.5,"Fraction"),p.margin.top=p.margin.bottom=10,a=e.middleRight,s={x1:e.right,y1:e.top,x2:e.right,y2:e.bottom}):180===l?(c="M0,0 L10,0 L10,20 L0,20",h.width=10,h.horizontalAlignment="Right",d.setOffsetWithRespectToBounds(1,.5,"Fraction"),p.margin.top=p.margin.bottom=10,a=e.middleLeft,s={x1:e.left,y1:e.top,x2:e.left,y2:e.bottom}):90===l?(c="M20,10 L20,0 L0,0 L0,10",h.height=10,h.verticalAlignment="Top",d.setOffsetWithRespectToBounds(.5,0,"Fraction"),p.margin.left=p.margin.right=10,a=e.bottomCenter,s={x1:e.right,y1:e.bottom,x2:e.left,y2:e.bottom}):(c="M0,0 L0,10 L20,10 L20,0",h.height=10,h.verticalAlignment="Bottom",d.setOffsetWithRespectToBounds(.5,1,"Fraction"),p.margin.left=p.margin.right=10,a=e.topCenter,s={x1:e.right,y1:e.top,x2:e.left,y2:e.top});var u=e.center;a=hr(s,[u,ni.transform(i,o,Math.max(e.width,e.height))],0,u),h.data=c,void 0!==r&&void 0!==o&&(a=ni.transform(a,o,r),t.offsetX=n.offsetX=a.x,t.offsetY=n.offsetY=a.y)},e.prototype.isBpmnTextAnnotation=function(e,t){if(this.annotationObjects){var i=e.parentId,n=e.id,r=t.nameTable[i];return r&&"Bpmn"===r.shape.type&&this.annotationObjects[i]&&this.annotationObjects[i][n]?r:null}return null},e.prototype.updateTextAnnotationContent=function(e,t,i,n){var r=t.parentId,o=t.id;if(this.annotationObjects[r]&&this.annotationObjects[r][o])for(var a=0,s=e.shape.annotations;a<s.length;a++){var l=s[a];if(l.id===o){l.text=i;var c=this.annotationObjects[r][o].node.wrapper.children[1];c.content=i,c.visible=!0,e.wrapper.measure(new ei),e.wrapper.arrange(e.wrapper.desiredSize)}}},e.prototype.updateQuad=function(e,t){var i,n=e.shape.annotations;if(n&&n.length>0)for(var r=0;r<n.length;r++)i=this.annotationObjects[e.id][n[r].id].node,t.updateQuad(i)},e.prototype.updateTextAnnotationProp=function(e,t,i){if("Bpmn"===e.shape.type){var n=e.shape.annotations;if(n&&n.length>0)for(var r=0;r<e.wrapper.children[0].children.length;r++)for(var o=0;o<n.length;o++){var a=e.wrapper.children[0].children[r].id.split("_");if(a[a.length-1]===n[o].id){var s=this.annotationObjects[e.id][n[o].id].node,l=this.annotationObjects[e.id][n[o].id].connector,c=(br(l.targetPoint,e.wrapper.bounds,e.wrapper.bounds),l.sourcePoint);c={x:l.sourcePoint.x+e.offsetX-t.offsetX,y:l.sourcePoint.y+e.offsetY-t.offsetY},c=ni.transform(c,n[o].angle,n[o].length),e.wrapper.children[0].children[r].offsetX=s.offsetX=c.x,e.wrapper.children[0].children[r].offsetY=s.offsetY=c.y,i.updateQuad(s)}}}},e.prototype.getSubprocessChildCount=function(e){var t,i=0,n=e.shape.activity.subProcess;return void 0!==(t=n.loop)&&"None"!==t&&i++,void 0!==n.compensation&&!0===n.compensation&&i++,void 0!==n.collapsed&&!0===n.collapsed&&i++,void 0!==n.adhoc&&!0===n.adhoc&&i++,i},e.prototype.getTaskChildCount=function(e){var t=0,i=e.shape.activity.task;return void 0!==i.compensation&&!0===i.compensation&&t++,void 0!==i.loop&&"None"!==i.loop&&t++,t},e.prototype.setStyle=function(e,t){e.style.fill=t.style.fill,e.style.strokeColor=t.style.strokeColor,e.style.strokeWidth=t.style.strokeWidth,e.style.strokeDashArray=t.style.strokeDashArray,e.style.opacity=t.style.opacity,e.style.gradient=t.style.gradient,0!==(t.constraints&ki.Shadow)&&(e.shadow=t.shadow)},e.prototype.updateBPMN=function(e,t,i,n){var r=e.shape||{},o=i.wrapper.children[0],a=i.shape.shape,s=void 0!==e.width||void 0!==e.height;if("Gateway"===r.shape&&r.gateway)i.wrapper.children[0]=this.getBPMNGatewayShape(i);else if("DataObject"===r.shape&&r.dataObject)i.wrapper.children[0]=this.getBPMNDataObjectShape(i);else if("Activity"===r.shape&&r.activity)i.wrapper.children[0]=this.getBPMNActivityShape(i);else if("Event"===r.shape&&r.event){var l=r.event;i.wrapper.children[0]=this.getBPMNEventShape(i,l)}else"Message"===r.shape||"DataSource"===r.shape?i.wrapper.children[0]=this.getBPMNShapes(i):void 0!==r.gateway||"Gateway"===a&&s?this.updateBPMNGateway(i,e):void 0!==r.dataObject||"DataObject"===a&&s?this.updateBPMNDataObject(i,e,t):void 0!==r.activity||"Activity"===a&&s?this.updateBPMNActivity(i,e,t,n):(void 0!==r.event||"Event"===a&&s)&&this.updateBPMNEvent(i,e,t);if(e.style&&(El(e.style,o instanceof cn?"Activity"===i.shape.shape?o.children[0].children[0]:o.children[0]:o),e.style&&e.style.strokeColor&&o.children.length>0))if("Activity"===i.shape.shape&&"SubProcess"===i.shape.activity.activity){var c=o.children[0];this.updateBPMNStyle(c,e.style.strokeColor)}else"Gateway"!==i.shape.shape&&"Event"!==i.shape.shape||this.updateBPMNStyle(o,e.style.strokeColor)},e.prototype.updateBPMNStyle=function(e,t){for(var i=0;i<e.children.length;i++){El({strokeColor:t},e.children[i])}},e.prototype.updateBPMNGateway=function(e,t){var i=e.shape,n=e.wrapper.children[0];if(i){El(e.style,n.children[0]);var r=Kp(i.gateway.type);n.children[1].data=r}void 0===t.width&&void 0===t.height||this.setSizeForBPMNGateway(e.shape.gateway,n,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNDataObject=function(e,t,i){var n=t.shape,r=e.wrapper.children[0];if(n){var o=r.children[1],a=r.children[2];if(void 0!==t.style&&(El(t.style,r.children[0]),o.style.opacity=e.style.opacity,a.style.opacity=e.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}"None"===i.shape.dataObject.type&&(o.visible=!0),void 0!==t.shape.dataObject.collection&&(a.visible=n.dataObject.collection)}}void 0===t.width&&void 0===t.height||this.setSizeForBPMNDataObjects(e.shape.dataObject,r,t.width||e.width,t.height||e.height)},e.prototype.getEvent=function(e,t,i,n,r,o){switch(i){case"Start":r.visible=!1,n.style.strokeDashArray="",o.style.fill="white",o.style.strokeColor="black",n.style.fill="white";break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",o.style.fill="white",n.style.fill="white",o.style.strokeColor="black",r.visible=!1;break;case"Intermediate":n.style.strokeDashArray="",n.style.fill="white",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",this.updateEventVisibility(t,r);break;case"NonInterruptingIntermediate":n.style.fill="white",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",n.style.strokeDashArray="2 3",r.style.strokeDashArray="2 3",this.updateEventVisibility(t,r);break;case"ThrowingIntermediate":case"End":n.style.fill="End"!==i?"white":"black",n.style.strokeDashArray="",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="black",this.updateEventVisibility(t,r),o.style.strokeColor=e.style.fill}},e.prototype.updateEventVisibility=function(e,t){e.shape.activity&&e.shape.activity.subProcess&&e.shape.activity.subProcess.events&&void 0!==e.shape.activity.subProcess.events[0]&&void 0!==e.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==e.shape.activity.subProcess.events[0].event&&"Start"!==e.shape.activity.subProcess.events[0].event||(t.visible=!0):void 0!==e.shape.event&&("NonInterruptingStart"!==e.shape.event.event&&"Start"!==e.shape.event.event||(t.visible=!0))},e.prototype.updateBPMNEvent=function(e,t,i){var n,r=t.shape,o=e.wrapper.children[0];if(r){var a,s=o.children[0],l=o.children[1],c=o.children[2];void 0!==t.style&&(El(e.style,o.children[0]),void 0===t.style.opacity&&void 0===t.style.strokeColor||(l.style.opacity=e.style.opacity,l.style.strokeColor=e.style.strokeColor)),a=r.event.event,n=r.event.trigger,void 0!==a&&this.getEvent(e,i,a,s,l,c),void 0!==n&&this.updateBPMNEventTrigger(e,t)}void 0===t.width&&void 0===t.height&&void 0===n||this.setSizeForBPMNEvents(e.shape.event,o,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNEventTrigger=function(e,t){var i=e.shape,n=e.wrapper.children[0].children[2];n.canMeasurePath=!0,!t.style||void 0===t.style.strokeColor&&void 0===t.style.opacity||El(e.style,n);var r=Qp(i.event.trigger);n.data=r},e.prototype.updateBPMNActivity=function(e,t,i,n){var r=t.shape,o=e.wrapper.children[0],a=this.getSize(e,o.children[0].children[0]);if(r){var s=i.shape.activity.activity,l=e.shape.activity.activity;if("SubProcess"!==s&&"Task"!==s||"SubProcess"!==l&&"Task"!==l){if("Task"===l&&void 0!==r.activity.task){this.updateBPMNActivityTask(e,t);var c=this.getTaskChildCount(e),h=void 0,d=12*c,p=a.width/2-d;h=1===c?p+8:p+8*(c-1),void 0!==r.activity.task.loop&&this.updateBPMNActivityTaskLoop(e,t,h,c,p,2)}"SubProcess"===l&&void 0!==r.activity.subProcess&&this.updateBPMNActivitySubProcess(e,t,i,n)}else n.removeElements(e),e.wrapper.children[0]=this.getBPMNActivityShape(e);this.setSizeForBPMNActivity(e.shape.activity,o,t.width||a.width,t.height||a.height,e)}void 0===t.width&&void 0===t.height||this.setSizeForBPMNActivity(e.shape.activity,o,t.width||a.width,t.height||a.height,e)},e.prototype.updateBPMNActivityTask=function(e,t){for(var i=t.shape,n=e.wrapper.children[0].children[0],r=i.activity.task,o=0;o<n.children.length;o++){if(n.children[o].id===e.id+"_1_taskTypeService")n.children.splice(o,1),(s=document.getElementById(e.id+"_1_taskTypeService")).parentNode.removeChild(s)}if("Receive"===r.type||"Send"===r.type?n.children[1].height=14:n.children[1].height=20,void 0!==r.type){var a=$p(r.type);if(n.children[1].data=a,"Service"===r.type){for(o=0;o<n.children.length;o++){var s;if(n.children[o].id===e.id+"_1_tasktType")n.children.splice(o,1),(s=document.getElementById(e.id+"_1_tasktType")).parentNode.removeChild(s)}var l=new yn;l.id=e.id+"_1_tasktType",l.margin.left=5,l.margin.top=5,l.data=a,l.style.fill="transparent",l.style.opacity=e.style.opacity,l.width=20,l.height=20,n.children.splice(1,0,l);var c=new yn;c.id=e.id+"_1_taskTypeService",c.data=a,c.margin.left=n.children[1].margin.left+9,c.margin.top=n.children[1].margin.top+9,c.style.fill="white",c.style.opacity=e.style.opacity,n.children.splice(2,0,c)}}void 0!==i.activity.task.call&&(!1!==i.activity.task.call?n.children[0].style.strokeWidth=4:n.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation&&(!0===i.activity.task.compensation?n.children[3].visible=!0:n.children[3].visible=!1)},e.prototype.updateBPMNActivityTaskLoop=function(e,t,i,n,r,o){var a,s,l=t.shape,c=e.wrapper.children[0].children[0],h=l.activity,d=0;if(void 0!==h.subProcess){var p=h.subProcess;d="Transaction"===h.subProcess.type?2:0,s=Jp(a=p.loop),c.children[2+d].data=s,c.children[2+d].visible="None"!==a}else void 0!==h.task&&void 0!==h.task.loop&&(s=Jp(h.task.loop),c.children[2].data=s,c.children[2].visible="None"!==h.task.loop);this.updateChildMargin(c,n,r,i,o+d)},e.prototype.updateChildMargin=function(e,t,i,n,r){if(1===t)for(var o=r;o<e.children.length;o++)2!==o&&!0===e.children[o].visible&&(e.children[o].margin.left=n,n=i+8);else{n=i+8*(t-1);for(o=r;o<e.children.length;o++)2!==o&&!0===e.children[o].visible&&(e.children[o].margin.left=n,n+=20)}},e.prototype.updateBPMNActivitySubProcess=function(e,t,i,n){var r,o=t.shape,a=e.wrapper.children[0],s=this.getSize(e,a.children[0].children[0]),l=o.activity.subProcess,c=this.getSubprocessChildCount(e),h=12*c,d=s.width/2-h;r=1===c?d+8:d+8*(c-1),El(e.style,a.children[0].children[0]),void 0!==l.events&&this.updateBPMNSubProcessEvent(e,t,i,n),void 0!==l.adhoc&&this.updateBPMNSubProcessAdhoc(e,i,l,r,c,d),void 0!==l.boundary&&this.updateBPMNSubProcessBoundary(e,l),void 0!==l.collapsed&&this.updateBPMNSubProcessCollapsed(e,i,l,r,c,d,n),void 0!==l.compensation&&this.updateBPMNSubProcessCompensation(e,i,l,r,c,d),void 0!==l.loop&&this.updateBPMNSubProcessLoop(e,i,l,r,c,d),void 0!==l.transaction&&this.updateBPMNSubProcessTransaction(e,t,i,n)},e.prototype.updateBPMNSubProcessEvent=function(e,t,i,n){for(var r=t.shape,o=e.wrapper.children[0],a=o.children[0],s=(o.children[0].children.length,r.activity.subProcess),l=0,c=Object.keys(s.events);l<c.length;l++){var h=c[l],d=Number(h),p=a.children[d+2],u=e.shape.activity.subProcess.events[d];this.updateBPMNSubEvent(e,s.events[d],u,p,t,i,n)}},e.prototype.updateBPMNSubEvent=function(e,t,i,n,r,o,a){var s,l,c=e.wrapper.children[0],h=r.shape,d=n.children[0],p=n.children[1],u=n.children[2];if(r.style&&(void 0===r.style.strokeColor&&void 0===r.style.opacity||(c.children[0].children[1].style.strokeColor=r.style.strokeColor,c.children[0].children[1].style.opacity=r.style.opacity)),void 0!==h.activity.subProcess&&(s=t.event,l=t.trigger),void 0!==s&&this.getEvent(r,o,s,d,p,u),void 0!==l){r.style&&El(r.style,c.children[0]);var f=Qp(l);n.children[2].data=f}if(void 0===t.height&&void 0===t.width||this.getEventSize(t,n),void 0!==t.id&&(n.id=t.id),void 0!==t.margin&&(n.margin=t.margin),void 0!==t.horizontalAlignment&&(n.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(n.verticalAlignment=t.verticalAlignment),void 0!==t.offset&&(n.setOffsetWithRespectToBounds(i.offset.x,i.offset.y,"Fraction"),n.relativeMode="Point"),void 0!==t.annotations){var g=void 0,m=c.children[0].children[2];n.children[3]&&n.children.length>3&&(g=n.children[3],a.updateAnnotation(t.annotations[0],g,m))}if(void 0!==t.ports){var y=void 0,v=c.children[0].children[2];n.children[4]&&n.children.length>4&&(y=n.children[4],a.updatePort(t.ports[0],y,v))}void 0!==t.visible&&this.updateDiagramContainerVisibility(n,t.visible)},e.prototype.updateBPMNSubProcessTransaction=function(e,t,i,n){var r,o=t.shape.activity.subProcess.transaction,a=e.wrapper.children[0].children[0].children[2];void 0!==o.success&&(r=e.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(e,o.success,r,a.children[0],t,i,n)),void 0!==o.cancel&&(r=e.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(e,o.cancel,r,a.children[1],t,i,n)),void 0!==o.failure&&(r=e.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(e,o.failure,r,a.children[2],t,i,n));for(var s=0,l=e.outEdges;s<l.length;s++){var c=l[s],h=n.nameTable[c];switch(h.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&n.connectorPropertyChange(h,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&n.connectorPropertyChange(h,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&n.connectorPropertyChange(h,{},{sourcePortID:"failure"})}}},e.prototype.getEventSize=function(e,t){void 0!==e.height&&(t.height=e.height,t.children[0].height=e.height,t.children[1].height=.85*e.height,t.children[2].height=.54*e.height),void 0!==e.width&&(t.width=e.width,t.children[0].width=e.width,t.children[1].width=.85*e.width,t.children[2].width=.54*e.width)},e.prototype.updateBPMNSubProcessAdhoc=function(e,t,i,n,r,o){e.shape;var a=e.wrapper.children[0].children[0],s="Transaction"===e.shape.activity.subProcess.type?2:0;!1===i.adhoc?a.children[3+s].visible=!1:a.children[3+s].visible=!0,this.updateChildMargin(a,r,o,n,3+s)},e.prototype.updateBPMNSubProcessBoundary=function(e,t){e.shape;var i=e.wrapper.children[0].children[0].children[0];"Default"===t.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===t.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===t.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},e.prototype.updateElementVisibility=function(e,t,i){if(e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=e.shape.activity.subProcess.processes,r=n.length-1;r>=0;r--){var o=i.nameTable[n[r]];o.visible=t,i.updateElementVisibility(o.wrapper,o,t),t&&("Event"===o.shape.shape&&this.setEventVisibility(o,o.wrapper.children[0].children),"SubProcess"===o.shape.activity.activity&&this.setSubProcessVisibility(o));for(var a=o.inEdges.concat(o.outEdges),s=a.length-1;s>=0;s--){var l=i.nameTable[a[s]];l.visible=t,i.updateElementVisibility(l.wrapper,l,t)}}t&&("Event"===e.shape.shape&&this.setEventVisibility(e,e.wrapper.children[0].children),"SubProcess"===e.shape.activity.activity&&this.setSubProcessVisibility(e),"Task"===e.shape.activity.activity&&"Activity"===e.shape.shape&&"None"===e.shape.activity.subProcess.loop&&(e.wrapper.children[0].children[0].children[3].visible=!1))},e.prototype.updateBPMNSubProcessCollapsed=function(e,t,i,n,r,o,a){var s=e.shape.activity.subProcess.events.length,l=e.wrapper.children[0].children[0],c="Transaction"===e.shape.activity.subProcess.type?3:1;!1===i.collapsed?(this.updateElementVisibility(e,!0,a),l.children[c+s].visible=!1):(this.updateElementVisibility(e,!1,a),l.children[c+s].visible=!0),this.updateChildMargin(l,r,o,n,3+s)},e.prototype.updateBPMNSubProcessCompensation=function(e,t,i,n,r,o){var a=e.wrapper.children[0].children[0],s="Transaction"===e.shape.activity.subProcess.type?2:0;!1===i.compensation?a.children[4+s].visible=!1:a.children[4+s].visible=!0,this.updateChildMargin(a,r,o,n,4+s)},e.prototype.updateBPMNSubProcessLoop=function(e,t,i,n,r,o){this.updateBPMNActivityTaskLoop(e,e,n,r,o,1)},e.prototype.updateBPMNConnector=function(e,t,i,n){var r=i.shape;return void 0!==r.sequence&&(e=this.getSequence(e,t,i,n)),void 0!==r.association&&(e=this.getAssociation(e,t,i,n)),void 0!==r.message&&(e=this.getMessage(e,t,i,n)),e},e.prototype.getSequence=function(e,t,i,n){if("Normal"===i.shape.sequence&&(n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}}}),e.wrapper.children[3].visible=!1),"Default"===i.shape.sequence){n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}});var r=new yn,o=(new yn,void 0);r=e.getSegmentElement(e,r);for(var a=e.intermediatePoints,s=0;s<a.length-1;s++)length+=e.distance(a[s],a[s+1]),o=e.findPath(a[s],a[s+1]);e.wrapper.children[3].data=o[0],e.wrapper.children[3].id=e.id+"_"+i.shape.sequence,e.wrapper.children[3].offsetX=o[1].x,e.wrapper.children[3].offsetY=o[1].y,e.wrapper.children[3].rotateAngle=45,e.wrapper.children[3].transform=zi.Self}return"Conditional"===i.shape.sequence&&(n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),e.wrapper.children[3].visible=!1),e},e.prototype.getAssociation=function(e,t,i,n){return"Default"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"Directional"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"BiDirectional"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Arrow",width:5,height:10,style:{fill:"white"}}}),e},e.prototype.getMessage=function(e,t,i,n){var r,o;if("Default"===t.shape.message){if(void 0!==i.shape.message){if("InitiatingMessage"===i.shape.message||"NonInitiatingMessage"===i.shape.message){var a=new yn;a=e.getSegmentElement(e,a);for(var s=e.intermediatePoints,l=0;l<s.length-1;l++){length+=e.distance(s[l],s[l+1]);var c=.5*length;length>=c&&(r=or(s[l],s[l+1]),o=ni.transform(s[l],r,c))}}e.wrapper.children[3].id=e.id+"_"+i.shape.message,e.wrapper.children[3].width=25,e.wrapper.children[3].height=15,e.wrapper.children[3].data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.wrapper.children[3].horizontalAlignment="Center",e.wrapper.children[3].verticalAlignment="Center",e.wrapper.children[3].transform=zi.Self,e.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white",e.wrapper.children[3].offsetX=o.x,e.wrapper.children[3].offsetY=o.y}}else"NonInitiatingMessage"===t.shape.message&&"InitiatingMessage"===t.shape.message||("Default"!==i.shape.message?e.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white":e.wrapper.children[3].visible=!1);return e},e.prototype.setSizeForBPMNEvents=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n;var r=t.children[1];r.width=.85*i,r.height=.85*n;var o=t.children[2];"Message"===e.trigger?(o.width=.54*i,o.height=.4*n):(o.width=.5*i,o.height=.5*n)},e.prototype.updateAnnotationDrag=function(e,t,i,n){var r=e.id.split("_");if("textannotation"===r[1])for(var o=void 0,a=0;a<e.inEdges.length;a++){var s=t.nameTable[e.inEdges[a]];s&&(o=t.nameTable[s.sourceID]);var l={x:e.offsetX+i,y:e.offsetY+n},c=s.sourcePoint,h=ni.findLength(l,c),d=ni.findAngle(c,l);if(o.shape.annotations)for(var p=0;p<o.shape.annotations.length;p++)if(o.shape.annotations[p].id===r[r.length-1])return o.shape.annotations[p].length=h,o.shape.annotations[p].angle=d,this.setAnnotationPath(o.wrapper.bounds,e.wrapper,l,e),!1}return!!e.processId&&(this.drag(e,i,n,t),!0)},e.prototype.getAnnotationPathAngle=function(e,t){var i=0;switch(br(e,t,t)){case"Right":i=0;break;case"Left":i=180;break;case"Bottom":i=90;break;case"Top":i=270}return i},e.prototype.setSizeForBPMNGateway=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n,t.children[1].width=.45*i,t.children[1].height=.45*n},e.prototype.setSizeForBPMNDataObjects=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n},e.prototype.setSizeForBPMNActivity=function(e,t,i,n,r){t.children[0].width=i,t.children[0].height=n,t.children[0].children[0].width=i,t.children[0].children[0].height=n,"Transaction"===e.subProcess.type&&(t.children[0].children[1].width=Math.max(i-6,1),t.children[0].children[1].height=Math.max(n-6,1),t.children[0].children[2].width=i,t.children[0].children[2].height=n);var o,a,s=new sn,l=this.getSize(r,s),c=12*(a="Task"===e.activity?this.getTaskChildCount(r):this.getSubprocessChildCount(r)),h=(i||l.width)/2;o=1===a?h-6:h-c/2-4*(a-1)/2;for(var d=0;d<t.children[0].children.length;d++)t.children[0].children[d].visible&&(t.children[0].children[d].id.indexOf("_loop")>-1||t.children[0].children[d].id.indexOf("_0_compensation")>-1||t.children[0].children[d].id.indexOf("_0_adhoc")>-1||t.children[0].children[d].id.indexOf("_0_collapsed")>-1)&&(t.children[0].children[d].margin.left=o,o+=t.children[0].children[d].actualSize.width+4)},e.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof cn)for(var i=0;i<e.children.length;i++)this.updateDiagramContainerVisibility(e.children[i],t);e.visible=t},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bpmn"},e}();function Zp(e){return eu[e.toString()]}function Qp(e){return tu[e.toString()]}function Kp(e){return iu[e.toString()]}function $p(e){return nu[e.toString()]}function Jp(e){return ru[e.toString()]}var eu={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},tu={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},iu={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},nu={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M 45.7256 3.16055 L 25 23.4017 L 4.27442 3.16055 H 45.7256 Z M 47.8963 46.8413 H 2.10375 V 4.80813 L 25 27.1709 L 47.8963 4.80813 V 46.8413 Z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M 13.183 15.325 h 2.911 c 0.105 0 0.207 -0.043 0.281 -0.117 c 0.078 -0.074 0.117 -0.176 0.117 -0.281c 0 -0.753 0.718 -1.362 1.596 -1.362 h 2.579 c -0.117 0.227 -0.191 0.48 -0.195 0.757 c 0 0.433 0.168 0.851 0.46 1.144 c 0.008 0.004 0.015 0.011 0.019 0.015 c -0.289 0.285 -0.475 0.691 -0.479 1.148 c 0 0.433 0.168 0.846 0.46 1.139 c 0.011 0.012 0.023 0.02 0.035 0.032 c -0.301 0.281 -0.491 0.694 -0.495 1.155 c 0 0.432 0.168 0.847 0.46 1.143c 0.265 0.266 0.612 0.414 0.975 0.414 h 0.839 c 0.027 0.004 0.051 0.012 0.074 0.012 h 8.443 c 0.352 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.285 0.753 -0.636 0.753 h -6.687 c -0.019 0 -0.035 -0.008 -0.051 -0.008h -2.27 c -0.121 -0.835 -0.667 -1.187 -1.795 -1.187 h -2.158 c -0.223 0 -0.402 0.18 -0.402 0.403c 0 0.219 0.179 0.398 0.402 0.398 h 2.158 c 0.972 0 1.019 0.203 1.019 0.784 c 0 0.219 0.179 0.399 0.402 0.399 c 0.008 0 0.016 -0.004 0.027 -0.004 c 0.028 0.004 0.055 0.016 0.082 0.016 h 2.56 c 0.34 0.015 0.616 0.343 0.616 0.752c 0 0.418 -0.285 0.757 -0.636 0.761 h -0.004 h -6.442 c -0.878 0 -1.595 -0.639 -1.595 -1.427 v -0.683 c 0 -0.109 -0.043 -0.211 -0.114 -0.285 c -0.078 -0.074 -0.179 -0.117 -0.285 -0.117 h -0.004 l -2.989 0.027 c -0.223 0 -0.398 0.184 -0.398 0.402 c 0 0.219 0.179 0.395 0.398 0.395 h 0.004 l 2.591 -0.02 v 0.282 c 0 1.229 1.073 2.223 2.391 2.223 h 3.895 c 0.004 0 0.007 0.004 0.011 0.004 h 2.536 c 0.792 0 1.436 -0.698 1.436 -1.561 c 0 -0.273 -0.07 -0.53 -0.188 -0.752 h 5.49 c 0.792 0 1.436 -0.695 1.436 -1.553 c 0 -0.858 -0.644 -1.557 -1.436 -1.557h -3.566 c 0.121 -0.226 0.199 -0.487 0.199 -0.768 c 0 -0.468 -0.195 -0.882 -0.495 -1.167c 0.301 -0.285 0.495 -0.698 0.495 -1.163 c 0 -0.456 -0.191 -0.866 -0.483 -1.152 c 0.293 -0.285 0.483 -0.694 0.483 -1.151c 0 -0.858 -0.647 -1.557 -1.439 -1.557 h -8.373 c -1.167 0 -2.142 0.757 -2.352 1.76 l -2.548 -0.004 c -0.219 0 -0.399 0.18 -0.399 0.403 C 12.784 15.145 12.964 15.325 13.183 15.325 L 13.183 15.325 Z M 21.907 19.707 c -0.191 0 -0.328 -0.094 -0.41 -0.176 c -0.144 -0.145 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.418 0.289 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.008 h 0.051 c 0.351 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.286 0.753 -0.636 0.753 H 21.907 Z M 27.097 16.629 c 0 0.414 -0.286 0.753 -0.64 0.753 h -4.464 c -0.004 0 -0.004 0 -0.004 0 h -0.082c -0.191 0 -0.328 -0.098 -0.414 -0.18 c -0.14 -0.145 -0.222 -0.352 -0.222 -0.573 c 0 -0.413 0.285 -0.749 0.631 -0.753h 3.434 c 0 0 0 0 0.004 0 h 1.116 c 0.008 0 0.012 -0.004 0.02 -0.004 C 26.819 15.887 27.097 16.215 27.097 16.629L 27.097 16.629 Z M 27.097 14.322 c 0 0.41 -0.278 0.737 -0.62 0.749 c -0.008 0 -0.012 0 -0.016 0 h -3.637 c -0.008 0 -0.015 0.004 -0.023 0.004 h -0.886 c -0.004 0 -0.008 0 -0.012 0 c -0.187 0 -0.324 -0.094 -0.406 -0.176c -0.144 -0.144 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.414 0.293 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.004 h 0.051 C 26.811 13.565 27.097 13.905 27.097 14.322 L 27.097 14.322 Z M 27.097 14.322",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M 21.762 21.935 c 2.584 0 4.687 -2.561 4.687 -5.703 c 0 -3.147 -2.103 -5.703 -4.687 -5.703 c -1.279 0 -2.475 0.61-3.363 1.721 c -0.855 1.071 -1.327 2.484 -1.324 3.983 C 17.075 19.374 19.178 21.935 21.762 21.935 L 21.762 21.935 ZM 21.762 11.779 c 1.894 0 3.436 1.995 3.436 4.452 c 0 2.453 -1.541 4.452 -3.436 4.452 c -1.895 0 -3.44 -1.999 -3.44 -4.452C 18.323 13.774 19.864 11.779 21.762 11.779 L 21.762 11.779 Z M 25.699 21.309 c -0.348 0 -0.626 0.277 -0.626 0.626 c 0 0.344 0.277 0.622 0.626 0.622 c 2.136 0 3.875 1.74 3.875 3.879 c 0 0.272 -0.227 0.498 -0.501 0.498 H 14.447 c -0.274 0 -0.497 -0.223 -0.497 -0.498 c 0 -2.139 1.736 -3.879 3.872 -3.879 c 0.344 0 0.625 -0.277 0.625 -0.622 c 0 -0.348 -0.28 -0.626-0.625 -0.626 c -2.826 0 -5.124 2.297 -5.124 5.126 c 0 0.965 0.784 1.749 1.748 1.749 h 14.626 c 0.964 0 1.748 -0.7841.748 -1.749 C 30.822 23.606 28.524 21.309 25.699 21.309 L 25.699 21.309 Z M 22.217 9.832 c 0.448 -0.263 0.924 -0.396 1.419 -0.396 c 1.895 0 3.436 1.995 3.436 4.452 c 0 0.439 -0.048 0.873 -0.143 1.284 c -0.08 0.336 0.128 0.672 0.464 0.751 c 0.048 0.012 0.098 0.019 0.143 0.019 c 0.284 0 0.541 -0.195 0.608 -0.483 c 0.119 -0.506 0.18 -1.034 0.18 -1.571c 0 -3.147 -2.102 -5.703 -4.687 -5.703 c -0.711 0 -1.419 0.198 -2.054 0.573 c -0.296 0.174 -0.397 0.559 -0.219 0.855C 21.536 9.911 21.921 10.009 22.217 9.832 L 22.217 9.832 Z M 27.697 18.81 c -0.345 0 -0.626 0.277 -0.626 0.622 c 0 0.348 0.281 0.626 0.626 0.626 c 2.137 0 3.75 1.782 3.75 3.918 c 0 0.07 -0.013 0.141 -0.043 0.205 c -0.14 0.314 0.0030.684 0.318 0.823 c 0.082 0.037 0.167 0.055 0.253 0.055 c 0.241 0 0.466 -0.141 0.57 -0.373 c 0.101 -0.226 0.153 -0.464 0.153-0.714 C 32.699 21.15 30.523 18.81 27.697 18.81 L 27.697 18.81 Z M 27.697 18.81",Script:"M 22.453 15.04 c 0 0 -1.194 -3.741 2.548 -3.774 c 0 0 2.497 0.126 1.766 4.321 c -0.008 0.043 -0.015 0.086 -0.024 0.13c -0.806 4.323 -2.516 8.42 -3.193 10.581 h 3.904 c 0 0 0.983 4.581 -2.549 4.968 H 13.292 c 0 0 -3.097 -1.42 -1.517 -5.323 l 3 -10.839 H 11.84 c 0 0 -1.129 -2.902 1.709 -3.806 l 11.425 -0.032 l -0.73 0.355 l -1.193 1.726 L 22.453 15.04 Z M 22.409 12.597 c 0 0 -0.242 0.483 -0.278 0.98 h -9.098 c 0 0 -0.06 -0.871 0.714 -1.041 L 22.409 12.597 Z M 26.341 27.734c 0 0 -0.13 2.678 -2.226 1.871 c 0 0 -0.823 -0.565 -0.758 -1.855 L 26.341 27.734 Z M 22.905 15.008 c 0 0 0.653 -0.258 0.709-1.501 c 0 0 0.145 -1.144 1.483 -0.693 c 0 0 0.808 0.355 0.259 2.404 c 0 0 -2.226 8.5 -3.032 10.339 c 0 0 -1.064 2.646 0.096 4.226 h -8.581 c 0 0 -1.806 -0.452 -0.741 -3.613 c 0 0 2.935 -9.549 3.193 -11.162 L 22.905 15.008 Z"},ru={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},ou=function(){function e(){}return e.prototype.updateBridging=function(e,t){var i,n=[];if(e.bridges=[],function(e,t){return e.constraints&Li.Bridging?e.constraints&Li.Bridging:e.constraints&Li.InheritBridging?t.constraints&Ni.Bridging:0}(e,t)){var r=this.getPoints(e);i=mi.toBounds(r);for(var o=e.bridgeSpace,a=t.bridgeDirection,s=-1,l=t.connectors,c=0;c<l.length;c++){var h=l[c];if(e&&h&&e.id!==h.id){var d=this.getPoints(h),p=mi.toBounds(d);if(this.intersectsRect(i,p)){var u=this.intersect(r,d,!1,a,!0);if(u.length>0)for(var f=0;f<u.length;f++){var g=0,m=0,y=0,v=0,b=this.getLengthAtFractionPoint(e,u[f]);if(-1!==b.pointIndex){m=b.lengthFractionIndex,g=b.fullLength,y=b.segmentIndex,v=b.pointIndex;var w=this.getPointAtLength(m-o/2,r),x=this.getPointAtLength(m+o/2,r);(m+o/2)/g,this.isEmptyPoint(x)&&(x=w);var S,C=void 0;S=e.sourcePoint,C="Straight"===e.type?e.targetPoint:e.intermediatePoints[v];var P=this.angleCalculation(S,C);if(n.length){var E;E=e.sourcePoint;var O=Math.abs(this.lengthCalculation(E,x)),M=-1;s=-1;for(var T=0;T<n[y].bridges.length;T++){s++;var A=n[y].bridges[T];if(O<Math.abs(this.lengthCalculation(E,A.endPoint))){M=s;break}}if(M>=0){var L=void 0;(L=this.createSegment(w,x,P,a,v,e,t)).target=h.id,n[y].bridges.splice(M,0,L),n[y].bridges.join(),n[y].bridgeStartPoint.splice(M,0,w),n[y].bridgeStartPoint.join(),n[y].segmentIndex=y}else{L=void 0;(L=this.createSegment(w,x,P,a,v,e,t)).target=h.id,n[y].bridges.push(L),n[y].bridgeStartPoint.push(w),n[y].segmentIndex=y}}else if(!isNaN(w.x)&&!isNaN(w.y)&&!this.isEmptyPoint(x)){var D=void 0,k={bridges:[],bridgeStartPoint:[],segmentIndex:y};(D=this.createSegment(w,x,P,a,v,e,t)).target=h.id;var I=[];I.push(w),[].push(x),n[y]=k,n[y].bridges.push(D),n[y].bridgeStartPoint=I,n[y].segmentIndex=y}}}}}}0!==n.length&&this.firstBridge(n,e,o)}},e.prototype.firstBridge=function(e,t,i){for(var n=0;n<e.length;n++){for(var r=e[n],o=1;o<r.bridges.length;o++)if(ni.findLength(r.bridges[o].endPoint,r.bridges[o-1].endPoint)<i){r.bridges[o-1].endPoint=r.bridges[o].endPoint;var a=r.bridges[o-1],s=this.createBridgeSegment(a.startPoint,a.endPoint,a.angle,i,a.sweep);r.bridges[o-1].path=s,r.bridges.splice(o,1),r.bridgeStartPoint.splice(o,1),o--}t.sourcePoint;for(var l=0;l<r.bridges.length;l++){(a=r.bridges[l]).endPoint,t.bridges.push(a)}}},e.prototype.createSegment=function(e,t,i,n,r,o,a){var s,l,c={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1};return l=this.sweepDirection(i,n,o,a),s=this.createBridgeSegment(e,t,i,o.bridgeSpace,l),c.path=s,c.startPoint=e,c.endPoint=t,c.angle=i,c.segmentPointIndex=r,c.sweep=l,c},e.prototype.createBridgeSegment=function(e,t,i,n,r){return"A "+n/2+" "+n/2+" "+i+" , 1 "+r+" "+t.x+","+t.y},e.prototype.sweepDirection=function(e,t,i,n){var r,o=Math.abs(e);switch(t){case"Top":case"Bottom":r=1,o>=0&&o<=90&&(r=0);break;case"Left":case"Right":r=1,e<0&&e>=-180&&(r=0)}return"Right"!==t&&"Bottom"!==t||(r=0===r?1:0),r},e.prototype.getPointAtLength=function(e,t){for(var i,n=0,r={x:0,y:0},o=0;o<t.length;o++){var a=t[o];if(i){var s=this.lengthCalculation(i,a);if(n+s>e){var l=e-n,c=ni.findAngle(i,a),h=l*Math.cos(c*Math.PI/180),d=l*Math.sin(c*Math.PI/180);r={x:i.x+h,y:i.y+d};break}n+=s,i=a}else i=a}return r},e.prototype.getPoints=function(e){var t=[];if(e.intermediatePoints&&("Straight"===e.type||"Orthogonal"===e.type))for(var i=0;i<e.intermediatePoints.length;i++)t.push(e.intermediatePoints[i]);return t},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.intersect=function(e,t,i,n,r){i&&t.length>=2&&(t.splice(0,1),t.splice(0,1));for(var o=[],a=0;a<e.length-1;a++){var s=this.inter1(e[a],e[a+1],t,r,n);if(s.length>0)for(var l=0;l<s.length;l++)o.push(s[l]);i&&t.length>=1&&t.splice(0,1)}return o},e.prototype.inter1=function(e,t,i,n,r){for(var o=[],a=0;a<i.length-1;a++){var s=sl(e,t,i[a],i[a+1]);if(!this.isEmptyPoint(s)){var l=this.angleCalculation(e,t),c=this.angleCalculation(i[a],i[a+1]);switch(l=this.checkForHorizontalLine(l),c=this.checkForHorizontalLine(c),r){case"Left":case"Right":l>c&&o.push(s);break;case"Top":case"Bottom":l<c&&o.push(s)}l===c&&n&&o.push(s)}}return o},e.prototype.checkForHorizontalLine=function(e){var t=Math.abs(e);return t>90?180-t:t},e.prototype.isEmptyPoint=function(e){return 0===e.x&&0===e.y},e.prototype.getLengthAtFractionPoint=function(e,t){for(var i=100,n=-1,r=0,o=-1,a=0,s=0,l=e.sourcePoint,c=l,h=[],d=0;d<e.intermediatePoints.length;d++){var p=e.intermediatePoints[d];h.push(p)}for(var u=0;u<h.length;u++){var f=h[u],g=this.getSlope(f,l,t,e);g<i&&(i=g,s=r+this.lengthCalculation(t,c),o=a,n=u),r+=ni.findLength(f,l),l=f,c=f}return a++,{lengthFractionIndex:s,fullLength:r,segmentIndex:o,pointIndex:n}},e.prototype.getSlope=function(e,t,i,n){var r=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),a=(i.y-e.y)/(t.y-e.y),s=(i.x-e.x)/(t.x-e.x);if(!isFinite(a)||!isFinite(s)||isNaN(a)||isNaN(s)){if(e.x===t.x){if(e.y===t.y)return 1e4;if(e.y>i.y&&i.y>t.y||e.y<i.y&&i.y<t.y)return Math.abs(e.x-i.x)}else if(e.y===t.y&&(e.x>i.x&&i.x>t.x||e.x<i.x&&i.x<t.x))return Math.abs(e.y-i.y)}else if((e.x>=i.x&&i.x>=t.x||e.x<=i.x&&i.x<=t.x||r<3)&&(e.y>=i.y&&i.y>=t.y||e.y<=i.y&&i.y<=t.y||o<3))return Math.abs(a-s);return 1e4},e.prototype.angleCalculation=function(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)*(180/Math.PI)},e.prototype.lengthCalculation=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bridging"},e}(),au=function(){function e(e){this.line=[],this.diagram=e}return e.prototype.canSnap=function(){return 0!==(this.diagram.snapSettings.constraints&(Ti.SnapToObject|Ti.SnapToLines))},e.prototype.snapPoint=function(e,t,i,n,r,o,a){var s=this.diagram.snapSettings,l={x:0,y:0},c=Eh(t.wrapper),h={snapped:!1,offset:0},d={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&Ti.SnapToObject){var p=void 0;(p=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),p.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(p),this.snapObject(e,t,p,h,d,r,o===a)}var u=c.x+r.x,f=c.y+r.y,g=c.x+c.width+r.x,m=c.y+c.height+r.y,y=s.verticalGridlines.scaledIntervals,v=this.round(g,y,1),b=this.round(u,y,1);y=s.horizontalGridlines.scaledIntervals;var w=this.round(f,y,1),x=this.round(m,y,1),S=c.x+c.width,C=c.y+c.height;return h.snapped?this.diagram.snapSettings.constraints&Ti.SnapToObject?l.x=h.offset:l.x=a.x-o.x:this.diagram.snapSettings.constraints&Ti.SnapToVerticalLines?Math.abs(r.x)>=1&&(i?Math.abs(v-S)>Math.abs(b-c.x)?l.x+=b-c.x:l.x+=v-S:Math.abs(v-S)<Math.abs(b-c.x)?l.x+=v-S:l.x+=b-c.x):l.x=a.x-o.x,d.snapped?l.y=d.offset:this.diagram.snapSettings.constraints&Ti.SnapToHorizontalLines?Math.abs(r.y)>=1&&(n?Math.abs(x-C)>Math.abs(w-c.y)?l.y+=w-c.y:l.y+=x-C:Math.abs(x-C)<Math.abs(w-c.y)?l.y+=x-C:l.y+=w-c.y):l.y=a.y-o.y,l},e.prototype.round=function(e,t,i){i=i>1?Math.pow(2,Math.floor(Math.log(i)/Math.log(2))):Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)));var n=0,r=0;for(r=0;r<t.length;r++)n+=t[r];var o=e%(n/=i),a=Math.floor(Math.abs(e)/n)*n;if(a!==e)if(e>=0)for(r=0;r<t.length;r++){if(o<=t[r]/i)return a+(o<t[r]/(2*i)?0:t[r]/i);a+=t[r]/i,o-=t[r]/i}else for(a*=-1,r=t.length-1;r>=0;r--){if(Math.abs(o)<=t[r]/i)return a-(Math.abs(o)<t[r]/(2*i)?0:t[r]/i);a-=t[r]/i,o+=t[r]/i}return e},e.prototype.snapObject=function(e,t,i,n,r,o,a){var s,l,c,h=null,d=this.diagram.scroller,p=this.diagram.snapSettings,u=[],f=[],g=[],m=[],y=Eh(t.wrapper),v=e.scroller.currentZoom,b=-d.horizontalOffset,w=-d.verticalOffset,x=p.snapObjectDistance/v,S=new mi(0,0,d.viewPortWidth,d.viewPortHeight),C=new mi(b/v,y.y-x-5,S.width/v,y.height+2*x+10),P=new mi(y.x-x-5,w/v,y.width+2*x+10,S.height/v);S=new mi(b/v,w/v,S.width/v,S.height/v);var E,O,M,T=this.findNodes(e.spatialSearch,t,P,S),A=e.nameTable;for(E=0;E<T.length;E++)O=T[E],this.canBeTarget(e,O)&&(this.diagram.nameTable[O.id]instanceof na||!this.canConsider(A,t,O)||((M=O.bounds).height+M.y<o.y+y.y?g.push({obj:O,distance:Math.abs(y.y+o.y-M.y-M.height)}):M.y>y.y+o.y+y.height&&m.push({obj:O,distance:Math.abs(y.y+o.y+y.height-M.y)}),(null==h||h>Math.abs(M.y-y.y-o.y))&&(Math.abs(M.x+M.width/2-(y.x+y.width/2+o.x))<=x?(l=this.createSnapObject(M,y,"centerX"),h=Math.abs(M.y-y.y)):Math.abs(M.x+M.width-(y.x+y.width+o.x))<=x?(l=this.createSnapObject(M,y,"right"),h=Math.abs(M.y-y.y)):Math.abs(M.x-(y.x+o.x))<=x?(l=this.createSnapObject(M,y,"left"),h=Math.abs(M.y-y.y)):Math.abs(M.x-(y.x+y.width+o.x))<=x?(l=this.createSnapObject(M,y,"rightLeft"),h=Math.abs(M.y-y.y)):Math.abs(M.x+M.width-(y.x+o.x))<=x&&(l=this.createSnapObject(M,y,"leftRight"),h=Math.abs(M.y-y.y)))));T=this.findNodes(e.spatialSearch,t,C,S);for(var L=0;L<T.length;L++)O=T[L],this.canBeTarget(e,O)&&(this.diagram.nameTable[O.id]instanceof na||!this.canConsider(A,t,O)||((M=O.bounds).x+M.width<y.x+o.x&&(u[u.length]={obj:O,distance:Math.abs(y.x+o.x-M.x-M.width)}),M.x>y.x+o.x+y.width&&(f[f.length]={obj:O,distance:Math.abs(y.x+o.x+y.width-M.x)}),(null==s||s>Math.abs(M.x-y.x-o.x))&&(Math.abs(M.y+M.height/2-(y.y+y.height/2+o.y))<=x?(c=this.createSnapObject(M,y,"centerY"),s=Math.abs(M.x-y.x)):Math.abs(M.y-y.y-o.y)<=x?(c=this.createSnapObject(M,y,"top"),s=Math.abs(M.x-y.x)):Math.abs(M.y+M.height-(y.y+y.height+o.y))<=x?(c=this.createSnapObject(M,y,"bottom"),s=Math.abs(M.x-y.x)):Math.abs(M.y+M.height-y.y-o.y)<=x?(c=this.createSnapObject(M,y,"topBottom"),s=Math.abs(M.x-y.x)):Math.abs(M.y-(y.y+y.height+o.y))<=x&&(c=this.createSnapObject(M,y,"bottomTop"),s=Math.abs(M.x-y.x)))));this.createGuidelines(e,l,c,i,n,r,a),n.snapped||this.createHSpacingLines(e,i,t,u,f,n,r,a,o,x),r.snapped||this.createVSpacingLines(e,i,t,g,m,n,r,a,o,x)},e.prototype.snapConnectorEnd=function(e){var t=this.diagram.snapSettings;return t.constraints&Ti.SnapToLines&&(e.x=this.round(e.x,t.verticalGridlines.scaledIntervals,1),e.y=this.round(e.y,t.horizontalGridlines.scaledIntervals,1)),e},e.prototype.canBeTarget=function(e,t){return t=this.diagram.nameTable[t.id],!wd(this.diagram,t,!1)},e.prototype.snapSize=function(e,t,i,n,r,o,a,s){var l,c,h,d,p=this.diagram.snapSettings,u=this.diagram.scroller,f=Eh(a.wrapper),g=e.nameTable,m=[],y=[],v=e.scroller.currentZoom,b=-u.horizontalOffset,w=-u.verticalOffset,x=p.snapObjectDistance/v,S=new mi(0,0,u.viewPortWidth,u.viewPortHeight),C=new mi(b/v,(f.y-5)/v,S.width/v,(f.height+10)/v),P=new mi((f.x-5)/v,w/v,(f.width+10)/v,S.height/v);S=new mi(b/v,w/v,S.width/v,S.height/v);var E,O,M,T=[],A=this.findNodes(e.spatialSearch,a,P,S,T);for(E=0;E<A.length;E++)O=A[E],!this.canConsider(g,a,O)||this.diagram.nameTable[O.id]instanceof na||(M=O.bounds,(null==l||l>Math.abs(M.y-f.y))&&(t.left?Math.abs(f.x+r-M.x)<=x?(h=this.createSnapObject(M,f,"left"),l=Math.abs(M.y-f.y)):Math.abs(f.x+r-M.x-M.width)<=x&&(h=this.createSnapObject(M,f,"leftRight"),l=Math.abs(M.y-f.y)):t.right&&(Math.abs(f.x+r+f.width-M.x-M.width)<=x?(h=this.createSnapObject(M,f,"right"),l=Math.abs(M.y-f.y)):Math.abs(f.x+r+f.width-M.x)<=x&&(h=this.createSnapObject(M,f,"rightLeft"),l=Math.abs(M.y-f.y)))));A=this.findNodes(e.spatialSearch,a,C,S);for(var L=0;L<A.length;L++){var D=A[L];if(this.canConsider(g,a,D)&&!(this.diagram.nameTable[D.id]instanceof na)){var k=D.bounds;(null==c||c>Math.abs(k.x-f.x))&&(i.top?Math.abs(f.y+o-k.y)<=x?(d=this.createSnapObject(k,f,"top"),c=Math.abs(k.x-f.x)):Math.abs(f.y+o-k.y-k.height)<=x&&(d=this.createSnapObject(k,f,"topBottom"),c=Math.abs(k.x-f.x)):i.bottom&&(Math.abs(f.y+f.height+o-k.y-k.height)<=x?(d=this.createSnapObject(k,f,"bottom"),c=Math.abs(k.x-f.x)):Math.abs(f.y+f.height+o-k.y)<=x&&(d=this.createSnapObject(k,f,"bottomTop"),c=Math.abs(k.x-f.x))))}}for(E=0;E<T.length;E++)if(O=T[E],this.canConsider(g,a,O)){var I=O.bounds,R=t.left?-r:r,N=Math.abs(f.width+R-I.width),j=void 0;N<=x&&(j=t.left?-I.width+f.width:I.width-f.width,m[m.length]={source:O,difference:N,offset:j}),R=i.top?-o:o;var z=Math.abs(f.height+R-I.height);z<=x&&(j=i.top?-I.height+f.height:I.height-f.height,y[y.length]={source:O,difference:z,offset:j})}if(!e.getTool)this.createGuidelines(e,h,d,n,t,i,s);!t.snapped&&m.length>0&&(t.left||t.right)&&this.addSameWidthLines(e,n,m,t,s,a),!i.snapped&&y.length>0&&(i.top||i.bottom)&&this.addSameHeightLines(e,n,y,i,s,a)},e.prototype.snapTop=function(e,t,i,n,r,o,a,s){var l,c=r;t.top=!0,e.left=e.right=!1;if(this.diagram.snapSettings.constraints&Ti.SnapToObject&&!o.rotateAngle&&(l=s.y-s.height*o.pivot.y+r-(o.offsetY-o.height*o.pivot.y),this.snapSize(this.diagram,e,t,i,n,l,this.diagram.selectedItems,a)),t.snapped)c=r-l+t.offset;else if(this.diagram.snapSettings.constraints&Ti.SnapToHorizontalLines){var h=s.y-s.height*o.pivot.y,d=h+r;c=this.round(d,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,1)-h}return c},e.prototype.snapRight=function(e,t,i,n,r,o,a,s){var l,c=n;e.right=!0,t.top=t.bottom=!1;if(this.diagram.snapSettings.constraints&Ti.SnapToObject&&!o.rotateAngle&&(l=s.x+s.width*(1-o.pivot.x)+n-(o.offsetX+o.width*(1-o.pivot.x)),this.snapSize(this.diagram,e,t,i,l,r,this.diagram.selectedItems,a)),e.snapped)c=n-l+e.offset;else if(this.diagram.snapSettings.constraints&Ti.SnapToVerticalLines){var h=s.x+s.width*(1-o.pivot.x),d=h+n;c=this.round(d,this.diagram.snapSettings.verticalGridlines.scaledIntervals,1)-h}return c},e.prototype.snapLeft=function(e,t,i,n,r,o,a,s){var l=n,c=0;e.left=!0,t.top=t.bottom=!1;if(this.diagram.snapSettings.constraints&Ti.SnapToObject&&!o.rotateAngle&&(c=s.x-s.width*o.pivot.x+n-(o.offsetX-o.width*o.pivot.x),this.snapSize(this.diagram,e,t,i,c,r,this.diagram.selectedItems,a)),e.snapped)l=n-c+e.offset;else if(this.diagram.snapSettings.constraints&Ti.SnapToVerticalLines){var h=s.x-s.width*o.pivot.x,d=h+n;l=this.round(d,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,1)-h}return l},e.prototype.snapBottom=function(e,t,i,n,r,o,a,s){var l=r;t.bottom=!0,e.left=e.right=!1;var c=0;if(this.diagram.snapSettings.constraints&Ti.SnapToObject&&!o.rotateAngle&&(c=s.y+s.height*(1-o.pivot.y)+r-(o.offsetY+o.height*(1-o.pivot.y)),this.snapSize(this.diagram,e,t,i,n,c,this.diagram.selectedItems,a)),Eh(o instanceof dn||o instanceof No?o:o.wrapper),t.snapped)l=r-c+t.offset;else if(this.diagram.snapSettings.constraints&Ti.SnapToHorizontalLines){var h=s.y+s.height*(1-o.pivot.y),d=h+r;l=this.round(d,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,1)-h}return l},e.prototype.createGuidelines=function(e,t,i,n,r,o,a){return t&&(r.offset=t.offsetX,r.snapped=!0,a||(t.type,this.renderAlignmentLines(t.start,t.end,n,e.scroller.transform))),i&&(o.offset=i.offsetY,o.snapped=!0,a||(i.type,this.renderAlignmentLines(i.start,i.end,n,e.scroller.transform))),n},e.prototype.renderAlignmentLines=function(e,t,i,n){e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale},t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale};var r={stroke:"#07EDE1",strokeWidth:1,startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Ch()},o=0;for(this.line.push(r),o=0;o<this.line.length;o++)this.diagram.diagramRenderer.drawLine(i,this.line.pop())},e.prototype.createHSpacingLines=function(e,t,i,n,r,o,a,s,l,c){var h=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,f,g=[],m=Eh(i.wrapper);if(n.length>0&&(g[g.length]=n[0],h=(d=n[0].obj.bounds).y,n.length>1?(u=n[1].obj.bounds,f=d.x-u.x-u.width,Math.abs(f-n[0].distance)<=c?h=this.findEquallySpacedNodesAtLeft(n,f,h,g):f=n[0].distance):f=n[0].distance),this.sortByDistance(g,"distance"),g[g.length]={obj:i,distance:0},h=m.y<h||!h?m.y:h,r.length>0){var y=void 0;if(h=(p=r[0].obj.bounds).y<h?p.y:h,r.length>1&&(y=(u=r[1].obj.bounds).x-p.x-p.width),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=c){var v=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=v:f+=v,g[g.length]=r[0]}else 1===n.length&&(d=void 0,g.splice(0,1),g[g.length]=r[0],f=y);else f=y,g[g.length]=r[0];r.length>1&&p.x+p.width<u.x&&(h=this.findEquallySpacedNodesAtRight(r,y,h,g,c))}if(g.length>2){this.addHSpacingLines(e,t,g,s,h);var b=0;s&&(b=l.x),d?o.offset=f-Math.abs(m.x+b-d.x-d.width)+b:p&&(o.offset=Math.abs(m.x+m.width+b-p.x)-f+b),o.snapped=!0}},e.prototype.createVSpacingLines=function(e,t,i,n,r,o,a,s,l,c){var h=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,f,g,m=[],y=Eh(i.wrapper);if(n.length>0&&(m[m.length]=n[0],h=(d=n[0].obj.bounds).x+d.width,n.length>1?(u=n[1].obj.bounds,f=d.y-u.y-u.height,Math.abs(f-n[0].distance)<=c?h=this.findEquallySpacedNodesAtTop(n,f,h,m):f=n[0].distance):f=n[0].distance),this.sortByDistance(m,"distance"),m[m.length]={obj:i,distance:0},h=y.x+y.width>h||!h?y.x+y.width:h,r.length>0){if(h=(p=r[0].obj.bounds).x+p.width>h?p.x+p.width:h,r.length>1&&(g=(u=r[1].obj.bounds).y-p.y-p.height),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=c){var v=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=v:f+=v,m[m.length]=r[0]}else 1===n.length&&(d=void 0,m.splice(0,1),m[m.length]=r[0],f=g);else f=g,m[m.length]=r[0];r.length>1&&u.y>p.y+p.height&&(h=this.findEquallySpacedNodesAtBottom(r,g,h,m,c))}if(m.length>2){this.addVSpacingLines(e,t,m,s,h);var b=0;s&&(b=l.y),d?a.offset=f-Math.abs(y.y+b-d.y-d.height)+b:p&&(a.offset=Math.abs(y.y+y.height+b-p.y)-f+b),a.snapped=!0}},e.prototype.addHSpacingLines=function(e,t,i,n,r){var o,a,s;if(!n)for(o=0;o<i.length-1;o++){var l=i[o].obj instanceof Zc?Eh(i[o].obj.wrapper):i[o].obj.bounds,c=i[o+1].obj instanceof Zc?Eh(i[o+1].obj.wrapper):i[o+1].obj.bounds;a={x:l.x+l.width,y:r-15},s={x:c.x,y:r-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addVSpacingLines=function(e,t,i,n,r){var o,a;if(!n)for(var s=0;s<i.length-1;s++){var l=i[s].obj instanceof Zc?Eh(i[s].obj.wrapper):i[s].obj.bounds,c=i[s+1].obj instanceof Zc?Eh(i[s+1].obj.wrapper):i[s+1].obj.bounds;o={x:r+15,y:l.y+l.height},a={x:r+15,y:c.y},this.renderSpacingLines(o,a,t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addSameWidthLines=function(e,t,i,n,r,o){this.sortByDistance(i,"offset");var a,s,l,c=Eh(o.wrapper),h=i[0],d=h.source.bounds,p=[];for(p.push(i[0]),l=1;l<i.length;l++)i[l].source.bounds.width===d.width&&p.push(i[l]);if(!r)for(a={x:c.x+h.offset,y:c.y-15},s={x:c.x+c.width+h.offset,y:c.y-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform),l=0;l<p.length;l++)a={x:(c=p[l].source.bounds).x,y:c.y-15},s={x:c.x+c.width,y:c.y-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform);n.offset=h.offset,n.snapped=!0},e.prototype.addSameHeightLines=function(e,t,i,n,r,o){this.sortByDistance(i,"offset");var a,s,l,c=Eh(o.wrapper),h=i[0],d=h.source.bounds,p=[];for(p.push(i[0]),l=0;l<i.length;l++)i[l].source.bounds.height===d.height&&p.push(i[l]);if(!r)for(a={x:c.x+c.width+15,y:c.y+h.offset},s={x:c.x+c.width+15,y:c.y+h.offset+c.height},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform),l=0;l<p.length;l++)a={x:(c=p[l].source.bounds).x+c.width+15,y:c.y},s={x:c.x+c.width+15,y:c.y+c.height},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform);n.offset=h.offset,n.snapped=!0},e.prototype.renderSpacingLines=function(e,t,i,n,r){var o,a,s=new yn,l={};e={x:(e.x+r.tx)*r.scale,y:(e.y+r.ty)*r.scale},t={x:(t.x+r.tx)*r.scale,y:(t.y+r.ty)*r.scale},e.x===t.x?(o="M"+(e.x-5)+" "+(e.y+5)+"L"+e.x+" "+e.y+"L"+(e.x+5)+" "+(e.y+5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"z",a={startPoint:{x:e.x-8,y:e.y-1},endPoint:{x:e.x+8,y:e.y-1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Ch()},s.data=o,l.data=s.data,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=Ch(),this.diagram.diagramRenderer.drawPath(i,l),this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),a={startPoint:{x:t.x-8,y:t.y+1},endPoint:{x:t.x+8,y:t.y+1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())):(o="M"+(e.x+5)+" "+(e.y+5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x-5)+" "+(t.y+5)+"z",s.data=o,l.data=o,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=Ch(),this.diagram.diagramRenderer.drawPath(i,l),a={visible:!0,opacity:1,id:Ch(),startPoint:{x:e.x-1,y:e.y-8},endPoint:{x:e.x-1,y:e.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),a={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Ch(),startPoint:{x:t.x+1,y:t.y-8},endPoint:{x:t.x+1,y:t.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0"},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())),a={startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Ch()},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())},e.prototype.createSnapObject=function(e,t,i){var n;switch(i){case"left":n={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x,offsetY:0,type:"sideAlign"};break;case"right":n={type:"sideAlign",start:{x:e.x+e.width,y:Math.min(e.y,t.y)},offsetX:e.x+e.width-t.x-t.width,offsetY:0,end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)}};break;case"top":n={offsetY:e.y-t.y,offsetX:0,type:"sideAlign",start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y}};break;case"bottom":n={type:"sideAlign",offsetY:e.y+e.height-t.y-t.height,offsetX:0,end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},start:{x:Math.min(e.x,t.x),y:e.y+e.height}};break;case"topBottom":n={start:{x:Math.min(e.x,t.x),y:e.y+e.height},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},offsetY:e.y+e.height-t.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":n={start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y},offsetY:e.y-t.y-t.height,offsetX:0,type:"sideAlign"};break;case"leftRight":n={start:{x:e.x+e.width,y:Math.min(e.y,t.y)},end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width-t.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":n={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x-t.width,offsetY:0,type:"sideAlign"};break;case"centerX":n={start:{x:e.x+e.width/2,y:Math.min(e.y,t.y)},end:{x:e.x+e.width/2,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width/2-(t.x+t.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":n={start:{x:Math.min(e.x,t.x),y:e.y+e.height/2},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height/2},offsetY:e.y+e.height/2-(t.y+t.height/2),offsetX:0,type:"centerAlign"}}return n},e.prototype.snapAngle=function(e,t){var i=this.diagram.snapSettings.snapAngle,n=t%(i||0);return n>=i/2?t+i-n:t-n},e.prototype.canConsider=function(e,t,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},e.prototype.findNodes=function(e,t,i,n,r){for(var o,a,s=[],l=e.findQuads(r?n:i),c=0;c<l.length;c++){var h=l[c];if(h.objects.length>0)for(var d=0;d<h.objects.length;d++)o=h.objects[d],this.diagram.nameTable[o.id]instanceof na||!o.visible||"SwimLane"===this.diagram.nameTable[o.id].shape.type||this.diagram.nameTable[o.id].isLane||this.diagram.nameTable[o.id].isPhase||this.diagram.nameTable[o.id].isHeader||(a=Eh(o),-1===s.indexOf(o)&&this.intersectsRect(i,a)&&s.push(o),r&&r.indexOf(o)&&this.intersectsRect(n,a)&&r.push(o))}return s},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},e.prototype.removeGuidelines=function(e){var t=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");t&&t.parentNode.removeChild(t),i&&i.parentNode.removeChild(i)},e.prototype.sortByDistance=function(e,t,i){var n,r,o;if(i)for(n=0;n<e.length;n++)for(r=n+1;r<e.length;r++)e[n][t]>e[r][t]&&(o=e[n],e[n]=e[r],e[r]=o);else for(n=0;n<e.length;n++)for(r=n+1;r<e.length;r++)e[n][t]<e[r][t]&&(o=e[n],e[n]=e[r],e[r]=o)},e.prototype.findEquallySpacedNodesAtLeft=function(e,t,i,n){var r,o,a,s;for(s=1;s<e.length&&(r=e[s-1].obj.bounds,o=e[s].obj.bounds,a=r.x-o.x-o.width,Math.abs(a-t)<=1);s++)n[n.length]=e[s],o.y<i&&(i=o.y);return i},e.prototype.findEquallySpacedNodesAtRight=function(e,t,i,n,r){var o,a,s,l,c=e[0].distance;if(Math.abs(t-c)<=r)for(var h=0;h<e.length-1&&(o=e[h].obj,a=e[h+1].obj.bounds,s=o.bounds,l=a.x-s.x-s.width,Math.abs(l-t)<=1);h++)n[n.length]=e[h+1],s.y<i&&(i=s.y);return i},e.prototype.findEquallySpacedNodesAtTop=function(e,t,i,n){for(var r,o,a,s=1;s<e.length&&(r=e[s-1].obj.bounds,o=e[s].obj.bounds,a=r.y-o.y-o.height,Math.abs(a-t)<=1);s++)n[n.length]=e[s],o.x+o.width>i&&(i=o.x+o.width);return i},e.prototype.findEquallySpacedNodesAtBottom=function(e,t,i,n,r){var o,a,s,l,c=e[0].distance;if(Math.abs(t-c)<=r)for(var h=0;h<e.length-1&&(o=e[h].obj,a=e[h+1].obj.bounds,s=o.bounds,l=a.y-s.y-s.height,Math.abs(l-t)<=1);h++)n[n.length]=e[h+1],s.x+s.width>i&&(i=s.x+s.width);return i},e.prototype.getLayer=function(){var e;return this.diagram.snapSettings.constraints&Ti.SnapToObject&&((e=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),e.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(e)),e},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Snapping"},e}(),su=function(){function e(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}return e.prototype.initHistory=function(e){e.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:e.addHistoryEntry.bind(e),undo:Function,redo:Function,startGroupAction:e.startGroupAction.bind(e),endGroupAction:e.endGroupAction.bind(e),canLog:null,undoStack:[],redoStack:[],stackLimit:e.historyManager?e.historyManager.stackLimit:void 0}},e.prototype.addHistoryEntry=function(e,t){var i=null;if(t.historyManager.canLog&&!0===t.historyManager.canLog(e).cancel)return;if(t.historyManager&&t.historyManager.canUndo&&t.historyManager.currentEntry&&((i=t.historyManager.currentEntry).next?i.previous&&(i.next.previous=null,i.next=e,e.previous=i):(i.next=e,e.previous=i)),t.historyManager.currentEntry=e,t.historyManager.stackLimit){if("StartGroup"===e.type||"EndGroup"===e.type){var n="EndGroup"===e.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<t.historyManager.stackLimit?this.historyCount++:this.applyLimit(t.historyManager.currentEntry,t.historyManager.stackLimit,t))}this.getHistoryList(t),t.historyManager.canUndo=!0,t.historyManager.canRedo=!1},e.prototype.applyLimit=function(e,t,i,n){if(e&&e.previous){if("StartGroup"===e.type||"EndGroup"===e.type){var r="StartGroup"===e.type;this.setEntryLimit(r)}this.hasGroup||0!==this.groupCount||t--,0===t?(n&&this.limitHistoryStack(e.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete e.previous):e.previous&&this.applyLimit(e.previous,t,i,n)}this.groupCount=0},e.prototype.clearHistory=function(e){var t=e.historyManager;t.currentEntry=void 0,t.canUndo=!1,t.canRedo=!1,this.historyCount=0,this.groupCount=0,e.historyManager.undoStack=[],e.historyManager.redoStack=[]},e.prototype.setEntryLimit=function(e){e?this.groupCount--:this.groupCount++,this.hasGroup=e?!e:e},e.prototype.limitHistoryStack=function(e,t){"StartGroup"!==e.type&&"EndGroup"!==e.type&&(this.removeFromStack(t.historyManager.undoStack,e),this.removeFromStack(t.historyManager.redoStack,e)),e.previous&&this.limitHistoryStack(e.previous,t)},e.prototype.removeFromStack=function(e,t){if(e.length)for(var i=0;i<=e.length;i++)if(e[i].undoObject===t.undoObject&&e[i].redoObject===t.redoObject){e.splice(i,1);break}},e.prototype.undo=function(e){var t=this.getUndoEntry(e),i=0;if(t)if("Internal"===t.category)"EndGroup"===t.type?(i++,this.groupUndo=!0):this.undoEntry(t,e),this.groupUndo&&(this.undoGroupAction(t,e,i),this.groupUndo=!1);else{e.historyManager.undo(t);var n={entryType:"undo",oldValue:t.undoObject,newValue:t.redoObject};y()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType)}),e.triggerEvent(Vi.historyStateChange,n)}},e.prototype.getHistoryChangeEvent=function(e,t){var i={};switch(t){case"Node":i.node=e;break;case"Connector":i.connector=e;break;case"Selector":i.selector=e;break;case"Diagram":i.diagram=e;break;case"ShapeAnnotation":i.shapeAnnotation=e;break;case"PathAnnotation":i.pathAnnotation=e;break;case"PortObject":i.pointPortModel=e;break;case"Object":i.object=e}return i},e.prototype.getHistoryList=function(e){var t,i,n=[],r=[],o=e.historyManager.currentEntry;for(o=e.historyManager.currentEntry,e.historyManager.canUndo||0===e.historyManager.undoStack.length?this.getHistroyObject(n,o):this.getHistroyObject(r,o);o&&o.previous;)t=o.previous,this.getHistroyObject(n,t),o=o.previous;for(o=e.historyManager.currentEntry;o&&o.next;)i=o.next,this.getHistroyObject(r,i),o=o.next;e.historyManager.undoStack=n,e.historyManager.redoStack=r},e.prototype.getHistroyObject=function(e,t){t&&"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.push({redoObject:t.redoObject?t.redoObject:null,undoObject:t.undoObject?t.undoObject:null,type:t.type?t.type:null,category:t.category?t.category:null})},e.prototype.undoGroupAction=function(e,t,i){for(;0!==i;)this.undoEntry(e,t),"StartGroup"===(e=this.getUndoEntry(t)).type?i--:"EndGroup"===e.type&&i++;i=0},e.prototype.undoEntry=function(e,t){var i,n;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&"LabelCollectionChanged"!==e.type&&(i=e.undoObject,n=e.undoObject),"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.undoStack.length>0){var r=t.historyManager.undoStack.splice(0,1);t.historyManager.redoStack.splice(0,0,r[0]),n=e.undoObject}switch(t.protectPropertyChange(!0),t.diagramActions|=Wi.UndoRedo,e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,t,e);break;case"RotationChanged":this.recordRotationChanged(i,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(i,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!1);break;case"CollectionChanged":e.isUndo=!0,this.recordCollectionChanged(e,t),e.isUndo=!1;break;case"LabelCollectionChanged":e.isUndo=!0,this.recordLabelCollectionChanged(e,t),e.isUndo=!1;break;case"PortCollectionChanged":e.isUndo=!0,this.recordPortCollectionChanged(e,t),e.isUndo=!1;break;case"Group":this.unGroup(e,t);break;case"UnGroup":this.group(e,t);break;case"SegmentChanged":this.recordSegmentChanged(i,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":e.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(e,t,!1),e.isUndo=!1}if(t.diagramActions&=~Wi.UndoRedo,t.protectPropertyChange(!1),t.historyChangeTrigger(e),n){var o=this.checkNodeObject(n,t);if(o){var a=_h(t.updateSelection);a&&a(o,t)}}},e.prototype.checkNodeObject=function(e,t){var i;if(e.id)i=t.nameTable[e.id];else if(e.nodes&&e.nodes.length>0||e.connectors&&e.connectors.length>0)for(var n=0,r=e.nodes.length>0?e.nodes:e.connectors;n<r.length;n++)i=r[n],i=t.nameTable[i.id];else{var o=e.nodes?e.nodes:e.connectors;if(o)for(var a=0,s=Object.keys(o);a<s.length;a++){var l=s[a],c=Number(l);i=e.nodes?t.nodes[c]:t.connectors[c]}}return i},e.prototype.group=function(e,t){t.add(e.undoObject)},e.prototype.unGroup=function(e,t){e.redoObject=Oh(e.undoObject);var i=e.undoObject;t.commandHandler.unGroup(i)},e.prototype.ignoreProperty=function(e){return"zIndex"===e||"wrapper"===e},e.prototype.getProperty=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.ignoreProperty(r)||(t[r]instanceof Object?this.getProperty(e[r],t[r]):e[r]=t[r])}},e.prototype.recordLaneOrPhaseCollectionChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))t.remove(n);else if(n.isPhase){var o=t.nameTable[n.parentId];t.addPhases(o,[r])}else{var a=Ds(o=t.nameTable[n.parentId],n);t.addLanes(o,[r],a)}t.clearSelection()},e.prototype.recordAnnotationChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject,r=Wl(n,e.objectId),o=t.commandHandler.getAnnotationChanges(t.nameTable[n.id],r),a=t.nameTable[n.id],s=Wl(a,e.objectId);s.offset=r.offset,s.margin=r.margin,s.width=r.width,s.height=r.height,s.rotateAngle=r.rotateAngle,s.margin=r.margin,a instanceof Yc?t.nodePropertyChange(a,{},o):t.connectorPropertyChange(a,{},o)},e.prototype.recordChildCollectionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject,r=t.nameTable[n.parentId],o=t.nameTable[n.id];r?ds(t,r,o,!i,"AddNodeToLane"===e.historyAction):(o.parentId&&((r=t.nameTable[o.parentId]).children.splice(r.children.indexOf(o.id),1),r.wrapper.children.splice(r.wrapper.children.indexOf(o.wrapper),1)),""!==n.parentId&&((r=t.nameTable[n.parentId]).children.push(n.id),r.wrapper.children.push(o.wrapper)),o.parentId=n.parentId,t.removeElements(o),t.updateDiagramObject(o))},e.prototype.recordStackPositionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(n.source){var r=t.nameTable[n.source.parentId];r&&(n.target?(r.wrapper.children.splice(n.targetIndex,1),r.wrapper.children.splice(n.sourceIndex,0,n.source.wrapper)):void 0!==n.sourceIndex?(t.nameTable[n.source.id]||t.add(n.source),r.wrapper.children.splice(n.sourceIndex,0,t.nameTable[n.source.id].wrapper),t.nameTable[n.source.id].parentId=r.id):(r.wrapper.children.splice(r.wrapper.children.indexOf(t.nameTable[n.source.id].wrapper),1),t.nameTable[n.source.id].parentId=""),i&&"UmlClassifier"===r.shape.type&&t.remove(n.source),r.wrapper.measure(new ei),r.wrapper.arrange(r.wrapper.desiredSize),t.updateDiagramObject(r),t.updateSelector())}},e.prototype.recordGridSizeChanged=function(e,t,i,n){var r=i?e.redoObject:e.undoObject,o=i?e.undoObject:e.redoObject;if(r.parentId){var a=t.nameTable[r.parentId],s=t.nameTable[r.id],l=a.wrapper.bounds.x,c=a.wrapper.bounds.y;if("SwimLane"===a.shape.type){var h=a.wrapper.children[0],d=a.shape.padding;Ls(t,o,a,r),n?(h.updateRowHeight(r.rowIndex,r.wrapper.actualSize.height,!0,d),a.height=a.wrapper.height=h.height):(h.updateColumnWidth(r.columnIndex,r.wrapper.actualSize.width,!0,d),a.width=a.wrapper.width=h.width,r.isPhase&&(s.maxWidth=s.wrapper.maxWidth=r.wrapper.actualSize.width)),Ss(a);var p=l-a.wrapper.bounds.x,u=c-a.wrapper.bounds.y;t.drag(a,p,u),t.clearSelection(),t.updateDiagramObject(a)}}},e.prototype.recordLanePositionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(n.source){var r=t.nameTable[n.source.parentId];r&&"SwimLane"===r.shape.type&&(As(t,n.target,n.source),t.clearSelection())}},e.prototype.recordPortChanged=function(e,t,i){var n=i?e.redoObject.nodes[0]:e.undoObject.nodes[0],r=Fl(n,e.objectId),o=t.commandHandler.getPortChanges(t.nameTable[n.id],r),a=t.nameTable[n.id];Fl(a,e.objectId).offset=r.offset,t.nodePropertyChange(a,{},o),a.parentId&&t.updateConnectorEdges(t.nameTable[a.parentId])},e.prototype.recordPropertyChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;this.getProperty(t,i?n:r),i?t.onPropertyChanged(n,r):t.onPropertyChanged(r,n),t.diagramActions=t.diagramActions|Wi.UndoRedo},e.prototype.recordSegmentChanged=function(e,t){var i,n=0;if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)i=e.connectors[n],this.segmentChanged(i,t)},e.prototype.segmentChanged=function(e,t){var i=t.nameTable[e.id];i.segments=e.segments,t.commandHandler.updateEndPoint(i)},e.prototype.recordPositionChanged=function(e,t){var i,n,r=0;if(e.nodes&&e.nodes.length>0)for(r=0;r<e.nodes.length;r++)i=e.nodes[r],this.positionChanged(i,t);if(e.connectors&&e.connectors.length>0)for(r=0;r<e.connectors.length;r++)n=e.connectors[r],this.connectionChanged(n,t)},e.prototype.positionChanged=function(e,t){var i=t.nameTable[e.id];if(e.processId&&!i.processId&&t.addProcess(e,e.processId),!e.processId&&i.processId&&t.removeProcess(e.id),i.processId){var n=e.margin.left-i.margin.left,r=e.margin.top-i.margin.top;t.drag(i,n,r)}else{if(i.parentId){var o=t.nameTable[i.parentId];o.isLane&&(e.wrapper.offsetX=e.width/2+(o.wrapper.bounds.x+e.margin.left),e.wrapper.offsetY=e.height/2+(o.wrapper.bounds.y+e.margin.top))}n=e.wrapper.offsetX-i.offsetX,r=e.wrapper.offsetY-i.offsetY;t.drag(i,n,r)}t.bpmnModule&&t.bpmnModule.updateDocks(i,t)},e.prototype.recordSizeChanged=function(e,t,i){var n,r,o=0;if(e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)if((r=e.nodes[o]).children&&!r.container)for(var a=t.commandHandler.getAllDescendants(r,[]),s=0;s<a.length;s++){var l=i.childTable[a[s].id];ec(l)===Yc?(this.sizeChanged(l,t,i),this.positionChanged(l,t)):this.connectionChanged(l,t,i)}else this.sizeChanged(r,t),this.positionChanged(r,t);if(e&&e.connectors&&e.connectors.length>0){var c=e.connectors;for(o=0;o<c.length;o++)n=c[o],this.connectionChanged(n,t)}},e.prototype.sizeChanged=function(e,t,i){var n=t.nameTable[e.id],r=e.wrapper.actualSize.width/n.wrapper.actualSize.width,o=e.wrapper.actualSize.height/n.wrapper.actualSize.height;i&&i.childTable&&(i.childTable[e.id]=Oh(n)),t.scale(n,r,o,{x:e.wrapper.offsetX/n.wrapper.offsetX,y:e.wrapper.offsetY/n.wrapper.offsetY})},e.prototype.recordRotationChanged=function(e,t,i){var n,r,o=0,a=t.selectedItems;if(a.rotateAngle=e.rotateAngle,a&&a.wrapper&&(a.wrapper.rotateAngle=e.rotateAngle),e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)n=e.nodes[o],this.rotationChanged(n,t),this.positionChanged(n,t);if(e&&e.connectors&&e.connectors.length>0)for(o=0;o<e.connectors.length;o++)r=e.connectors[o],this.connectionChanged(r,t)},e.prototype.rotationChanged=function(e,t){var i=t.nameTable[e.id];t.rotate(i,e.rotateAngle-i.rotateAngle)},e.prototype.recordConnectionChanged=function(e,t){var i=e.connectors[0];this.connectionChanged(i,t)},e.prototype.connectionChanged=function(e,t,i){var n=t.nameTable[e.id];e.sourcePortID!==n.sourcePortID&&(n.sourcePortID=e.sourcePortID,t.connectorPropertyChange(n,{},{sourcePortID:e.sourcePortID})),e.targetPortID!==n.targetPortID&&(n.targetPortID=e.targetPortID,t.connectorPropertyChange(n,{},{targetPortID:e.targetPortID})),e.sourceID!==n.sourceID&&(""===e.sourceID?Nl(t.nameTable[n.sourceID].outEdges,e.id):t.nameTable[e.sourceID].outEdges.push(e.id),n.sourceID=e.sourceID,t.connectorPropertyChange(n,{},{sourceID:e.sourceID})),e.targetID!==n.targetID&&(""===e.targetID?Nl(t.nameTable[n.targetID].inEdges,e.id):t.nameTable[e.targetID].inEdges.push(e.id),n.targetID=e.targetID,t.connectorPropertyChange(n,{},{targetID:e.targetID})),i&&i.childTable&&(i.childTable[e.id]=Oh(n));var r=e.sourcePoint.x-n.sourcePoint.x,o=e.sourcePoint.y-n.sourcePoint.y;0===r&&0===o||t.dragSourceEnd(n,r,o);var a=e.targetPoint.x-n.targetPoint.x,s=e.targetPoint.y-n.targetPoint.y;0===a&&0===s||t.dragTargetEnd(n,a,s),t.updateSelector(),"SVG"!==t.mode&&t.refreshDiagramLayer()},e.prototype.recordCollectionChanged=function(e,t){var i=e.undoObject;if(e&&e.changeType){if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))i.nodeId?t.remove(t.nameTable[i.nodeId+"_textannotation_"+i.id]):(t.remove(i),t.clearSelectorLayer());else{if(t.clearSelectorLayer(),i.parentId){var n=t.nameTable[i.parentId];n?t.addChild(n,i):t.add(i)}else i.nodeId?t.addTextAnnotation(i,t.nameTable[i.nodeId]):t.nameTable[i.id]||(i&&i.shape&&"SwimLane"===i.shape.type&&e.isUndo&&_s(i,void 0,void 0,void 0,void 0,!0),t.add(i));i.processId&&t.nameTable[i.processId]&&t.addProcess(i,i.processId)}"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordLabelCollectionChanged=function(e,t){var i=e.undoObject,n=e.redoObject,r=t.nameTable[n.id];if(e&&e.changeType){"Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removeLabels(r,[i]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addLabels(r,[i])),"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordPortCollectionChanged=function(e,t){var i=e.undoObject,n=e.redoObject,r=t.nameTable[n.id];if(e&&e.changeType){"Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removePorts(r,[i]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addPorts(r,[i])),"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.redo=function(e){var t=this.getRedoEntry(e),i=0;if(t)if("Internal"===t.category)"StartGroup"===t.type?(i++,this.groupUndo=!0):this.redoEntry(t,e),this.groupUndo&&(this.redoGroupAction(t,e,i),this.groupUndo=!1);else{e.historyManager.redo(t);var n={entryType:"redo",oldValue:t.redoObject,newValue:t.undoObject};y()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType)}),e.triggerEvent(Vi.historyStateChange,n)}},e.prototype.redoGroupAction=function(e,t,i){for(;0!==i;)this.redoEntry(e,t),"EndGroup"===(e=this.getRedoEntry(t)).type?i--:"StartGroup"===e.type&&i++;i=0},e.prototype.redoEntry=function(e,t){var i,n;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&(i=e.redoObject,n=e.redoObject),t.diagramActions|=Wi.UndoRedo,"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.redoStack.length>0){var r=t.historyManager.redoStack.splice(0,1);t.historyManager.undoStack.splice(0,0,r[0]),n=e.redoObject}switch(t.protectPropertyChange(!0),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,t,e);break;case"RotationChanged":this.recordRotationChanged(i,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(i,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!0);break;case"CollectionChanged":this.recordCollectionChanged(e,t);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(e,t);break;case"PortCollectionChanged":this.recordPortCollectionChanged(e,t);break;case"Group":this.group(e,t);break;case"UnGroup":this.unGroup(e,t);break;case"SegmentChanged":this.recordSegmentChanged(i,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(e,t,!0)}if(t.protectPropertyChange(!1),t.diagramActions&=~Wi.UndoRedo,t.historyChangeTrigger(e),n){var o=this.checkNodeObject(n,t);if(o){var a=_h(t.updateSelection);a&&a(o,t)}}},e.prototype.getUndoEntry=function(e){var t,i=null,n=e.historyManager;return n.canUndo&&(i=n.currentEntry,(t=n.currentEntry.previous)?(n.currentEntry=t,n.canRedo||(n.canRedo=!0)):(n.canRedo=!0,n.canUndo=!1)),i},e.prototype.getRedoEntry=function(e){var t,i=null,n=e.historyManager;return n.canRedo&&((t=n.currentEntry.previous||n.canUndo?n.currentEntry.next:n.currentEntry)&&(n.currentEntry=t,n.canUndo||(n.canUndo=!0),t.next||(n.canRedo=!1,n.canUndo=!0)),i=n.currentEntry),i},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"UndoRedo"},e}(),lu=function(){function e(){this.protectChange=!1}return e.prototype.expand=function(e,t,i,n){var r=this,o={},a=0;if(o[0]=setInterval(function(){return a++,r.layoutAnimation(t,o,6===a,n,i)},20),i.isExpanded){var s=.2;this.protectChange=n.isProtectedOnChange,n.protectPropertyChange(!1);var l={};if(e){this.updateOpacity(i,s,n);l[0]=setInterval(function(){s<=1?r.updateOpacity(i,s,n):clearInterval(l[0]),s+=.2},20)}}},e.prototype.layoutAnimation=function(e,t,i,n,r){if(!i)for(var o=0;o<e.objects.length;o++){var a=n.nameTable[e.objects[o].id];a.offsetX+=e.objects[o].differenceX/5,a.offsetY+=e.objects[o].differenceY/5}if(i){clearInterval(t[0]),n.protectPropertyChange(!0),n.triggerEvent(Vi.animationComplete,void 0),n.organizationalChartModule.isAnimation=!1,n.layout.fixedNode="",n.protectPropertyChange(this.protectChange);var s={element:sc(Oh(r)),state:!!r.isExpanded};n.triggerEvent(Vi.expandStateChange,s)}},e.prototype.updateOpacity=function(e,t,i){for(var n=0;n<e.outEdges.length;n++){var r=i.nameTable[e.outEdges[n]],o=i.nameTable[r.targetID];r.style.opacity=t;for(var a=0;a<r.wrapper.children.length;a++)r.wrapper.children[a].style.opacity=t,o.style.opacity=t,o.wrapper instanceof cn&&i.updateNodeProperty(o.wrapper,void 0,t);this.updateOpacity(o,t,i)}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LayoutAnimate"},e}(),cu=function(){function e(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[]}return e.prototype.lineRouting=function(e){var t=e.connectors.length;if(this.renderVirtualRegion(e),t>0)for(var i=0;i<t;i++){var n=e.connectors[i];"Orthogonal"===n.type&&this.refreshConnectorSegments(e,n,!0)}},e.prototype.renderVirtualRegion=function(e,t){var i=e.spatialSearch.pageRight+this.size,n=e.spatialSearch.pageBottom+this.size,r=e.spatialSearch.pageLeft,o=e.spatialSearch.pageTop;if(r=r<0?r-20:0,o=o<0?o-20:0,t&&(this.width!==i-r||this.height!==n-o||this.diagramStartX!==r||this.diagramStartY!==o)||void 0===t){this.width=i-r,this.height=n-o,this.diagramStartX=r,this.diagramStartY=o,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var a=this.size,s=this.diagramStartX<0?this.diagramStartX:0,l=this.diagramStartY<0?this.diagramStartY:0,c=0;c<this.noOfCols;c++){for(var h=0;h<this.noOfRows;h++){0===c&&this.gridCollection.push([0]);var d={x:s,y:l,width:a,height:a,gridX:h,gridY:c,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[h][c]=d,s+=a}s=this.diagramStartX<0?this.diagramStartX:0,l+=a}}this.updateNodesInVirtualRegion(e.nodes)},e.prototype.updateNodesInVirtualRegion=function(e){for(var t=this.size,i=this.diagramStartX<0?this.diagramStartX:0,n=this.diagramStartY<0?this.diagramStartY:0,r=0;r<this.noOfCols;r++){for(var o=0;o<this.noOfRows;o++){var a=this.gridCollection[o][r],s=new mi(i,n,this.size,this.size),l=void 0;for(a.walkable=!0,a.tested=void 0,a.nodeId=[],l=0;l<e.length;l++)this.intersectRect(s,e[l].wrapper.outerBounds)&&(a.nodeId.push(e[l].id),a.walkable=!1);i+=t}i=this.diagramStartX<0?this.diagramStartX:0,n+=t}},e.prototype.intersectRect=function(e,t){return!(t.left>=e.right||t.right<=e.left||t.top>=e.bottom||t.bottom<=e.top)},e.prototype.findEndPoint=function(e,t){var i,n;if(t&&""!==e.sourcePortID||!t&&""!==e.targetPortID){n=br(i=t?{x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY}:{x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,t?e.sourceWrapper.bounds:e.targetWrapper.bounds);var r=t?e.sourcePortWrapper.bounds:e.targetPortWrapper.bounds;i="Top"===n?{x:r.topCenter.x,y:r.topCenter.y}:"Left"===n?{x:r.middleLeft.x,y:r.middleLeft.y}:"Right"===n?{x:r.middleRight.x,y:r.middleRight.y}:{x:r.bottomCenter.x,y:r.bottomCenter.y}}else i=t&&this.startNode||!t&&this.targetNode?t?{x:this.startNode.offsetX,y:this.startNode.offsetY}:{x:this.targetNode.offsetX,y:this.targetNode.offsetY}:t?{x:e.sourcePoint.x,y:e.sourcePoint.y}:{x:e.targetPoint.x,y:e.targetPoint.y};return i},e.prototype.refreshConnectorSegments=function(e,t,i){var n,r,o,a,s,l,c,h,d,p,u,f=t.sourceID,g=t.targetID,m=t.sourcePortID,y=t.targetPortID;if(function(e,t){var i=0;return e.constraints&Li.LineRouting?i=e.constraints&Li.LineRouting:e.constraints&Li.InheritLineRouting&&(i=t.constraints&Ni.LineRouting),i}(t,e)){this.startNode=e.nameTable[f],this.targetNode=e.nameTable[g],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var v=0;v<this.noOfCols;v++)for(var b=0;b<this.noOfRows;b++)this.gridCollection[b][v].tested=this.gridCollection[b][v].parent=void 0,this.gridCollection[b][v].previousDistance=this.gridCollection[b][v].afterDistance=void 0,this.gridCollection[b][v].totalDistance=void 0;n=this.findEndPoint(t,!0),r=this.findEndPoint(t,!1);for(v=0;v<this.noOfRows;v++)for(b=0;b<this.noOfCols;b++){o=this.gridCollection[v][b];var w=new mi(o.x,o.y,o.width,o.height);if(w.containsPoint(n)&&!this.startGrid&&(this.startGrid=(m&&this.startGrid,o)),w.containsPoint(r)&&!this.targetGrid&&(this.targetGrid=(y&&this.targetGrid,o)),!m&&this.startNode){var x=this.startNode.wrapper.outerBounds;w.containsPoint(x.topCenter)&&!a&&(a=o),w.containsPoint(x.middleLeft)&&!l&&(l=o),w.containsPoint(x.middleRight)&&!c&&(c=o),w.containsPoint(x.bottomCenter)&&!s&&(s=o)}if(!y&&this.targetNode){x=this.targetNode.wrapper.outerBounds;w.containsPoint(x.topCenter)&&!d&&(d=o),w.containsPoint(x.middleLeft)&&!u&&(u=o),w.containsPoint(x.middleRight)&&!h&&(h=o),w.containsPoint({x:x.bottomCenter.x,y:x.bottomCenter.y})&&!p&&(p=o)}}if(!m&&this.startNode){for(v=l.gridX;v<=c.gridX;v++)1===(o=this.gridCollection[v][l.gridY]).nodeId.length&&this.sourceGridCollection.push(o);for(v=a.gridY;v<=s.gridY;v++)1===(o=this.gridCollection[a.gridX][v]).nodeId.length&&-1===this.sourceGridCollection.indexOf(o)&&this.sourceGridCollection.push(o)}else this.sourceGridCollection.push(this.startGrid);if(!y&&this.targetNode){for(v=u.gridX;v<=h.gridX;v++)1===(o=this.gridCollection[v][u.gridY]).nodeId.length&&this.targetGridCollection.push(o);for(v=d.gridY;v<=p.gridY;v++)1===(o=this.gridCollection[d.gridX][v]).nodeId.length&&-1===this.targetGridCollection.indexOf(o)&&this.targetGridCollection.push(o);-1===this.targetGridCollection.indexOf(this.targetGrid)&&this.targetGrid.nodeId.length>1&&1===this.targetGridCollection.length&&(this.targetGrid=this.targetGridCollection[0])}else this.targetGridCollection.push(this.targetGrid);this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid);e:for(;this.startArray.length>0;){var S=this.startArray.pop();for(v=0;v<this.targetGridCollection.length;v++){var C=this.targetGridCollection[v];if(S.gridX===C.gridX&&S.gridY===C.gridY){if(this.getIntermediatePoints(S),this.updateConnectorSegments(e,this.intermediatePoints,this.gridCollection,t,i))break e;this.targetGridCollection.splice(this.targetGridCollection.indexOf(C),1),S=this.startArray.pop()}}this.findPath(S)}}},e.prototype.getIntermediatePoints=function(e){var t;for(this.intermediatePoints=[];e;)this.intermediatePoints.push({x:e.gridX,y:e.gridY}),e=e.parent;this.intermediatePoints.reverse(),this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(t=this.neigbour(this.startGrid,"bottom",void 0),this.intermediatePoints[0].y+=t-1):(t=this.neigbour(this.startGrid,"top",void 0),this.intermediatePoints[0].y-=t-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(t=this.neigbour(this.startGrid,"right",void 0),this.intermediatePoints[0].x+=t-1):(t=this.neigbour(this.startGrid,"left",void 0),this.intermediatePoints[0].x-=t-1)},e.prototype.updateConnectorSegments=function(e,t,i,n,r){var o,a,s,l,c,h,d,p,u,f=[],g=[],m=n.targetWrapper,y=n.sourceWrapper,v=this.findEndPoint(n,!0);""===n.targetPortID&&n.targetWrapper||(a=this.findEndPoint(n,!1));for(var b=0;b<t.length;b++)s=(c=i[t[b].x][t[b].y]).x+c.width/2,l=c.y+c.height/2,g.push({x:s,y:l}),b>=1&&(p=g[g.length-2].x!==g[g.length-1].x?g[g.length-2].x>g[g.length-1].x?"Left":"Right":g[g.length-2].y>g[g.length-1].y?"Top":"Bottom"),b>=2&&u===p&&g.splice(g.length-2,1),u=p;for(var w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?(0===w&&y&&(v=g[w].x>g[w+1].x?y.bounds.middleLeft:y.bounds.middleRight),w===g.length-2&&""===n.targetPortID&&m&&(a=g[w].x>g[w+1].x?m.bounds.middleRight:m.bounds.middleLeft),0===w&&v&&(g[w].x=v.x,g[w].y=g[w+1].y=v.y),w===g.length-2&&a&&(g[w+1].x=a.x,g[w].y=g[w+1].y=a.y)):(0===w&&y&&(v=g[w].y>g[w+1].y?y.bounds.topCenter:y.bounds.bottomCenter),w===g.length-2&&""===n.targetPortID&&m&&(a=g[w].y>g[w+1].y?m.bounds.bottomCenter:m.bounds.topCenter),0===w&&v&&(g[w].y=v.y,g[w].x=g[w+1].x=v.x),w===g.length-2&&a&&(g[w+1].y=a.y,g[w].x=g[w+1].x=a.x));for(w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?g[w].x>g[w+1].x?(h="Left",d=g[w].x-g[w+1].x):(h="Right",d=g[w+1].x-g[w].x):g[w].y>g[w+1].y?(h="Top",d=g[w].y-g[w+1].y):(h="Bottom",d=g[w+1].y-g[w].y),o={type:"Orthogonal",length:d,direction:h},f.push(o);var x=f[f.length-1];return 1===f.length&&(x.length-=20),x.length<10&&2===f.length&&(f.pop(),f[0].length-=20,x=f[0]),(("Top"===x.direction||"Bottom"===x.direction)&&x.length>n.targetDecorator.height+1||("Right"===x.direction||"Left"===x.direction)&&x.length>n.targetDecorator.width+1)&&(n.segments=f,r&&e.connectorPropertyChange(n,{},{type:"Orthogonal",segments:f}),!0)},e.prototype.findPath=function(e){for(var t,i=[],n=this.findNearestNeigbours(e,this.gridCollection),r=0;r<n.length;r++)if(null!==(t=this.findIntermediatePoints(n[r].gridX,n[r].gridY,e.gridX,e.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var o=this.gridCollection[t.x][t.y],a=this.octile(Math.abs(t.x-e.gridX),Math.abs(t.y-e.gridY)),s=e.previousDistance+a;o.previousDistance&&!(o.previousDistance>s)||t.x===e.gridX&&t.y===e.gridY||(i.push(t),o.previousDistance=s,o.afterDistance=o.afterDistance||this.manhattan(Math.abs(t.x-this.targetGrid.gridX),Math.abs(t.y-this.targetGrid.gridY)),o.totalDistance=o.previousDistance+o.afterDistance,o.parent=e)}if(i.length>0)for(r=0;r<i.length;r++){o=this.gridCollection[i[r].x][i[r].y];-1===this.startArray.indexOf(o)&&this.startArray.push(o)}this.sorting(this.startArray)},e.prototype.sorting=function(e){for(var t=!1;!t;){t=!0;for(var i=1;i<e.length;i+=1)if(e[i-1].totalDistance<e[i].totalDistance){t=!1;var n=e[i-1];e[i-1]=e[i],e[i]=n}}return e},e.prototype.octile=function(e,t){var i=Math.SQRT2-1;return t>e?i*e+t:i*t+e},e.prototype.manhattan=function(e,t){return e+t},e.prototype.findNearestNeigbours=function(e,t){var i=[],n=e.parent;if(n){var r=(e.gridX-n.gridX)/Math.max(Math.abs(e.gridX-n.gridX),1),o=(e.gridY-n.gridY)/Math.max(Math.abs(e.gridY-n.gridY),1);0!==r?(this.isWalkable(e.gridX,e.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY-1])&&i.push(t[e.gridX][e.gridY-1]),this.isWalkable(e.gridX,e.gridY+1,!0)&&this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+1])&&i.push(t[e.gridX][e.gridY+1]),this.isWalkable(e.gridX+r,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+r][e.gridY])&&i.push(t[e.gridX+r][e.gridY])):0!==o&&(this.isWalkable(e.gridX-1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX-1][e.gridY])&&i.push(t[e.gridX-1][e.gridY]),this.isWalkable(e.gridX+1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+1][e.gridY])&&i.push(t[e.gridX+1][e.gridY]),this.isWalkable(e.gridX,e.gridY+o,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+o])&&i.push(t[e.gridX][e.gridY+o]))}else this.neigbour(e,"top",i),this.neigbour(e,"right",i),this.neigbour(e,"bottom",i),this.neigbour(e,"left",i);return i},e.prototype.neigbour=function(e,t,i){for(var n,r=1;r>0;){var o="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-r:e.gridX+r,a="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-r:e.gridY+r;if((n=this.gridCollection[o][a])&&-1===this.sourceGridCollection.indexOf(n))return i&&this.isWalkable(o,a)&&i.push(n),r;if(!(o>0&&a>0))break;r++}return null},e.prototype.isWalkable=function(e,t,i){if(e>=0&&e<this.noOfRows&&t>=0&&t<this.noOfCols){var n=this.gridCollection[e][t];if(n&&(n.walkable||1===n.nodeId.length&&(-1!==this.sourceGridCollection.indexOf(n)||-1!==this.targetGridCollection.indexOf(n)))&&(i&&!n.parent||!i))return!0}return!1},e.prototype.findIntermediatePoints=function(e,t,i,n,r,o){for(var a=e-i,s=t-n,l=e,c=t,h=0;h<this.targetGridCollection.length;h++)if(e===this.targetGridCollection[h].gridX&&t===this.targetGridCollection[h].gridY)return{x:e,y:t};if(!this.isWalkable(e,t))return null;var d=this.gridCollection[e][t];if(d.tested)return{x:e,y:t};if(d.tested=!0,0!==a&&(a=a>0?1:-1,this.isWalkable(l,c-1)&&!this.isWalkable(l-a,c-1)||this.isWalkable(l,c+1)&&!this.isWalkable(l-a,c+1)))return{x:e,y:t};if(0!==s){if(s=s>0?1:-1,this.isWalkable(l-1,c)&&!this.isWalkable(l-1,c-s)||this.isWalkable(l+1,c)&&!this.isWalkable(l+1,c-s))return{x:e,y:t};if(this.findIntermediatePoints(l+1,c,l,c,r,o)||this.findIntermediatePoints(l-1,c,l,c,r,o))return{x:e,y:t}}return this.findIntermediatePoints(l+a,c+s,l,c,r,o)},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LineRouting"},e}(),hu=function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"OrganizationalChart"},e.prototype.updateLayout=function(e,t,i,n,r,o){var a={type:i.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:_h(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(a,e,n,r,o),a},e.prototype.doLayout=function(e,t,i,n,r){var o,a,s=[];for(e.nameTable[e.root]&&e.firstLevelNodes.push(e.nameTable[e.root]),a=0;a<t.length;a++)if(!(o=t[a]).excludeFromLayout&&((e.graphNodes[o.id]=this.setUpLayoutInfo(e,o)).tree.hasSubTree=!1,!e.nameTable[e.root]&&(!o.inEdges||!o.inEdges.length))){o.parentId||o.processId||s.push(o),o.data&&String(o.data[n])===e.root&&e.firstLevelNodes.push(o)}for(0===e.firstLevelNodes.length&&(e.firstLevelNodes=s),a=0;a<e.firstLevelNodes.length;a++)o=e.firstLevelNodes[a],this.updateEdges(e,o,1,r,t);if(e.firstLevelNodes.length>0){e.rootNode=e.firstLevelNodes[0];var l=0,c=0,h=void 0,d=void 0,p=void 0,u=void 0,f=void 0;for(a=0;a<e.firstLevelNodes.length;a++){f=this.updateTree(e,l,c,e.firstLevelNodes[a],0,e.firstLevelNodes[a-1]);var g=e.graphNodes[e.firstLevelNodes[a].id];f.y=Math.min(f.y,g.y),f.x=Math.min(f.x,g.x),-1!==e.orientation.indexOf("Left")?c=f.right+e.horizontalSpacing:l=f.right+e.horizontalSpacing,0===a?(h=f.x,u=f.y,p=f.right,d=f.bottom):(h=Math.min(h,f.x),u=Math.min(u,f.y),p=Math.max(p,f.right),d=Math.max(d,f.bottom))}for(this.updateAnchor(e,{x:h,y:u,right:p,bottom:d},i),a=0;a<e.firstLevelNodes.length;a++)this.updateNodes(e,e.firstLevelNodes[a],0);for(a=0;a<e.firstLevelNodes.length;a++)this.updateConnectors(e,e.firstLevelNodes[a],1)}},e.prototype.getBounds=function(e){var t=e.offsetX-e.actualSize.width*e.pivot.x,i=e.offsetY-e.actualSize.height*e.pivot.y;return new mi(t,i,e.actualSize.width,e.actualSize.height)},e.prototype.updateTree=function(e,t,i,n,r,o,a){var s,l,c,h,d={};if(s=this.getDimensions(e,n,t,i,r),d=e.graphNodes[n.id],e.maxLevel=Math.max(e.maxLevel,r),l=r,(h=this.hasChild(e,n))||d.tree.assistants.length){var p=void 0,u=void 0,f=void 0,g=void 0,m=void 0,y=void 0;y=s.y+s.height+e.verticalSpacing,d.tree.assistants.length&&(l=(c=this.setDepthSpaceForAssitants(e,n,y,s.height,r,e.verticalSpacing)).level,y=c.bottom),d.tree.assistants.length||"Horizontal"===d.tree.orientation||(y=s.y+s.height+e.verticalSpacing/2),d.tree.children.length&&(p="Horizontal"!==d.tree.orientation||"Balanced"===d.tree.type&&1!==d.tree.children.length?"Balanced"===d.tree.type?this.updateHorizontalTreeWithMultipleRows(e,n,o,s.x,y,l):this.updateVerticalTree(e,n,s.x,y,l,a):this.updateHorizontalTree(e,n,o,s.x,y,l)),d.y&&d.y>s.y||(d.y=s.y),d.mid&&(t=d.mid),d.tree.assistants.length&&(m=void 0!==t?t:s.x,g=this.setBreadthSpaceForAssistants(e,n,s,m,y,r),h||(t=((u=p=g).x+u.right)/2-s.width/2,p=u),f=g?g.canMoveBy:void 0),d.x=t,d.translate||(d.treeWidth=p.right-p.x);var v={layout:e,shape:n,shapeBounds:{x:t,y:s.y,right:t+s.width,bottom:s.y+s.height},treeBounds:p,dim:s,level:r};return this.translateSubTree(v,f,void 0!==o,a),d.firstChild&&"string"!==typeof d.firstChild&&(d.firstChild.x+=d.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(e,n,o,s,r,a),n.treeBounds},e.prototype.updateLeafNode=function(e,t,i,n,r,o){var a,s=e.graphNodes[t.id];s.x=n.x,s.y&&s.y>n.y||(s.y=n.y,s.maxLevel=Math.max(r,s.maxLevel||0)),a={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height},s.maxLevel=Math.max(s.maxLevel||0,r);var l={layout:e,shape:t,shapeBounds:a,treeBounds:a,dim:n,level:r};return this.translateSubTree(l,void 0,void 0!==i,o),{x:s.x,y:s.y,right:s.x+n.width,bottom:s.y+n.height}},e.prototype.setUpLayoutInfo=function(e,t){var i={subTreeTranslation:0};return"OrganizationalChart"===e.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},e.prototype.translateSubTree=function(e,t,i,n){var r=e.layout,o=e.shape,a=e.shapeBounds,s=e.treeBounds,l=e.level,c=e.dim,h=r.graphNodes[o.id],d=r.nameTable[h.firstChild?h.firstChild.child:h.tree.children[0]],p=d?r.graphNodes[d.id]:null,u=this.hasChild(r,o),f=this.findIntersectingLevels(r,a,l,h.actualLevel),g=this.findIntersectingLevels(r,s,l,h.actualLevel),m=[];f.length&&h.translate?(h.intersect=f,this.spaceLeftFromPrevSubTree(r,o,a),h.canMoveBy=h.diff,void 0!==t&&(h.canMoveBy=Math.min(t,h.canMoveBy)),d&&void 0!==p.canMoveBy&&(p.canMoveBy>=h.canMoveBy&&(h.translated=!0),h.canMoveBy=Math.min(h.canMoveBy,p.canMoveBy)),i&&(h.x-=h.canMoveBy,h.subTreeTranslation-=h.canMoveBy,u&&(this.shiftSubordinates(r,g,h.canMoveBy),s.x=Math.min(s.x,h.x),s.right=Math.max(s.right,h.x+c.width),s.bottom=Math.max(s.bottom,h.y+c.height),s.x-=h.canMoveBy,s.right-=h.canMoveBy),d&&p.canMoveBy>h.canMoveBy?h.canMoveBy=p.canMoveBy-h.canMoveBy:d&&void 0!==h.canMoveBy&&(h.canMoveBy=0))):(u&&(s.x=Math.min(s.x,a.x),s.right=Math.max(s.right,a.x+c.width),s.bottom=Math.max(s.bottom,h.y+c.height)),h.translate||(h.canMoveBy=0,h.subTreeTranslation=0)),n||(a={x:h.x,y:c.y,right:h.x+c.width,bottom:c.y+c.height},m.push({rBounds:a}),this.updateRearBounds(r,o,m,l))},e.prototype.updateRearBounds=function(e,t,i,n,r){var o,a,s,l,c,h,d=!0,p={};if(t&&(r=(p=e.graphNodes[t.id]).intersect,d=!p.tree.children.length&&!p.tree.assistants.length),l=i[0].rBounds,c=i[i.length-1].rBounds,r&&r.length){for(h=(o=e.levels[r[0]].rBounds).bottom,o.y<l.y&&(o.bottom=l.y,i.splice(0,0,{rBounds:o})),h>c.bottom?i.push({rBounds:{x:o.x,right:o.right,y:l.bottom,bottom:h}}):(o=e.levels[r[r.length-1]].rBounds,d&&o.bottom>c.bottom&&(o.y=c.bottom,i.push({rBounds:o}))),a=r[0],s=i.length-1;s>=0;s--)e.levels.splice(a,0,i[s]);a+=i.length,e.levels.splice(a,r.length)}else for(a=this.findLevel(e,i[i.length-1].rBounds,n),s=i.length-1;s>=0;s--)e.levels.splice(a,0,i[s])},e.prototype.shiftSubordinates=function(e,t,i){var n;if(0!==i)for(n=0;n<t.length;n++)e.levels[t[n]].rBounds&&(e.levels[t[n]].rBounds.x-=i,e.levels[t[n]].rBounds.right-=i)},e.prototype.setDepthSpaceForAssitants=function(e,t,i,n,r,o){var a,s,l,c,h=e.graphNodes[t.id],d={};for(c=i,s=0;s<h.tree.assistants.length;s++)(d=e.graphNodes[h.tree.assistants[s]])&&(d.tree.children=d.tree.assistants=[],d.y=i,a=(l=e.nameTable[h.tree.assistants[s]]).actualSize.height,-1!==e.orientation.indexOf("Left")&&(a=l.actualSize.width),c=i+a+o/2,e.maxLevel=r+1,s%2===1&&s!==h.tree.assistants.length-1&&(i=c,r++));return{level:e.maxLevel,bottom:i+a+o}},e.prototype.setBreadthSpaceForAssistants=function(e,t,i,n,r,o){var a,s,l,c,h,d,p,u={},f=e.graphNodes[t.id],g=o,m={x:0,y:0,right:0,bottom:0};for(c=0;c<f.tree.assistants.length;c++)(u=e.graphNodes[f.tree.assistants[c]])&&(a=(l=e.nameTable[f.tree.assistants[c]]).actualSize.width,-1!==e.orientation.indexOf("Left")&&(a=l.actualSize.height),h=c%2===0?n+i.width/2-20-a:n+i.width/2+20,s=this.updateTree(e,h,u.y,e.nameTable[f.tree.assistants[c]],g+1),this.hasChild(e,t)||(0===c?m=s:this.uniteRects(m,s)),c%2===0&&u.prevBounds&&(d=void 0===d?u.canMoveBy:Math.min(d,u.canMoveBy)),c%2!==1&&c!==f.tree.assistants.length-1||(p=this.findIntersectingLevels(e,s,g+1),this.updateRearBounds(e,null,[{rBounds:s}],g+1,p),g++));return m&&(m.canMoveBy=d),m},e.prototype.getDimensions=function(e,t,i,n,r){var o,a;if(o=t.actualSize.width,a=t.actualSize.height,-1!==e.orientation.indexOf("Left")){if(!r){var s;s=i,i=n,n=s}a=t.actualSize.width,o=t.actualSize.height}return{x:i,y:n,width:o,height:a}},e.prototype.hasChild=function(e,t){var i=e.graphNodes[t.id];return i.tree.children&&i.tree.children.length},e.prototype.updateHorizontalTree=function(e,t,i,n,r,o){var a;a=this.getDimensions(e,t,n,r,o);var s,l={},c=(l=e.graphNodes[t.id]).tree.type;s=o;var h,d,p,u,f,g,m,y,v,b,w,x,S,C,P,E=0;if(E=n,h=r,e.levels.slice(0,e.levels.length),this.hasChild(e,t)){var O;for(O=-1!==e.orientation.indexOf("Left"),S=0;S<l.tree.children.length;S++){if(d=(u=e.nameTable[l.tree.children[S]]).actualSize.width,p=u.actualSize.height,g=O?p:d,m=O?d:p,e.levels[s+1]?e.levels[s+1].rBounds:null,f=this.updateTree(e,E,h,u,s+1,e.nameTable[l.tree.children[S-1]]),C=e.graphNodes[u.id],l.maxLevel=Math.max(l.maxLevel||0,C.maxLevel||0),v={x:C.x,y:C.y,right:C.x+g,bottom:C.y+m},0===S&&(y={x:Math.min(C.x,f.x),y:Math.min(C.y,f.y),right:f.right,bottom:f.bottom},P=C),x?(x.x=v.x,x.y=v.y,v.right>x.right&&(x.right=v.right),x.bottom=v.bottom):x=v,0===S&&(l.firstChild={x:C.x,canMoveBy:C.canMoveBy,child:u.id}),this.hasChild(e,u))if(!l.firstChild||l.firstChild.x>=C.firstChild.x){C.firstChild&&l.firstChild.canMoveBy<C.canMoveBy&&(l.firstChild.canMoveBy=w,C.canMoveBy=w,w=l.firstChild.canMoveBy,e.graphNodes[l.firstChild.child].canMoveBy=w);var M=void 0!==w?w:C.canMoveBy;l.firstChild={x:C.firstChild.x,canMoveBy:M,child:u.id}}else C.firstChild&&C.translated&&l.firstChild.canMoveBy>C.canMoveBy&&(l.firstChild.canMoveBy=e.graphNodes[l.firstChild.child].canMoveBy=C.canMoveBy);b=b?Math.max(C.maxLevel,b):C.maxLevel,this.uniteRects(y,f),E=0!==S&&!this.hasChild(e,u)&&C.subTreeTranslation<0?f.right-C.subTreeTranslation+e.horizontalSpacing:f.right+e.horizontalSpacing}isNaN(void 0)||(P.canMoveBy=void 0),l.mid=(P.x+x.right)/2-a.width/2,"Left"===c?l.mid=v.right-a.width:"Right"===c&&(l.mid=n)}return y},e.prototype.updateHorizontalTreeWithMultipleRows=function(e,t,i,n,r,o){var a,s,l,c,h,d,p,u,f,g,m,y=this.getDimensions(e,t,n,r,o),v=e.graphNodes[t.id],b=(v.tree.type,o),w=n,x=r,S=(e.levels.slice(0,e.levels.length),0);if(this.hasChild(e,t)){var C=-1!==e.orientation.indexOf("Left"),P=void 0,E=this.splitChildrenInRows(e,t),O=5===v.tree.children.length&&3===E[0].length,M=[],T=[];O?T=E:this.splitRows(E,M,T);var A={leftTree:M,rows:E,rightTree:T,dimensions:y},L=this.updateLeftTree(e,A,t,n,x,b);h=A.bounds;var D=void 0,k=(L||0)+(void 0!==L?e.horizontalSpacing/2:0);void 0!==L&&(v.mid=k-y.width/2,D=L+e.horizontalSpacing),x=r;var I=void 0;for(I=[],f=0;f<T.length;f++)for(w=E[f].length%2===1&&f===T.length-1||O?n:D||n,0!==f&&(x=I[f-1].bottom+e.verticalSpacing),u=0;u<T[f].length;u++)d=(a=e.nameTable[T[f][u]]).actualSize.width,p=a.actualSize.height,c=C?p:d,C?d:p,(s=e.graphNodes[a.id]).actualLevel=b+1+f,0===u&&M[f]&&M[f].length&&(s.translate=!1),O&&1===f&&(0===u&&g+c+e.horizontalSpacing<=m&&(P=!0,w=g-c/2),P&&1===u&&(w=m-c/2)),l=this.updateTree(e,w,x,a,b+1,e.nameTable[T[f][u-1]]),O&&u<=2&&0===f&&1===u&&(g=l.x-e.horizontalSpacing/2,m=l.x+c+e.horizontalSpacing/2),0===u?I[f]={x:l.x,y:l.y,right:l.right,bottom:l.bottom}:this.uniteRects(I[f],l),h||(h={x:I[f].x,y:I[f].y,right:I[f].right,bottom:I[f].bottom}),this.uniteRects(h,I[f]),w=l.right+e.horizontalSpacing,(!v.firstChild||(f===T.length-1&&E[f].length%2===1||O)&&0===u&&void 0!==s.canMoveBy&&S>s.canMoveBy)&&(S=Math.min(S,s.canMoveBy||0),v.firstChild={x:s.x,child:a.id,canMoveBy:s.canMoveBy}),A.leftCenter=g,A.rightCenter=m,A.align=P,A.level=b,A.rightBounds=I,this.alignRowsToCenter(e,f,t,A,D)}return h},e.prototype.updateLeftTree=function(e,t,i,n,r,o){for(var a,s,l,c,h,d=t.leftTree,p=e.graphNodes[i.id],u=[],f=-1!==e.orientation.indexOf("Left"),g=0;g<d.length&&d[g].length;g++){a=n,u[g-1]&&(r=u[g-1].bottom+e.verticalSpacing);for(var m=0;m<d[g].length;m++){var y=e.nameTable[d[g][m]],v=(f?y.actualSize.height:y.actualSize.width,f?y.actualSize.width:y.actualSize.height,e.graphNodes[y.id]);v.actualLevel=o+1+g,c=this.updateTree(e,a,r,y,o+1,e.nameTable[d[g][m-1]]),0===m?u[g]={x:c.x,y:c.y,right:c.right,bottom:c.bottom}:this.uniteRects(u[g],c),0===g&&0===m?(s=v.canMoveBy,p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}):0===m&&void 0!==v.canMoveBy&&s>v.canMoveBy&&(s=Math.min(s,v.canMoveBy||0),p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}),a=c.right+e.horizontalSpacing}l=0===g?u[g].right:Math.max(l,u[g].right)}for(g=0;g<d.length&&d[g].length;g++){if(l!==u[g].right){var b=l-u[g].right;for(m=0;m<d[g].length;m++){e.nameTable[d[g][m]];e.graphNodes[d[g][m]].x+=b}}0===g?h={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(h,u[g])}return t.bounds=h,l},e.prototype.alignRowsToCenter=function(e,t,i,n,r){var o,a,s,l=e.graphNodes[i.id],c=n.rows,h=n.rightTree,d=n.leftCenter,p=n.rightCenter,u=n.align,f=n.rightBounds,g=n.dimensions,m=n.level,y=5===l.tree.children.length&&3===c[0].length;if(y&&1===t&&(o=f[0].right-f[0].x>=f[1].right-f[1].x?0:1),t===c.length-1&&(c[t].length%2===1||y&&1===t)){a=h[t][Math.floor(h[t].length/2)];var v;v=e.nameTable[a];var b,w=e.graphNodes[a].x,x=e.graphNodes[a].y;b=this.getDimensions(e,v,w,x,m+1),s=void 0,!u&&y?(1===o&&(t=0),s=(f[o].x+f[o].right)/2-(f[t].x+f[t].right)/2,0===t&&(l.mid+=s)):y||void 0===r||(s=r-e.horizontalSpacing/2-(w+b.width/2)),void 0!==s&&this.updateRearBoundsOfTree(e,h[t],s,g),y&&(l.mid=(p+d)/2+(0===t?s:0)-g.width/2),void 0===l.mid&&e.graphNodes[a]&&(l.mid=w),u=!1,t++}},e.prototype.updateRearBoundsOfTree=function(e,t,i,n){for(var r=0;r<t.length;r++){var o=e.graphNodes[t[r]];e.nameTable[t[r]];if(o.x+=i,o.canMoveBy+=i,r===t.length-1){var a={x:o.x,y:o.y,right:o.x+n.width,bottom:o.y+n.height},s=this.findIntersectingLevels(e,a,o.actualLevel);this.updateRearBounds(e,null,[{rBounds:a}],o.actualLevel,s)}}},e.prototype.splitRows=function(e,t,i){for(var n=0;n<e.length;n++){t[n]=[],i[n]=[];var r=void 0;if(r=e[n].length,e[n].length%2!==1){r=Math.ceil(e[n].length/2);for(var o=0;o<r;o++)t[n].push(e[n][o])}for(var a=t[n].length;a<e[n].length;a++)i[n].push(e[n][a])}},e.prototype.updateVerticalTree=function(e,t,i,n,r,o){this.getDimensions(e,t,i,n,r);var a,s,l,c,h,d,p,u,f,g,m,y,v,b,w=e.graphNodes[t.id],x=e.nameTable[w.tree.children[0]],S=-1!==e.orientation.indexOf("Left"),C="Left"===w.tree.type?-1:0,P=i,E=n;m=r;var O,M=[],T=[];for(y=0;y<w.tree.children.length;y++){if("Alternate"===w.tree.type&&(b=y%2===0&&w.tree.children.length>2?"Left":"Right",C=y%2===0&&w.tree.children.length>2?-1:0),P=i+this.findOffset(e,t,w,b),a=e.nameTable[w.tree.children[y]],c=S?a.actualSize.height:a.actualSize.width,h=S?a.actualSize.width:a.actualSize.height,l=this.updateTree(e,P+C*c,E,a,r+1,void 0,!0),u={x:(s=e.graphNodes[a.id]).x,y:s.y,right:s.x+c,bottom:s.y+h},0===y?(this.uniteRects(l,u),p=l):this.uniteRects(p,l),!s.prevBounds||"Alternate"===w.tree.type&&y%2===1&&w.tree.children.length>2||(O=void 0!==O?Math.min(s.canMoveBy,O):s.canMoveBy),w.maxLevel=Math.max(w.maxLevel||0,s.maxLevel||0),"Alternate"===w.tree.type&&w.tree.children.length>2&&y%2===0?(0!==y&&(E=d.bottom+e.verticalSpacing/2),T.push({rBounds:u}),s.levelBounds&&(T=T.concat(s.levelBounds))):(E="Alternate"===w.tree.type&&w.tree.children.length>2?Math.max(l.bottom,d.bottom)+e.verticalSpacing/2:l.bottom+e.verticalSpacing/2,r=w.maxLevel,M.push({rBounds:u}),g?this.uniteRects(g,u):g={x:s.x,y:s.y,right:s.x+c,bottom:s.y+h},s.levelBounds&&(M=M.concat(s.levelBounds))),0===y&&(w.firstChild={x:s.x,canMoveBy:s.canMoveBy,child:a.id}),this.hasChild(e,a))if(!w.firstChild||w.firstChild.x>=s.firstChild.x){if(s.firstChild&&w.firstChild.canMoveBy<s.canMoveBy){var A=w.firstChild.canMoveBy;s.canMoveBy=A,e.graphNodes[w.firstChild.child].canMoveBy=A,w.firstChild.canMoveBy=A}w.firstChild={x:s.firstChild.x,canMoveBy:void 0!==O?O:s.canMoveBy,child:a.id}}else s.firstChild&&s.translated&&w.firstChild.canMoveBy>s.canMoveBy&&(w.firstChild.canMoveBy=e.graphNodes[w.firstChild.child].canMoveBy=s.canMoveBy);d=u}return o?w.levelBounds=M:("Alternate"===w.tree.type&&w.tree.children.length>2&&(f={x:T[0].rBounds.x,y:T[0].rBounds.y,right:T[T.length-1].rBounds.right,bottom:T[T.length-1].rBounds.bottom},v=this.findIntersectingLevels(e,f,m+1),this.updateRearBounds(e,null,T,m+1,v)),v=this.findIntersectingLevels(e,g||p,m+1),this.updateRearBounds(e,null,g?M:[{rBounds:p}],m+1,v)),isNaN(O)||(e.graphNodes[x.id].canMoveBy=O),w.childBounds=p,w.mid=i,p},e.prototype.splitChildrenInRows=function(e,t){var i,n;n=4;var r,o=[];r=(i=e.graphNodes[t.id]).tree.children.length;var a=this.extend(i.tree.children);if(i.tree.rows){var s;s=i.tree.children.length;var l;n=(l=Math.ceil(s/i.tree.rows))%2===0?l:l+1}else 3===i.tree.children.length||4===i.tree.children.length?n=2:5===i.tree.children.length&&(n=3);for(;r>0;)o[o.length]=a.splice(0,n),(r-=n)<n&&(n=r);return o},e.prototype.extend=function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},e.prototype.findOffset=function(e,t,i,n){var r=0,o=-1!==e.orientation.indexOf("Left")?t.actualSize.height:t.actualSize.width,a=n||i.tree.type;switch(r=i.tree.offset||20,"Alternate"===i.tree.type&&r>=e.horizontalSpacing&&(r=e.horizontalSpacing/2),a){case"Left":r=o/2-r;break;case"Right":r+=o/2}return r},e.prototype.uniteRects=function(e,t){e.x=Math.min(e.x,t.x),e.right=Math.max(e.right,t.right),e.bottom=Math.max(e.bottom,t.bottom)},e.prototype.spaceLeftFromPrevSubTree=function(e,t,i){var n,r,o,a,s;for(n=e.graphNodes[t.id],s=e.horizontalSpacing,a=0;a<n.intersect.length;a++)o=e.levels[n.intersect[a]].rBounds,r=i.x-(o.right+s),(void 0===n.diff||r<n.diff)&&(n.diff=r,n.prevBounds=e.levels[n.intersect[a]].rBounds)},e.prototype.findIntersectingLevels=function(e,t,i,n){var r,o,a,s;(r={x:t.x,y:t.y,right:t.right,bottom:t.bottom}).y-=e.verticalSpacing/2,r.bottom+=e.verticalSpacing/2,o=[],s=void 0!==n?n:i,a=e.levels[s]?e.levels[s].rBounds:null;do{if(a&&(r.y<a.y&&r.bottom>a.y||r.y<a.bottom&&a.bottom<r.bottom||r.y>=a.y&&r.bottom<=a.bottom||r.y<a.y&&r.bottom>a.bottom)){o.splice(0,0,s)}else if(a&&a.bottom<r.y)break;s--,a=e.levels[s]?e.levels[s].rBounds:null}while(s>=0);s=(void 0!==n?n:i)+1,a=e.levels[s]?e.levels[s].rBounds:null;do{if(a&&(r.y<a.y&&r.bottom>a.y||r.y<a.bottom&&a.bottom<r.bottom||r.y>=a.y&&r.bottom<=a.bottom||r.y<a.y&&r.bottom>a.bottom))o.push(s);else if(a&&a.y>r.bottom)break;s++,a=e.levels[s]?e.levels[s].rBounds:null}while(s<=e.levels.length);return o},e.prototype.findLevel=function(e,t,i){var n,r,o;for(n=t,r=0,o=e.levels[r]?e.levels[r].rBounds:null;r<e.levels.length;){if(o&&n.bottom<o.y)return r;r++,o=e.levels[r]?e.levels[r].rBounds:null}return r},e.prototype.getParentNode=function(e,t){return e.nameTable[e.nameTable[t.inEdges[0]].sourceID]},e.prototype.updateEdges=function(e,t,i,n,r){var o,a;if(o=e.graphNodes[t.id],t.outEdges&&t.outEdges.length&&(t.isExpanded||n===Wi.Render))for(a=0;a<t.outEdges.length;a++){var s;(s=e.nameTable[e.nameTable[t.outEdges[a]].targetID])&&!s.excludeFromLayout&&(-1===o.tree.children.indexOf(s.id)&&o.tree.children.push(s.id),s.outEdges&&s.outEdges.length&&s.isExpanded&&(o.tree.hasSubTree=!0),this.updateEdges(e,s,i+1,n,r))}o.tree.level=i,o.tree.hasSubTree&&(o.tree.orientation="Horizontal",o.tree.type="Center"),(e.getLayoutInfo||e.layoutInfo)&&"OrganizationalChart"===e.type&&(e.getLayoutInfo?e.getLayoutInfo(t,o.tree):rl(o.tree,e.layoutInfo,r,t),"Balanced"===o.tree.type&&o.tree.hasSubTree&&(o.tree.type="Center",o.tree.orientation="Horizontal")),e.level&&"Alternate"!==o.tree.type&&i>=e.level&&(o.tree.hasSubTree=!1)},e.prototype.updateAnchor=function(e,t,i){var n,r,o,a=0,s=0,l=0,c=new mi(0,0,i.x,i.y);o=e.bounds?e.bounds:c;var h=e.orientation;if(e.fixedNode){a=(r=e.nameTable[e.fixedNode]).actualSize.width,s=r.actualSize.height,e.anchorX=r.offsetX,e.anchorY=r.offsetY;var d=r.pivot;for(e.anchorX+="RightToLeft"===e.orientation?a*d.x:-a*d.x,e.anchorY+="BottomToTop"===e.orientation?s*d.y:-s*d.y,n=r,l=0;n.inEdges.length;)n=this.getParentNode(e,n),l+=e.graphNodes[n.id].subTreeTranslation||0;-1!==e.orientation.indexOf("Left")?(e.anchorX-=e.graphNodes[r.id].y,e.anchorY-=e.graphNodes[r.id].x+l):(e.anchorX-=e.graphNodes[r.id].x+l,e.anchorY-=e.graphNodes[r.id].y)}else if("TopToBottom"===h||"BottomToTop"===h){switch(e.horizontalAlignment){case"Left":e.anchorX=o.x-t.x+e.margin.left;break;case"Right":e.anchorX=o.x+o.width-e.margin.right-t.right;break;case"Auto":case"Center":e.anchorX=o.x+o.width/2-(t.x+t.right)/2}switch(e.verticalAlignment){case"Auto":case"Top":var p;p=o.y+e.margin.top,e.anchorY="TopToBottom"===h?p:t.bottom+p;break;case"Bottom":var u;u=o.y+o.height-e.margin.bottom,e.anchorY="TopToBottom"===h?u-t.bottom:u;break;case"Center":var f=void 0;f=o.y+o.height/2,e.anchorY="TopToBottom"===e.orientation?f-(t.y+t.bottom)/2:f+(t.y+t.bottom)/2}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var g;g=o.x+e.margin.left,e.anchorX="LeftToRight"===h?g:t.bottom+g;break;case"Right":var m;m=o.x+o.width-e.margin.right,e.anchorX="LeftToRight"===h?m-t.bottom:m;break;case"Center":f=void 0;f=o.width/2+o.x,e.anchorX="LeftToRight"===e.orientation?f-(t.y+t.bottom)/2:f+(t.y+t.bottom)/2}switch(e.verticalAlignment){case"Top":e.anchorY=o.y+e.margin.top-t.x;break;case"Auto":case"Center":e.anchorY=o.y+o.height/2-(t.right+t.x)/2;break;case"Bottom":e.anchorY=o.y+o.height-e.margin.bottom-t.right}}},e.prototype.updateConnectors=function(e,t,i){var n,r,o,a;if(r=e.graphNodes[t.id],t.outEdges.length)for(n=0;n<t.outEdges.length;n++)(a=e.nameTable[t.outEdges[n]]).points=[],o=e.nameTable[a.targetID],a.visible&&(a.visited=!0,e.getConnectorSegments?e.getConnectorSegments(a):r&&-1!==r.tree.children.indexOf(a.targetID)&&(a.segments=[],"OrganizationalChart"===e.type&&"Orthogonal"===a.type&&this.updateSegments(e,a,t,o,n)),o&&(o.isExpanded||this.hasChild(e,o))&&this.updateConnectors(e,o,i+1));if(r&&r.tree.assistants.length)for(n=0;n<r.tree.assistants.length;n++)o=e.nameTable[r.tree.assistants[n]],a=e.nameTable[o.inEdges[0]],this.get3Points(e,t,o,a),(o.isExpanded||this.hasChild(e,o))&&this.updateConnectors(e,o,i+1)},e.prototype.updateSegments=function(e,t,i,n,r){var o=e.graphNodes[i.id];o.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(e,i,n,t):"Horizontal"===o.tree.orientation&&"Balanced"===o.tree.type?this.updateSegmentsForBalancedTree(e,t,i,n,r):"Horizontal"===o.tree.orientation?this.updateSegmentsForHorizontalOrientation(e,i,n,t):o.tree.offset<5?this.get5Points(e,i,n,t):this.get3Points(e,i,n,t)},e.prototype.updateSegmentsForBalancedTree=function(e,t,i,n,r){var o,a=e.graphNodes[i.id];if(5===a.tree.children.length&&r>2){o=a.tree.children[1],isNaN(e.graphNodes[o].treeWidth)&&(e.graphNodes[o].treeWidth=e.nameTable[o].actualSize.width);var s=3!==r?1:-1;-1!==e.orientation.indexOf("Left")?e.nameTable[o].offsetY-e.graphNodes[o].treeWidth/2-e.verticalSpacing*s/2:e.nameTable[o].offsetX+e.graphNodes[o].treeWidth/2+e.horizontalSpacing*s/2,this.getSegmentsForMultipleRows(e,i,n,t)}else a.tree.children.length>5?r<4?this.getSegmentsForMultipleRows(e,i,n,t):this.updateSegmentsForHorizontalOrientation(e,i,n,t):4===a.tree.children.length?r<2?this.getSegmentsForMultipleRows(e,i,n,t):this.updateSegmentsForHorizontalOrientation(e,i,n,t):this.getSegmentsForMultipleRows(e,i,n,t)},e.prototype.get3Points=function(e,t,i,n){var r=[],o=this.getBounds(t),a=this.getBounds(i);if(-1!==e.orientation.indexOf("Top")){var s=0===e.orientation.indexOf("Top")?o.bottomCenter:o.topCenter,l=t.offsetX>i.offsetX?a.middleRight:a.middleLeft;r.push(s,{x:o.bottomCenter.x,y:l.y},l)}else{s=0===e.orientation.indexOf("Left")?o.middleRight:o.middleLeft,l=t.offsetY>i.offsetY?a.bottomCenter:a.topCenter;r.push(s,{x:a.bottomCenter.x,y:o.middleRight.y},l)}this.getSegmentsFromPoints(r,n)},e.prototype.get5Points=function(e,t,i,n){var r,o,a,s,l=[],c=this.getBounds(t),h=this.getBounds(i);e.graphNodes[t.id];-1!==e.orientation.indexOf("Top")?(r=t.offsetY<i.offsetY?c.bottomCenter:c.topCenter,s=e.verticalSpacing/4*(t.offsetY<i.offsetY?1:-1),a=e.horizontalSpacing/2*(t.offsetX>i.offsetX?1:-1),o=t.offsetX>i.offsetX?h.middleRight:h.middleLeft,l.push(r,{x:r.x,y:r.y+s},{x:o.x+a,y:r.y+s},{x:o.x+a,y:o.y},o)):(r=t.offsetX>i.offsetX?c.middleLeft:c.middleRight,o=t.offsetY>i.offsetY?h.bottomCenter:h.topCenter,a=e.horizontalSpacing/4*(t.offsetX<i.offsetX?1:-1),s=e.verticalSpacing/2*(t.offsetY>i.offsetY?1:-1),l.push(r,{x:r.x+a,y:r.y},{x:r.x+a,y:r.y+s},{x:o.x,y:r.y+s},o)),this.getSegmentsFromPoints(l,n)},e.prototype.getSegmentsFromPoints=function(e,t){for(var i,n=[],r=0;r<e.length-2;r++)(i=new qo(t,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(e[r],e[r+1]),i.length=ni.distancePoints(e[r],e[r+1]),n.push(i);t.segments=n},e.prototype.getSegmentsForMultipleRows=function(e,t,i,n){var r,o,a=[],s=this.getBounds(i),l=this.getBounds(t);switch(e.orientation){case"TopToBottom":r={x:l.bottomCenter.x,y:l.bottomCenter.y+e.verticalSpacing/4},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(l.bottomCenter,r),o.length=ni.distancePoints(l.bottomCenter,r),a.push(o);break;case"BottomToTop":r={x:l.bottomCenter.x,y:l.topCenter.y-e.verticalSpacing/4},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(l.topCenter,r),o.length=ni.distancePoints(l.topCenter,r),a.push(o);break;case"LeftToRight":if(r={x:l.middleRight.x+e.verticalSpacing/4,y:l.middleRight.y},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(l.middleRight,r),o.length=ni.distancePoints(l.middleRight,r),a.push(o),s.center.y!==l.center.y){var c={x:l.middleRight.x+e.verticalSpacing/4,y:s.middleLeft.y};(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(r,c),o.length=ni.distancePoints(r,c),a.push(o)}break;case"RightToLeft":if(r={x:l.middleLeft.x-e.verticalSpacing/4,y:l.middleRight.y},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(l.middleLeft,r),o.length=ni.distancePoints(l.middleLeft,r),a.push(o),s.center.y!==l.center.y){var h={x:l.middleLeft.x-e.verticalSpacing/4,y:s.middleLeft.y};(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(h,h),o.length=ni.distancePoints(h,h),a.push(o)}}n.segments=a},e.prototype.updateSegmentsForHorizontalOrientation=function(e,t,i,n){var r,o,a=[],s=this.getBounds(t),l=this.getBounds(i);switch(e.orientation){case"TopToBottom":r={x:s.bottomCenter.x,y:l.topCenter.y-e.verticalSpacing/2},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(s.bottomCenter,r),o.length=ni.distancePoints(s.bottomCenter,r),a.push(o);break;case"BottomToTop":r={x:s.topCenter.x,y:l.bottomCenter.y+e.verticalSpacing/2},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(s.topCenter,r),o.length=ni.distancePoints(s.topCenter,r),a.push(o);break;case"LeftToRight":if(r={x:l.middleLeft.x-e.verticalSpacing/2,y:s.middleRight.y},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(s.middleRight,r),o.length=ni.distancePoints(s.middleRight,r),a.push(o),l.center.y!==s.center.y){var c={x:l.middleLeft.x-e.verticalSpacing/2,y:l.middleLeft.y};(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(r,c),o.length=ni.distancePoints(r,c),a.push(o)}break;case"RightToLeft":if(r={x:l.middleRight.x+e.verticalSpacing/2,y:s.middleRight.y},(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(s.middleLeft,r),o.length=ni.distancePoints(s.middleLeft,r),a.push(o),l.center.y!==s.center.y){var h={x:l.middleRight.x+e.verticalSpacing/2,y:l.middleLeft.y};(o=new qo(n,"segments",{type:"Orthogonal"},!0)).direction=ni.direction(r,h),o.length=ni.distancePoints(r,h),a.push(o)}}return n.segments=a,[]},e.prototype.updateNodes=function(e,t,i,n,r,o){var a,s,l,c,h,d;if(t&&!t.excludeFromLayout){l=t.actualSize.width,c=t.actualSize.height,h=e.anchorX,d=e.anchorY,"LeftToRight"===e.orientation?(h+=e.graphNodes[t.id].y+l/2,d+=e.graphNodes[t.id].x+i+c/2):"RightToLeft"===e.orientation?(h-=e.graphNodes[t.id].y+l/2,d+=e.graphNodes[t.id].x+i+c/2):"TopToBottom"===e.orientation?(h+=e.graphNodes[t.id].x+i+l/2,d+=e.graphNodes[t.id].y+c/2):(h+=e.graphNodes[t.id].x+i+l/2,d-=e.graphNodes[t.id].y+c/2),e.graphNodes&&(h+=r=r||0,d+=o=o||0,this.isAnimation||(t.offsetX=h,t.offsetY=d));var p={id:t.id,differenceX:h-t.offsetX,differenceY:d-t.offsetY};e.objects.push(p);var u=void 0;if(u=[],this.hasChild(e,t))for(a=0;a<e.graphNodes[t.id].tree.children.length;a++)s=e.nameTable[e.graphNodes[t.id].tree.children[a]],this.updateNodes(e,s,i+(e.graphNodes[t.id].subTreeTranslation||0),n,r,o),u.push(s);if(e.graphNodes[t.id].tree.assistants.length)for(a=0;a<e.graphNodes[t.id].tree.assistants.length;a++)s=e.nameTable[e.graphNodes[t.id].tree.assistants[a]],this.updateNodes(e,s,i+(e.graphNodes[t.id].subTreeTranslation||0),null,r,o)}},e}(),du=function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"MindMapChart"},e.prototype.updateLayout=function(e,t,i,n,r,o){var a;if(a=this.checkRoot(e,i,r,o,t))i.fixedNode=a;else for(var s=0,l=e;s<l.length;s++){if(!(m=l[s]).excludeFromLayout&&(!m.inEdges||!m.inEdges.length)){i.fixedNode=m.id;break}}var c=t[i.fixedNode],h=this.findFirstLevelNodes(c,i,t),d=[],p=[],u=_h(i.getBranch);u=u||_h(this.getBranch);for(var f=0,g=h;f<g.length;f++){var m,y=u(m=g[f],h);"Left"===(y=m&&m.branch?m.branch:y)?d.push(m):p.push(m)}var v=new mi(0,0,n.x,n.y);t[i.fixedNode].offsetX=v.x+v.width/2,t[i.fixedNode].offsetY=v.y+v.height/2,d.length&&this.updateMindMapBranch(e,p,t,i,n,r,"Left"),p.length&&this.updateMindMapBranch(e,d,t,i,n,r,"Right")},e.prototype.checkRoot=function(e,t,i,n,r){for(var o=0,a=e;o<a.length;o++){var s=a[o];if(!s.excludeFromLayout){if(s.data&&(s.data[i].toString()===n||s.data[i].toString()===t.root))return s.id;if(!s.data&&s.id===t.root)return s.id}}return""},e.prototype.updateMindMapBranch=function(e,t,i,n,r,o,a){var s;(s={type:"HierarchicalTree",horizontalSpacing:n.verticalSpacing,verticalSpacing:n.horizontalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:_h(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,root:n.fixedNode}).orientation="Left"===a?"LeftToRight":"RightToLeft",this.excludeFromLayout(t,i,!0),(new hu).updateLayout(e,i,s,r,o),this.excludeFromLayout(t,i,!1)},e.prototype.getBranch=function(e,t){return t.indexOf(e)%2===0?"Left":"Right"},e.prototype.excludeFromLayout=function(e,t,i){for(var n=0,r=e;n<r.length;n++){t[r[n].id].excludeFromLayout=i}},e.prototype.findFirstLevelNodes=function(e,t,i){var n=[];if(e&&e.outEdges.length)for(var r=0,o=e.outEdges;r<o.length;r++){var a=o[r];n.push(i[i[a].targetID])}return n},e}(),pu=function(){function e(){}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"RadialTree"},e.prototype.updateLayout=function(e,t,i,n){var r={type:i.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(r,e,t,n)},e.prototype.doLayout=function(e,t,i,n){for(var r,o=0;o<t.length;o++)(r=t[o]).excludeFromLayout||(e.graphNodes[r.id]=this.setUpLayoutInfo(e,r),r.inEdges&&r.inEdges.length||e.firstLevelNodes.push(r));e.root&&i[e.root]?e.centerNode=i[e.root]:e.firstLevelNodes.length&&(e.centerNode=e.firstLevelNodes[0],e.root=e.centerNode.id),e.centerNode&&(this.updateEdges(e,e.centerNode,0,i),this.depthFirstAllignment(e,e.centerNode,0,0),this.populateLevels(e),this.transformToCircleLayout(e),this.updateAnchor(e,n),this.updateNodes(e,e.centerNode,i))},e.prototype.updateEdges=function(e,t,i,n){var r=e.graphNodes[t.id];e.layoutNodes.push(r),r.level=i,r.visited=!0,e.maxLevel=Math.max(e.maxLevel,i);for(var o=0;o<t.outEdges.length;o++){var a=n[n[t.outEdges[o]].targetID];a.excludeFromLayout||a.visited||(r.children.push(a),this.updateEdges(e,a,i+1,n))}},e.prototype.depthFirstAllignment=function(e,t,i,n){var r,o=e.graphNodes[t.id];if(o.children.length){n+=300;for(var a=0;a<o.children.length;a++)i=(r=this.depthFirstAllignment(e,o.children[a],i,n)).x,n=r.y;o.children=o.children.sort(function(t,i){return e.graphNodes[t.id].x-e.graphNodes[i.id].x});var s=e.graphNodes[o.children[0].id].min,l=e.graphNodes[o.children[o.children.length-1].id].max;if(o.x=s+(l-s)/2,i=l+e.horizontalSpacing,o.segmentOffset=l+e.horizontalSpacing,o.x-=o.width/2,o.y-=o.height/2,o.min=s,o.max=l,o.x<s&&o.visited){o.x=s,i=o.x+o.width/2-(l-s)/2,o.visited=!1;for(a=0;a<o.children.length;a++)r=this.depthFirstAllignment(e,o.children[a],i,n);o.visited=!0,i=o.x+o.width+e.horizontalSpacing}i=i<(l=e.graphNodes[o.children[o.children.length-1].id].segmentOffset)?l:i,n-=300,o.y=n}else o.x=i,o.y=n,o.min=i,o.max=i+o.width,i+=o.width+e.horizontalSpacing;return{x:i,y:n}},e.prototype.populateLevels=function(e){var t=[],i=Math.min.apply(Math,e.layoutNodes.map(function(e){return e.x})),n=Math.max.apply(Math,e.layoutNodes.map(function(t){return t.x+t.width+e.horizontalSpacing}))-i;e.levels=[];for(var r=function(r){var o={};t=(t=e.layoutNodes.filter(function(e){return e.level===r?e:null})).sort(function(e,t){return e.x-t.x}),o.min=t[0].x,o.max=t[t.length-1].x+t[t.length-1].width+e.horizontalSpacing,o.actualCircumference=0,o.height=0;for(var a=0;a<t.length;a++)t[a].height>o.height&&(o.height=t[a].height),o.actualCircumference+=Math.max(t[a].width,t[a].height),a!==t.length-1&&(o.actualCircumference+=e.horizontalSpacing);o.circumference=o.max-o.min,o.actualCircumference<o.circumference&&(o.circumference=(o.circumference+o.actualCircumference)/2),o.radius=o.circumference/(2*Math.PI)+o.height,o.nodes=[],r>1&&e.levels[r-1].radius+e.levels[r-1].height>=o.radius&&(o.radius=e.levels[r-1].radius+e.levels[r-1].height);for(var s=0;s<t.length;s++)t[s].ratio=Math.abs(t[s].x+t[s].width/2-i)/n,o.nodes.push(t[s]);e.levels.push(o)},o=0;o<=e.maxLevel;o++)r(o)},e.prototype.transformToCircleLayout=function(e){var t=e.graphNodes[e.centerNode.id];t.x=0,t.y=0;for(var i=1;i<e.levels.length;i++)for(var n=0;n<e.levels[i].nodes.length;n++){var r=e.levels[i].nodes[n];r.x=Math.cos(360*r.ratio*Math.PI/180)*(e.levels[i].radius+e.verticalSpacing*i),r.y=Math.sin(360*r.ratio*Math.PI/180)*(e.levels[i].radius+e.verticalSpacing*i),e.anchorX=Math.min(e.anchorX,r.x),e.anchorY=Math.min(e.anchorY,r.y)}},e.prototype.updateAnchor=function(e,t){e.anchorX=e.centerNode.offsetX||t.x/2,e.anchorY=e.centerNode.offsetY||t.y/2},e.prototype.updateNodes=function(e,t,i){var n=e.graphNodes[t.id],r=n.x+e.anchorX,o=n.y+e.anchorY;t.offsetX+=r,t.offsetY+=o;for(var a=0;a<n.children.length;a++){var s=n.children[a];this.updateNodes(e,i[s.id],i)}},e.prototype.setUpLayoutInfo=function(e,t){var i={};return i.name=t.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=t.actualSize.width,i.height=t.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i},e}(),uu=function(){function e(e){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=e;var t=mu(this.graphNode);this.location=t.center,this.nodes=[],e.treeInfo.parents||(e.treeInfo.parents=[]),e.treeInfo.children||(e.treeInfo.children=[]),this.nodes=e.treeInfo.parents.concat(e.treeInfo.children)}return e.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},e}(),fu=function(){function e(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"SymmetricalLayout"},e.prototype.doGraphLayout=function(e){var t=this.selectedNode;t.treeInfo.Bounds=e.getModelBounds(e.nodes);var i=t.treeInfo.GraphNodes,n=this.convertGraphNodes(i),r=n.length;r=Math.min(this.maxIteration,r*r*r),this.preLayoutNodes(n,t.treeInfo.Bounds);for(var o=0,a=r;o<a;o++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,t)},e.prototype.preLayoutNodes=function(e,t){for(var i=Math.max(t?t.width:25,t?t.height:25),n=i/2,r=i/2,o=2*Math.PI/e.length,a=o,s=0;s<e.length;s++){var l=e[s];this.getForceNode(l).location={x:n+i*Number(Math.cos(a).toFixed(2)),y:r+i*Number(Math.sin(a).toFixed(2))},a-=o}},e.prototype.doLayout=function(e){this.selectedNode=e.selectedNode,this.doGraphLayout(e)},e.prototype.makeSymmetricLayout=function(e){for(var t,i,n=0;n<e.length;n++){for(var r=e[n],o=(t=this.getForceNode(r)).nodes,a=0;a<o.length;a++){yu((f=o[a]).id,e)&&this.calcNodesForce(t,this.getForceNode(f))}for(var s=0,l=o.length;s<l&&!(l<2);s++){var c=this.getForceNode(o[s]),h=s+1>=l?this.getForceNode(o[0]):this.getForceNode(o[s+1]),d=360/o.length/2*Math.PI/180,p=2*this.springLength*Math.sin(d);this.calcRelatesForce(c,h,p)}for(var u=0;u<e.length;u++){var f;yu((f=e[u]).id,o)||f.id===r.id||(i=this.getForceNode(f),this.updateNeigbour(t,i))}}},e.prototype.appendForces=function(e){for(var t=null,i=0;i<e.length;i++){var n=e[i],r=(t=this.getForceNode(n)).location;r.x+=Math.min(t.velocityX,this.mszMaxForceVelocity.width),r.y+=Math.min(t.velocityY,this.mszMaxForceVelocity.height),t.velocityX=0,t.velocityY=0,t.location=r}},e.prototype.resetGraphPosition=function(e,t){for(var i,n={width:Number.MAX_VALUE,height:Number.MAX_VALUE},r=null,o=0;o<e.length;o++){i=e[o];var a={x:(r=this.getForceNode(i)).location.x-i.actualSize.width/2,y:r.location.y-i.actualSize.height/2};n.width=Math.min(n.width,a.x),n.height=Math.min(n.height,a.y)}for(o=0;o<e.length;o++){i=e[o],(a=(r=this.getForceNode(i)).location).x-=n.width-(t.treeInfo.location?t.treeInfo.location.x:0),a.y-=n.height-(t.treeInfo.location?t.treeInfo.location.y:0),r.location=a,r.applyChanges()}},e.prototype.convertGraphNodes=function(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]){var o=e[r],a=new uu(o);o.treeInfo.tag=a,t.push(o)}}return t},e.prototype.getForceNode=function(e){return e.treeInfo.tag},e.prototype.updateNeigbour=function(e,t){if(null!=t&&null!=e){var i=this.pointDistance(e.location,t.location),n=this.lineAngle(e.location,t.location),r=.9*this.springLength;i<r&&this.calcForce(i,r,n,t)}},e.prototype.lineAngle=function(e,t){var i=0,n=t.x-e.x,r=t.y-e.y;return 0===n?i=r<=0?3*Math.PI/2:Math.PI/2:0===r?i=n<0?Math.PI:0:(i=Math.atan(r/n),n<0&&r>0?i=Math.PI+i:n<0&&r<0?i=Math.PI+i:n>0&&r<0&&(i=2*Math.PI+i)),i},e.prototype.pointDistance=function(e,t){var i=0,n=t.x-e.x,r=t.y-e.y,o=n*n+r*r;return o>0&&(i=Math.sqrt(o)),i},e.prototype.calcRelatesForce=function(e,t,i){var n=this.pointDistance(e.location,t.location),r=this.lineAngle(e.location,t.location);n<i&&this.calcForce(n,i,r,t)},e.prototype.updateLayout=function(e,t,i,n,r,o){(new gu).updateLayout(e,t,i,n,r,o)},e.prototype.calcNodesForce=function(e,t){var i=this.pointDistance(e.location,t.location),n=this.lineAngle(e.location,t.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,n,t)},e.prototype.calcForce=function(e,t,i,n){var r=n.nodes.length,o=e-t,a=this.springFactor/(r*r)*Math.sqrt(r);if(0!==o){var s=o*a,l=Math.cos(i)*s,c=Math.sin(i)*s;n.velocityX-=l,n.velocityY-=c}},e}(),gu=function(){function e(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return e.prototype.updateLayout=function(e,t,i,n,r,o){this.nameTable=n,this.nodes=e,this.connectors=t;var a=e;a.length>0&&(this.mhelperSelectedNode=Oh(a[0]));for(var s=0,l=e;s<l.length;s++){var c=void 0;(c=g=l[s]).treeInfo={},c.treeInfo.graphType="Node",this.graphObjects.push(c)}for(var h=0,d=t;h<d.length;h++){var p=void 0;(p=d[h]).treeInfo={},p.treeInfo.graphType="Connector",this.graphObjects.push(p)}this.updateLayout1(this.graphObjects,i);for(var u=this.getModelBounds(a),f=0;f<a.length;f++){var g=a[f],m=(o.x-u.width)/2,y=r.margin||{};y.left=y.left||0,y.right=y.right||0,y.top=y.top||0,y.bottom=y.bottom||0,r.margin.left&&(y.left=r.margin.left),r.margin.top&&(y.top=r.margin.top);var v=g.treeInfo.tag.location.x-(g.offsetX-g.actualSize.width/2)-u.x+m+y.left,b=g.treeInfo.tag.location.y-(g.offsetY-g.actualSize.height/2)-u.y+y.top;g.offsetX+=v,g.offsetY+=b,delete g.treeInfo}return!0},e.prototype.getModelBounds=function(e){e=e.slice();for(var t,i=null,n=null,r=0;r<e.length;r++){var o=mu(t=e[r]);i=new mi(t.treeInfo.tag?t.treeInfo.tag.location.x:o.x,t.treeInfo.tag?t.treeInfo.tag.location.y:o.y,t.actualSize.width,t.actualSize.height),n=n?n.uniteRect(i):i}return n},e.prototype.updateLayout1=function(e,t){this.detectCyclesInGraph(e);var i=e.length;if(i>0){for(var n=[],r=[],o=[],a=0;a<e.length;a++){var s=e[a];void 0===s.treeInfo.isCycleEdge&&(s.treeInfo.isCycleEdge=!1),"Connector"!==s.treeInfo.graphType||s.treeInfo.isCycleEdge?"Connector"===s.treeInfo.graphType?n.push(s):o.push(s):r.push(s)}for(r=r.concat(o),r=n.concat(r);i>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(r),null!=this.selectedNode){t.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var l=0,c=this.cycleEdgesCollection;l<c.length;l++){c[l].treeInfo.isCycleEdge=!1}}this.passedNodes=null,this.selectedNode=null}return!1},e.prototype.getNodesToPosition=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!yu(i.id,this.passedNodes)){i&&this.selectNodes(i);break}}},e.prototype.selectNodes=function(e){var t=e;"Connector"===e.treeInfo.graphType?this.exploreGraphEdge(e):null!=t&&this.addNode(e,"passed")&&(this.addNode(e,"selected"),this.isConnectedToAnotherNode(t)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(t)):this.selectedNode=e)},e.prototype.selectConnectedNodes=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var i=e;if(null!=i&&this.addNode(i,"passed")){var n=i.id;if(this.dictionaryContains(t.treeInfo.GraphNodes,i)){var r=t.treeInfo.GraphNodes[n];r.treeInfo.Added&&(r.treeInfo.Added=!1,this.getConnectedRelatives(r),this.exploreRelatives(e))}else{var o=this.addGraphNode(i);this.getConnectedRelatives(o),this.exploreRelatives(e)}}},e.prototype.exploreRelatives=function(e){this.exploreRelatives1(e,"Parents"),this.exploreRelatives1(e,"Children")},e.prototype.exploreRelatives1=function(e,t){var i=[];"Parents"===t?i=e.inEdges:"Children"===t&&(i=e.outEdges);for(var n=0;n<i.length;n++){var r=this.nameTable[i[n]];if(this.addNode(r,"passed")){var o=this.nameTable[r.sourceID],a=this.nameTable[r.targetID];"Parents"===t&&null!=o&&yu(o.id,this.nodes)?this.selectConnectedNodes(this.nameTable[r.sourceID]):"Children"===t&&null!=a&&yu(a.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[r.targetID])}}},e.prototype.getConnectedRelatives=function(e){this.getConnectedParents(e),this.getConnectedChildren(e)},e.prototype.dictionaryContains=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)if(i[n]===t.id)return!0;return!1},e.prototype.dictionaryLength=function(e){return Object.keys(e).length},e.prototype.getConnectedChildren=function(e){for(var t=this.selectedNode,i=e,n=0;n<i.outEdges.length;n++){var r=this.nameTable[i.outEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.targetID];if(yu(o.id,this.nodes)&&null!=o&&o.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,o)?a=t.treeInfo.GraphNodes[o.id]:(a=this.addGraphNode(o)).treeInfo.Added=!0,e.treeInfo.children||(e.treeInfo.children=[]),a.treeInfo.parents||(a.treeInfo.parents=[]),this.setNode(a.treeInfo.parents,e),this.findNode(e.treeInfo.children,a.id)<0&&e.treeInfo.children.push(a)}}}},e.prototype.getConnectedParents=function(e){for(var t=this.selectedNode,i=e,n=0;n<i.inEdges.length;n++){var r=this.nameTable[i.inEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.sourceID];if(yu(o.id,this.nodes)&&null!=o&&o.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,o)?a=t.treeInfo.GraphNodes[o.id]:(a=this.addGraphNode(o)).treeInfo.Added=!0,e.treeInfo.parents||(e.treeInfo.parents=[]),a.treeInfo.children||(a.treeInfo.children=[]),this.setNode(a.treeInfo.children,e),this.findNode(e.treeInfo.parents,a.id)<0&&e.treeInfo.parents.push(a)}}}},e.prototype.setNode=function(e,t){var i=this.findNode(e,t.id);i>=0&&i<e.length?e[i]=t:e.push(t)},e.prototype.findNode=function(e,t){var i=-1;if(null!=e&&""!==t)for(var n=0,r=e.length;n<r;n++){var o=e[n];if("string"===typeof o&&o===t){i=n;break}if(null!=o&&o.id===t){i=n;break}}return i},e.prototype.addGraphNode=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var i=e;if(null!=t){t.treeInfo.GraphNodes[i.id]=i;var n=this.mhelperSelectedNode;null!=n&&e.id===n.id&&(this.mhelperSelectedNode=i)}return i},e.prototype.isConnectedToAnotherNode=function(e){var t=!1;return e.inEdges.concat(e.outEdges).length>0&&(null!=e.inEdges&&e.inEdges.length>0&&(t=this.searchEdgeCollection(e.inEdges,"FromNode")),!t&&null!=e.outEdges&&e.outEdges.length>0&&(t=this.searchEdgeCollection(e.outEdges,"ToNode"))),t},e.prototype.searchEdgeCollection=function(e,t){for(var i=!1,n=0;n<e.length-1;n++){var r=this.nameTable[e[n]];if(this.addNode(r,"passed")&&(!r.treeInfo.isCycleEdge&&("FromNode"===t&&null!=this.nameTable[r.sourceID]||"ToNode"===t&&null!=this.nameTable[r.targetID]))){i=!0;break}}return i},e.prototype.exploreGraphEdge=function(e){var t=e;if(null!=t&&!t.treeInfo.isCycleEdge&&this.addNode(e,"passed")){this.addNode(e,"selected");var i=this.nameTable[t.sourceID],n=this.nameTable[t.targetID];null!=i?this.selectNodes(i):null!=n?this.selectNodes(n):this.selectedNode=e}},e.prototype.addNode=function(e,t){var i=e;return"passed"!==t&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},e.prototype.detectCyclesInGraph=function(e){for(var t=[],i=[],n=0;n<e.length;n++)"Connector"!==e[n].treeInfo.graphType&&t.push(e[n]);if(t.length>0)for(i.push(t[0]),this.visitedStack.push(t[0]);i.length>0;){var r=i[i.length-1],o=this.getUnVisitedChildNodes(r);if(o.length>0){var a=o[0],s=o[o.length-1];yu(a.id,this.visitedStack)?(s.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(s)):(i.push(a),this.visitedStack.splice(0,0,a))}else i.pop()}},e.prototype.getUnVisitedChildNodes=function(e){var t=[];if(e.outEdges.length>0){for(var i=0;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]];if(!yu(n.id,this.visitedStack)){var r=this.nameTable[n.targetID];return null!=r&&t.push(r),t.push(n),this.visitedStack.splice(0,0,n),t}}return t}return t},e}();function mu(e){var t=e.offsetX-e.actualSize.width*e.pivot.x,i=e.offsetY-e.actualSize.height*e.pivot.y;return new mi(t,i,e.actualSize.width,e.actualSize.height)}function yu(e,t){for(var i=0;i<t.length;i++)if(t[i].id===e)return!0;return!1}var vu=function(){function e(){}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},e.prototype.doLayout=function(e,t,i,n){(new bu).doLayout(e,t,i,n)},e.prototype.getLayoutNodesCollection=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n]).inEdges.length+t.outEdges.length>0&&!t.parentId&&!t.processId&&i.push(t);return i},e}(),bu=function(){function e(){this.nameTable={},this.crossReduction=new xu}return e.prototype.createVertex=function(e,t,i,n,r,o){return{value:t,geometry:{x:i,y:n,width:r,height:o},name:t,vertex:!0,inEdges:e.inEdges.slice(),outEdges:e.outEdges.slice()}},e.prototype.getEdges=function(e){var t=[];if(e){for(var i=0;e.inEdges.length>0&&i<e.inEdges.length;i++)t.push(this.nameTable[e.inEdges[i]]);for(i=0;e.outEdges.length>0&&i<e.outEdges.length;i++)t.push(this.nameTable[e.outEdges[i]])}return t},e.prototype.findRoots=function(e){for(var t=[],i=null,n=-1e5,r=0,o=Object.keys(e);r<o.length;r++){for(var a=e[o[r]],s=this.getEdges(a),l=0,c=0,h=0;h<s.length;h++){this.getVisibleTerminal(s[h],!0).name===a.name?l++:c++}0===c&&l>0&&t.push(a);var d=l-c;d>n&&(n=d,i=a)}return 0===t.length&&null!=i&&t.push(i),t},e.prototype.getVisibleTerminal=function(e,t){var i=this.nameTable[e.targetID];t&&(i=this.nameTable[e.sourceID]);for(var n=0;n<this.vertices.length;n++)if(this.vertices[n].name===i.id)return this.vertices[n];return null},e.prototype.traverse=function(e,t,i,n,r,o){if(null!=e){var a=e.name;if(null==o||null!=o[a]){null==n[a]&&(n[a]=e),null!=o&&delete o[a];for(var s=this.getEdges(e),l=[],c=0;c<s.length;c++)l[c]=this.getVisibleTerminal(s[c],!0)===e;for(c=0;c<s.length;c++)if(!t||l[c]){for(var h=this.getVisibleTerminal(s[c],!l[c]),d=1,p=0;p<s.length;p++)if(p!==c){var u=l[p];this.getVisibleTerminal(s[p],!u)===h&&(u?d++:d--)}d>=0&&(n=this.traverse(h,t,s[c],n,r,o))}}else if(null==n[a])for(c=0;c<r.length;c++){var f=r[c];if(null!=f[a]){for(var g=0,m=Object.keys(f);g<m.length;g++){var y=m[g];n[y]=f[y]}return r.splice(c,1),n}}}return n},e.prototype.getModelBounds=function(e){e=e.slice();for(var t=null,i=null,n=0;n<e.length;n++)if(t=e[n].geometry,i){var r=Math.max(i.x+i.width,t.x+t.width),o=Math.max(i.y+i.height,t.y+t.height);i.x=Math.min(i.x,t.x),i.y=Math.min(i.y,t.y),i.width=r-i.x,i.height=o-i.y}else i={x:t.x,y:t.y,width:t.width,height:t.height};return i},e.prototype.doLayout=function(e,t,i,n){this.nameTable=t;var r={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top};"BottomToTop"===r.orientation?r.marginY=-i.margin.top:"RightToLeft"===r.orientation&&(r.marginX=-i.margin.left),this.vertices=[];for(var o={},a=0;a<e.length;a++){var s=this.createVertex(e[a],e[a].id,0,0,e[a].actualSize.width,e[a].actualSize.height);this.vertices.push(s),o[s.name]=s}var l,c=[];l=this.findRoots(o);for(a=0;a<l.length;a++){var h={};c.push(h),this.traverse(l[a],!0,null,h,c,o)}var d={marginX:0,marginY:0};for(a=0;a<c.length;a++){h=c[a];for(var p=[],u=0,f=Object.keys(h);u<f.length;u++){var g=f[u];p.push(h[g])}var m=new wu(this,p,l,r);this.cycleStage(m),this.layeringStage(m),this.crossingStage(m),d=this.placementStage(m,d.marginX,d.marginY)}var y=this.getModelBounds(this.vertices),v=(n.x-y.width)/2;for(a=0;a<this.vertices.length;a++){var b=this.vertices[a];if(b){var w=this.nameTable[b.name];w.offsetX=0,w.offsetY=0;var x=b.geometry.x-(w.offsetX-w.actualSize.width/2)+r.marginX,S=b.geometry.y-(w.offsetY-w.actualSize.height/2)+r.marginY,C=x,P=S;"BottomToTop"===r.orientation?P=y.height-S:"RightToLeft"===r.orientation&&(C=y.width-x),C+=v,w.offsetX+=C-w.offsetX,w.offsetY+=P-w.offsetY}}},e.prototype.placementStage=function(e,t,i){var n=this.coordinateAssignment(t,i,parent,e);return n.model=e,n.widestRankValue=null,this.placementStageExecute(n),{marginX:n.marginX+e.layout.horizontalSpacing,marginY:n.marginY+e.layout.verticalSpacing}},e.prototype.coordinateAssignment=function(e,t,i,n){var r={};return"TopToBottom"===n.layout.orientation||"BottomToTop"===n.layout.orientation?(r.horizontalSpacing=n.layout.horizontalSpacing,r.verticalSpacing=n.layout.verticalSpacing):(r.horizontalSpacing=n.layout.verticalSpacing,r.verticalSpacing=n.layout.horizontalSpacing),r.orientation="north",r.marginX=r.marginX=e,r.marginY=r.marginY=t,r},e.prototype.calculateWidestRank=function(e,t,i){var n=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(n=!0);var r=-e.verticalSpacing,o=0;e.rankSizes=[],e.rankOffset=[];for(var a=i.maxRank;a>=0;a--){for(var s=0,l=i.ranks[a],c=n?e.marginY:e.marginX,h=0;h<l.length;h++){var d=l[h];if(this.crossReduction.isVertex(d)){var p=d;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var u=this.nameTable[p.cell.name];p.width=u.actualSize.width,p.height=u.actualSize.height,s=Math.max(s,n?p.width:p.height)}}else if(d){var f=d,g=1;null!=f.edges&&(g=f.edges.length),d.width=10*(g-1)}n&&(d.height||(d.height=0)),c+=(n?d.height:d.width)/2,this.setXY(d,a,c,!!n),this.setTempVariable(d,a,c),(c+=(n?d.height:d.width)/2+e.horizontalSpacing)>e.widestRankValue&&(e.widestRankValue=c,e.widestRank=a),e.rankSizes[a]=c}e.rankOffset[a]=r;var m=s/2+o/2+e.verticalSpacing;o=s,"north"===e.orientation||"west"===e.orientation?r+=m:r-=m;for(h=0;h<l.length;h++){var y=l[h];this.setXY(y,a,r,!n)}}},e.prototype.setTempVariable=function(e,t,i){this.crossReduction.isVertex(e)?e.temp[0]=i:e.temp[t-e.minRank-1]=i},e.prototype.setXY=function(e,t,i,n){e&&e.cell&&(e.cell.inEdges||e.cell.outEdges?n?e.y[0]=i:e.x[0]=i:n?e.y[t-e.minRank-1]=i:e.x[t-e.minRank-1]=i)},e.prototype.rankCoordinates=function(e,t,i,n){var r=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(r=!0);for(var o=n.ranks[t],a=0,s=(r?e.marginY:e.marginX)+(e.widestRankValue-e.rankSizes[t])/2,l=0;l<o.length;l++){var c=o[l];if(this.crossReduction.isVertex(c)){var h=this.nameTable[c.cell.name];c.width=h.actualSize.width,c.height=h.actualSize.height,a=Math.max(a,c.height)}else{var d=c,p=1;null!=d.edges&&(p=d.edges.length),r?c.height=10*(p-1):c.width=10*(p-1)}var u=(r?c.height:c.width)/2;s+=u,this.setXY(c,t,s,!!r),this.setTempVariable(c,t,s),s+=u+e.horizontalSpacing}},e.prototype.initialCoords=function(e,t,i){this.calculateWidestRank(e,t,i);for(var n=e.widestRank;n>=0;n--)n<i.maxRank&&this.rankCoordinates(e,n,t,i);for(n=e.widestRank+1;n<=i.maxRank;n++)n>0&&this.rankCoordinates(e,n,t,i)},e.prototype.isAncestor=function(e,t){if(null!=t&&null!=e.hashCode&&null!=t.hashCode&&e.hashCode.length<t.hashCode.length){if(e.hashCode===t.hashCode)return!0;if(null==e.hashCode||null==e.hashCode)return!1;for(var i=0;i<e.hashCode.length;i++)if(e.hashCode[i]!==t.hashCode[i])return!1;return!0}return!1},e.prototype.weightedCellSorter=function(e,t){var i={};return i.cell=e||null,i.weightedValue=t||0,i.visited=!1,i.rankIndex=null,i},e.prototype.minNode=function(e,t){for(var i=[],n={map:{}},r=[],o=0;o<=t.maxRank;o++){r[o]=t.ranks[o];for(var a=0;a<r[o].length;a++){var s=r[o][a],l=this.weightedCellSorter(s,o);l.rankIndex=a,l.visited=!0,i.push(l),t.setDictionaryForSorter(n,s,l,!0)}}for(var c=10*i.length,h=0;i.length>0&&h<=c;){var d=i.shift(),p=d.cell,u=d.weightedValue,f=d.rankIndex,g=this.crossReduction.getConnectedCellsOnLayer(p,u),m=this.crossReduction.getConnectedCellsOnLayer(p,u,!0),y=g.length,v=m.length,b=this.medianXValue(e,g,u+1),w=this.medianXValue(e,m,u-1),x=y+v,S=this.crossReduction.getTempVariable(p,u),C=S;x>0&&(C=(b*y+w*v)/x),1===y&&1===v?C=w*v/v:1===y&&(C=b*y/y);var P=!1,E=void 0;if(C<S-1)if(0===f)E=C,P=!0;else{var O=r[u][f-1],M=this.crossReduction.getTempVariable(O,u);(M=M+O.width/2+e.intraCellSpacing+p.width/2)<C?(E=C,P=!0):M<this.crossReduction.getTempVariable(p,u)-1&&(E=M,P=!0)}else if(C>S+1){if(f===r[u].length-1)E=C,P=!0;else{var T=r[u][f+1],A=this.crossReduction.getTempVariable(T,u);(A=A-T.width/2-e.intraCellSpacing-p.width/2)>C?(E=C,P=!0):A>this.crossReduction.getTempVariable(p,u)+1&&(E=A,P=!0)}}P&&(this.setTempVariable(p,u,E),this.updateNodeList(i,n,g,t),this.updateNodeList(i,n,m,t)),this.crossReduction.isVertex(d.cell)&&(d.visited=!1),h++}},e.prototype.updateNodeList=function(e,t,i,n){for(var r=0;r<i.length;r++){var o=i[r],a=n.getDictionaryForSorter(t,o);null!=a&&!1===a.visited&&(a.visited=!0,e.push(a))}},e.prototype.medianXValue=function(e,t,i){if(0===t.length)return 0;for(var n=[],r=0;r<t.length;r++)n[r]=this.crossReduction.getTempVariable(t[r],i);if(n.sort(function(e,t){return e-t}),t.length%2===1)return n[Math.floor(t.length/2)];var o=t.length/2;return(n[o-1]+n[o])/2},e.prototype.placementStageExecute=function(e){var t=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(t=!0),e.jettyPositions={};var i=e.model;t?e.currentYDelta=0:e.currentXDelta=0,this.initialCoords(e,{model:i},i),this.minNode(e,i);var n=1e8;e.maxIterations||(e.maxIterations=8);for(var r=0;r<e.maxIterations;r++){if((t?e.currentYDelta:e.currentXDelta)<n){for(var o=0;o<i.ranks.length;o++)for(var a=i.ranks[o],s=0;s<a.length;s++){var l=a[s];this.setXY(l,o,this.crossReduction.getTempVariable(l,o),!!t)}n=t?e.currentYDelta:e.currentXDelta}t?e.currentYDelta=0:e.currentXDelta=0}this.setCellLocations(e,i)},e.prototype.setCellLocations=function(e,t){for(var i=this.getValues(t.vertexMapper),n=0;n<i.length;n++)this.setVertexLocation(e,i[n])},e.prototype.garphModelsetVertexLocation=function(e,t,i,n){e.model;var r=t.geometry,o=null;return null!=r&&(o={x:i,y:n,width:r.width,height:r.height},r.x===i&&r.y===n||(t.geometry=o)),o},e.prototype.setVertexLocation=function(e,t){var i=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(i=!0);var n=t.cell,r=t.x[0]-t.width/2,o=t.y[0]-t.height/2;this.garphModelsetVertexLocation(e,n,r,o),i?(e.marginY||(e.marginY=0),e.marginY=Math.max(e.marginY,o+t.height)):(e.marginX||(e.marginX=0),e.marginX=Math.max(e.marginX,r+t.width))},e.prototype.getValues=function(e){var t=[];if(e.map)for(var i=0,n=Object.keys(e.map);i<n.length;i++){var r=n[i];t.push(e.map[r])}return t},e.prototype.crossingStage=function(e){this.crossReduction.execute(e)},e.prototype.layeringStage=function(e){this.initialRank(e),this.fixRanks(e)},e.prototype.initialRank=function(e){for(var t=e.startNodes,i=e.getDictionaryValues(e.vertexMapper),n=t.slice();t.length>0;){for(var r=(d=t[0]).connectsAsTarget,o=d.connectsAsSource,a=!0,s=1e8,l=0;l<r.length;l++){if(5270620!==(f=r[l]).temp[0]){a=!1;break}var c=f.source;s=Math.min(s,c.temp[0]-1)}if(a){if(d.temp[0]=s,e.maxRank||(e.maxRank=1e8),e.maxRank=Math.min(e.maxRank,s),null!=o)for(l=0;l<o.length;l++){(f=o[l]).temp[0]=5270620,-1===(c=f.target).temp[0]&&(t.push(c),c.temp[0]=-2)}t.shift()}else{var h=t.shift();if(t.push(d),h===d&&1===t.length)break}}for(l=0;l<i.length;l++)i[l].temp[0]-=e.maxRank;for(l=0;l<n.length;l++)for(var d,p=0,u=(r=(d=n[l]).connectsAsSource,0);u<r.length;u++){var f;c=(f=r[u]).target;d.temp[0]=Math.max(p,c.temp[0]+1),p=d.temp[0]}e.maxRank=1e8-e.maxRank},e.prototype.fixRanks=function(e){e.fixRanks()},e.prototype.cycleStage=function(e){var t={};e.startNodes=[];for(var i=e.getDictionaryValues(e.vertexMapper),n=[],r=0;r<i.length;r++)i[r].temp[0]=-1,n[i[r].id]=i[r];var o=null;if(null!=e.roots){var a=e.roots;o=[];for(r=0;r<a.length;r++)o[r]=e.getDictionary(e.vertexMapper,a[r]),null!=o[r]&&e.startNodes.push(o[r])}e.visit("removeParentConnection",o,!0,null,{seenNodes:t,unseenNodes:n});var s=e.clone(t,null,!0);e.visit("removeNodeConnection",n,!0,s,{seenNodes:t,unseenNodes:n})},e.prototype.remove=function(e,t){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),e},e.prototype.invert=function(e,t){var i=e.source;e.source=e.target,e.target=i,e.isReversed=!e.isReversed},e.prototype.getEdgesBetween=function(e,t,i){i=null!=i&&i;for(var n=this.getEdges(e),r=[],o=0;o<n.length;o++){var a=this.getVisibleTerminal(n[o],!0),s=this.getVisibleTerminal(n[o],!1);(a===e&&s===t||!i&&a===t&&s===e)&&r.push(n[o])}return r},e}(),wu=function(){function e(e,t,i,n){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new bu,this.roots=i,this.vertexMapper={map:{}};var r=[];this.layout=n,this.maxRank=1e8,this.hierarchicalLayout=e,this.createInternalCells(e,t,r);for(var o=0;o<t.length;o++){for(var a=r[o].connectsAsSource,s=0;s<a.length;s++){var l=a[s],c=l.edges;if(null!=c&&c.length>0){var h=c[0],d=e.getVisibleTerminal(h,!1),p=this.getDictionary(this.vertexMapper,d);r[o]===p&&(d=e.getVisibleTerminal(h,!0),p=this.getDictionary(this.vertexMapper,d)),null!=p&&r[o]!==p&&(l.target=p,0===p.connectsAsTarget.length&&(p.connectsAsTarget=[]),p.connectsAsTarget.indexOf(l)<0&&p.connectsAsTarget.push(l))}}r[o].temp[0]=1}}return e.prototype.createInternalCells=function(e,t,i){for(var n=0;n<t.length;n++){i[n]={x:[],y:[],temp:[],cell:t[n],id:t[n].name,connectsAsTarget:[],connectsAsSource:[]},this.setDictionary(this.vertexMapper,t[n],i[n]);var r=e.getEdges(t[n]);i[n].connectsAsSource=[];for(var o=0;o<r.length;o++){var a=e.getVisibleTerminal(r[o],!1);if(a!==t[n]){var s=e.getEdgesBetween(t[n],a,!1),l=e.getEdgesBetween(t[n],a,!0);if(null!=s&&s.length>0&&2*l.length>=s.length){for(var c={x:[],y:[],temp:[],edges:s,ids:[]},h=0;h<s.length;h++)c.ids.push(s[h].id);c.source=i[n],i[n].connectsAsSource||(i[n].connectsAsSource=[]),i[n].connectsAsSource.indexOf(c)<0&&i[n].connectsAsSource.push(c)}}}i[n].temp[0]=0}},e.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var i=null;if(null!=this.roots){var n=this.roots;i=[];for(t=0;t<n.length;t++){var r=n[t],o=this.getDictionary(this.vertexMapper,r);i[t]=o}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:e})},e.prototype.updateMinMaxRank=function(e,t,i){i.seenNodes,i.unseenNodes;var n=i.parent,r=i.root,o=i.edge,a=i.rankList;if((r.maxRank||0===r.maxRank||(r.maxRank=-1),r.minRank||0===r.minRank||(r.minRank=-1),0===t&&r.maxRank<0&&r.minRank<0&&(a[r.temp[0]].push(r),r.maxRank=r.temp[0],r.minRank=r.temp[0],r.temp[0]=a[r.maxRank].length-1),null!=n&&null!=o)&&n.maxRank-r.maxRank>1){o.maxRank=n.maxRank,o.minRank=r.maxRank,o.temp=[],o.x=[],o.y=[];for(var s=o.minRank+1;s<o.maxRank;s++)a[s].push(o),this.hierarchicalUtil.setTempVariable(o,s,a[s].length-1)}},e.prototype.setDictionary=function(e,t,i){var n=t.name,r=e.map[n];return e.map[n]=i,r},e.prototype.setDictionaryForSorter=function(e,t,i,n){var r=t.id,o=e.map[r];return e.map[r]=i,o},e.prototype.getDictionary=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=t.name;return i?e.map[i]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryForSorter=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=t.id;return i?e.map[i]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryValues=function(e){for(var t=[],i=0,n=Object.keys(e.map);i<n.length;i++){var r=n[i];t.push(e.map[r])}return t},e.prototype.visit=function(e,t,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;if(null!=t){for(var o=0;o<t.length;o++){var a=t[o];null!=a&&(null==n&&(n=new Object),r.parent=null,r.root=a,r.edge=null,i?(a.hashCode=[],a.hashCode[0]=this.dfsCount,a.hashCode[1]=o,this.extendedDfs(e,n,o,0,r)):this.depthFirstSearch(e,n,0,r))}this.dfsCount++}},e.prototype.depthFirstSearch=function(e,t,i,n){n.seenNodes,n.unseenNodes,n.rankList,n.parent;var r=n.root;n.edge;if(null!=r){var o=r.id;if(null==t[o]){t[o]=r,this.updateConnectionRank(e,i,0,n);for(var a=r.connectsAsSource.slice(),s=0;s<a.length;s++){var l=a[s],c=l.target;n.parent=r,n.root=c,n.edge=l,this.depthFirstSearch(e,t,i+1,n)}}else this.updateConnectionRank(e,i,1,n)}},e.prototype.updateConnectionRank=function(e,t,i,n){var r=n.parent,o=n.root,a=n.edge;if("removeParentConnection"===e||"removeNodeConnection"===e){var s="removeNodeConnection"===e;this.removeConnectionEdge(r,o,a,t,n,s)}"updateMinMaxRank"===e&&this.updateMinMaxRank(t,i,n)},e.prototype.removeConnectionEdge=function(e,t,i,n,r,o){var a=r.seenNodes,s=r.unseenNodes;r.rankList;this.hierarchicalUtil.isAncestor(t,e)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,e.connectsAsSource),o?(t.connectsAsSource.push(i),e.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,t.connectsAsTarget)):(e.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,t.connectsAsTarget),t.connectsAsSource.push(i))),a[t.id]=t,delete s[t.id]},e.prototype.extendedDfs=function(e,t,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;var o=r.parent,a=r.root;r.edge;if(null!=a){if(null!=o&&(null==a.hashCode||a.hashCode[0]!==o.hashCode[0])){var s=o.hashCode.length+1;a.hashCode=o.hashCode.slice(),a.hashCode[s-1]=i}var l=a.id;if(null==t[l]){t[l]=a,this.updateConnectionRank(e,n,0,r);for(var c=a.connectsAsSource.slice(),h=0;h<c.length;h++){var d=c[h],p=d.target;r.parent=a,r.root=p,r.edge=d,this.extendedDfs(e,t,h,n+1,r)}}else this.updateConnectionRank(e,n,1,r)}},e.prototype.clone=function(e,t,i){if(i=null!=i&&i,null!=e&&"function"===typeof e.constructor){for(var n=e.constructor(),r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];"layoutObjectId"!==a&&(null==t||t.indexOf(a)<0)&&(i||"object"!==typeof e[a])&&(n[a]=e[a])}return n}return null},e}(),xu=function(){function e(){}return e.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,i=0,n=1;n<t;n++)i+=this.calculateRankCrossing(n,e);return i},e.prototype.getTempVariable=function(e,t){return e?this.isVertex(e)?e.temp[0]:e.temp[t-e.minRank-1]:0},e.prototype.calculateRankCrossing=function(e,t){for(var i=0,n=t.ranks[e],r=t.ranks[e-1],o=[],a=0;a<n.length;a++){for(var s=n[a],l=this.getTempVariable(s,e),c=this.getConnectedCellsOnLayer(s,e,!0),h=[],d=0;d<c.length;d++){var p=c[d],u=this.getTempVariable(p,e-1);h.push(u)}h.sort(function(e,t){return e-t}),o[l]=h}var f=[];for(a=0;a<o.length;a++)f=f.concat(o[a]);for(var g=1;g<r.length;)g<<=1;var m=2*g-1;g-=1;var y=[];for(a=0;a<m;++a)y[a]=0;for(a=0;a<f.length;a++){var v=f[a]+g;for(++y[v];v>0;)v%2&&(i+=y[v+1]),++y[v=v-1>>1]}return i},e.prototype.execute=function(e){this.nestedBestRanks=[];for(var t=0;t<e.ranks.length;t++)this.nestedBestRanks[t]=e.ranks[t].slice();var i=0,n=this.calculateCrossings(e);for(t=0;t<24&&i<2;t++){this.weightedMedian(t,e);var r=this.calculateCrossings(e);if(r<n){n=r,i=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var a=e.ranks[o],s=0;s<a.length;s++){var l=a[s],c=this.nestedBestRanks[o][l.temp[0]],h=!0;l.edges&&c&&!c.edges&&(h=!1),c&&h&&(this.nestedBestRanks[o][l.temp[0]]=l)}}else{i++;for(o=0;o<this.nestedBestRanks.length;o++)for(a=e.ranks[o],s=0;s<a.length;s++){l=a[s];this.setTempVariable(l,o,s)}}if(0===n)break}var d=[],p=[];for(t=0;t<e.maxRank+1;t++)p[t]=[],d[t]=p[t];for(t=0;t<this.nestedBestRanks.length;t++)for(o=0;o<this.nestedBestRanks[t].length;o++)p[t].push(this.nestedBestRanks[t][o]);e.ranks=d},e.prototype.isVertex=function(e){return!(!e||!e.cell||!e.cell.inEdges&&!e.cell.outEdges)},e.prototype.weightedMedian=function(e,t){var i=e%2===0;if(i)for(var n=t.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(n=1;n<t.maxRank;n++)this.medianRank(n,i)},e.prototype.getConnectedCellsOnLayer=function(e,t,i){void 0===i&&(i=!1);var n="nextLayerConnectedCells",r="connectsAsTarget";if(i&&(n="previousLayerConnectedCells",r="connectsAsSource"),e){if(this.isVertex(e)){if(null==e[n]){e[n]=[],e[n][0]=[];for(var o=0;o<e[r].length;o++){var a=e[r][o];void 0===a.maxRank&&(a.maxRank=-1),-1===a.maxRank||(i?a.minRank===t-1:a.maxRank===t+1)?e[n][0].push(i?a.target:a.source):e[n][0].push(a)}}return e[n][0]}if(null==e[n]){e[n]=[];for(o=0;o<e.temp.length;o++)e[n][o]=[],o===(i?0:e.temp.length-1)?e[n][o].push(i?e.target:e.source):e[n][o].push(e)}return e[n][t-e.minRank-1]}return null},e.prototype.medianValue=function(e,t){for(var i=[],n=0,r=0;r<e.length;r++){var o=e[r];i[n++]=this.getTempVariable(o,t)}if(i.sort(function(e,t){return e-t}),n%2===1)return i[Math.floor(n/2)];if(2===n)return(i[0]+i[1])/2;var a=n/2,s=i[a-1]-i[0],l=i[n-1]-i[a];return(i[a-1]*l+i[a]*s)/(s+l)},e.prototype.setTempVariable=function(e,t,i){e&&(e.temp[0]=i)},e.prototype.medianRank=function(e,t){for(var i=this.nestedBestRanks[e].length,n=[],r=[],o=0;o<i;o++){var a=this.nestedBestRanks[e][o],s={medianValue:0};s.cell=a;var l=void 0,c=void 0;c=t?e+1:e-1,null!=(l=t?this.getConnectedCellsOnLayer(a,e):this.getConnectedCellsOnLayer(a,e,!0))&&0!==l.length?(s.medianValue=this.medianValue(l,c),n.push(s)):r[this.getTempVariable(a,e)]=!0}n.sort(this.compare);for(o=0;o<i;o++)if(null==r[o]&&n.length>0){a=n.shift().cell;this.setTempVariable(a,e,o)}},e.prototype.compare=function(e,t){if(null!=e&&null!=t){if(t.medianValue>e.medianValue)return-1;if(t.medianValue<e.medianValue)return 1}return 0},e}(),Su=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Pu="e-acrdn-item",Eu="e-acrdn-header",Ou="e-acrdn-panel",Mu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Su(t,e),Cu([pe("SlideDown")],t.prototype,"effect",void 0),Cu([pe(400)],t.prototype,"duration",void 0),Cu([pe("linear")],t.prototype,"easing",void 0),t}(ke),Tu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Su(t,e),Cu([ue({effect:"SlideUp",duration:400,easing:"linear"},Mu)],t.prototype,"collapse",void 0),Cu([ue({effect:"SlideDown",duration:400,easing:"linear"},Mu)],t.prototype,"expand",void 0),t}(ke),Au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Su(t,e),Cu([pe(null)],t.prototype,"content",void 0),Cu([pe(null)],t.prototype,"header",void 0),Cu([pe(null)],t.prototype,"cssClass",void 0),Cu([pe(null)],t.prototype,"iconCss",void 0),Cu([pe(!1)],t.prototype,"expanded",void 0),t}(ke),Lu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return Su(t,e),t.prototype.destroy=function(){var t=this,i=this.element;for(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null);i.firstElementChild;)i.removeChild(i.firstElementChild);if(this.trgtEle)for(;this.ctrlTem.firstElementChild;)i.appendChild(this.ctrlTem.firstElementChild);i.classList.remove("e-acrdn-root"),i.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(function(e){t.element.removeAttribute(e)})},t.prototype.preRender=function(){var e=z(this.element,"."+Ou);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),d(e)?this.element.classList.add("e-acrdn-root"):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,"e-rtl"),this.enablePersistence&&!d(this.expandedItems)||(this.expandedItems=[])},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),y()&&this.renderComplete()},t.prototype.initialize=function(){var e=m(this.width),t=m(this.height);H(this.element,{width:e,height:t});this.expandedItems.length>0&&(this.initExpand=this.expandedItems),R(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?N("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.unwireEvents=function(){S.remove(this.element,"click",this.clickHandler),d(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){S.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||Ce(this.element,{selector:"."+Eu}),this.isNested||(this.keyModule=new wt(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},t.prototype.ctrlTemplate=function(){var e;this.ctrlTem=this.element.cloneNode(!0);var t=N(".e-accordion-container",this.element);e=t?t.children:this.element.children;var i=[];[].slice.call(e).forEach(function(e){i.push({header:e.childElementCount>0&&e.children[0]?e.children[0].innerHTML:"",content:e.childElementCount>1&&e.children[1]?e.children[1].innerHTML:""}),e.parentNode.removeChild(e)}),t&&this.element.removeChild(t),this.setProperties({items:i},!0)},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:"e-toggle-icon"}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e)if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[t])},t.prototype.renderItems=function(){var e,t=this,i=this.element;d(this.initExpand)&&(this.initExpand=[]),d(this.trgtEle)||this.ctrlTemplate();var n=this.items;i&&n.length>0&&n.forEach(function(n,r){e=t.renderInnerItem(n,r),i.appendChild(e);var o=Object.keys(window);n.header&&o.indexOf("Blazor")>-1&&!t.isStringTemplate&&0===n.header.indexOf("<div>Blazor")&&Kt(t.element.id+r+"_header","HeaderTemplate",n),e.childElementCount>0&&(S.add(e.querySelector("."+Eu),"focus",t.focusIn,t),S.add(e.querySelector("."+Eu),"blur",t.focusOut,t))})},t.prototype.clickHandler=function(e){var t,i,n=this,r=e.target,o={};if(z(r,".e-accordion")===this.element){r.classList.add("e-target");var a,s=z(r,"."+Pu),l=z(r,"."+Eu),c=z(r,"."+Ou);s&&(d(l)||d(c))&&(l=s.children[0],c=s.children[1]),l&&(i=N(".e-toggle-icon",l)),l?a=z(l,"."+Pu):c&&(a=z(c,"."+Pu));var h=[];if(t=this.getIndexByItem(s),a&&(o.item=this.items[this.getIndexByItem(a)]),o.originalEvent=e,!d(i)&&s.childElementCount<=1&&(d(c)||!d(N(".e-acrdn-header .e-toggle-icon",a)))){s.appendChild(this.contentRendering(t));var p=Object.keys(window);o.item.content&&p.indexOf("Blazor")>-1&&!this.isStringTemplate&&0===o.item.content.indexOf("<div>Blazor")&&Kt(this.element.id+t+"_content","ContentTemplate",o.item),this.ariaAttrUpdate(s)}this.trigger("clicked",o);var u=c&&!d(N(".e-target",c)),f=c&&!d(N(".e-accordion",c))&&d(z(r,".e-acrdn-panel .e-accordion")),g=c&&d(N(".e-accordion",c))||!(z(r,".e-accordion")===this.element);if(u=u&&(f||g),r.classList.remove("e-target"),!(r.classList.contains(Ou)||r.classList.contains("e-acrdn-content")||u)){var m=this.element.querySelector(".e-accordion-container"),y=m?m.children:this.element.children;[].slice.call(y).forEach(function(e){e.classList.contains("e-active")&&h.push(e)});var v=[].slice.call(this.element.querySelectorAll(".e-acrdn-item [e-animate]"));if(v.length>0)for(var b=0,w=v;b<w.length;b++){var x=w[b];h.push(x.parentElement)}var S=-1!==h.indexOf(a)&&"true"===c.getAttribute("e-animate"),C=!1;if(!d(s)&&!d(l)){var P=N("."+Ou,s),E=z(s,".e-acrdn-root").querySelector(".e-expand-state");if(d(P))return;C=E===s,!T(P)||S&&!a.classList.contains("e-selected")?(h.length>0&&"Single"===this.expandMode&&!S&&h.forEach(function(e){n.collapse(N("."+Ou,e)),e.classList.remove("e-expand-state")}),this.expand(P)):this.collapse(P),d(E)||C||E.classList.remove("e-expand-state")}}}},t.prototype.eleMoveFocus=function(e,t,i){var n,r=z(i,"."+Pu);i===t?n=("moveUp"===e?i.lastElementChild:i).querySelector("."+Eu):i.classList.contains(Eu)&&(r="moveUp"===e?r.previousElementSibling:r.nextElementSibling)&&(n=N("."+Eu,r)),n&&n.focus()},t.prototype.keyActionHandler=function(e){var t=e.target;if(!d(z(e.target,Eu))||t.classList.contains("e-accordion")||t.classList.contains(Eu)){var i,n=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,n,t);break;case"space":case"enter":!d(i=t.nextElementSibling)&&i.classList.contains(Ou)?"true"!==i.getAttribute("e-animate")&&t.click():t.click();break;case"home":case"end":("home"===e.action?n.firstElementChild.children[0]:n.lastElementChild.children[0]).focus()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:Eu,id:u("acrdn_header")});return R(e,{tabindex:"0",role:"heading","aria-expanded":"false","aria-selected":"false","aria-disabled":"false","aria-level":this.items.length.toString()}),e},t.prototype.renderInnerItem=function(e,t){var i;if((i=this.createElement("div",{className:Pu})).id=u("acrdn_item"),e.header&&this.angularnativeCondiCheck(e,"header")){var n=this.headerEleGenerate(),r=this.createElement("div",{className:"e-acrdn-header-content"});n.appendChild(r),n.appendChild(this.fetchElement(r,e.header,t,!0)),i.appendChild(n)}var o=N("."+Eu,i);if(!e.expanded||d(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&i.classList.add(e.cssClass),e.iconCss){var a=this.createElement("div",{className:"e-acrdn-header-icon"}),s=this.createElement("span",{className:e.iconCss+" e-icons"});a.appendChild(s),d(o)?((o=this.headerEleGenerate()).appendChild(a),i.appendChild(o)):o.insertBefore(a,o.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var l=this.toggleIconGenerate();d(o)&&(o=this.headerEleGenerate(),i.appendChild(o)),o.appendChild(l),this.add(i,"e-select")}return i},t.prototype.angularnativeCondiCheck=function(e,t){var i="content"===t?e.content:e.header;if(this.isAngular&&!d(i.elementRef)){var n=i.elementRef.nativeElement.data;if(d(n)||""===n||-1===n.indexOf("bindings="))return!0;var r=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!d(r)&&"false"===r["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,i,n){var r,o,a,s=Object.keys(window);try{if(document.querySelectorAll(t).length){var l=document.querySelector(t);o=l.outerHTML.trim(),e.appendChild(l),l.style.display=""}}catch(h){"string"===typeof t&&s.indexOf("Blazor")>-1&&0!==t.indexOf("<div>Blazor")?e.innerHTML=t:r=Qt(t)}if(!d(r)){var c=void 0;e.classList.contains("e-acrdn-header-content")?c=this.element.id+i+"_header":e.classList.contains("e-acrdn-content")&&(c=this.element.id+i+"_content"),a=r({},null,null,c,this.isStringTemplate)}return d(a)||!(a.length>0)||d(a[0].tagName)&&1===a.length?0===e.childElementCount&&(e.innerHTML=t):[].slice.call(a).forEach(function(t){d(t.tagName)||(t.style.display=""),e.appendChild(t)}),d(o)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=N("."+Eu,e),i=N("."+Ou,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id)},t.prototype.contentRendering=function(e){var t=this.items[e].content,i=this.createElement("div",{className:Ou+" e-content-hide",id:u("acrdn_panel")});R(i,{"aria-hidden":"true"});var n=this.createElement("div",{className:"e-acrdn-content"});return i.appendChild(this.fetchElement(n,t,e,!1)),i},t.prototype.expand=function(e){var t,i=this,n=z(e,"."+Pu);if(!(d(e)||T(e)&&"true"!==e.getAttribute("e-animate")||n.classList.contains("e-overlay"))){var r=z(n,".e-acrdn-root").querySelector(".e-expand-state"),o={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},a=N(".e-toggle-icon",n).firstElementChild;t={element:n,item:this.items[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+Ou),isExpanded:!0};var s=o.name;this.trigger("expanding",t,function(t){t.cancel||(a.classList.add("e-toggle-animation"),i.expandedItemsPush(n),d(r)||r.classList.remove("e-expand-state"),n.classList.add("e-expand-state"),"None"===o.name?(i.expandProgress("begin",a,e,n,t),i.expandProgress("end",a,e,n,t)):i.expandAnimation(s,a,e,n,o,t))})}},t.prototype.expandAnimation=function(e,t,i,n,r,o){var a,s=this;this.lastActiveItemId=n.id,"SlideDown"===e?(r.begin=function(){s.expandProgress("begin",t,i,n,o),i.style.position="absolute",a=n.offsetHeight,i.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},r.progress=function(){n.style.minHeight=a+i.offsetHeight+"px"},r.end=function(){H(i,{position:"",maxHeight:""}),n.style.minHeight="",s.expandProgress("end",t,i,n,o)}):(r.begin=function(){s.expandProgress("begin",t,i,n,o)},r.end=function(){s.expandProgress("end",t,i,n,o)}),new Se(r).animate(i)},t.prototype.expandProgress=function(e,t,i,n,r){this.remove(i,"e-content-hide"),this.add(n,"e-selected"),this.add(t,"e-expand-icon"),"end"===e&&(this.add(n,"e-active"),i.setAttribute("aria-hidden","false"),R(i.previousElementSibling,{"aria-selected":"true","aria-expanded":"true"}),t.classList.remove("e-toggle-animation"),this.trigger("expanded",r))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);-1===this.expandedItems.indexOf(t)&&this.expandedItems.push(t)},t.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},t.prototype.getItemElements=function(){var e=[],t=this.element.children;return[].slice.call(t).forEach(function(t){t.classList.contains(Pu)&&e.push(t)}),e},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e);this.expandedItems.splice(this.expandedItems.indexOf(t),1)},t.prototype.collapse=function(e){var t,i=this,n=z(e,"."+Pu);if(!d(e)&&T(e)&&!n.classList.contains("e-overlay")){var r={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},o=N(".e-toggle-icon",n).firstElementChild;t={element:n,item:this.items[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+Ou),isExpanded:!1};var a=r.name;this.trigger("expanding",t,function(t){t.cancel||(i.expandedItemsPop(n),n.classList.add("e-expand-state"),o.classList.add("e-toggle-animation"),"None"===r.name?(i.collapseProgress("begin",o,e,n,t),i.collapseProgress("end",o,e,n,t)):i.collapseAnimation(a,e,n,o,r,t))})}},t.prototype.collapseAnimation=function(e,t,i,n,r,o){var a,s,l,c,h=this;this.lastActiveItemId=i.id,"SlideUp"===e?(r.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",a=i.offsetHeight,s=t.offsetHeight,t.style.maxHeight=s+"px",h.collapseProgress("begin",n,t,i,o)},r.progress=function(){(c=a-(s-t.offsetHeight))<l&&(i.style.minHeight=c+"px")},r.end=function(){t.style.display="none",h.collapseProgress("end",n,t,i,o),i.style.minHeight="",H(t,{position:"",maxHeight:"",display:""})}):(r.begin=function(){h.collapseProgress("begin",n,t,i,o)},r.end=function(){h.collapseProgress("end",n,t,i,o)}),new Se(r).animate(t)},t.prototype.collapseProgress=function(e,t,i,n,r){this.remove(t,"e-expand-icon"),this.remove(n,"e-selected"),"end"===e&&(this.add(i,"e-content-hide"),t.classList.remove("e-toggle-animation"),this.remove(n,"e-active"),i.setAttribute("aria-hidden","true"),R(i.previousElementSibling,{"aria-selected":"false","aria-expanded":"false"}),this.trigger("expanded",r))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.itemAttribUpdate=function(){var e=this.getItemElements(),t=this.items.length;e.forEach(function(e){N("."+Eu,e).setAttribute("aria-level",""+t)})},t.prototype.addItem=function(e,t){var i=this.element,n=this.getItemElements();if(d(t)&&(t=this.items.length),i.childElementCount>=t){this.items.splice(t,0,e);var r=this.renderInnerItem(e,t);i.childElementCount===t?i.appendChild(r):i.insertBefore(r,n[t]),S.add(r.querySelector("."+Eu),"focus",this.focusIn,this),S.add(r.querySelector("."+Eu),"blur",this.focusOut,this),this.itemAttribUpdate()}this.expandedItems=[],this.expandedItemRefresh(i),e.expanded&&this.expandItem(!0,t)},t.prototype.expandedItemRefresh=function(e){var t=this,i=this.getItemElements();[].slice.call(i).forEach(function(e){e.classList.contains("e-selected")&&t.expandedItemsPush(e)})},t.prototype.removeItem=function(e){var t=this.getItemElements()[e];d(t)||(this.restoreContent(e),k(t),this.items.splice(e,1),this.itemAttribUpdate(),this.expandedItems=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.getItemElements()[e];d(t)||d(N("."+Eu,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var i=this.getItemElements()[e];d(i)||(d(t)&&(t=!0),t?this.add(i,"e-hide"):this.remove(i,"e-hide"))},t.prototype.enableItem=function(e,t){var i=this.getItemElements()[e];if(!d(i)){var n=i.firstElementChild;t?(this.remove(i,"e-overlay"),R(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains("e-active")&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,n)),this.add(i,"e-overlay"),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},t.prototype.expandItem=function(e,t){var i=this,n=(this.element,this.getItemElements());if(d(t))if("Single"===this.expandMode&&e){var r=n[n.length-1];this.itemExpand(e,r,this.getIndexByItem(r))}else{var o=N("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach(function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove("e-expand-state")});var a=N(".e-expand-state",this.element);a&&a.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{if(d(r=n[t])||!r.classList.contains("e-select")||r.classList.contains("e-active")&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,r,t)}},t.prototype.itemExpand=function(e,t,i){var n=t.children[1];if(!t.classList.contains("e-overlay")){if(d(n)&&e){n=this.contentRendering(i),t.appendChild(n);var r=Object.keys(window),o=this.items[i];o.content&&r.indexOf("Blazor")>-1&&!this.isStringTemplate&&0===o.content.indexOf("<div>Blazor")&&Kt(this.element.id+i+"_content","ContentTemplate",o),this.ariaAttrUpdate(t)}else if(d(n))return;e?this.expand(n):this.collapse(n)}},t.prototype.destroyItems=function(){this.restoreContent(null),[].slice.call(this.element.querySelectorAll("."+Pu)).forEach(function(e){k(e)})},t.prototype.restoreContent=function(e){var t;t=d(e)?this.element:this.element.querySelectorAll("."+Pu)[e],this.templateEle.forEach(function(e){d(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")})},t.prototype.updateItem=function(e,t){if(!d(e)){var i=this.items[t];this.items.splice(t,1),this.restoreContent(t),k(e),this.addItem(i,t)}},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedItems"])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.destroyItems(),this.renderItems(),this.initItemExpand();else for(var o=Object.keys(e.items),a=0;a<o.length;a++){var s=parseInt(Object.keys(e.items)[a],10),l=Object.keys(e.items[s])[0],c=j("."+Pu,this.element)[s],h=Object(t.items[s])[l],p=Object(e.items[s])[l];("header"===l||"iconCss"===l||"expanded"===l||"content"===l&&""===h)&&this.updateItem(c,s),"cssClass"!==l||d(c)||(c.classList.remove(h),c.classList.add(p)),"content"!==l||d(c)||2!==c.children.length||(c.classList.contains("e-selected")&&this.expandItem(!1,s),k(c.querySelector("."+Ou)))}break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl");break;case"height":H(this.element,{height:m(e.height)});break;case"width":H(this.element,{width:m(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedItems.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}}},Cu([ge([],Au)],t.prototype,"items",void 0),Cu([pe("100%")],t.prototype,"width",void 0),Cu([pe("auto")],t.prototype,"height",void 0),Cu([pe("Multiple")],t.prototype,"expandMode",void 0),Cu([ue({},Tu)],t.prototype,"animation",void 0),Cu([ye()],t.prototype,"clicked",void 0),Cu([ye()],t.prototype,"expanding",void 0),Cu([ye()],t.prototype,"expanded",void 0),Cu([ye()],t.prototype,"created",void 0),Cu([ye()],t.prototype,"destroyed",void 0),t=Cu([ve],t)}(lt),Du=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ku=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Iu=function(e){var t=e;return t.sourcePoint||t.targetPoint||t.sourceID||t.targetID||t.sourcePortID||t.targetPortID||t.sourceDecorator||t.targetDecorator?na:(e.shape&&(e.shape instanceof mc||e.shape.type),Yc)},Ru=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Du(t,e),ku([pe("")],t.prototype,"id",void 0),ku([pe()],t.prototype,"height",void 0),ku([pe(!0)],t.prototype,"expanded",void 0),ku([pe("")],t.prototype,"iconCss",void 0),ku([pe("")],t.prototype,"title",void 0),ku([me(Iu)],t.prototype,"symbols",void 0),t}(ke),Nu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Du(t,e),ku([pe()],t.prototype,"width",void 0),ku([pe()],t.prototype,"height",void 0),ku([ue({},ni)],t.prototype,"offset",void 0),t}(ke),ju=function(e){function t(t,i){var n,r,o=e.call(this,t,i)||this;o.symbolTable={},o.childTable={},o.info="info",o.laneTable={},o.isExpand=!1,o.isExpandMode=!1,o.isMethod=!1,o.helper=function(e){var t,i=e.sender.target.id.split("_container")[0],n=o.symbolTable[i];if(n&&o.selectedSymbol){o.selectedSymbols=o.selectedSymbol.id===n.id?n:o.selectedSymbol;o.getMousePosition(e.sender);(t=o.getSymbolPreview(o.selectedSymbols,e.sender,o.element)).setAttribute("paletteId",o.element.id)}return t};for(var a=0;o&&o.palettes&&a<o.palettes.length;a++)for(var s=0;s<o.palettes[a].symbols.length;s++)n=o.palettes[a].symbols[s],r=t.palettes[a].symbols[s],n&&"UmlActivity"===n.shape.type&&$s(r,n),(o.nodeDefaults||o.connectorDefaults)&&nl(n,r,n instanceof Yc?o.nodeDefaults:o.connectorDefaults);return o}return Du(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=!1,n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":i=!0;break;case"enableSearch":if(e.enableSearch)this.createTextbox();else{var o=document.getElementById(this.element.id+"_search");o&&o.parentNode.removeChild(o)}break;case"palettes":for(var a=0,s=Object.keys(e.palettes);a<s.length;a++){var l=s[a],c=Number(l);this.accordionElement.items[c]||(this.accordionElement.items[c]={header:e.palettes[c].title||"",expanded:e.palettes[c].expanded,iconCss:e.palettes[c].iconCss||""}),void 0!==e.palettes[c].iconCss&&(this.accordionElement.items[c].iconCss=e.palettes[c].iconCss||"",i=!0),void 0!==e.palettes[c].expanded&&(this.palettes[c].isInteraction?this.palettes[c].isInteraction=!1:(this.accordionElement.items[c].expanded=e.palettes[c].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0))}break;case"enableAnimation":this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}};break;case"expandMode":this.accordionElement.expandMode=this.expandMode,i=!0,this.isExpandMode=!0;break;case"allowDrag":this.allowDrag=e.allowDrag,this.allowDrag?this.draggable.helper=this.helper:this.draggable.helper=function(){return null}}}if(i&&this.refreshPalettes(),this.isExpand&&!i){this.refresh(),this.isExpand=!1;for(var h=0;h<this.palettes.length;h++){var d=this.palettes[h].id;window[d]&&window[d].length>1&&(window[d][1].parentNode.removeChild(window[d][1]),window[d][1]=null)}}this.isMethod=!1},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){var e=this;this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&this.createTextbox();var t=ph("div",{id:this.element.id+"_container"});this.accordionElement=new Lu({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.expanded=function(t){var i=e.accordionElement.items.indexOf(t.item);e.palettes[i].expanded=t.isExpanded,e.palettes[i].isInteraction=!0},this.element.appendChild(t);window.measureElement&&(window.measureElement=null),xh(),this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new Yh(this.element.id,new Fh,!1),this.svgRenderer=new Yh(this.element.id,new Fh,!0),this.updatePalettes(),this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete()},t.prototype.getModuleName=function(){return"SymbolPalette"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e},t.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this);var t=document.getElementById(this.element.id+"_container");if(t){this.element.removeChild(t);window.measureElement&&(window.measureElement.usageCount-=1,0===window.measureElement.usageCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null))}(t=document.getElementById(this.element.id+"_search"))&&t.parentNode.removeChild(t),this.element.classList.remove("e-symbolpalette")}},t.prototype.initSymbols=function(e){for(var t=[],i=0,n=0,r=0,o=e.symbols;r<o.length;r++){if("SwimLane"===(C=o[r]).shape.type){var a=C,s=C.shape,l="Horizontal"===s.orientation;if(s.isLane){i=l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[C.id]={height:i,width:n};var c=s.lanes[0].header,h=s.lanes[0].style,d=c.style,p={id:"header"+Ch(),shape:{type:"Basic",shape:"Rectangle"},width:l?c.width:a.width,height:l?a.height:c.height,style:d,annotations:[{content:c.annotation.content}]};p.offsetX=p.width/2,p.offsetY=p.height/2,this.addPaletteItem(e.id,p);var u={id:"lane"+Ch(),shape:{type:"Basic",shape:"Rectangle"},width:l?a.width-c.width:a.width,height:l?a.height:a.height-c.height,style:h};u.offsetX=l?p.width+u.width/2:u.width/2,u.offsetY=l?u.height/2:p.height+u.height/2,this.addPaletteItem(e.id,u),a.children=[p.id,u.id]}else s.isPhase&&(i=a.height?a.height:this.symbolHeight,n=a.width?a.width:this.symbolWidth,C.shape.type="Path",C.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(C instanceof Yc){var f=_h(this.getNodeDefaults);f&&f(C,this)}else if(C instanceof na){var g=_h(this.getConnectorDefaults);g&&g(C,this)}this.symbolTable[C.id]=C,C instanceof Yc&&C.children&&t.push(C)}for(var m=0;m<t.length;m++)for(var y=void 0,v=0;v<t[m].children.length;v++)(y=this.symbolTable[t[m].children[v]])&&(this.childTable[y.id]=y,y.parentId=t[m].id);for(var b=0,w=e.symbols;b<w.length;b++){(C=w[b])instanceof Yc&&C.children||this.prepareSymbol(C)}for(var x=0,S=t;x<S.length;x++){var C=S[x];this.prepareSymbol(C)}},t.prototype.renderPalette=function(e){var t="display:none;overflow:auto;";e.height&&(t+="height:"+e.height+"px");var i=ph("div",{id:e.id,style:t,class:"e-remove-palette"});this.element.appendChild(i);var n={header:e.title,expanded:e.expanded,content:"#"+e.id,iconCss:e.iconCss};this.accordionElement.items.push(n),this.renderSymbols(e,i)},t.prototype.addPaletteItem=function(e,t){for(var i=0;i<this.palettes.length;i++){var n=this.palettes[i];if(-1!==n.id.indexOf(e)){for(var r=[void 0,n,"symbols",{},!0],o=new(Function.prototype.bind.apply(Iu(t),r)),a=0;a<Object.keys(t).length;a++)o[Object.keys(t)[a]]=t[Object.keys(t)[a]];nl(o,t,o instanceof Yc?this.nodeDefaults:this.connectorDefaults),n.symbols.push(o),o.children||this.prepareSymbol(o),this.symbolTable[o.id]=o;var s=document.getElementById(n.id);s&&s.appendChild(this.getSymbolContainer(o,s));break}}},t.prototype.removePaletteItem=function(e,t){for(var i,n=0;n<this.palettes.length;n++){var r=this.palettes[n];if(-1!==r.id.indexOf(e))for(var o=0,a=r.symbols;o<a.length;o++){var s=a[o];if(-1!==s.id.indexOf(t)){var l=r.symbols.indexOf(s);if(r.symbols.splice(l,1),s.children)for(var c=s.children,h=0;h<c.length;h++)delete this.symbolTable[c[h]];delete this.symbolTable[s.id];var d=document.getElementById(s.id+"_container");d.parentNode.removeChild(d),i=!0;break}}if(i)break}},t.prototype.prepareSymbol=function(e){var t,i,n,r,o,a=new cc,s=e,l=new un,c=e instanceof Yc?e.initContainer():null;c&&!c.children&&(c.children=[]);var h=_h(this.getSymbolTemplate);if(h&&(o=h(e)),o||(s.children?o=this.getContainer(s,c):(o=e.init(this),e instanceof Yc&&e.parentId&&c.children.push(o))),!e.parentId){var d={width:this.symbolWidth,height:this.symbolHeight},p=_h(this.getSymbolInfo);if(p&&(d=p(e)),d=d||this.symbolInfo||{},e.shape&&e.shape.isPhase&&(d.width=d.width||this.symbolWidth,d.height=d.height||this.symbolHeight),o.relativeMode="Object",o.horizontalAlignment=o.verticalAlignment="Center",l.style.strokeColor=l.style.fill="none",l.children=[o],o.measure(new ei),o.arrange(o.desiredSize),t=d.width=d.width||(void 0!==s.width?o.actualSize.width:void 0)||this.symbolWidth,n=d.height=d.height||(void 0!==s.height?o.actualSize.height:void 0)||this.symbolHeight,void 0!==t&&void 0!==n){var u=t,f=n,g=(e.shape.isLane,!!e.shape.isPhase);void 0!==this.symbolWidth?u=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:t+=s.style.strokeWidth,void 0!==this.symbolHeight?f=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:n+=s.style.strokeWidth,d.description&&""!==d.description.text&&(f-=20),i=u/(!g&&o.width||t),r=f/(!g&&o.height||n),d.fit&&(i=u/d.width,r=f/d.height),t=u,n=f,i=r=Math.min(i,r),l.width=t,l.height=n,o.width=d.width,o.height=d.height,this.scaleSymbol(e,l,i,r,t,n)}else{var m=void 0;e instanceof na&&(m=wr(e)),o.width=e.width||m?m.width:o.actualSize.width,o.height=e.height||m?m.height:o.actualSize.height}e.wrapper=a,a.children=[l],o.pivot=a.pivot={x:0,y:0},a.id=o.id+"_symbol",a.style.fill=a.style.strokeColor="transparent",e instanceof Yc?(a.offsetX=e.style.strokeWidth/2,a.offsetY=e.style.strokeWidth/2):(a.offsetX=.5,a.offsetY=.5),this.getSymbolDescription(d,t,a),a.measure(new ei),a.arrange(a.desiredSize),d.width=d.width||o.actualSize.width,d.height=d.height||o.actualSize.height,e[this.info]=d}e.parentId&&(c.measure(new ei(s.width,s.height)),c.arrange(c.desiredSize))},t.prototype.getContainer=function(e,t){var i;t.measureChildren=!1;var n=e.children;t.children=[];for(var r=0;r<n.length;r++)this.symbolTable[n[r]]&&t.children.push(this.symbolTable[n[r]].wrapper);return t.measure(new ei(e.width,e.height)),t.arrange(t.desiredSize),0===t.bounds.x&&0===t.bounds.y||(Gl(e,(i=t.bounds).x,i.y,this.symbolTable,!1,this),t=this.getContainer(e,t)),t},t.prototype.getSymbolDescription=function(e,t,i){if(e&&e.description&&e.description.text){var n=new dn;e.description.overflow=e.description.overflow||"Ellipsis",e.description.wrap=e.description.wrap||"WrapWithOverflow",n.content=e.description.text,n.width=t,n.height=20,n.style.strokeColor="transparent",n.style.fill="transparent",n.style.strokeWidth=0,n.style.textWrapping=e.description.wrap,n.style.textOverflow=e.description.overflow,n.margin={left:0,right:0,top:0,bottom:5},i.children.push(n)}},t.prototype.renderSymbols=function(e,t){for(var i=0,n=e.symbols;i<n.length;i++){var r=n[i];r.parentId||this.getSymbolContainer(r,t)}},t.prototype.getSymbolPreview=function(e,t,i){var n,r,o,a=e.wrapper.children[0].desiredSize.width+e.style.strokeWidth,s=e.wrapper.children[0].desiredSize.height+e.style.strokeWidth,l=e.wrapper.children[0].children[0];if(void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){a=(this.symbolPreview.width||a)-e.style.strokeWidth,s=(this.symbolPreview.height||s)-e.style.strokeWidth,r=a/l.actualSize.width,o=s/l.actualSize.height,r=o=Math.min(r,o);var c=l.actualSize.width*r,h=l.actualSize.height*o;e.wrapper.children[0].width=a,e.wrapper.children[0].height=s,this.measureAndArrangeSymbol(l,e instanceof Yc),this.scaleSymbol(e,e.wrapper.children[0],r,o,c,h,!0),a=c,s=h}var d={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=e.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,e instanceof Yc);var p,u=ph("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(u);var f="margin:5px;";if("Native"===e.shape.type){n=uh("svg",{id:e.id+"_preview",width:Math.ceil(a)+1,height:Math.ceil(s)+1});var g=uh("g",{id:e.id+"_g"});n.appendChild(g),u.appendChild(n),this.svgRenderer.renderElement(l,g,void 0,void 0,n)}else if("HTML"===e.shape.type)p=this.getHtmlSymbol(e,n,u,s,a,!0);else if(e.children&&e.children.length>0&&il(e,"HTML",this.childTable))p=this.getGroupParent(e,n,u,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!0);else{n=Wh.createCanvas(e.id+"_preview",2*(Math.ceil(a)+e.style.strokeWidth+1),2*(Math.ceil(s)+e.style.strokeWidth+1)),u.appendChild(n),f+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var m=2;e instanceof na&&(m=1.9),n.getContext("2d").setTransform(m,0,0,m,0,0),this.diagramRenderer.renderElement(l,n,void 0)}return(p&&("HTML"===e.shape.type||e.children&&e.children.length>0)?p:n).setAttribute("style",f),l.offsetX=d.x,l.offsetY=d.y,u},t.prototype.measureAndArrangeSymbol=function(e,t){e.children&&!t&&(e.children[0].transform=zi.Self),e.measure(new ei),e.arrange(e.desiredSize),e.children&&(e.children[0].transform=zi.Parent)},t.prototype.updateSymbolSize=function(e,t,i){var n=e.wrapper.children[0].children[0],r=e.style.strokeWidth;n.width=(t||n.width)-(r+1),n.height=(i||n.height)-(r+1),e.wrapper.measure(new ei),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.getSymbolContainer=function(e,t,i){var n,r,o,a=this.symbolTable[e.id][this.info],s=this.getSymbolSize(e,a),l=s.width+1,c=s.height+1,h=ph("div",{id:e.id+"_container",style:"width:"+l+"px;height:"+c+"px;float:left;overflow:hidden",title:a.tooltip?a.tooltip:e.id});if(t.appendChild(h),"Native"===e.shape.type)n=uh("svg",{id:e.id,width:Math.ceil(e.wrapper.actualSize.width)+1,height:Math.ceil(e.wrapper.actualSize.height)+1}),r=uh("g",{id:e.id+"_g"}),n.appendChild(r),h.appendChild(n),this.updateSymbolSize(e),this.svgRenderer.renderElement(e.wrapper,r,void 0,void 0,n);else if("HTML"===e.shape.type)o=this.getHtmlSymbol(e,n,h,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else if(e.children&&e.children.length>0&&il(e,"HTML",this.childTable))o=this.getGroupParent(e,n,h,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else{n=Wh.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),h.appendChild(n);var d=2;e instanceof na&&(d=1.9),n.getContext("2d").setTransform(d,0,0,d,0,0),this.diagramRenderer.renderElement(e.wrapper,r||n,void 0,void 0,void 0,void 0,!0)}if(!i){var p=e.wrapper.actualSize.width+e.style.strokeWidth,u=e.wrapper.actualSize.height+e.style.strokeWidth,f="pointer-events:none;transform-origin:0 0;overflow:hidden;";return e.shape.isPhase?"Horizontal"===e.shape.orientation?f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+s.height/2+"px;":f+="margin-left:"+s.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-u)/2)+"px;":f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-u)/2)+"px;",n instanceof HTMLCanvasElement&&(f+="transform:scale(.5,.5);"),(o&&("HTML"===e.shape.type||e.children&&e.children.length>0)?o:n).setAttribute("style",f),h.classList.add("e-symbol-draggable"),h}return n},t.prototype.getGroupParent=function(e,t,i,n,r,o){var a=ph("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),s=ph("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=ph("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return s.appendChild(l),a.appendChild(s),t=Wh.createCanvas(o?e.id+"_preview":e.id,Math.ceil(r)+1,Math.ceil(n)+1),a.appendChild(t),i.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,s),a},t.prototype.getHtmlSymbol=function(e,t,i,n,r,o){var a=ph("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),s=ph("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=ph("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return s.appendChild(l),a.appendChild(s),t=Wh.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),i.appendChild(t),t.getContext("2d").setTransform(2,0,0,2,0,0),a.appendChild(t),i.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,s),a},t.prototype.getSymbolSize=function(e,t){var i=e.wrapper.actualSize.width,n=e.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,n=Math.max(this.symbolHeight,n)):(i+=this.symbolMargin.left+this.symbolMargin.right+e.style.strokeWidth,n+=this.symbolMargin.top+this.symbolMargin.bottom+e.style.strokeWidth),new ei(i,n)},t.prototype.getMousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){var r=(n=e).changedTouches[0].clientY,o=n.changedTouches[0].clientX;t=r-this.element.offsetTop,i=o-this.element.offsetLeft}else t=e.clientY-this.element.offsetTop,i=e.clientX-this.element.offsetLeft;return{x:i,y:t}},t.prototype.mouseMove=function(e,t){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=e.target.id.split("_container")[0];if(this.symbolTable[i]){var n=document.getElementById(i+"_container");n.classList.add("e-symbol-hover"),this.highlightedSymbol=n}e.preventDefault()},t.prototype.mouseUp=function(e){if(this.isMethod=!0,e&&e.target)if("iconSearch"===e.srcElement.id){var t=document.getElementById("iconSearch");t.classList.contains("e-clear-searchtext")&&(t.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",this.searchPalette(""))}else{var i=e.target.id.split("_container")[0];if(i&&this.selectedSymbol){var n={oldValue:this.selectedSymbol.id,newValue:i};this.trigger("paletteSelectionChange",n),e.preventDefault()}}},t.prototype.keyUp=function(e){var t=this;if(this.enableSearch){var i=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",!e||"Enter"!==e.key&&13!==e.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.target instanceof HTMLInputElement&&(i.searchPalette(e.target.value),t.timer=null)},500)):e.target instanceof HTMLInputElement&&this.searchPalette(e.target.value)}},t.prototype.mouseDown=function(e){var t=e.target.id.split("_container")[0];if(this.selectedSymbol){var i,n=document.getElementById(this.selectedSymbol.id+"_container");t!==this.selectedSymbol.id&&n&&n.classList.remove("e-symbol-selected"),(i=document.getElementById(this.selectedSymbol.id+"_container"))&&(i.style.backgroundColor=""),this.selectedSymbol=null}this.symbolTable[t]&&((i=document.getElementById(t+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[t],e.preventDefault())},t.prototype.keyDown=function(e){if(e&&"Escape"===e.key){var t=this.draggable.helperElement;t&&t.parentNode&&(t.parentNode.removeChild(t),this.draggable.intDestroy())}},t.prototype.initDraggable=function(){if(this.allowDrag){this.draggable=new ut(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(e){var t=fh(e.target,"e-droppable");if(t&&t.classList.contains("e-diagram")){t.ej2_instances[0].droppable.over(e)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}})}},t.prototype.dragStart=function(e){var t=this.helper[0];t&&t.setAttribute("paletteId",this.element.id),y()&&e.bindEvents(e.dragElement)},t.prototype.dragStop=function(e){fh(e.target,"e-diagram")||I(e.helper)},t.prototype.scaleSymbol=function(e,t,i,n,r,o,a){if(e instanceof na){var s=e.wrapper;e.wrapper=t.children[0];for(var l=e.scale(i,n,r,o,t.children[0]),c=r/2-t.children[0].children[0].offsetX+l.x/2,h=o/2-t.children[0].children[0].offsetY+l.y/2,d=0,p=t.children[0].children;d<p.length;d++){var u=p[d];u.offsetX+=c,u.offsetY+=h,u.staticSize=!1}e.wrapper=s}else if(e.shape instanceof Ic&&this.bpmnModule){s=e.wrapper;e.wrapper=t,t.children[0].width=r,t.children[0].height=o,this.bpmnModule.updateBPMN({width:r,height:o},e,e,null),e.wrapper=s}else if(e.children){var f,g,m=e.children;if(!a)for(var y=void 0,v=void 0,b=0;b<m.length;b++)(v=t.children[0].children[b])&&(v.children[0].children&&this.measureChild(v),y=this.symbolTable[v.id],v.width=y.width,v.height=y.height,v.measure(new ei),v.arrange(v.children[0].desiredSize));if(f=r/t.children[0].desiredSize.width,g=o/t.children[0].desiredSize.height,t.children[0].measure(new ei),t.children[0].arrange(t.children[0].desiredSize),!a){var w=void 0;for(b=0;b<m.length;b++)(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,f,g,e),this.scaleGroup(w,f,g,e))}if(a){y=void 0;var x=void 0,S=void 0;for(w=void 0,b=0;b<m.length;b++)y=this.symbolTable[m[b]],x=r/e.wrapper.children[0].desiredSize.width,S=o/e.wrapper.children[0].desiredSize.height,(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,x,S,e,!0),this.scaleGroup(w,x,S,e,!0));e.wrapper.children[0].measure(new ei),e.wrapper.children[0].arrange(e.wrapper.children[0].desiredSize)}}else Ul(t.children[0],i,n,t)},t.prototype.scaleChildren=function(e,t,i,n,r){for(var o,a=0;a<e.children.length;a++)(o=e.children[a]).children[0].children?this.scaleChildren(o,t,i,n,r):this.scaleGroup(o,t,i,n,r)},t.prototype.measureChild=function(e){for(var t,i,n=0;n<e.children.length;n++)(t=e.children[n]).children[0].children?this.measureChild(t):(i=this.symbolTable[t.id],t.width=i.width,t.height=i.height,t.measure(new ei),t.arrange(t.children[0].desiredSize))},t.prototype.scaleGroup=function(e,t,i,n,r){e.width=e.width*t,e.height=e.height*i,e.offsetX=r?e.offsetX*t-n.style.strokeWidth:e.offsetX*t+n.style.strokeWidth/2,e.offsetY=r?e.offsetY*i-n.style.strokeWidth:e.offsetY*i+n.style.strokeWidth/2,e.measure(new ei),e.arrange(e.children[0].desiredSize)},t.prototype.refreshPalettes=function(){this.accordionElement.items=[],function(e,t){var i;for(i=t?document.getElementById(t).getElementsByClassName(e):document.getElementsByClassName(e);i.length>0;)i[0].parentNode.removeChild(i[0])}("e-remove-palette",this.element.id),this.updatePalettes(),this.accordionElement.dataBind()},t.prototype.updatePalettes=function(){for(var e=0;e<this.palettes.length;e++){var t=this.palettes[e];this.initSymbols(t),this.renderPalette(t)}},t.prototype.createTextbox=function(){var e=ph("div",{id:this.element.id+"_search"});e.setAttribute("style","backgroundColor:white;height:30px"),e.className="e-input-group",this.element.appendChild(e);var t=ph("input",{});t.placeholder="Search Shapes",t.id="textEnter",t.setAttribute("style","width:100%;height:auto"),t.className="e-input",e.appendChild(t);var i=ph("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});e.appendChild(i)},t.prototype.getFilterSymbol=function(e){for(var t=[],i=0;i<e.length;i++)for(var n=0;n<this.ignoreSymbolsOnSearch.length;n++)this.ignoreSymbolsOnSearch[n]!==e[i].id&&t.push(e[0]);return t},t.prototype.searchPalette=function(e){var t,i=[],n=document.getElementById("SearchPalette");if(n)for(var r=n.children.length-1;r>=0;r--)n.removeChild(n.children[r]);for(var o=0;o<this.palettes.length;o++)for(var a=this.palettes[o],s=0;s<a.symbols.length;s++){var l=a.symbols[s];""!==e&&-1!==l.id.toLowerCase().indexOf(e.toLowerCase())&&i.push(l)}var c=_h(this.filterSymbols);if(c&&(i=c(i)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(i=this.getFilterSymbol(i)),n||(n=t=this.createSearchPalette(t)),i.length>0)for(var h=0,d=i;h<d.length;h++){var p=d[h];this.getSymbolContainer(p,n)}else if(""!==e){var u=ph("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});u.innerHTML="No Items To Display",n.appendChild(u)}else{document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",this.accordionElement.removeItem(0);var f=document.getElementById("SearchPalette");f&&f.remove()}},t.prototype.createSearchPalette=function(e){e=ph("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(e);return this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),e},t.prototype.wireEvents=function(){var e=J.touchStartEvent,t=J.touchEndEvent,i=J.touchMoveEvent;S.add(this.element,e,this.mouseDown,this),S.add(this.element,i,this.mouseMove,this),S.add(this.element,t,this.mouseUp,this),S.add(this.element,"keyup",this.keyUp,this),S.add(document,"keydown",this.keyDown,this),this.initDraggable()},t.prototype.unWireEvents=function(){var e=J.touchStartEvent,t=J.touchEndEvent,i=J.touchMoveEvent;J.isPointer;S.remove(this.element,e,this.mouseDown),S.remove(this.element,i,this.mouseMove),S.remove(this.element,t,this.mouseUp),S.remove(this.element,"keyup",this.keyUp),S.remove(document,"keydown",this.keyDown)},ku([pe("S")],t.prototype,"accessKey",void 0),ku([pe("100%")],t.prototype,"width",void 0),ku([pe("100%")],t.prototype,"height",void 0),ku([ge([],Ru)],t.prototype,"palettes",void 0),ku([pe()],t.prototype,"getSymbolInfo",void 0),ku([pe()],t.prototype,"symbolInfo",void 0),ku([pe()],t.prototype,"filterSymbols",void 0),ku([pe()],t.prototype,"ignoreSymbolsOnSearch",void 0),ku([pe()],t.prototype,"getSymbolTemplate",void 0),ku([pe()],t.prototype,"symbolWidth",void 0),ku([pe()],t.prototype,"symbolHeight",void 0),ku([ue({left:10,right:10,top:10,bottom:10},Ki)],t.prototype,"symbolMargin",void 0),ku([pe(!0)],t.prototype,"allowDrag",void 0),ku([ue({},Nu)],t.prototype,"symbolPreview",void 0),ku([pe(!1)],t.prototype,"enableSearch",void 0),ku([pe(!0)],t.prototype,"enableAnimation",void 0),ku([pe("Multiple")],t.prototype,"expandMode",void 0),ku([ye()],t.prototype,"paletteSelectionChange",void 0),ku([pe()],t.prototype,"getNodeDefaults",void 0),ku([pe()],t.prototype,"nodeDefaults",void 0),ku([pe()],t.prototype,"getConnectorDefaults",void 0),ku([pe()],t.prototype,"connectorDefaults",void 0),t}(lt),zu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Bu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.mode="Canvas",n.id="overview",n.actionName="",n.startPoint=null,n.currentPoint=null,n.prevPoint=null,n.scale=null,n.inAction=!1,n.viewPortRatio=1,n.horizontalOffset=0,n.verticalOffset=0,n.model={},n.event=!0,n.model={width:n.width,height:n.height},n}return zu(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"sourceID":this.setParent(e.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new Yh(this.element.id,new Fh,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},t.prototype.getSizeValue=function(e){return e.toString().indexOf("px")>0||e.toString().indexOf("%")>0?e.toString():e.toString()+"px"},t.prototype.renderCanvas=function(e){var t=document.getElementById(this.element.id+"_canvas");t||(t=ph("div",{}),this.element.appendChild(t)),wh(t,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=t},t.prototype.setParent=function(e){var t=document.getElementById(e);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(t,"ej2_instances"),this.parent&&this.parent.setOverview(this)},t.prototype.getDiagram=function(e,t){for(var i,n=e[t].length,r=0;r<n;r++)if(gh(e[t][r].element,"e-diagram")){i=e[t][r];break}return i},t.prototype.unWireEvents=function(){var e=J.touchStartEvent,t=J.touchMoveEvent,i=J.isPointer?"pointerleave":"mouseleave",n=J.isPointer,r=(J.info.name,J.touchEndEvent);S.remove(this.element,e,this.mouseDown),S.remove(this.element,t,this.mouseMove),S.remove(this.element,r,this.mouseUp),S.remove(this.element,i,this.documentMouseUp),S.remove(window,"resize",this.windowResize);var o=document.getElementById(this.sourceID+"content");o&&S.remove(o,"scroll",this.scrolled)},t.prototype.wireEvents=function(){var e=J.touchStartEvent,t=J.touchEndEvent,i=J.touchMoveEvent,n=J.isPointer?"pointerleave":"mouseleave",r=J.isPointer;J.info.name;S.add(this.element,e,this.mouseDown,this),S.add(this.element,i,this.mouseMove,this),S.add(this.element,t,this.mouseUp,this),S.add(this.element,n,this.documentMouseUp,this),S.add(window,"resize",this.windowResize,this);var o=document.getElementById(this.sourceID+"content");o&&S.add(o,"scroll",this.scrolled,this)},t.prototype.renderDocument=function(e){e.canvas=this.canvas;var t=document.getElementById(this.canvas.id+"_svg");t&&t.parentNode.removeChild(t);var i=uh("svg",{id:this.canvas.id+"_svg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",class:"overview_svg"});this.svg=i,e.svg=i,e.canvas.appendChild(i);var n,r=document.getElementById(this.element.id),o=r.clientWidth,a=r.clientHeight,s=r.getBoundingClientRect(),l=window.screenX<0?-1*window.screenX:window.screenX,c=window.screenY<0?-1*window.screenY:window.screenY;if(0===o){var h=Math.floor(window.innerWidth-l-Math.floor(s.left));o=h>0?h:Math.floor(window.innerWidth)}if(0===a){var d=Math.floor(window.innerHeight-c-Math.floor(s.top));a=d>0?d:Math.floor(window.innerHeight)}if(o>0&&(i.setAttribute("width",String(o)),this.model.height=a),a>0&&(i.setAttribute("height",String(a)),this.model.width=o),!e.diagramLayerDiv){e.diagramLayerDiv=ph("div",{});document.getElementById(this.element.id);e.diagramLayer=Wh.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),e.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),e.diagramLayerDiv.appendChild(e.diagramLayer),e.canvas.appendChild(e.diagramLayerDiv)}n={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"},wh(e.diagramLayerDiv,n),this.renderHtmlLayer(e.canvas),this.renderNativeLayer(e.canvas,e),this.addOverviewRectPanel(e)},t.prototype.removeDocument=function(e){var t=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(t);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var n=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(n),e.diagramLayerDiv=null,e.diagramLayer=null},t.prototype.renderHtmlLayer=function(e){var t=ph("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),i=ph("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return t.appendChild(i),e.appendChild(t),t},t.prototype.renderNativeLayer=function(e,t){var i=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=uh("g",{id:this.element.id+"_nativeLayer"});i.appendChild(n),t.diagramLayerDiv.appendChild(i),bh(i,{class:"e-native-layer"})},t.prototype.addOverviewRectPanel=function(e){var t=document.getElementById(this.canvas.id+"_overviewsvg");t&&t.parentNode.removeChild(t),t=uh("svg",{id:this.canvas.id+"_overviewsvg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),e.canvas.appendChild(t);var i=uh("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});t.appendChild(i);var n=uh("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});n.setAttribute("style"," pointer-events: none; "),i.appendChild(n);var r=uh("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});i.appendChild(r);var o=uh("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});r.appendChild(o),this.renderOverviewCorner("left",r),this.renderOverviewCorner("right",r),this.renderOverviewCorner("top",r),this.renderOverviewCorner("bottom",r),this.renderOverviewCorner("topleft",r),this.renderOverviewCorner("topright",r),this.renderOverviewCorner("bottomleft",r),this.renderOverviewCorner("bottomright",r)},t.prototype.renderOverviewCorner=function(e,t){this.svg;var i,n=uh(i="top"===e||"bottom"===e||"right"===e||"left"===e?"rect":"circle",{id:this.canvas.id+"visible"+e});t.appendChild(n);var r=uh(i,{id:this.canvas.id+e,class:"overviewresizer",fill:"transparent"});t.appendChild(r)},t.prototype.updateOverviewRectangle=function(){var e=this.currentPoint.x-this.prevPoint.x,t=this.currentPoint.y-this.prevPoint.y,i=new ei;i.width=0,i.height=0;var n=0,r=0;switch(this.resizeDirection){case"left":i.width-=e,i.height-=e/this.viewPortRatio,n=e,r=e/this.viewPortRatio,r/=2;break;case"right":i.width+=e,i.height+=e/this.viewPortRatio,r=e/this.viewPortRatio,r/=-2;break;case"top":i.height-=t,i.width-=t*this.viewPortRatio,r=t,n=t*this.viewPortRatio,n/=2;break;case"bottom":i.height+=t,i.width+=t*this.viewPortRatio,n=t*this.viewPortRatio,n/=-2;break;case"topleft":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,i.width-=e,i.height-=t,n=e,r=t;break;case"topright":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,r=t,i.width+=e,i.height-=t;break;case"bottomleft":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,n=e,i.width-=e,i.height+=t;break;case"bottomright":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,i.width+=e,i.height+=t}this.updateHelper(n,r,i,void 0,void 0)},t.prototype.updateHelper=function(e,t,i,n,r){var o,a,s,l=this.element.getElementsByTagName("svg")[2].getElementById("helper");if(i)o=(s=l.getBBox()).x+e,a=s.y+t,n=s.width+i.width,r=s.height+i.height;else{var c,h;c=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,h=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y;Math.abs(h)>Math.abs(c)?(c=this.viewPortRatio*h,!0,!1):(h=c/this.viewPortRatio,!0,!1),s=l.getBBox(),o=this.startPoint.x>this.currentPoint.x?s.x-c:s.x,a=this.startPoint.y>this.currentPoint.y?s.y-h:s.y,n=s.width+c,r=s.height+h}bh(this.helper,{id:this.helper.id,x:o,y:a,width:Math.max(0,n),height:Math.max(0,r)})},t.prototype.updateOverviewrect=function(e,t,i,n){wh(document.getElementById(this.canvas.id+"overviewrect"),{x:e,y:t,width:Math.max(1,i),height:Math.max(1,n)}),this.updateOverviewCorner("top",e+8,t-2,Math.max(0,i-16),2),this.updateOverviewCorner("bottom",e+8,t+n,Math.max(0,i-16),2),this.updateOverviewCorner("left",e-2,t+8,2,Math.max(0,n-16)),this.updateOverviewCorner("right",e+i,t+8,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",e,t,5,5),this.updateOverviewCorner("topright",e+i,t,5,5),this.updateOverviewCorner("bottomleft",e,t+n,5,5),this.updateOverviewCorner("bottomright",e+i,t+n,5,5)},t.prototype.updateOverviewCorner=function(e,t,i,n,r){var o,a,s="visible"+e;"top"===e||"bottom"===e||"right"===e||"left"===e?(o={x:t,y:i,width:n,height:r,fill:"#ED1C24"},a={x:t-2,y:i-2,width:2===n?4:n,height:2===r?4:r}):(o={cx:t,cy:i,r:4,fill:"#ED1C24"},a={cx:t,cy:i,r:6,fill:"transparent"}),wh(document.getElementById(this.canvas.id+s),o),wh(document.getElementById(this.canvas.id+e),a)},t.prototype.translateOverviewRectangle=function(){var e=Number(this.model.width),t=Number(this.model.height),i=this.currentPoint.x-this.prevPoint.x,n=this.currentPoint.y-this.prevPoint.y,r=(Math.min(this.parent.scroller.viewPortWidth/e,this.parent.scroller.viewPortHeight/t),this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()),o=r.x+i,a=r.y+n,s=r.width,l=r.height;this.updateOverviewrect(o,a,s,l),this.updateParentView(this.parent.scroller.currentZoom,o,a,s,l,null)},t.prototype.renderOverviewRect=function(e,t,i,n){var r=Number(this.model.width),o=Number(this.model.height),a=i/r*this.contentWidth,s=n/o*this.contentHeight,l=Math.max(this.parent.scroller.viewPortWidth/a,this.parent.scroller.viewPortHeight/s);if(l>=.25&&l<=30){this.updateParentView(l,e,t,i,n,{x:0,y:0});var c=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var h=this.element.getElementsByTagName("rect")[10].getBBox();c.x=h.x,c.y=h.y}this.updateOverviewrect(c.x,c.y,c.width,c.height)}},t.prototype.scrollOverviewRect=function(e,t,i,n){if(!this.actionName||n){var r=Number(this.model.width),o=Number(this.model.height),a=Math.min(this.contentWidth/r,this.contentHeight/o),s=new mi,l=s.x=e/i/a,c=s.y=t/i/a,h=s.width=this.parent.scroller.viewPortWidth/i/a,d=s.height=this.parent.scroller.viewPortHeight/i/a;this.parent.scroller.viewPortWidth,this.parent.scroller.viewPortHeight;if(n){var p=new mi;return p.x=l,p.y=c,p.width=h,p.height=d,p}this.updateOverviewrect(-l,-c,h,d)}return null},t.prototype.updateParentView=function(e,t,i,n,r,o){var a,s,l=Number(this.model.width),c=Number(this.model.height),h=t*(this.contentWidth/l)*e,d=i*(this.contentHeight/c)*e;this.parent.scroller.getPageBounds();1===e&&"pan"!==this.actionName||(a=-h-this.parent.scroller.horizontalOffset,s=-d-this.parent.scroller.verticalOffset),"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(e/this.parent.scroller.currentZoom,a,s,o):this.parent.pan(a,s,o)},t.prototype.updateHtmlLayer=function(e){var t=dh(e.element.id),i=this.parent.scroller.getPageBounds(!0),n=i.width,r=i.height,o=Math.max(n,this.parent.scroller.viewPortWidth),a=Math.max(r,this.parent.scroller.viewPortHeight),s=Math.min(Number(this.model.width)/o,Number(this.model.height)/a);t.style.transform="scale("+s+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},t.prototype.updateView=function(e){var t,i,n=this.parent.scroller.getPageBounds(),r=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,o=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,a=0,s=0;this.parent.scroller.currentZoom<1&&r>n.width&&o>n.height&&(a=(r-n.width)/2,s=(o-n.height)/2),t=n.width,i=n.height;var l,c=Number(this.model.width),h=Number(this.model.height),d=Math.max(t,this.parent.scroller.viewPortWidth),p=Math.max(i,this.parent.scroller.viewPortHeight);this.contentWidth=d=Math.max(d,c/h*p),this.contentHeight=p=Math.max(p,h/c*d),l=Math.min(c/d,h/p);var u=document.getElementById(this.element.id+"_htmlLayer");u.style.webkitTransform="scale("+l+") translate("+-n.x+"px,"+-n.y+"px)",u.style.transform="scale("+l+") translate("+(-n.x+a)+"px,"+(-n.y+s)+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-n.x*l+","+-n.y*l+")"),this.horizontalOffset=n.x*l,this.verticalOffset=n.y*l;var f=document.getElementById(this.element.id+"_diagramLayer"),g=hh(this.element.id),m=f.getContext("2d"),y=Number(this.model.width)/this.contentWidth,v=Number(this.model.height)/this.contentHeight;y=Math.min(y,v),g.setAttribute("transform","translate(0,0),scale("+y+")"),m.setTransform(y,0,0,y,0,0),m.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},t.prototype.scrolled=function(e){if(this.event){var t=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-t.x,-t.y,t.width,t.height)}},t.prototype.updateCursor=function(e){if(gh(e.target,"overviewresizer"))switch(e.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},t.prototype.mouseMove=function(e){if(this.event=!1,this.updateCursor(e),this.currentPoint=this.mousePosition(e),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},t.prototype.documentMouseUp=function(e){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var e=document.getElementById(t.element.id).getBoundingClientRect();t.model.width=e.width,t.model.height=e.height,t.renderCanvas(),t.setParent(t.sourceID)},10),!1},t.prototype.mouseDown=function(e){if(e.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),e.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),gh(e.target,"overviewresizer"))switch(this.actionName="scale",e.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(e),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},t.prototype.mouseUp=function(e){this.currentPoint=this.mousePosition(e);Number(this.model.width),Number(this.model.height);if(this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var t=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=t.x,n=t.y,r=t.width,o=t.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,n,r,o)}}else if(e.target.id===this.canvas.id+"_overviewsvg"||"helper"===e.target.id){r=(t=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,o=t.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-r/2,this.currentPoint.y-o/2,r,o),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.initHelper=function(){var e=this.element.getElementsByTagName("svg")[2],t=(this.parent.scroller.currentZoom,this.startPoint.x),i=this.startPoint.y,n=1,r=1;if("scale"===this.actionName){var o=e.getElementById(this.canvas.id+"overviewrect").getBBox();t=o.x,i=o.y,n=o.width,r=o.height}var a=uh("rect",{id:"helper",x:t,y:i,width:n,height:r,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});e.getElementById(this.element.id+"_overviewlayer").appendChild(a),this.helper=a},t.prototype.mousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){var r=(t=e).changedTouches[0].clientX,o=t.changedTouches[0].clientY;i=r-this.element.offsetLeft,n=o-this.element.offsetTop}else i=e.clientX,n=e.clientY;var a=this.element.getBoundingClientRect();return i-=a.left,n-=a.top,{x:i+this.horizontalOffset,y:n+this.verticalOffset}},t.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var t=document.getElementById(this.element.id+"_canvas");t&&this.element.removeChild(t)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},t.prototype.getModuleName=function(){return"Overview"},Hu([pe("100%")],t.prototype,"width",void 0),Hu([pe("100%")],t.prototype,"height",void 0),Hu([pe("")],t.prototype,"sourceID",void 0),Hu([ye()],t.prototype,"created",void 0),t}(lt);i.d(t,"Diagram",function(){return sp}),i.d(t,"PrintAndExport",function(){return lp}),i.d(t,"Size",function(){return ei}),i.d(t,"Rect",function(){return mi}),i.d(t,"MatrixTypes",function(){return gi}),i.d(t,"Matrix",function(){return yi}),i.d(t,"identityMatrix",function(){return vi}),i.d(t,"transformPointByMatrix",function(){return bi}),i.d(t,"transformPointsByMatrix",function(){return wi}),i.d(t,"rotateMatrix",function(){return xi}),i.d(t,"scaleMatrix",function(){return Si}),i.d(t,"translateMatrix",function(){return Ci}),i.d(t,"multiplyMatrix",function(){return Pi}),i.d(t,"Point",function(){return ni}),i.d(t,"PortVisibility",function(){return Mi}),i.d(t,"SnapConstraints",function(){return Ti}),i.d(t,"SelectorConstraints",function(){return Ai}),i.d(t,"ConnectorConstraints",function(){return Li}),i.d(t,"AnnotationConstraints",function(){return Di}),i.d(t,"NodeConstraints",function(){return ki}),i.d(t,"ElementAction",function(){return Ii}),i.d(t,"ThumbsConstraints",function(){return Ri}),i.d(t,"DiagramConstraints",function(){return Ni}),i.d(t,"DiagramTools",function(){return ji}),i.d(t,"Transform",function(){return zi}),i.d(t,"RenderMode",function(){return Hi}),i.d(t,"KeyModifiers",function(){return Bi}),i.d(t,"Keys",function(){return _i}),i.d(t,"DiagramAction",function(){return Wi}),i.d(t,"RendererAction",function(){return Fi}),i.d(t,"RealAction",function(){return Yi}),i.d(t,"NoOfSegments",function(){return Xi}),i.d(t,"DiagramEvent",function(){return Vi}),i.d(t,"PortConstraints",function(){return Ui}),i.d(t,"contextMenuClick",function(){return"contextMenuClick"}),i.d(t,"contextMenuOpen",function(){return"contextMenuOpen"}),i.d(t,"contextMenuBeforeItemRender",function(){return"contextMenuBeforeItemRender"}),i.d(t,"Thickness",function(){return Qi}),i.d(t,"Margin",function(){return Ki}),i.d(t,"Shadow",function(){return $i}),i.d(t,"Stop",function(){return Ji}),i.d(t,"Gradient",function(){return en}),i.d(t,"LinearGradient",function(){return tn}),i.d(t,"RadialGradient",function(){return nn}),i.d(t,"ShapeStyle",function(){return rn}),i.d(t,"StrokeStyle",function(){return on}),i.d(t,"TextStyle",function(){return an}),i.d(t,"DiagramElement",function(){return sn}),i.d(t,"PathElement",function(){return yn}),i.d(t,"ImageElement",function(){return bn}),i.d(t,"TextElement",function(){return dn}),i.d(t,"Container",function(){return cn}),i.d(t,"Canvas",function(){return un}),i.d(t,"GridPanel",function(){return Ka}),i.d(t,"RowDefinition",function(){return $a}),i.d(t,"ColumnDefinition",function(){return Ja}),i.d(t,"GridRow",function(){return es}),i.d(t,"GridCell",function(){return ts}),i.d(t,"StackPanel",function(){return cc}),i.d(t,"findConnectorPoints",function(){return Bn}),i.d(t,"swapBounds",function(){return Qn}),i.d(t,"findAngle",function(){return or}),i.d(t,"findPoint",function(){return ar}),i.d(t,"getIntersection",function(){return lr}),i.d(t,"getIntersectionPoints",function(){return hr}),i.d(t,"orthoConnection2Segment",function(){return fr}),i.d(t,"getPortDirection",function(){return br}),i.d(t,"getOuterBounds",function(){return wr}),i.d(t,"getOppositeDirection",function(){return xr}),i.d(t,"processPathData",function(){return ri}),i.d(t,"parsePathData",function(){return oi}),i.d(t,"getRectanglePath",function(){return ai}),i.d(t,"getPolygonPath",function(){return si}),i.d(t,"pathSegmentCollection",function(){return li}),i.d(t,"transformPath",function(){return ci}),i.d(t,"updatedSegment",function(){return hi}),i.d(t,"scalePathData",function(){return di}),i.d(t,"splitArrayCollection",function(){return pi}),i.d(t,"getPathString",function(){return ui}),i.d(t,"getString",function(){return fi}),i.d(t,"randomId",function(){return Ch}),i.d(t,"cornersPointsBeforeRotation",function(){return Ph}),i.d(t,"getBounds",function(){return Eh}),i.d(t,"cloneObject",function(){return Oh}),i.d(t,"getInternalProperties",function(){return Mh}),i.d(t,"cloneArray",function(){return Th}),i.d(t,"extendObject",function(){return Ah}),i.d(t,"extendArray",function(){return Lh}),i.d(t,"textAlignToString",function(){return Dh}),i.d(t,"wordBreakToString",function(){return kh}),i.d(t,"bBoxText",function(){return Ih}),i.d(t,"middleElement",function(){return Rh}),i.d(t,"overFlow",function(){return Nh}),i.d(t,"whiteSpaceToString",function(){return jh}),i.d(t,"rotateSize",function(){return zh}),i.d(t,"rotatePoint",function(){return Hh}),i.d(t,"getOffset",function(){return Bh}),i.d(t,"getFunction",function(){return _h}),i.d(t,"completeRegion",function(){return qs}),i.d(t,"findNodeByName",function(){return Zs}),i.d(t,"findObjectType",function(){return Qs}),i.d(t,"setSwimLaneDefaults",function(){return Ks}),i.d(t,"setUMLActivityDefaults",function(){return $s}),i.d(t,"setConnectorDefaults",function(){return Js}),i.d(t,"findNearestPoint",function(){return el}),i.d(t,"isDiagramChild",function(){return tl}),i.d(t,"groupHasType",function(){return il}),i.d(t,"updateDefaultValues",function(){return nl}),i.d(t,"updateLayoutValue",function(){return rl}),i.d(t,"isPointOverConnector",function(){return ol}),i.d(t,"intersect3",function(){return al}),i.d(t,"intersect2",function(){return sl}),i.d(t,"getLineSegment",function(){return ll}),i.d(t,"getPoints",function(){return cl}),i.d(t,"getTooltipOffset",function(){return hl}),i.d(t,"sort",function(){return pl}),i.d(t,"getAnnotationPosition",function(){return ul}),i.d(t,"getOffsetOfConnector",function(){return fl}),i.d(t,"getAlignedPosition",function(){return gl}),i.d(t,"alignLabelOnSegments",function(){return ml}),i.d(t,"getBezierDirection",function(){return yl}),i.d(t,"removeChildNodes",function(){return vl}),i.d(t,"serialize",function(){return wl}),i.d(t,"deserialize",function(){return Cl}),i.d(t,"upgrade",function(){return Pl}),i.d(t,"updateStyle",function(){return El}),i.d(t,"updateHyperlink",function(){return Ml}),i.d(t,"updateShapeContent",function(){return Tl}),i.d(t,"updateShape",function(){return Al}),i.d(t,"updateContent",function(){return Ll}),i.d(t,"updateUmlActivityNode",function(){return Dl}),i.d(t,"getUMLFinalNode",function(){return kl}),i.d(t,"getUMLActivityShapes",function(){return Il}),i.d(t,"removeGradient",function(){return Rl}),i.d(t,"removeItem",function(){return Nl}),i.d(t,"updateConnector",function(){return jl}),i.d(t,"getUserHandlePosition",function(){return zl}),i.d(t,"canResizeCorner",function(){return Hl}),i.d(t,"canShowCorner",function(){return Bl}),i.d(t,"checkPortRestriction",function(){return _l}),i.d(t,"findAnnotation",function(){return Wl}),i.d(t,"findPort",function(){return Fl}),i.d(t,"getInOutConnectPorts",function(){return Yl}),i.d(t,"findObjectIndex",function(){return Xl}),i.d(t,"getObjectFromCollection",function(){return Vl}),i.d(t,"scaleElement",function(){return Ul}),i.d(t,"arrangeChild",function(){return Gl}),i.d(t,"insertObject",function(){return ql}),i.d(t,"getElement",function(){return Zl}),i.d(t,"getCollectionChangeEventArguements",function(){return Kl}),i.d(t,"getDropEventArguements",function(){return $l}),i.d(t,"getPoint",function(){return Jl}),i.d(t,"getObjectType",function(){return ec}),i.d(t,"flipConnector",function(){return tc}),i.d(t,"updatePortEdges",function(){return ic}),i.d(t,"alignElement",function(){return nc}),i.d(t,"updatePathElement",function(){return rc}),i.d(t,"findPath",function(){return oc}),i.d(t,"findDistance",function(){return ac}),i.d(t,"cloneBlazorObject",function(){return sc}),i.d(t,"CanvasRenderer",function(){return Wh}),i.d(t,"DiagramRenderer",function(){return Yh}),i.d(t,"DataBinding",function(){return Sp}),i.d(t,"getBasicShape",function(){return fn}),i.d(t,"getPortShape",function(){return kn}),i.d(t,"getDecoratorShape",function(){return In}),i.d(t,"getIconShape",function(){return Rn}),i.d(t,"getFlowShape",function(){return zn}),i.d(t,"Hyperlink",function(){return Tn}),i.d(t,"Annotation",function(){return An}),i.d(t,"ShapeAnnotation",function(){return Ln}),i.d(t,"PathAnnotation",function(){return Dn}),i.d(t,"Port",function(){return Pn}),i.d(t,"PointPort",function(){return En}),i.d(t,"menuClass",function(){return Up}),i.d(t,"DiagramContextMenu",function(){return Gp}),i.d(t,"Shape",function(){return mc}),i.d(t,"Path",function(){return yc}),i.d(t,"Native",function(){return vc}),i.d(t,"Html",function(){return bc}),i.d(t,"Image",function(){return wc}),i.d(t,"Text",function(){return xc}),i.d(t,"BasicShape",function(){return Sc}),i.d(t,"FlowShape",function(){return Cc}),i.d(t,"BpmnGateway",function(){return Pc}),i.d(t,"BpmnDataObject",function(){return Ec}),i.d(t,"BpmnTask",function(){return Oc}),i.d(t,"BpmnEvent",function(){return Mc}),i.d(t,"BpmnSubEvent",function(){return Tc}),i.d(t,"BpmnTransactionSubProcess",function(){return Ac}),i.d(t,"BpmnSubProcess",function(){return Lc}),i.d(t,"BpmnActivity",function(){return Dc}),i.d(t,"BpmnAnnotation",function(){return kc}),i.d(t,"BpmnShape",function(){return Ic}),i.d(t,"UmlActivityShape",function(){return Rc}),i.d(t,"MethodArguments",function(){return Nc}),i.d(t,"UmlClassAttribute",function(){return jc}),i.d(t,"UmlClassMethod",function(){return zc}),i.d(t,"UmlClass",function(){return Hc}),i.d(t,"UmlInterface",function(){return Bc}),i.d(t,"UmlEnumerationMember",function(){return _c}),i.d(t,"UmlEnumeration",function(){return Wc}),i.d(t,"UmlClassifierShape",function(){return Fc}),i.d(t,"Node",function(){return Yc}),i.d(t,"Header",function(){return Xc}),i.d(t,"Lane",function(){return Vc}),i.d(t,"Phase",function(){return Uc}),i.d(t,"SwimLane",function(){return Gc}),i.d(t,"ChildContainer",function(){return qc}),i.d(t,"Selector",function(){return Zc}),i.d(t,"BpmnDiagrams",function(){return qp}),i.d(t,"getBpmnShapePathData",function(){return Zp}),i.d(t,"getBpmnTriggerShapePathData",function(){return Qp}),i.d(t,"getBpmnGatewayShapePathData",function(){return Kp}),i.d(t,"getBpmnTaskShapePathData",function(){return $p}),i.d(t,"getBpmnLoopShapePathData",function(){return Jp}),i.d(t,"Decorator",function(){return _o}),i.d(t,"Vector",function(){return Wo}),i.d(t,"ConnectorShape",function(){return Fo}),i.d(t,"ActivityFlow",function(){return Yo}),i.d(t,"BpmnFlow",function(){return Xo}),i.d(t,"ConnectorSegment",function(){return Vo}),i.d(t,"StraightSegment",function(){return Uo}),i.d(t,"BezierSegment",function(){return Go}),i.d(t,"OrthogonalSegment",function(){return qo}),i.d(t,"getDirection",function(){return Zo}),i.d(t,"isEmptyVector",function(){return Qo}),i.d(t,"getBezierPoints",function(){return Ko}),i.d(t,"getBezierBounds",function(){return $o}),i.d(t,"bezierPoints",function(){return Jo}),i.d(t,"MultiplicityLabel",function(){return ea}),i.d(t,"ClassifierMultiplicity",function(){return ta}),i.d(t,"RelationShip",function(){return ia}),i.d(t,"Connector",function(){return na}),i.d(t,"ConnectorBridging",function(){return ou}),i.d(t,"Snapping",function(){return au}),i.d(t,"UndoRedo",function(){return su}),i.d(t,"DiagramTooltip",function(){return Eo}),i.d(t,"initTooltip",function(){return Oo}),i.d(t,"updateTooltip",function(){return Ao}),i.d(t,"LayoutAnimation",function(){return lu}),i.d(t,"UserHandle",function(){return Wa}),i.d(t,"ToolBase",function(){return Ed}),i.d(t,"SelectTool",function(){return Od}),i.d(t,"ConnectTool",function(){return Md}),i.d(t,"MoveTool",function(){return Td}),i.d(t,"RotateTool",function(){return Ad}),i.d(t,"ResizeTool",function(){return Ld}),i.d(t,"NodeDrawingTool",function(){return Dd}),i.d(t,"ConnectorDrawingTool",function(){return kd}),i.d(t,"TextDrawingTool",function(){return Id}),i.d(t,"ZoomPanTool",function(){return Rd}),i.d(t,"ExpandTool",function(){return Nd}),i.d(t,"LabelTool",function(){return jd}),i.d(t,"PolygonDrawingTool",function(){return zd}),i.d(t,"PolyLineDrawingTool",function(){return Hd}),i.d(t,"LabelDragTool",function(){return Bd}),i.d(t,"LabelResizeTool",function(){return _d}),i.d(t,"LabelRotateTool",function(){return Wd}),i.d(t,"DiagramEventHandler",function(){return Xd}),i.d(t,"CommandHandler",function(){return Zd}),i.d(t,"findToolToActivate",function(){return gd}),i.d(t,"findPortToolToActivate",function(){return md}),i.d(t,"contains",function(){return yd}),i.d(t,"hasSelection",function(){return vd}),i.d(t,"hasSingleConnection",function(){return bd}),i.d(t,"isSelected",function(){return wd}),i.d(t,"getCursor",function(){return xd}),i.d(t,"ConnectorEditing",function(){return Yd}),i.d(t,"updateCanvasBounds",function(){return ns}),i.d(t,"removeChildInContainer",function(){return rs}),i.d(t,"findBounds",function(){return os}),i.d(t,"createHelper",function(){return as}),i.d(t,"renderContainerHelper",function(){return ss}),i.d(t,"checkParentAsContainer",function(){return ls}),i.d(t,"checkChildNodeInContainer",function(){return cs}),i.d(t,"addChildToContainer",function(){return ds}),i.d(t,"updateLaneBoundsAfterAddChild",function(){return ps}),i.d(t,"renderStackHighlighter",function(){return us}),i.d(t,"moveChildInStack",function(){return fs}),i.d(t,"LineRouting",function(){return cu}),i.d(t,"CrudAction",function(){return cd}),i.d(t,"ConnectionDataSource",function(){return hd}),i.d(t,"DataSource",function(){return dd}),i.d(t,"Gridlines",function(){return $h}),i.d(t,"SnapSettings",function(){return Jh}),i.d(t,"KeyGesture",function(){return Ua}),i.d(t,"Command",function(){return Ga}),i.d(t,"CommandManager",function(){return qa}),i.d(t,"ContextMenuSettings",function(){return Za}),i.d(t,"CustomCursorAction",function(){return rp}),i.d(t,"DataMappingItems",function(){return ad}),i.d(t,"Layout",function(){return fd}),i.d(t,"MindMap",function(){return du}),i.d(t,"HierarchicalTree",function(){return hu}),i.d(t,"RadialTree",function(){return pu}),i.d(t,"GraphForceNode",function(){return uu}),i.d(t,"SymmetricLayout",function(){return fu}),i.d(t,"GraphLayoutManager",function(){return gu}),i.d(t,"ComplexHierarchicalTree",function(){return vu}),i.d(t,"Palette",function(){return Ru}),i.d(t,"SymbolPreview",function(){return Nu}),i.d(t,"SymbolPalette",function(){return ju}),i.d(t,"Ruler",function(){return aa}),i.d(t,"Overview",function(){return Bu})},function(e,t,i){"use strict";i.r(t);var n=i(0),r=i(9);function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function a(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!p(i);r++)i=i[n[r]];return i}function s(e,t,i){var n,r,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?{}:t:d(s[r])&&(s[r]={}),s=s[r];return a}function l(e){return!d(e)&&e.constructor==={}.constructor}function c(e,t){if(!d(t))for(var i=e,n=t,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];d(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!l(n[a])&&!Array.isArray(n[a])?i[a]=n[a]:h(i[a],i[a],n[a],!0)}}function h(e,t,i,n){var r=e||{},o=arguments.length;n&&(o-=1);for(var a=function(e){if(!s[e])return"continue";var t=s[e];Object.keys(t).forEach(function(e){var i,o=r[e],a=t[e];n&&(l(a)||Array.isArray(a))?l(a)?(i=o||{},r[e]=h({},i,a,n)):(i=o||[],r[e]=h([],i,a,n)):r[e]=a})},s=arguments,c=1;c<o;c++)a(c);return r}function d(e){return void 0===e||null===e}function p(e){return"undefined"===typeof e}function u(e,t){return e===t||!(e===document||!e)&&u(e.parentNode,t)}function f(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function g(){return window&&Object.keys(window).indexOf("Blazor")>=0}var m=/^(.*?):[ \t]*([^\r\n]*)$/gm,y="GET",v=(function(){function e(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():y,this.mode=!!d(i)||i):"object"===typeof e&&(this.options=e,c(this,this.options)),this.type=this.type?this.type.toUpperCase():y,this.contentType=void 0!==this.contentType?this.contentType:n}e.prototype.send=function(e){var t=this;this.data=d(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise(function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},d(t.onLoad)||(t.httpRequest.onload=t.onLoad),d(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),d(t.onAbort)||(t.httpRequest.onabort=t.onAbort),d(t.onError)||(t.httpRequest.onerror=t.onError),d(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),d(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(d(t.data)?null:t.data)})},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=m.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=m.exec(this.httpRequest.getAllResponseHeaders());return d(i=t[e.toLowerCase()])?null:i}}(),function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,r,o){var a,s=e.addOrGetEventData(t);a=o?function(e,t){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){return i=null,e.apply(n,r)},t)}}(n,o):n,r&&(a=a.bind(r));for(var l=i.split(" "),c=0;c<l.length;c++)s.push({name:l[c],listener:n,debounce:a}),t.addEventListener(l[c],a);return a},e.remove=function(t,i,n){for(var r=e.addOrGetEventData(t),o=i.split(" "),a=function(e){var i,a=-1;r&&0!==r.length&&r.some(function(t,r){return t.name===o[e]&&t.listener===n&&(a=r,i=t.debounce,!0)}),-1!==a&&r.splice(a,1),i&&t.removeEventListener(o[e],i)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var i,n;n=h([],n,i=e.addOrGetEventData(t));for(var r=0;r<n.length;r++)t.removeEventListener(n[r].name,n[r].debounce),i.shift()},e.trigger=function(t,i,n){for(var r=0,o=e.addOrGetEventData(t);r<o.length;r++){var a=o[r];a.name===i&&a.debounce.call(this,n)}},e}()),b=/^svg|^path|^g/;function w(e,t){var i=b.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t?i:(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&function(e,t){for(var i=Object.keys(t),n=e,r=0,o=i;r<o.length;r++){var a=o[r];n.setAttribute(a,t[a])}}(i,t.attrs),i)}function x(e,t){for(var i=C(t),n=0,r=e;n<r.length;n++)for(var o=r[n],a=0,s=i;a<s.length;a++){var l=s[a];o.classList.contains(l)||o.classList.add(l)}return e}function S(e,t){for(var i=C(t),n=0,r=e;n<r.length;n++){var o=r[n];if(""!==o.className)for(var a=0,s=i;a<s.length;a++){var l=s[a];o.classList.remove(l)}}return e}function C(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function P(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function E(e){return e.parentNode.removeChild(e)}function O(e,t){return void 0===t&&(t=document),t.querySelector(e)}function M(e,t){return void 0===t&&(t=document),t.querySelectorAll(e)}function T(e,t){var i=e;if("function"===typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(L(i,t))return i;i=i.parentNode}return null}function A(e,t){void 0!==t&&Object.keys(t).forEach(function(i){e.style[i]=t[i]})}function L(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var D=function(){function e(e){this.ranArray=[],this.boundedEvents={},d(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!d(t)){var r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:d(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:r,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=a(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var r=a(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(r,t,i,n,0);for(var o=0,s=r;o<s.length;o++){var l=s[o];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,r){var o=this,a=r===e.length-1;if(r<e.length){var s=e[r],l=s.handler.call(s.context,t);if(l&&"function"===typeof l.then){if(!i)return l;l.then(function(l){if(l="string"===typeof l&&o.isJson(l)?JSON.parse(l):l,h(t,t,l,!0),!i||!a)return o.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}).catch(function(e){n&&n.call(s.context,"string"===typeof e&&o.isJson(e)?JSON.parse(e):e)})}else{if(!i||!a)return this.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}}},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),k=new RegExp("]"),I=function(){function e(e,t){this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.refreshing=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new D(this),p(t)||(this.element="string"===typeof t?document.querySelector(t):t,d(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),p(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,c(this,e),!0!==t&&(c(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(t[r]instanceof Array)for(var o=0,a=t[r];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[r].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.saveChanges=function(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),r=function(i){i.source===window&&"string"===typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),e=r=n=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(e,t,i,n);if(k.test(e)){var l=a(e,this);if(l){if(window.Blazor){var c=l.call(this,t);c&&"function"===typeof c.then?i?c.then(function(e){i&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,i.call(r,e))}).catch(function(e){n&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,n.call(r,e))}):s=c:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,s}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();x([this.element],["e-lib",e]),d(this.element.ej2_instances)?s("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),S([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&S([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();var R=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,N=/msie|trident/i,j=/Trident\/7\./,z=/(ipad|iphone|ipod touch)/i,H=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,B=/android/i,_=/trident|windows phone|edge/i,W=/(version)[ \/]([\w.]+)/i,F={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var Y=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,r=Object.keys(F);n<r.length;n++){var o=r[n];if(i=e.userAgent.match(F[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(j)){t.name="msie";break}var a=e.userAgent.match(W);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n=window.browserDetails;return"undefined"===typeof n[t]?n[t]=i.test(e.userAgent):n[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return p(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",N)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return p(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return p(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return p(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",R)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",z)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",H)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",B)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return p(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(p(window.cordova)&&p(window.PhoneGap)&&p(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",_)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return p(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return p(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return p(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return p(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}();function X(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=o(n,[e,t,i])),e.properties[t]}function V(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function U(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function G(e,t,i){return function(){return X(this,t,e,i)}}function q(e,t,i){return function(n){X(this,t,e,i).setProperties(n)}}function Z(e){return function(t,i){var n={set:U(e,i),get:V(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),J(t,i,"prop",e)}}function Q(e,t){return function(i,n){var r={set:q(e,n,t),get:G(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),J(i,n,"complexProp",e,t)}}function K(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=a("propName",t);return n&&(i=n+"-"+i),e(a("parentObj",t),i)}(this,t);!1===p(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:V(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),J(e,t,"event")}}function $(e){}function J(e,t,i,n,r){p(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:r}),e.propList[i+"Names"].push(t)}var ee=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),te=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};!function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;ee(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var r=0,o=Array.prototype.slice.call(M(e,document));r<o.length;r++){var a=o[r];n.element=a,i.delayAnimation(n)}else n.element=e,i.delayAnimation(n)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout(function(){i.applyAnimation(e)},e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,r=0,o=e.duration;e.element.setAttribute("e-animate","true");!function a(s){try{if(s){r=0===r?s:r,e.timeStamp=s+e.timeStamp-r,r=s,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else performance.now(),n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(c){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,c)}}()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},te([Z("FadeIn")],t.prototype,"name",void 0),te([Z(400)],t.prototype,"duration",void 0),te([Z("ease")],t.prototype,"timingFunction",void 0),te([Z(0)],t.prototype,"delay",void 0),te([K()],t.prototype,"progress",void 0),te([K()],t.prototype,"begin",void 0),te([K()],t.prototype,"end",void 0),te([K()],t.prototype,"fail",void 0),t=i=te([$],t)}(I);var ie,ne,re=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var r=e[n],a=0,l=t;a<l.length;a++){var c=l[a],h=r.member;if(c.prototype.getModuleName()===r.member&&!this.isModuleLoaded(h)){var d=o(c,r.args),p=this.getMemberName(h);r.isProperty?s(p,c,this.parent):s(p,d,this.parent);var u=r;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,i,n=this,r=e.map(function(e){return n.getMemberName(e.member)}),o=0,s=this.loadedModules.filter(function(e){return-1===r.indexOf(e.member)});o<s.length;o++){var l=s[o];l.isProperty||a(l.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(l),1),t=this.parent,i=l.member,delete t[i]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),oe=function(){function e(e,t,i,n){this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",I),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.setProperties(i,!0),this.isParentArray=n}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(c(this,e),this.updateChange(!1,this.propName),this.clearChanges()):c(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(s(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),s(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i){if(this.controlParent.isRendered&&g()){window&&window.ejsInterop&&window.ejsInterop.childSaveChanges.call(this,e,t,i)}this.controlParent.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e}(),ae={latn:{_digits:"0123456789",_type:"numeric"}},se={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},le=[0,1,2,3,4,5,6,7,8,9],ce=function(){function e(){}return e.getMainObject=function(e,t){return a("main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,r=t||Object.keys(e);n<r.length;n++){var o=r[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(se);i<n.length;i++){var r=n[i];t[e[r]]=se[r]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i},e.convertValueParts=function(e,t,i){return e.replace(t,function(e){return i[e]})},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i){var n={},r=this.getDefaultNumberingSystem(e);if(!p(r.nSystem)){var o=a(r.nSystem+"._digits",t);p(o)||(n.numericPair=this.reverseObject(o,le),n.numberParseRegex=new RegExp(this.constructRegex(o),"g"),n.numericRegex="["+o[0]+"-"+o[9]+"]",i&&(n.numericRegex=o[0]+"-"+o[9],n.symbolNumberSystem=a("symbols-numberSystem-"+r.nSystem,r.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=r.nSystem))}return n},e.getNumberMapper=function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!p(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=a("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=a("timeSeparator",n.numberSymbols);var o=a(r.nSystem+"._digits",t);if(!p(o))for(var s=0,l=le;s<l.length;s++){var c=l[s];n.mapper[c]=o[c]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=ae,e}(),he={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},de=["infinity","nan","group","decimal","exponential"],pe=function(){function e(){}return e.numberFormatter=function(e,t,i){var n,r=this,o=h({},t),a={},s={},l=ie.getDependables(i,e,"",!0);s.numberMapper=ce.getNumberMapper(l.parserObject,ce.getNumberingSystem(i),!0),s.currencySymbol=ie.getCurrencySymbol(l.numericObject,o.currency||Ae),s.percentSymbol=s.numberMapper.numberSymbols.percentSign,s.minusSymbol=s.numberMapper.numberSymbols.minusSign;var c=s.numberMapper.numberSymbols;if(t.format&&!ie.formatRegex.test(t.format))a=ie.customFormat(t.format,s,l.numericObject);else{h(o,ie.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,n=ie.getSymbolPattern(o.type,s.numberMapper.numberSystem,l.numericObject,o.isAccount),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),p(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),p(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&(n=n.replace(/\u00A4/g,ie.defaultCurrency));var d=n.split(";");if(a.nData=ie.getFormatData(d[1]||"-"+d[0],!0,s.currencySymbol),a.pData=ie.getFormatData(d[0],!1,s.currencySymbol),o.useGrouping&&(o.groupSeparator=c[de[2]],o.groupData=this.getGroupingDetails(d[0])),p(o.minimumFractionDigits)&&(o.minimumFractionDigits=a.nData.minimumFraction),p(o.maximumFractionDigits)){var u=a.nData.maximumFraction;o.maximumFractionDigits=p(u)&&o.isPercent?0:u}var f=o.minimumFractionDigits,g=o.maximumFractionDigits;p(f)||p(g)||f>g&&(o.maximumFractionDigits=f)}return h(a.nData,o),h(a.pData,o),function(e){return isNaN(e)?c[de[1]]:isFinite(e)?r.intNumberFormatter(e,a,s):c[de[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(ie.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];t.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t},e.checkValueRange=function(e,t,i,n){var r=n?"f":"s",o=0,a=he["l"+r],s=he["m"+r];if(p(e)||(this.checkRange(e,a,n),o++),p(t)||(this.checkRange(t,s,n),o++),2===o){if(!(e<t))return!0;f(s+"specified must be less than the"+a)}else i&&1===o&&f("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&f(t+"value must be within the range"+n[0]+"to"+n[1])},e.intNumberFormatter=function(e,t,i){var n;if(!p(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var r="";return n.isPercent&&(e*=100),n.groupOne?r=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[de[4]])),r=r.replace(".",i.numberMapper.numberSymbols[de[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[de[3]]||".",n.groupData.secondary)),r=ce.convertValueParts(r,ie.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},e.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,n,r){for(var o=!d(r)&&0!==r,a=e.split(n),s=a[0],l=s.length,c="";l>t;)c=s.slice(l-t,l)+(c.length?i+c:""),l-=t,o&&(t=r,o=!1);return a[0]=s.slice(0,l)+(c.length?i:"")+c,a.join(n)},e.processFraction=function(e,t,i){var n=(e+"").split(".")[1],r=n?n.length:0;if(t&&r<t){var o="";if(0!==r){o+=e;for(var a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!d(i)&&(r>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var o=0;o<t-r;o++)n="0"+n;i[0]=n}return i.join(".")},e}();!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"},o="sun";e.islamicRegex=/^islamic/;var s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function c(t,i,n,r){var o,s=n||"date";if(-1!==e.basicPatterns.indexOf(t)){if(o=a(s+"Formats."+t,i),"dateTime"===s){var l=a("dateFormats."+t,i),c=a("timeFormats."+t,i);o=o.replace("{1}",l).replace("{0}",c)}}else o=a("dateTimeFormats.availableFormats."+t,i);return p(o)&&"yMd"===t&&(o="M/d/y"),o}function u(t,i,n,r){var o={},s=n||"gregorian";return o.parserObject=ce.getMainObject(t,i)||e.defaultObject,r?o.numericObject=a("numbers",o.parserObject):o.dateObject=a("dates.calendars."+s,o.parserObject),o}function f(e,t,i,n){return a(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function g(t){var i=t.match(e.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=e.patternMatcher[r],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function m(i,n,r,o){var a=o?{}:{nlead:"",nend:""},s=i.match(e.customRegex);if(s){o||(a.nlead=y(s[1],r),a.nend=y(s[10],r),a.groupPattern=s[4]);var l=s[7];if(l&&n){var c=l.match(t);d(c)?a.minimumFraction=0:a.minimumFraction=c.length,a.maximumFraction=l.length-1}}return a}function y(t,i){return t?t.replace(e.defaultCurrency,i):""}function v(e,t){return a("currencies."+t+".symbol",e)||a("currencies."+t+".symbol-alt-narrow",e)||"$"}function b(t,n,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);(d(a)||""===a[5]&&"N/A"!==t)&&(o.type=void 0),o.nlead=a[1],o.nend=a[10];var s=a[6];o.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=a[7];if(-1!==s.indexOf("0")&&(o.minimumIntegerDigits=s.length-s.indexOf("0")),d(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),d(n)?h(o,w([o.nlead,o.nend],"%","%")):(h(o,w([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||h(o,w([o.nlead,o.nend],"%",n.percentSymbol))),!d(r)){var c=f(o.type,n.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=n.numberMapper.numberSymbols[i[2]],o.groupData=pe.getGroupingDetails(c.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function w(e,t,i){for(var n={nlead:e[0],nend:e[1]},r=0;r<2;r++){var o=e[r],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){n[l[r]]=o.substr(0,a)+i+o.substr(a+1),n[l[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=c,e.getDependables=u,e.getSymbolPattern=f,e.getProperNumericSkeleton=g,e.getFormatData=m,e.getCurrencySymbol=v,e.customFormat=function(e,t,i){for(var n={},r=e.split(";"),o=["pData","nData","zeroData"],a=0;a<r.length;a++)n[o[a]]=b(r[a],t,i);return d(n.nData)&&(n.nData=h({},n.pData),n.nData.nlead=d(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=w,e.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){var s=u(i,e,t.calendar),l=t.format||c(t.skeleton,s.dateObject,t.type);if(o){if(-1!==(l=l.replace(n,function(e){return r[e]})).indexOf("z")){var h=l.match(/z/g).length,d=void 0,p={timeZone:{}};p.numMapper=ce.getNumberMapper(s.parserObject,ce.getNumberingSystem(i)),p.timeZone=a("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),g=h<4?"+H;-H":p.timeZone.hourFormat;g=g.replace(/:/g,p.numMapper.timeSeparator),0===f?d=p.timeZone.gmtZeroFormat:(d=ye.getTimeZoneValue(f,g),d=p.timeZone.gmtFormat.replace(/\{0\}/,d)),l=l.replace(/[z]+/,'"'+d+'"')}l=l.replace(/ $/,"")}return l},e.getActualNumberFormat=function(t,i,n){var r,o,a=u(n,t,"",!0),s={custom:!0},l={},c=(i.format||"").match(e.currencyFormatRegex);if(c){var d={};d.numberMapper=ce.getNumberMapper(a.parserObject,ce.getNumberingSystem(n),!0);var p=v(a.numericObject,i.currency||Ae),y=f("currency",d.numberMapper.numberSystem,a.numericObject,/a/i.test(i.format)),b=(y=y.replace(/\u00A4/g,p)).split(";");l.hasNegativePattern=b.length>1,l.nData=m(b[1]||"-"+b[0],!0,p),l.pData=m(b[0],!1,p),c[2]||i.minimumFractionDigits||i.maximumFractionDigits||(r=m(y.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(h(s,g(i.format||"N")),s.custom=!1,o="###0",(s.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||r)&&(s.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=s.fractionDigits),o=function(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var r=i-t,o=0;o<r;o++)e+="#";return e}(o,r||s.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)),i.minimumIntegerDigits&&(o=function(e,t){for(var i=e.split("."),n="",r=0;r<t;r++)n+="0";return i[1]?n+"."+i[1]:n}(o,i.minimumIntegerDigits)),i.useGrouping&&(o=function(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)e=","+i[r-2]+i[r-1]+i[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(o)),"currency"===s.type){var w=o;o=l.pData.nlead+w+l.pData.nend,l.hasNegativePattern&&(o+=";"+l.nData.nlead+w+l.nData.nend)}"percent"===s.type&&(o+=" %")}else o=i.format.replace(/\'/g,'"');return o},e.getWeekData=function(e,t){var i=o,n=a("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||o),s[i]}}(ie||(ie={})),function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),r=e.getFullYear(),o=n+1,a=r;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,c=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+i-l-1524,h=c+(l=(s=Math.floor((c-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,d=Math.floor((h-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((h-p)/30.6001);i=h-p-Math.floor(30.6001*u),(n=Math.floor((h-p)/20.6001))>13&&(d+=1,n-=12),n-=1,r=d-4716;var f=c-24e5,g=c-1948084,m=Math.floor(g/10631);g-=10631*m;var y=Math.floor((g-.1335)/(10631/30)),v=30*m+y;g-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),x=0;x<t.length&&!(t[x]>f);x++);var S=x+16260,C=Math.floor((S-1)/12),P=C+1,E=S-12*C,O=f-t[x-1]+1;return(O+"").length>2&&(O=w,E=b,P=v),{year:P,month:E,date:O}},e.toGregorian=function(e,i,n){var r=n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),a=Math.floor((o-1867216.25)/36524.25),s=1524+(a=o+1+a-Math.floor(a/4)),l=Math.floor((s-122.1)/365.25),c=Math.floor(365.25*l),h=Math.floor((s-c)/30.6001),d=s-c-Math.floor(30.6001*h),p=h-(h>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(ne||(ne={}));var ue=/\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|cccc|ccc|G+|z+/gi,fe=["sun","mon","tue","wed","thu","fri","sat"],ge={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate"},me={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era"},ye=function(){function e(){}return e.dateFormat=function(e,t,i){var n=this,r=ie.getDependables(i,e,t.calendar),o={isIslamic:ie.islamicRegex.test(t.calendar)},s=t.format||ie.getResultantPattern(t.skeleton,r.dateObject,t.type);if(o.dateSeperator=ie.getDateSeparator(r.dateObject),p(s))f("Format options or type given must be invalid");else{o.pattern=s,o.numMapper=ce.getNumberMapper(r.parserObject,ce.getNumberingSystem(i));for(var l=0,c=s.match(ue)||[];l<c.length;l++){var h=c[l],d=h.length,u=h[0];"K"===u&&(u="h");switch(u){case"E":case"c":o.weekday=r.dateObject[ie.days]["stand-alone"][ie.monthIndex[d]];break;case"M":case"L":o.month=r.dateObject[ie.month]["stand-alone"][ie.monthIndex[d]];break;case"a":o.designator=a("dayPeriods.format.wide",r.dateObject);break;case"G":var g=d<=3?"eraAbbr":4===d?"eraNames":"eraNarrow";o.era=a("eras."+g,r.dateObject);break;case"z":o.timeZone=a("dates.timeZoneNames",r.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,o)}},e.intDateFormatter=function(e,t){for(var i="",n=t.pattern.match(ie.dateParseRegex),r=this.getCurrentDateValue(e,t.isIslamic),o=0,a=n;o<a.length;o++){var s=a[o],l=s.length,c=s[0];"K"===c&&(c="h");var h=void 0,p=void 0,u=void 0,f="";switch(c){case"M":case"L":h=r.month,l>2?i+=t.month[h]:p=!0;break;case"E":case"c":i+=t.weekday[fe[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":p=!0,h="d"===c?r.date:e[ge[c]](),"h"===c&&(h=h%12||12);break;case"y":u=!0,f+=r.year,2===l&&(f=f.substr(f.length-2));break;case"a":var g=e.getHours()<12?"am":"pm";i+=t.designator[g];break;case"G":var m=e.getFullYear()<0?0:1,y=t.era[m];d(y)&&(y=t.era[m?0:1]),i+=y||"";break;case"'":i+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var v=e.getTimezoneOffset(),b=l<4?"+H;-H":t.timeZone.hourFormat;b=b.replace(/:/g,t.numMapper.timeSeparator),0===v?i+=t.timeZone.gmtZeroFormat:(u=!0,f=this.getTimeZoneValue(v,b)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;default:i+=s}p&&(u=!0,f=this.checkTwodigitNumber(h,l)),u&&(i+=ce.convertValueParts(f,ie.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?ne.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],r=Math.abs(e);return n.replace(/HH?|mm/g,function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),t)})},e}(),ve=/^[0-9]*$/,be={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth"},we=function(){function e(){}return e.dateParser=function(e,t,i){var n,r=this,o=ie.getDependables(i,e,t.calendar),s=ce.getCurrentNumericOptions(o.parserObject,ce.getNumberingSystem(i)),l={},c=t.format||ie.getResultantPattern(t.skeleton,o.dateObject,t.type),h="";if(p(c))f("Format options or type given must be invalid");else{l={isIslamic:ie.islamicRegex.test(t.calendar),pattern:c,evalposition:{}};for(var u=c.match(ie.dateParseRegex)||[],g=u.length,m=0,y=0,v=!1,b=s.numericRegex,w=ce.getNumberMapper(o.parserObject,ce.getNumberingSystem(i)),x=0;x<g;x++){var S=u[x],C=S.length,P="K"===S[0]?"h":S[0],E=void 0,O=void 0,M=me[P],T=2===C?"":"?";switch(v&&(m=y,v=!1),P){case"E":case"c":var A=ce.reverseObject(o.dateObject[ie.days]["stand-alone"][ie.monthIndex[C]]);h+="("+Object.keys(A).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":O=!0,("M"===P||"L"===P)&&C>2?(l[M]=ce.reverseObject(o.dateObject.months["stand-alone"][ie.monthIndex[C]]),h+="("+Object.keys(l[M]).join("|")+")"):(E=!0,h+="("+b+b+T+")"),"h"===P&&(l.hour12=!0);break;case"y":O=E=!0,h+=2===C?"("+b+b+")":"("+b+"{"+C+",})";break;case"a":O=!0,l[M]=ce.reverseObject(a("dayPeriods.format.wide",o.dateObject)),h+="("+Object.keys(l[M]).join("|")+")";break;case"G":O=!0;var L=C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow";l[M]=ce.reverseObject(a("eras."+L,o.dateObject)),h+="("+Object.keys(l[M]).join("|")+"?)";break;case"z":O=0!==(new Date).getTimezoneOffset(),l[M]=a("dates.timeZoneNames",o.parserObject);var D=l[M],k=(n=C<4)?"+H;-H":D.hourFormat;k=k.replace(/:/g,w.timeSeparator),h+="("+this.parseTimeZoneRegx(k,D,b)+")?",v=!0,y=n?6:12;break;case"'":h+="("+S.replace(/\'/g,"")+")?";break;default:h+="([\\D])"}O&&(l.evalposition[M]={isNumber:E,pos:x+1+m,hourOnly:n}),x!==g-1||d(h)||(l.parserRegex=new RegExp("^"+h+"$"))}}return function(e){var t=r.internalDateParse(e,l,s);if(d(t)||!Object.keys(t).length)return null;if(l.isIslamic){var i={},n=t.year,o=t.day,a=t.month,c=n?n+"":"",h=2===c.length;n&&a&&o&&!h||(i=ne.getHijriDate(new Date)),h&&(n=parseInt((i.year+"").slice(0,2)+c,10));var p=ne.toGregorian(n||i.year,a||i.month,o||i.date);t.year=p.getFullYear(),t.month=p.getMonth()+1,t.day=p.getDate()}return r.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,r=e.designator,o=e.timeZone;if(!p(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,s=["hour","minute","second","month","day"];a<s.length;a++){var l=s[a],c=e[l];if(p(c)&&"day"===l&&i.setDate(1),!p(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[be[l]](c);var d=new Date(i.getFullYear(),c+1,0).getDate();i.setDate(h<d?h:d)}else{if("day"===l){var u=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(c<1||c>u)return null}i[be[l]](c)}}if(!p(r)){var f=i.getHours();"pm"===r?i.setHours(f+(12===f?0:12)):12===f&&i.setHours(0)}if(!p(o)){var g=o-i.getTimezoneOffset();0!==g&&i.setMinutes(i.getMinutes()+g)}return i},e.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};i.numericRegex;if(d(n))return null;for(var o=0,a=Object.keys(t.evalposition);o<a.length;o++){var s=a[o],l=t.evalposition[s],c=n[l.pos];if(l.isNumber)r[s]=this.internalNumberParser(c,i);else if("timeZone"!==s||p(c))r[s]=t[s][c];else{var h=l.pos,u=void 0,f=n[h+1],g=!p(f);l.hourOnly?u=60*this.getZoneValue(g,f,n[h+4],i):(u=60*this.getZoneValue(g,f,n[h+7],i),u+=this.getZoneValue(g,n[h+4],n[h+10],i)),d(u)||(r[s]=u)}}return t.hour12&&(r.hour12=!0),r},e.internalNumberParser=function(e,t){return e=ce.convertValueParts(e,t.numberParseRegex,t.numericPair),ve.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var n,r,o=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),r=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map(function(e){return o.replace("{0}",e)}),n=r.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,n){var r=e?t:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return e?-o:o},e}(),xe=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,Se=/,/g,Ce=["minusSign","infinity"],Pe=function(){function e(){}return e.numberParser=function(e,t,i){var n,r=this,o=ie.getDependables(i,e,"",!0),a={custom:!0};ie.formatRegex.test(t.format)||!t.format?(h(a,ie.getProperNumericSkeleton(t.format||"N")),a.custom=!1):h(a,ie.customFormat(t.format,null,null)),n=ce.getCurrentNumericOptions(o.parserObject,ce.getNumberingSystem(i),!0),a.symbolRegex=ce.getSymbolRegex(Object.keys(n.symbolMatch)),a.infinity=n.symbolNumberSystem[Ce[1]];var s=ie.getSymbolPattern(a.type,n.numberSystem,o.numericObject,a.isAccount);if(s){var l=(s=s.replace(/\u00A4/g,ie.defaultCurrency)).split(";");a.nData=ie.getFormatData(l[1]||"-"+l[0],!0,""),a.pData=ie.getFormatData(l[0],!0,"")}return function(e){return r.getParsedNumber(e,a,n)}},e.getParsedNumber=function(e,t,i){var n,r,o,a,s,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=ce.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=ce.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(xe);if(d(c))return NaN;a=c[1],o=c[2];var h=c[5];return s=c[6],r=(n=t.custom?a===t.nData.nlead&&s===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==s.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(Se,""),h&&(o+=h),l=+o,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l},e}(),Ee=new D,Oe=!1,Me={},Te="en-US",Ae="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return ye.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},Me)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=Ae),pe.numberFormatter(this.getCulture(),e||{},Me)},e.prototype.getDateParser=function(e){return we.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},Me)},e.prototype.getNumberParser=function(e){return Pe.numberParser(this.getCulture(),e||{format:"N"},Me)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return ie.getActualDateTimeFormat(this.getCulture(),e,Me,t)},e.prototype.getNumberPattern=function(e){return ie.getActualNumberFormat(this.getCulture(),e,Me)},e.prototype.getFirstDayOfWeek=function(){return ie.getWeekData(this.getCulture(),Me)},e.prototype.getCulture=function(){return this.culture||Te}}();var Le,De=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ke=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ie=0,Re=0;!function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isRendered=!1,n.createElement=w,d(n.enableRtl)&&n.setProperties({enableRtl:Oe},!0),d(n.locale)&&n.setProperties({locale:Te},!0),n.moduleLoader=new re(n),n.localObserver=new D(n),Ee.on("notifyExternalChange",n.detectFunction,n,n.randomId),p(i)||n.appendTo(),n}De(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(S([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),Ee.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new D(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.appendTo=function(t){if(d(t)||"string"!==typeof t?d(t)||(this.element=t):this.element=document.querySelector(t),!d(this.element)){var i="e-"+this.getModuleName().toLowerCase();x([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=a("ej2_instances",this.element);n&&-1!==n.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.trigger("created")}},t.prototype.renderComplete=function(e){if(g()){window.ejsInterop.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"===typeof e)this.localObserver.on(e,t,i);else for(var n=0,r=e;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);d(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(Ie=0),Le=this.pageID(location.href),Re=history.length,e+"_"+Le+"_"+Ie++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return Le!==this.pageID(location.href)||Re!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,r=e;n<r.length;n++){var o,l=r[n];p(o=a(l,this))||s(l,this.getActualProperties(o),i)}return JSON.stringify(i,function(e,i){return t.getActualProperties(i)})},t.prototype.getActualProperties=function(e){return e instanceof oe?a("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},n=function(n){if(-1===t.indexOf(n)){var o=e[n];if("object"!==typeof o||o instanceof Array)i[n]=o;else{var a=t.filter(function(e){return new RegExp(n+".").test(e)}).map(function(e){return e.replace(n+".","")});i[n]=r.iterateJsonProperties(r.getActualProperties(o),a)}}},r=this,o=0,a=Object.keys(e);o<a.length;o++){n(a[o])}return i},ke([Z(!1)],t.prototype,"enablePersistence",void 0),ke([Z()],t.prototype,"enableRtl",void 0),ke([Z()],t.prototype,"locale",void 0),t=ke([$],t)}(I);"undefined"!==typeof window&&window.addEventListener("popstate",function(){Ie=0});var Ne=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),je=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ze={left:0,top:0,bottom:0,right:0},He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ne(t,e),je([Z(0)],t.prototype,"left",void 0),je([Z(0)],t.prototype,"top",void 0),t}(oe),Be=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var i;Ne(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),Y.isIE&&x([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return h({},ze)},t.prototype.toggleEvents=function(e){var t;p(this.handle)||(t=O(this.handle,this.element));var i=this.enableTapHold&&Y.isDevice&&Y.isTouch?this.mobileInitialize:this.initialize;e?v.remove(t||this.element,Y.touchStartEvent,i):v.add(t||this.element,Y.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)},this.tapHoldThreshold),v.add(document,Y.touchMoveEvent,this.removeTapholdTimer,this),v.add(document,Y.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),v.remove(document,Y.touchMoveEvent,this.removeTapholdTimer),v.remove(document,Y.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return d(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),d(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.target=e.currentTarget||t,this.dragProcessStarted=!1,!this.abort||d(T(e.target,this.abort))){this.preventDefault&&!p(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){var n=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(n.left+this.parentScrollX),this.relativeYPosition=i.pageY-(n.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(v.add(document,Y.touchMoveEvent,this.intDragStart,this),v.add(document,Y.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,v.trigger(document.documentElement,Y.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!p(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,n=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var a=T(e.target,this.dragTarget);d(a)||(o=a)}this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e);var s=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(s*s+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||d(c))return;var h=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var u={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:g()?this.bindDragEvents.bind(this):null,dragElement:h};this.trigger("dragStart",u)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var f=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});A(h,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),v.remove(document,Y.touchMoveEvent,this.intDragStart),v.remove(document,Y.touchEndEvent,this.intDestroy),g()||this.bindDragEvents(h)}}},t.prototype.bindDragEvents=function(e){P(e)?(v.add(document,Y.touchMoveEvent,this.intDrag,this),v.add(document,Y.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(d(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(p(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var a=this.checkTargetElement(e);a.target&&a.instance?(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a):this.hoverObject&&(this.hoverObject.instance.intOut(e,a.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null);var s=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var l=this.parentClientRect.left,c=this.parentClientRect.top,h=this.getCoordinates(e),u=h.pageX,f=h.pageY,g=this.position.left-this.diffX,m=this.position.top-this.diffY;if(this.dragArea){var y=getComputedStyle(s);if(this.pageX!==u||this.skipDistanceCheck){var v=s.offsetWidth+(parseFloat(y.marginLeft)+parseFloat(y.marginRight));t=this.dragLimit.left+window.pageXOffset>g?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<g+v?g-(g-this.dragLimit.right)+window.pageXOffset-v:g}if(this.pageY!==f||this.skipDistanceCheck){var b=s.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom));i=this.dragLimit.top+window.pageYOffset>m?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<m+b?m-(m-this.dragLimit.bottom)+window.pageYOffset-b:m}}else t=g,i=m;var w=c+this.borderWidth.top,x=l+this.borderWidth.left;this.dragProcessStarted&&(d(i)&&(i=this.prevTop),d(t)&&(t=this.prevLeft));var S=this.getProcessedPositionValue({top:i-w+"px",left:t-x+"px"});A(s,this.getDragPosition(S)),!this.elementInViewport(s)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=u,this.pageY=f}},t.prototype.getDragPosition=function(e){var t=h({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,p(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),v.remove(document,Y.touchMoveEvent,this.intDragStart),v.remove(document,Y.touchEndEvent,this.intDragStop),v.remove(document,Y.touchEndEvent,this.intDestroy),v.remove(document,Y.touchMoveEvent,this.intDrag)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.setDragArea=function(){var e,t,i,n=0,r=0;if(i="string"===typeof this.dragArea?O(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();e=o.width?o.width:o.right-o.left,t=o.height?o.height:o.bottom-o.top;for(var a=["Top","Left","Bottom","Right"],s=getComputedStyle(i),l=0;l<a.length;l++){var c=a[l],h=s["border"+c+"Width"],d=s["padding"+c],p=c.toLowerCase();this.borderWidth[p]=isNaN(parseFloat(h))?0:parseFloat(h),this.padding[p]=isNaN(parseFloat(d))?0:parseFloat(d)}n=o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=n+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return u(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.getMousePosition=function(e){var t=this.getCoordinates(e),i=this.clone?t.pageX:t.clientX+window.pageXOffset-this.relativeXPosition,n=this.clone?t.pageY:t.clientY+window.pageYOffset-this.relativeYPosition;return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=w("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!d(t.parentNode)){var n=T(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},je([Q({},He)],t.prototype,"cursorAt",void 0),je([Z(!0)],t.prototype,"clone",void 0),je([Z()],t.prototype,"dragArea",void 0),je([K()],t.prototype,"drag",void 0),je([K()],t.prototype,"dragStart",void 0),je([K()],t.prototype,"dragStop",void 0),je([Z(1)],t.prototype,"distance",void 0),je([Z()],t.prototype,"handle",void 0),je([Z()],t.prototype,"abort",void 0),je([Z()],t.prototype,"helper",void 0),je([Z("default")],t.prototype,"scope",void 0),je([Z("")],t.prototype,"dragTarget",void 0),je([Z()],t.prototype,"axis",void 0),je([Z()],t.prototype,"queryPositionInfo",void 0),je([Z(!1)],t.prototype,"enableTailMode",void 0),je([Z(!1)],t.prototype,"skipDistanceCheck",void 0),je([Z(!0)],t.prototype,"preventDefault",void 0),je([Z(!1)],t.prototype,"enableAutoScroll",void 0),je([Z(!1)],t.prototype,"enableTapHold",void 0),je([Z(750)],t.prototype,"tapHoldThreshold",void 0),t=i=je([$],t)}(I),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),_e=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},We=(function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}Be(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){v.add(this.element,Y.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&P(r.helper));o&&(i=this.isDropArea(e,r.helper,t),this.accept&&(n=L(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||n.target===t){t.style.display="none";var o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=u(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){v.remove(this.element,Y.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},_e([Z()],t.prototype,"accept",void 0),_e([Z("default")],t.prototype,"scope",void 0),_e([K()],t.prototype,"drop",void 0),_e([K()],t.prototype,"over",void 0),_e([K()],t.prototype,"out",void 0),t=_e([$],t)}(I),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Fe=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ye={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Xe=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(r.keyConfigs);s<l.length;s++)for(var c=l[s],h=0,d=r.keyConfigs[c].split(",");h<d.length;h++){var p=d[h],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}},r.bind(),r}var i;We(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return Ye[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Fe([Z({})],t.prototype,"keyConfigs",void 0),Fe([Z("keyup")],t.prototype,"eventName",void 0),Fe([K()],t.prototype,"keyAction",void 0),t=i=Fe([$],t)}(I),function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||Te)}e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=h(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return d(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Ve=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ve([Z(50)],t.prototype,"swipeThresholdDistance",void 0),t}(oe),Ge=/(Up|Down)/,qe=(function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=e.changedTouches?e.changedTouches[0]:e;void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(e)},n.tapHoldThreshold),v.add(n.element,Y.touchMoveEvent,n.moveEvent,n),v.add(n.element,Y.touchEndEvent,n.endEvent,n),v.add(n.element,Y.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=e.changedTouches?e.changedTouches[0]:e;n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=h(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),v.remove(n.element,Y.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"===typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=e;e.changedTouches&&(t=e.changedTouches[0]);var i=t.clientX-n.startPoint.clientX,r=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1,n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,s=n.swipeSettings.swipeThresholdDistance;a=h(a,n.defaultArgs,o);var l=!1,c=n.element,d=n.isScrollable(c),p=Ge.test(n.movedDirection);(s<n.distanceX&&!p||s<n.distanceY&&p)&&(l=!d||n.checkSwipe(c,p)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!==typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),v.remove(n.element,Y.touchMoveEvent,n.moveEvent),v.remove(n.element,Y.touchEndEvent,n.endEvent),v.remove(n.element,Y.touchCancelEvent,n.cancelEvent)},n.bind(),n}Xe(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),Y.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){v.add(this.element,Y.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){v.remove(this.element,Y.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,v.remove(this.element,Y.touchMoveEvent,this.moveEvent),v.remove(this.element,Y.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),v.remove(this.element,Y.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(r*r+o*o)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},Ve([K()],t.prototype,"tap",void 0),Ve([K()],t.prototype,"tapHold",void 0),Ve([K()],t.prototype,"swipe",void 0),Ve([K()],t.prototype,"scroll",void 0),Ve([Z(350)],t.prototype,"tapThreshold",void 0),Ve([Z(750)],t.prototype,"tapHoldThreshold",void 0),Ve([Q({},Ue)],t.prototype,"swipeSettings",void 0),t=Ve([$],t)}(I),new RegExp("\\n|\\r|\\s\\s+","g")),Ze=new RegExp(/'|"/g),Qe=new RegExp("if ?\\("),Ke=new RegExp("else if ?\\("),$e=new RegExp("else"),Je=new RegExp("for ?\\("),et=new RegExp("(/if|/for)"),tt=new RegExp("\\((.*)\\)",""),it=new RegExp("^[0-9]+$","g"),nt=new RegExp("[\\w\"'.\\s+]+","g"),rt=new RegExp('"(.*?)"',"g"),ot=new RegExp("[\\w\"'@#$.\\s+]+","g"),at=new RegExp("\\${([^}]*)}","g"),st=/^\..*/gm,lt=/\\/gi,ct=/\\\\/gi;function ht(e,t){var i=function(e,t,i){var n=0,r=[],o=e.match(/class="([^\"]+|)\s{2}/g),a="";o&&o.forEach(function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)});return e.replace(qe,"").replace(rt,"'$1'").replace(at,function(e,o,a,s){var l=o.match(tt);if(l){var c=l[1];if(Ke.test(o))o='";} '+o.replace(l[1],c.replace(nt,function(e){return dt(e=e.trim(),!Ze.test(e)&&-1===r.indexOf(e),t,r)}))+'{ \n str = str + "';else if(Qe.test(o))o='"; '+o.replace(l[1],c.replace(ot,function(e){e=e.trim();return/\@|\$|\#/gm.test(e)&&(e=pt(e,-1===r.indexOf(e),t,r)+'"]'),st.test(e)?function(e,t,i,n){return!t||it.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!Ze.test(e)&&-1===r.indexOf(e),t,r):dt(e,!Ze.test(e)&&-1===r.indexOf(e),t,r)}))+'{ \n str = str + "';else if(Je.test(o)){var h=l[1].split(" of ");o='"; '+o.replace(l[1],function(e){return r.push(h[0]),r.push(h[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+dt(h[1],!0,t,r)+".length; i"+n+"++"})+"{ \n "+h[0]+"= "+dt(h[1],!0,t,r)+"[i"+n+"]; \n var "+h[0]+"Index=i"+n+'; \n str = str + "'}else{var d=o.split("("),p=i&&i.hasOwnProperty(d[0])?"this.":"global";p=/\./.test(d[0])?"":p;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===p?t+"."+l[1]:l[1]),o='" + '+("global"===p?"":p)+o.replace(c,dt(l[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==p,t,r))+'+"'}}else $e.test(o)?o='"; '+o.replace($e,'} else { \n str = str + "'):o.match(et)?o=o.replace(et,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(o)?(o.match(lt)&&(o=ut(o)),o='"+'+pt(o,-1===r.indexOf(o),t,r)+'"]+"'):o=o.match(lt)?'"+'+pt(o=ut(o),-1===r.indexOf(o),t,r)+'"]+"':'"+'+dt(o.replace(/\,/gi,"+"+t+"."),-1===r.indexOf(o),t,r)+'+"';return o})}(e,"data",t);return new Function("data",'var str="'+i+'"; return str;').bind(t)}function dt(e,t,i,n){return t&&!it.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}function pt(e,t,i,n){return t&&!it.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function ut(e){return e=e.match(ct)?e:e.replace(lt,"\\\\")}var ft={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),ht(e,t)},e}())).compile},gt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mt=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],yt=["accordion","tab","splitter"],vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t.isReact=!0,t}return gt(t,e),t.prototype.componentWillMount=function(){this.isReact=!0;var e=Object.keys(this.props);this.htmlattributes={},this.attrKeys=mt.concat(this.controlAttributes||[]);for(var t=0,i=e;t<i.length;t++){var n=i[t];-1===n.indexOf("data-")&&-1===n.indexOf("aria-")&&-1===this.attrKeys.indexOf(n)||(this.htmlattributes[n]=this.props[n])}},t.prototype.componentDidMount=function(){var e=this;this.refreshChild(!0),this.canDelayUpdate=-1!==yt.indexOf(this.getModuleName()),this.props.immediateRender?this.renderReactComponent():this.cachedTimeOut=setTimeout(function(){e.renderReactComponent()})},t.prototype.renderReactComponent=function(){var e=r.findDOMNode(this);e&&(this.isAppendCalled=!0,this.appendTo(e))},t.prototype.componentWillReceiveProps=function(e){var t=this;this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(r.findDOMNode(this)));for(var i=h({},e),n=0,o=Object.keys(e);n<o.length;n++){var a=o[n],s="className"===a;s||d(this.htmlattributes[a])||this.htmlattributes[a]===i[a]||(this.htmlattributes[a]=i[a]),this.props[a]===e[a]?delete i[a]:-1!==this.attrKeys.indexOf(a)&&(s?(this.element.classList.remove(this.props[a]),this.element.classList.add(i[a])):"disabled"!==a&&delete i[a])}i.children&&delete i.children,this.canDelayUpdate||this.props.delayUpdate?setTimeout(function(){t.refreshProperties(i,e)}):this.refreshProperties(i,e)},t.prototype.refreshProperties=function(e,t){Object.keys(e).length&&(this.processComplexTemplate(e,this),this.setProperties(e)),this.refreshChild(!1,t)},t.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i)for(var n in i){var r=i[n];e[n]&&s(r,a(n,e),e)}},t.prototype.getDefaultAttributes=function(){return this.htmlattributes},t.prototype.trigger=function(e,t,i){if(!0!==this.isDestroyed){"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var n=this.isProtectedOnChange;this.isProtectedOnChange=!1,this.modelObserver.notify(e,t,i),this.isProtectedOnChange=n}},t.prototype.compareObjects=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,r=this.getInjectedServices()||[];n<r.length;n++){var o=r[n];-1===i.indexOf(o)&&i.push(o)}this.injectedModules=i}if(this.directivekeys){var a=this.validateChildren({},this.directivekeys,t||this.props);if(a){if(!e&&this.skipRefresh)for(var s=0,l=this.skipRefresh;s<l.length;s++){delete a[l[s]]}if(this.prevProperties)for(var c=Object.keys(this.prevProperties),d=0;d<c.length;d++){var p=c[d];if(this.compareObjects(this.prevProperties[p],a[p]))delete a[p];else{var u={};u[p]=a[p],this.prevProperties=h(this.prevProperties,u)}}else this.prevProperties=h({},a,{},!0);this.setProperties(a,e)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut),this.destroy()},t.prototype.validateChildren=function(e,t,i){for(var r=!1,o=0,a=n.Children.toArray(i.children);o<a.length;o++){var s=a[o],l=this.getChildType(s),c=t[l];if(l&&t){var h=this.getChildProps(n.Children.toArray(s.props.children),c);h.length&&(r=!0,e[s.type.propertyName||l]=h)}}return r?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],a=!1,s=void 0;"string"===typeof t?(a=!0,s=t):s=Object.keys(t)[0];var l=o.props;if(this.getChildType(o)===s)if(a||!l.children){var c=h({},l,{},!0);this.processComplexTemplate(c,o.type),i.push(c)}else{var d=this.validateChildren(h({},l),t[s],l)||l;d.children&&delete d.children,this.processComplexTemplate(d,o.type),i.push(d)}}return i},t.prototype.getInjectedServices=function(){for(var e=0,t=n.Children.toArray(this.props.children);e<t.length;e++){var i=t[e];if(i.type.isService)return i.props.services}return[]},t}(n.PureComponent);function bt(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){e.prototype[i]=t.prototype[i]})})}var wt,xt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),St=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xt(t,e),t.prototype.render=function(){return null},t.isDirective=!0,t}(n.PureComponent),Ct=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ct(t,e),t.prototype.render=function(){return null},t.isService=!0,t}(n.PureComponent),Et=ft.compile;function Ot(e,t){return"string"===typeof e?Et(e,t):function(t){var i=document.createElement("div");document.body.appendChild(i);var n=e,o=t;return"object"===typeof n&&(n=e.template,o=h({},t,e.data||{})),r.render(n(o),i),E(i),i.children}}wt={compile:Ot},ft.compile=wt.compile,i.d(t,"ComponentBase",function(){return vt}),i.d(t,"applyMixins",function(){return bt}),i.d(t,"ComplexBase",function(){return St}),i.d(t,"Inject",function(){return Pt}),i.d(t,"compile",function(){return Ot})},,,,,,function(e,t,i){"use strict";var n=i(0),r=0;function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function a(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!u(i);r++)i=i[n[r]];return i}function s(e,t,i){var n,r,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?{}:t:p(s[r])&&(s[r]={}),s=s[r];return a}function l(e,t){delete e[t]}function c(e){return!p(e)&&e.constructor==={}.constructor}function h(e,t){if(!p(t))for(var i=e,n=t,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];p(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!c(n[a])&&!Array.isArray(n[a])?i[a]=n[a]:d(i[a],i[a],n[a],!0)}}function d(e,t,i,n){var r=e||{},o=arguments.length;n&&(o-=1);for(var a=function(e){if(!s[e])return"continue";var t=s[e];Object.keys(t).forEach(function(e){var i,o=r[e],a=t[e];n&&(c(a)||Array.isArray(a))?c(a)?(i=o||{},r[e]=d({},i,a,n)):(i=o||[],r[e]=d([],i,a,n)):r[e]=a})},s=arguments,l=1;l<o;l++)a(l);return r}function p(e){return void 0===e||null===e}function u(e){return"undefined"===typeof e}function f(e){return e+"_"+r++}function g(e,t){return e===t||!(e===document||!e)&&g(e.parentNode,t)}function m(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function y(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}var v=/^(.*?):[ \t]*([^\r\n]*)$/gm,b="GET",w=(function(){function e(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():b,this.mode=!!p(i)||i):"object"===typeof e&&(this.options=e,h(this,this.options)),this.type=this.type?this.type.toUpperCase():b,this.contentType=void 0!==this.contentType?this.contentType:n}e.prototype.send=function(e){var t=this;this.data=p(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise(function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},p(t.onLoad)||(t.httpRequest.onload=t.onLoad),p(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),p(t.onAbort)||(t.httpRequest.onabort=t.onAbort),p(t.onError)||(t.httpRequest.onerror=t.onError),p(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),p(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(p(t.data)?null:t.data)})},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=v.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=v.exec(this.httpRequest.getAllResponseHeaders());return p(i=t[e.toLowerCase()])?null:i}}(),function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,r,o){var a,s=e.addOrGetEventData(t);a=o?function(e,t){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){return i=null,e.apply(n,r)},t)}}(n,o):n,r&&(a=a.bind(r));for(var l=i.split(" "),c=0;c<l.length;c++)s.push({name:l[c],listener:n,debounce:a}),t.addEventListener(l[c],a);return a},e.remove=function(t,i,n){for(var r=e.addOrGetEventData(t),o=i.split(" "),a=function(e){var i,a=-1;r&&0!==r.length&&r.some(function(t,r){return t.name===o[e]&&t.listener===n&&(a=r,i=t.debounce,!0)}),-1!==a&&r.splice(a,1),i&&t.removeEventListener(o[e],i)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var i,n;n=d([],n,i=e.addOrGetEventData(t));for(var r=0;r<n.length;r++)t.removeEventListener(n[r].name,n[r].debounce),i.shift()},e.trigger=function(t,i,n){for(var r=0,o=e.addOrGetEventData(t);r<o.length;r++){var a=o[r];a.name===i&&a.debounce.call(this,n)}},e}()),x=/^svg|^path|^g/;function S(e,t){var i=x.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t?i:(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&T(i,t.attrs),i)}function C(e,t){for(var i=E(t),n=0,r=e;n<r.length;n++)for(var o=r[n],a=0,s=i;a<s.length;a++){var l=s[a];o.classList.contains(l)||o.classList.add(l)}return e}function P(e,t){for(var i=E(t),n=0,r=e;n<r.length;n++){var o=r[n];if(""!==o.className)for(var a=0,s=i;a<s.length;a++){var l=s[a];o.classList.remove(l)}}return e}function E(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function O(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function M(e){return e.parentNode.removeChild(e)}function T(e,t){for(var i=e,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];i.setAttribute(o,t[o])}return i}function A(e,t){return void 0===t&&(t=document),t.querySelector(e)}function L(e,t){return void 0===t&&(t=document),t.querySelectorAll(e)}function D(e,t){var i=e;if("function"===typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(R(i,t))return i;i=i.parentNode}return null}function k(e,t){void 0!==t&&Object.keys(t).forEach(function(i){e.style[i]=t[i]})}function I(e,t,i){C([e],t),P([e],i)}function R(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var N=function(){function e(e){this.ranArray=[],this.boundedEvents={},p(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!p(t)){var r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:p(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:r,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=a(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t){if(!this.notExist(e)){t&&(t.name=e);for(var i=0,n=a(e,this.boundedEvents).slice(0);i<n.length;i++){var r=n[i];r.handler.call(r.context,t)}}},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),j=new RegExp("]"),z=function(){function e(e,t){this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.refreshing=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new N(this),u(t)||(this.element="string"===typeof t?document.querySelector(t):t,p(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),u(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,h(this,e),!0!==t&&(h(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(t[r]instanceof Array)for(var o=0,a=t[r];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[r].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.saveChanges=function(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),r=function(i){i.source===window&&"string"===typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),e=r=n=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t){if(!0!==this.isDestroyed){var i=this.isProtectedOnChange;if(this.isProtectedOnChange=!1,this.modelObserver.notify(e,t),j.test(e)){var n=a(e,this);n&&n.call(this,t)}this.isProtectedOnChange=i}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();C([this.element],["e-lib",e]),p(this.element.ej2_instances)?s("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),P([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&P([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();var H=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,B=/msie|trident/i,_=/Trident\/7\./,W=/(ipad|iphone|ipod touch)/i,F=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Y=/android/i,X=/trident|windows phone|edge/i,V=/(version)[ \/]([\w.]+)/i,U={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var G=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,r=Object.keys(U);n<r.length;n++){var o=r[n];if(i=e.userAgent.match(U[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(_)){t.name="msie";break}var a=e.userAgent.match(V);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n=window.browserDetails;return"undefined"===typeof n[t]?n[t]=i.test(e.userAgent):n[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return u(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",B)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return u(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return u(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return u(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",H)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",W)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",F)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",Y)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return u(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(u(window.cordova)&&u(window.PhoneGap)&&u(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",X)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return u(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return u(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return u(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return u(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}();function q(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=o(n,[e,t,i])),e.properties[t]}function Z(e,t,i,n,r,a){for(var s=[],l=i.length,c=0;c<l;c++){var h=n;if(a&&(h=n(i[c],e)),r){var d=o(h,[e,t,{},!0]);d.setProperties(i[c],!0),s.push(d)}else s.push(o(h,[e,t,i[c],!0]))}return s}function Q(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function K(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function $(e,t,i){return function(){return q(this,t,e,i)}}function J(e,t,i){return function(n){q(this,t,e,i).setProperties(n)}}function ee(e,t,i){return function(){if(!this.properties.hasOwnProperty(t)){var n=Z(this,t,e,i,!1);this.properties[t]=n}return this.properties[t]}}function te(e,t,i){return function(n){var r=Z(this,t,e,i,!1),o=Z(this,t,n,i,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function ie(e){return function(t,i){var n={set:K(e,i),get:Q(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),ae(t,i,"prop",e)}}function ne(e,t){return function(i,n){var r={set:J(e,n,t),get:$(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),ae(i,n,"complexProp",e,t)}}function re(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=a("propName",t);return n&&(i=n+"-"+i),e(a("parentObj",t),i)}(this,t);!1===u(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:Q(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),ae(e,t,"event")}}function oe(e){}function ae(e,t,i,n,r){u(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:r}),e.propList[i+"Names"].push(t)}var se=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),le=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ce=function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return se(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var r=0,o=Array.prototype.slice.call(L(e,document));r<o.length;r++){var a=o[r];n.element=a,i.delayAnimation(n)}else n.element=e,i.delayAnimation(n)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout(function(){i.applyAnimation(e)},e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,r=0,o=e.duration;e.element.setAttribute("e-animate","true");!function a(s){try{if(s){r=0===r?s:r,e.timeStamp=s+e.timeStamp-r,r=s,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else performance.now(),n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(c){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,c)}}()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},le([ie("FadeIn")],t.prototype,"name",void 0),le([ie(400)],t.prototype,"duration",void 0),le([ie("ease")],t.prototype,"timingFunction",void 0),le([ie(0)],t.prototype,"delay",void 0),le([re()],t.prototype,"progress",void 0),le([re()],t.prototype,"begin",void 0),le([re()],t.prototype,"end",void 0),le([re()],t.prototype,"fail",void 0),t=i=le([oe],t)}(z);function he(e,t,i){var n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!ge?Function:(e.setAttribute("data-ripple","true"),w.add(e,"mousedown",de,{parent:e,rippleOptions:n}),w.add(e,"mouseup",pe,{parent:e,rippleOptions:n,done:i}),w.add(e,"mouseleave",ue,{parent:e,rippleOptions:n}),G.isPointer&&w.add(e,"transitionend",ue,{parent:e,rippleOptions:n}),function(){e.removeAttribute("data-ripple"),w.remove(e,"mousedown",de),w.remove(e,"mouseup",pe),w.remove(e,"mouseleave",ue),w.remove(e,"transitionend",ue)})}function de(e){var t=e.target,i=this.rippleOptions.selector,n=i?D(t,i):t;if(!(!n||this.rippleOptions&&D(t,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),s=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(a-r.top),Math.abs(a-r.bottom)),c=Math.sqrt(s*s+l*l),h=2*c+"px",d=o-r.left-c,p=a-r.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,h="100%"),n.classList.add("e-ripple");var u=S("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&w.add(n,"mouseleave",ue,{parent:this.parent,rippleOptions:this.rippleOptions})}}function pe(e){fe(e,this)}function ue(e){fe(e,this)}function fe(e,t){var i=t.rippleOptions.duration,n=e.target,r=t.rippleOptions.selector,o=r?D(n,r):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var a=L(".e-ripple-element",o),s=a[a.length-1];s&&(s.style.opacity="0.5"),t.parent!==o&&w.remove(o,"mouseleave",ue),setTimeout(function(){s&&s.parentNode&&s.parentNode.removeChild(s),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)},i)}}var ge=!1;var me,ye,ve=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var r=e[n],a=0,l=t;a<l.length;a++){var c=l[a],h=r.member;if(c.prototype.getModuleName()===r.member&&!this.isModuleLoaded(h)){var d=o(c,r.args),p=this.getMemberName(h);r.isProperty?s(p,c,this.parent):s(p,d,this.parent);var u=r;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map(function(e){return t.getMemberName(e.member)}),n=0,r=this.loadedModules.filter(function(e){return-1===i.indexOf(e.member)});n<r.length;n++){var o=r[n];o.isProperty||a(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),l(this.parent,o.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),be=function(){function e(e,t,i,n){this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",z),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.setProperties(i,!0),this.isParentArray=n}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(h(this,e),this.updateChange(!1,this.propName),this.clearChanges()):h(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(s(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),s(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i){this.controlParent.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e}(),we={latn:{_digits:"0123456789",_type:"numeric"}},xe={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},Se=[0,1,2,3,4,5,6,7,8,9],Ce=function(){function e(){}return e.getMainObject=function(e,t){return a("main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,r=t||Object.keys(e);n<r.length;n++){var o=r[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(xe);i<n.length;i++){var r=n[i];t[e[r]]=xe[r]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i},e.convertValueParts=function(e,t,i){return e.replace(t,function(e){return i[e]})},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i){var n={},r=this.getDefaultNumberingSystem(e);if(!u(r.nSystem)){var o=a(r.nSystem+"._digits",t);u(o)||(n.numericPair=this.reverseObject(o,Se),n.numberParseRegex=new RegExp(this.constructRegex(o),"g"),n.numericRegex="["+o[0]+"-"+o[9]+"]",i&&(n.numericRegex=o[0]+"-"+o[9],n.symbolNumberSystem=a("symbols-numberSystem-"+r.nSystem,r.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=r.nSystem))}return n},e.getNumberMapper=function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!u(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=a("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=a("timeSeparator",n.numberSymbols);var o=a(r.nSystem+"._digits",t);if(!u(o))for(var s=0,l=Se;s<l.length;s++){var c=l[s];n.mapper[c]=o[c]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=we,e}(),Pe={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Ee=["infinity","nan","group","decimal","exponential"],Oe=function(){function e(){}return e.numberFormatter=function(e,t,i){var n,r=this,o=d({},t),a={},s={},l=me.getDependables(i,e,"",!0);s.numberMapper=Ce.getNumberMapper(l.parserObject,Ce.getNumberingSystem(i),!0),s.currencySymbol=me.getCurrencySymbol(l.numericObject,o.currency||Ye),s.percentSymbol=s.numberMapper.numberSymbols.percentSign,s.minusSymbol=s.numberMapper.numberSymbols.minusSign;var c=s.numberMapper.numberSymbols;if(t.format&&!me.formatRegex.test(t.format))a=me.customFormat(t.format,s,l.numericObject);else{d(o,me.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,n=me.getSymbolPattern(o.type,s.numberMapper.numberSystem,l.numericObject,o.isAccount),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),u(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),u(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&(n=n.replace(/\u00A4/g,me.defaultCurrency));var h=n.split(";");if(a.nData=me.getFormatData(h[1]||"-"+h[0],!0,s.currencySymbol),a.pData=me.getFormatData(h[0],!1,s.currencySymbol),o.useGrouping&&(o.groupSeparator=c[Ee[2]],o.groupData=this.getGroupingDetails(h[0])),u(o.minimumFractionDigits)&&(o.minimumFractionDigits=a.nData.minimumFraction),u(o.maximumFractionDigits)){var p=a.nData.maximumFraction;o.maximumFractionDigits=u(p)&&o.isPercent?0:p}var f=o.minimumFractionDigits,g=o.maximumFractionDigits;u(f)||u(g)||f>g&&(o.maximumFractionDigits=f)}return d(a.nData,o),d(a.pData,o),function(e){return isNaN(e)?c[Ee[1]]:isFinite(e)?r.intNumberFormatter(e,a,s):c[Ee[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(me.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];t.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t},e.checkValueRange=function(e,t,i,n){var r=n?"f":"s",o=0,a=Pe["l"+r],s=Pe["m"+r];if(u(e)||(this.checkRange(e,a,n),o++),u(t)||(this.checkRange(t,s,n),o++),2===o){if(!(e<t))return!0;m(s+"specified must be less than the"+a)}else i&&1===o&&m("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&m(t+"value must be within the range"+n[0]+"to"+n[1])},e.intNumberFormatter=function(e,t,i){var n;if(!u(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var r="";return n.isPercent&&(e*=100),n.groupOne?r=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[Ee[4]])),r=r.replace(".",i.numberMapper.numberSymbols[Ee[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[Ee[3]]||".",n.groupData.secondary)),r=Ce.convertValueParts(r,me.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},e.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,n,r){for(var o=!p(r)&&0!==r,a=e.split(n),s=a[0],l=s.length,c="";l>t;)c=s.slice(l-t,l)+(c.length?i+c:""),l-=t,o&&(t=r,o=!1);return a[0]=s.slice(0,l)+(c.length?i:"")+c,a.join(n)},e.processFraction=function(e,t,i){var n=(e+"").split(".")[1],r=n?n.length:0;if(t&&r<t){var o="";if(0!==r){o+=e;for(var a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!p(i)&&(r>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var o=0;o<t-r;o++)n="0"+n;i[0]=n}return i.join(".")},e}();!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"},o="sun";e.islamicRegex=/^islamic/;var s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function c(t,i,n,r){var o,s=n||"date";if(-1!==e.basicPatterns.indexOf(t)){if(o=a(s+"Formats."+t,i),"dateTime"===s){var l=a("dateFormats."+t,i),c=a("timeFormats."+t,i);o=o.replace("{1}",l).replace("{0}",c)}}else o=a("dateTimeFormats.availableFormats."+t,i);return u(o)&&"yMd"===t&&(o="M/d/y"),o}function h(t,i,n,r){var o={},s=n||"gregorian";return o.parserObject=Ce.getMainObject(t,i)||e.defaultObject,r?o.numericObject=a("numbers",o.parserObject):o.dateObject=a("dates.calendars."+s,o.parserObject),o}function f(e,t,i,n){return a(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function g(t){var i=t.match(e.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=e.patternMatcher[r],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function m(i,n,r,o){var a=o?{}:{nlead:"",nend:""},s=i.match(e.customRegex);if(s){o||(a.nlead=y(s[1],r),a.nend=y(s[10],r),a.groupPattern=s[4]);var l=s[7];if(l&&n){var c=l.match(t);p(c)?a.minimumFraction=0:a.minimumFraction=c.length,a.maximumFraction=l.length-1}}return a}function y(t,i){return t?t.replace(e.defaultCurrency,i):""}function v(e,t){return a("currencies."+t+".symbol",e)||"$"}function b(t,n,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);(p(a)||""===a[5]&&"N/A"!==t)&&(o.type=void 0),o.nlead=a[1],o.nend=a[10];var s=a[6];o.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=a[7];if(-1!==s.indexOf("0")&&(o.minimumIntegerDigits=s.length-s.indexOf("0")),p(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),p(n)?d(o,w([o.nlead,o.nend],"%","%")):(d(o,w([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||d(o,w([o.nlead,o.nend],"%",n.percentSymbol))),!p(r)){var c=f(o.type,n.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=n.numberMapper.numberSymbols[i[2]],o.groupData=Oe.getGroupingDetails(c.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function w(e,t,i){for(var n={nlead:e[0],nend:e[1]},r=0;r<2;r++){var o=e[r],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){n[l[r]]=o.substr(0,a)+i+o.substr(a+1),n[l[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=c,e.getDependables=h,e.getSymbolPattern=f,e.getProperNumericSkeleton=g,e.getFormatData=m,e.getCurrencySymbol=v,e.customFormat=function(e,t,i){for(var n={},r=e.split(";"),o=["pData","nData","zeroData"],a=0;a<r.length;a++)n[o[a]]=b(r[a],t,i);return p(n.nData)&&(n.nData=d({},n.pData),n.nData.nlead=p(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=w,e.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){var s=h(i,e,t.calendar),l=t.format||c(t.skeleton,s.dateObject,t.type);if(o){if(-1!==(l=l.replace(n,function(e){return r[e]})).indexOf("z")){var d=l.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=Ce.getNumberMapper(s.parserObject,Ce.getNumberingSystem(i)),u.timeZone=a("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),g=d<4?"+H;-H":u.timeZone.hourFormat;g=g.replace(/:/g,u.numMapper.timeSeparator),0===f?p=u.timeZone.gmtZeroFormat:(p=De.getTimeZoneValue(f,g),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),l=l.replace(/[z]+/,'"'+p+'"')}l=l.replace(/ $/,"")}return l},e.getActualNumberFormat=function(t,i,n){var r,o,a=h(n,t,"",!0),s={custom:!0},l={},c=(i.format||"").match(e.currencyFormatRegex);if(c){var p={};p.numberMapper=Ce.getNumberMapper(a.parserObject,Ce.getNumberingSystem(n),!0);var u=v(a.numericObject,i.currency||Ye),y=f("currency",p.numberMapper.numberSystem,a.numericObject,/a/i.test(i.format)),b=(y=y.replace(/\u00A4/g,u)).split(";");l.hasNegativePattern=b.length>1,l.nData=m(b[1]||"-"+b[0],!0,u),l.pData=m(b[0],!1,u),c[2]||i.minimumFractionDigits||i.maximumFractionDigits||(r=m(y.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(d(s,g(i.format||"N")),s.custom=!1,o="###0",(s.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||r)&&(s.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=s.fractionDigits),o=function(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var r=i-t,o=0;o<r;o++)e+="#";return e}(o,r||s.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)),i.minimumIntegerDigits&&(o=function(e,t){for(var i=e.split("."),n="",r=0;r<t;r++)n+="0";return i[1]?n+"."+i[1]:n}(o,i.minimumIntegerDigits)),i.useGrouping&&(o=function(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)e=","+i[r-2]+i[r-1]+i[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(o)),"currency"===s.type){var w=o;o=l.pData.nlead+w+l.pData.nend,l.hasNegativePattern&&(o+=";"+l.nData.nlead+w+l.nData.nend)}"percent"===s.type&&(o+=" %")}else o=i.format.replace(/\'/g,'"');return o},e.getWeekData=function(e,t){var i=o,n=a("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||o),s[i]}}(me||(me={})),function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),r=e.getFullYear(),o=n+1,a=r;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,c=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+i-l-1524,h=c+(l=(s=Math.floor((c-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,d=Math.floor((h-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((h-p)/30.6001);i=h-p-Math.floor(30.6001*u),(n=Math.floor((h-p)/20.6001))>13&&(d+=1,n-=12),n-=1,r=d-4716;var f=c-24e5,g=c-1948084,m=Math.floor(g/10631);g-=10631*m;var y=Math.floor((g-.1335)/(10631/30)),v=30*m+y;g-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),x=0;x<t.length&&!(t[x]>f);x++);var S=x+16260,C=Math.floor((S-1)/12),P=C+1,E=S-12*C,O=f-t[x-1]+1;return(O+"").length>2&&(O=w,E=b,P=v),{year:P,month:E,date:O}},e.toGregorian=function(e,i,n){var r=n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),a=Math.floor((o-1867216.25)/36524.25),s=1524+(a=o+1+a-Math.floor(a/4)),l=Math.floor((s-122.1)/365.25),c=Math.floor(365.25*l),h=Math.floor((s-c)/30.6001),d=s-c-Math.floor(30.6001*h),p=h-(h>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(ye||(ye={}));var Me=/\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|cccc|ccc|G+|z+/gi,Te=["sun","mon","tue","wed","thu","fri","sat"],Ae={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate"},Le={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era"},De=function(){function e(){}return e.dateFormat=function(e,t,i){var n=this,r=me.getDependables(i,e,t.calendar),o={isIslamic:me.islamicRegex.test(t.calendar)},s=t.format||me.getResultantPattern(t.skeleton,r.dateObject,t.type);if(o.dateSeperator=me.getDateSeparator(r.dateObject),u(s))m("Format options or type given must be invalid");else{o.pattern=s,o.numMapper=Ce.getNumberMapper(r.parserObject,Ce.getNumberingSystem(i));for(var l=0,c=s.match(Me)||[];l<c.length;l++){var h=c[l],d=h.length,p=h[0];"K"===p&&(p="h");switch(p){case"E":case"c":o.weekday=r.dateObject[me.days]["stand-alone"][me.monthIndex[d]];break;case"M":case"L":o.month=r.dateObject[me.month]["stand-alone"][me.monthIndex[d]];break;case"a":o.designator=a("dayPeriods.format.wide",r.dateObject);break;case"G":var f=d<=3?"eraAbbr":4===d?"eraNames":"eraNarrow";o.era=a("eras."+f,r.dateObject);break;case"z":o.timeZone=a("dates.timeZoneNames",r.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,o)}},e.intDateFormatter=function(e,t){for(var i="",n=t.pattern.match(me.dateParseRegex),r=this.getCurrentDateValue(e,t.isIslamic),o=0,a=n;o<a.length;o++){var s=a[o],l=s.length,c=s[0];"K"===c&&(c="h");var h=void 0,d=void 0,u=void 0,f="";switch(c){case"M":case"L":h=r.month,l>2?i+=t.month[h]:d=!0;break;case"E":case"c":i+=t.weekday[Te[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":d=!0,h="d"===c?r.date:e[Ae[c]](),"h"===c&&(h=h%12||12);break;case"y":u=!0,f+=r.year,2===l&&(f=f.substr(f.length-2));break;case"a":var g=e.getHours()<12?"am":"pm";i+=t.designator[g];break;case"G":var m=e.getFullYear()<0?0:1,y=t.era[m];p(y)&&(y=t.era[m?0:1]),i+=y||"";break;case"'":i+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var v=e.getTimezoneOffset(),b=l<4?"+H;-H":t.timeZone.hourFormat;b=b.replace(/:/g,t.numMapper.timeSeparator),0===v?i+=t.timeZone.gmtZeroFormat:(u=!0,f=this.getTimeZoneValue(v,b)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;default:i+=s}d&&(u=!0,f=this.checkTwodigitNumber(h,l)),u&&(i+=Ce.convertValueParts(f,me.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?ye.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],r=Math.abs(e);return n.replace(/HH?|mm/g,function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),t)})},e}(),ke=/^[0-9]*$/,Ie={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth"},Re=function(){function e(){}return e.dateParser=function(e,t,i){var n,r=this,o=me.getDependables(i,e,t.calendar),s=Ce.getCurrentNumericOptions(o.parserObject,Ce.getNumberingSystem(i)),l={},c=t.format||me.getResultantPattern(t.skeleton,o.dateObject,t.type),h="";if(u(c))m("Format options or type given must be invalid");else{l={isIslamic:me.islamicRegex.test(t.calendar),pattern:c,evalposition:{}};for(var d=c.match(me.dateParseRegex)||[],f=d.length,g=0,y=0,v=!1,b=s.numericRegex,w=Ce.getNumberMapper(o.parserObject,Ce.getNumberingSystem(i)),x=0;x<f;x++){var S=d[x],C=S.length,P="K"===S[0]?"h":S[0],E=void 0,O=void 0,M=Le[P],T=2===C?"":"?";switch(v&&(g=y,v=!1),P){case"E":case"c":var A=Ce.reverseObject(o.dateObject[me.days]["stand-alone"][me.monthIndex[C]]);h+="("+Object.keys(A).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":O=!0,("M"===P||"L"===P)&&C>2?(l[M]=Ce.reverseObject(o.dateObject.months["stand-alone"][me.monthIndex[C]]),h+="("+Object.keys(l[M]).join("|")+")"):(E=!0,h+="("+b+b+T+")"),"h"===P&&(l.hour12=!0);break;case"y":O=E=!0,h+=2===C?"("+b+b+")":"("+b+"{"+C+",})";break;case"a":O=!0,l[M]=Ce.reverseObject(a("dayPeriods.format.wide",o.dateObject)),h+="("+Object.keys(l[M]).join("|")+")";break;case"G":O=!0;var L=C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow";l[M]=Ce.reverseObject(a("eras."+L,o.dateObject)),h+="("+Object.keys(l[M]).join("|")+"?)";break;case"z":O=0!==(new Date).getTimezoneOffset(),l[M]=a("dates.timeZoneNames",o.parserObject);var D=l[M],k=(n=C<4)?"+H;-H":D.hourFormat;k=k.replace(/:/g,w.timeSeparator),h+="("+this.parseTimeZoneRegx(k,D,b)+")?",v=!0,y=n?6:12;break;case"'":h+="("+S.replace(/\'/g,"")+")?";break;default:h+="([\\D])"}O&&(l.evalposition[M]={isNumber:E,pos:x+1+g,hourOnly:n}),x!==f-1||p(h)||(l.parserRegex=new RegExp("^"+h+"$"))}}return function(e){var t=r.internalDateParse(e,l,s);if(p(t)||!Object.keys(t).length)return null;if(l.isIslamic){var i={},n=t.year,o=t.day,a=t.month,c=n?n+"":"",h=2===c.length;n&&a&&o&&!h||(i=ye.getHijriDate(new Date)),h&&(n=parseInt((i.year+"").slice(0,2)+c,10));var d=ye.toGregorian(n||i.year,a||i.month,o||i.date);t.year=d.getFullYear(),t.month=d.getMonth()+1,t.day=d.getDate()}return r.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,r=e.designator,o=e.timeZone;if(!u(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,s=["hour","minute","second","month","day"];a<s.length;a++){var l=s[a],c=e[l];if(u(c)&&"day"===l&&i.setDate(1),!u(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[Ie[l]](c);var d=new Date(i.getFullYear(),c+1,0).getDate();i.setDate(h<d?h:d)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(c<1||c>p)return null}i[Ie[l]](c)}}if(!u(r)){var f=i.getHours();"pm"===r?i.setHours(f+(12===f?0:12)):12===f&&i.setHours(0)}if(!u(o)){var g=o-i.getTimezoneOffset();0!==g&&i.setMinutes(i.getMinutes()+g)}return i},e.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};i.numericRegex;if(p(n))return null;for(var o=0,a=Object.keys(t.evalposition);o<a.length;o++){var s=a[o],l=t.evalposition[s],c=n[l.pos];if(l.isNumber)r[s]=this.internalNumberParser(c,i);else if("timeZone"!==s||u(c))r[s]=t[s][c];else{var h=l.pos,d=void 0,f=n[h+1],g=!u(f);l.hourOnly?d=60*this.getZoneValue(g,f,n[h+4],i):(d=60*this.getZoneValue(g,f,n[h+7],i),d+=this.getZoneValue(g,n[h+4],n[h+10],i)),p(d)||(r[s]=d)}}return t.hour12&&(r.hour12=!0),r},e.internalNumberParser=function(e,t){return e=Ce.convertValueParts(e,t.numberParseRegex,t.numericPair),ke.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var n,r,o=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),r=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map(function(e){return o.replace("{0}",e)}),n=r.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,n){var r=e?t:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return e?-o:o},e}(),Ne=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,je=/,/g,ze=["minusSign","infinity"],He=function(){function e(){}return e.numberParser=function(e,t,i){var n,r=this,o=me.getDependables(i,e,"",!0),a={custom:!0};me.formatRegex.test(t.format)||!t.format?(d(a,me.getProperNumericSkeleton(t.format||"N")),a.custom=!1):d(a,me.customFormat(t.format,null,null)),n=Ce.getCurrentNumericOptions(o.parserObject,Ce.getNumberingSystem(i),!0),a.symbolRegex=Ce.getSymbolRegex(Object.keys(n.symbolMatch)),a.infinity=n.symbolNumberSystem[ze[1]];var s=me.getSymbolPattern(a.type,n.numberSystem,o.numericObject,a.isAccount);if(s){var l=(s=s.replace(/\u00A4/g,me.defaultCurrency)).split(";");a.nData=me.getFormatData(l[1]||"-"+l[0],!0,""),a.pData=me.getFormatData(l[0],!0,"")}return function(e){return r.getParsedNumber(e,a,n)}},e.getParsedNumber=function(e,t,i){var n,r,o,a,s,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=Ce.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=Ce.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(Ne);if(p(c))return NaN;a=c[1],o=c[2];var h=c[5];return s=c[6],r=(n=t.custom?a===t.nData.nlead&&s===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==s.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(je,""),h&&(o+=h),l=+o,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l},e}(),Be=new N,_e=!1,We={},Fe="en-US",Ye="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return De.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},We)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=Ye),Oe.numberFormatter(this.getCulture(),e||{},We)},e.prototype.getDateParser=function(e){return Re.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},We)},e.prototype.getNumberParser=function(e){return He.numberParser(this.getCulture(),e||{format:"N"},We)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return me.getActualDateTimeFormat(this.getCulture(),e,We,t)},e.prototype.getNumberPattern=function(e){return me.getActualNumberFormat(this.getCulture(),e,We)},e.prototype.getFirstDayOfWeek=function(){return me.getWeekData(this.getCulture(),We)},e.prototype.getCulture=function(){return this.culture||Fe}}();var Xe,Ve=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ue=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ge=0,qe=0,Ze=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),n.needsID=!1,n.createElement=S,p(n.enableRtl)&&n.setProperties({enableRtl:_e},!0),p(n.locale)&&n.setProperties({locale:Fe},!0),n.moduleLoader=new ve(n),n.localObserver=new N(n),Be.on("notifyExternalChange",n.detectFunction,n,n.randomId),u(i)||n.appendTo(),n}return Ve(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(P([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),Be.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new N(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.appendTo=function(t){if(p(t)||"string"!==typeof t?p(t)||(this.element=t):this.element=document.querySelector(t),!p(this.element)){var i="e-"+this.getModuleName().toLowerCase();C([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=a("ej2_instances",this.element);n&&-1!==n.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.trigger("created")}},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"===typeof e)this.localObserver.on(e,t,i);else for(var n=0,r=e;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);p(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(Ge=0),Xe=this.pageID(location.href),qe=history.length,e+"_"+Xe+"_"+Ge++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return Xe!==this.pageID(location.href)||qe!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,r=e;n<r.length;n++){var o,l=r[n];u(o=a(l,this))||s(l,this.getActualProperties(o),i)}return JSON.stringify(i,function(e,i){return t.getActualProperties(i)})},t.prototype.getActualProperties=function(e){return e instanceof be?a("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},n=function(n){if(-1===t.indexOf(n)){var o=e[n];if("object"!==typeof o||o instanceof Array)i[n]=o;else{var a=t.filter(function(e){return new RegExp(n+".").test(e)}).map(function(e){return e.replace(n+".","")});i[n]=r.iterateJsonProperties(r.getActualProperties(o),a)}}},r=this,o=0,a=Object.keys(e);o<a.length;o++){n(a[o])}return i},Ue([ie(!1)],t.prototype,"enablePersistence",void 0),Ue([ie()],t.prototype,"enableRtl",void 0),Ue([ie()],t.prototype,"locale",void 0),t=Ue([oe],t)}(z);"undefined"!==typeof window&&window.addEventListener("popstate",function(){Ge=0});var Qe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ke=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},$e={left:0,top:0,bottom:0,right:0},Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),Ke([ie(0)],t.prototype,"left",void 0),Ke([ie(0)],t.prototype,"top",void 0),t}(be),et=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.droppables={},r.bind(),r}var i;Qe(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),G.isIE&&C([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return d({},$e)},t.prototype.toggleEvents=function(e){var t;u(this.handle)||(t=A(this.handle,this.element));var i=this.enableTapHold&&G.isDevice&&G.isTouch?this.mobileInitialize:this.initialize;e?w.remove(t||this.element,G.touchStartEvent,i):w.add(t||this.element,G.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)},this.tapHoldThreshold),w.add(document,G.touchMoveEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),w.remove(document,G.touchMoveEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return p(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]?e:this.getScrollableParent(e.parentNode,t)},t.prototype.initialize=function(e,t){if(this.target=e.currentTarget||t,this.dragProcessStarted=!1,!this.abort||p(D(e.target,this.abort))){this.preventDefault&&!u(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){var n=this.element.getBoundingClientRect(),r=this.getScrollableParent(this.element.parentNode,"vertical"),o=this.getScrollableParent(this.element.parentNode,"horizontal"),a=o?o.scrollLeft:0,s=r?r.scrollTop:0;this.relativeXPosition=i.pageX-(n.left+a),this.relativeYPosition=i.pageY-(n.top+s)}this.externalInitialize?this.intDragStart(e):(w.add(document,G.touchMoveEvent,this.intDragStart,this),w.add(document,G.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,w.trigger(document.documentElement,G.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!u(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,n=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var a=D(e.target,this.dragTarget);p(a)||(o=a)}this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e);var s=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(s*s+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||p(c))return;var h=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var d=this.getProperTargetElement(e);this.trigger("dragStart",{event:e,element:o,target:d})}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top);var f=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});k(h,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),w.remove(document,G.touchMoveEvent,this.intDragStart),w.remove(document,G.touchEndEvent,this.intDestroy),O(h)?(w.add(document,G.touchMoveEvent,this.intDrag,this),w.add(document,G.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,h)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}}},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(p(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(u(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var a=this.checkTargetElement(e);a.target&&a.instance?(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a):this.hoverObject&&(this.hoverObject.instance.intOut(e,a.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null);var s=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var l=this.parentClientRect.left,c=this.parentClientRect.top,h=this.getCoordinates(e),d=h.pageX,f=h.pageY,g=this.position.left-this.diffX,m=this.position.top-this.diffY;if(this.dragArea){var y=getComputedStyle(s);if(this.pageX!==d||this.skipDistanceCheck){var v=s.offsetWidth+(parseFloat(y.marginLeft)+parseFloat(y.marginRight));t=this.dragLimit.left+window.pageXOffset>g?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<g+v?this.dragLimit.right-v:g}if(this.pageY!==f||this.skipDistanceCheck){var b=s.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom));i=this.dragLimit.top+window.pageYOffset>m?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<m+b?this.dragLimit.bottom-b:m}}else t=g,i=m;var w=c+this.borderWidth.top,x=l+this.borderWidth.left;this.dragProcessStarted&&(p(i)&&(i=this.prevTop),p(t)&&(t=this.prevLeft));var S=this.getProcessedPositionValue({top:i-w+"px",left:t-x+"px"});k(s,this.getDragPosition(S)),!this.elementInViewport(s)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=d,this.pageY=f}},t.prototype.getDragPosition=function(e){var t=d({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,u(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),w.remove(document,G.touchMoveEvent,this.intDragStart),w.remove(document,G.touchEndEvent,this.intDragStop),w.remove(document,G.touchEndEvent,this.intDestroy),w.remove(document,G.touchMoveEvent,this.intDrag)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.setDragArea=function(){var e,t,i,n=0,r=0;if(i="string"===typeof this.dragArea?A(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();e=o.width?o.width:o.right-o.left,t=o.height?o.height:o.bottom-o.top;for(var a=["Top","Left","Bottom","Right"],s=getComputedStyle(i),l=0;l<a.length;l++){var c=a[l],h=s["border"+c+"Width"],d=s["padding"+c],p=c.toLowerCase();this.borderWidth[p]=isNaN(parseFloat(h))?0:parseFloat(h),this.padding[p]=isNaN(parseFloat(d))?0:parseFloat(d)}n=o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=n+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.display||"";return g(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.display="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.display=n):t=e.target,t},t.prototype.getMousePosition=function(e){var t=this.getCoordinates(e),i=this.clone?t.pageX:t.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?t.pageY:t.pageY+window.pageYOffset-this.relativeYPosition;return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=S("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!p(t.parentNode)){var n=D(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Ke([ne({},Je)],t.prototype,"cursorAt",void 0),Ke([ie(!0)],t.prototype,"clone",void 0),Ke([ie()],t.prototype,"dragArea",void 0),Ke([re()],t.prototype,"drag",void 0),Ke([re()],t.prototype,"dragStart",void 0),Ke([re()],t.prototype,"dragStop",void 0),Ke([ie(1)],t.prototype,"distance",void 0),Ke([ie()],t.prototype,"handle",void 0),Ke([ie()],t.prototype,"abort",void 0),Ke([ie()],t.prototype,"helper",void 0),Ke([ie("default")],t.prototype,"scope",void 0),Ke([ie("")],t.prototype,"dragTarget",void 0),Ke([ie()],t.prototype,"axis",void 0),Ke([ie()],t.prototype,"queryPositionInfo",void 0),Ke([ie(!1)],t.prototype,"enableTailMode",void 0),Ke([ie(!1)],t.prototype,"skipDistanceCheck",void 0),Ke([ie(!0)],t.prototype,"preventDefault",void 0),Ke([ie(!1)],t.prototype,"enableAutoScroll",void 0),Ke([ie(!1)],t.prototype,"enableTapHold",void 0),Ke([ie(750)],t.prototype,"tapHoldThreshold",void 0),t=i=Ke([oe],t)}(z),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),tt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},it=(function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}et(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){w.add(this.element,G.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&O(r.helper));o&&(i=this.isDropArea(e,r.helper,t),this.accept&&(n=R(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||n.target===t){t.style.display="none";var o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=g(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){w.remove(this.element,G.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},tt([ie()],t.prototype,"accept",void 0),tt([ie("default")],t.prototype,"scope",void 0),tt([re()],t.prototype,"drop",void 0),tt([re()],t.prototype,"over",void 0),tt([re()],t.prototype,"out",void 0),t=tt([oe],t)}(z),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),nt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},rt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},ot=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(r.keyConfigs);s<l.length;s++)for(var c=l[s],h=0,d=r.keyConfigs[c].split(",");h<d.length;h++){var p=d[h],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}},r.bind(),r}var i;return it(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return rt[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},nt([ie({})],t.prototype,"keyConfigs",void 0),nt([ie("keyup")],t.prototype,"eventName",void 0),nt([re()],t.prototype,"keyAction",void 0),t=i=nt([oe],t)}(z),at=(function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||Fe)}e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=d(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return p(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={}}(),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),st=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),st([ie(50)],t.prototype,"swipeThresholdDistance",void 0),t}(be),ct=/(Up|Down)/,ht=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=e.changedTouches?e.changedTouches[0]:e;void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(e)},n.tapHoldThreshold),w.add(n.element,G.touchMoveEvent,n.moveEvent,n),w.add(n.element,G.touchEndEvent,n.endEvent,n),w.add(n.element,G.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=e.changedTouches?e.changedTouches[0]:e;n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=d(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),w.remove(n.element,G.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"===typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=e;e.changedTouches&&(t=e.changedTouches[0]);var i=t.clientX-n.startPoint.clientX,r=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1,n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,s=n.swipeSettings.swipeThresholdDistance;a=d(a,n.defaultArgs,o);var l=!1,c=n.element,h=n.isScrollable(c),p=ct.test(n.movedDirection);(s<n.distanceX&&!p||s<n.distanceY&&p)&&(l=!h||n.checkSwipe(c,p)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!==typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),w.remove(n.element,G.touchMoveEvent,n.moveEvent),w.remove(n.element,G.touchEndEvent,n.endEvent),w.remove(n.element,G.touchCancelEvent,n.cancelEvent)},n.bind(),n}return at(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),G.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){w.add(this.element,G.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){w.remove(this.element,G.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,w.remove(this.element,G.touchMoveEvent,this.moveEvent),w.remove(this.element,G.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),w.remove(this.element,G.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(r*r+o*o)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},st([re()],t.prototype,"tap",void 0),st([re()],t.prototype,"tapHold",void 0),st([re()],t.prototype,"swipe",void 0),st([re()],t.prototype,"scroll",void 0),st([ie(350)],t.prototype,"tapThreshold",void 0),st([ie(750)],t.prototype,"tapHoldThreshold",void 0),st([ne({},lt)],t.prototype,"swipeSettings",void 0),t=st([oe],t)}(z),dt=new RegExp("\\n|\\r|\\s\\s+","g"),pt=new RegExp(/'|"/g),ut=new RegExp("if ?\\("),ft=new RegExp("else if ?\\("),gt=new RegExp("else"),mt=new RegExp("for ?\\("),yt=new RegExp("(/if|/for)"),vt=new RegExp("\\((.*)\\)",""),bt=new RegExp("^[0-9]+$","g"),wt=new RegExp("[\\w\"'.\\s+]+","g"),xt=new RegExp('"(.*?)"',"g"),St=new RegExp("\\${([^}]*)}","g");function Ct(e,t){var i=function(e,t,i){var n=0,r=[],o=e.match(/class="([^\"]+|)\s{2}/g),a="";o&&o.forEach(function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)});return e.replace(dt,"").replace(xt,"'$1'").replace(St,function(e,o,a,s){var l=o.match(vt);if(l){var c=l[1];if(ft.test(o))o='";} '+o.replace(l[1],c.replace(wt,function(e){return Pt(e=e.trim(),!pt.test(e)&&-1===r.indexOf(e),t,r)}))+'{ \n str = str + "';else if(ut.test(o))o='"; '+o.replace(l[1],c.replace(wt,function(e){return Pt(e=e.trim(),!pt.test(e)&&-1===r.indexOf(e),t,r)}))+'{ \n str = str + "';else if(mt.test(o)){var h=l[1].split(" of ");o='"; '+o.replace(l[1],function(e){return r.push(h[0]),r.push(h[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+Pt(h[1],!0,t,r)+".length; i"+n+"++"})+"{ \n "+h[0]+"= "+Pt(h[1],!0,t,r)+"[i"+n+"]; \n var "+h[0]+"Index=i"+n+'; \n str = str + "'}else{var d=o.split("("),p=i&&i.hasOwnProperty(d[0])?"this.":"global";p=/\./.test(d[0])?"":p;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===p?t+"."+l[1]:l[1]),o='" + '+("global"===p?"":p)+o.replace(c,Pt(l[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==p,t,r))+'+"'}}else o=gt.test(o)?'"; '+o.replace(gt,'} else { \n str = str + "'):o.match(yt)?o.replace(yt,'"; \n } \n str = str + "'):'"+'+Pt(o.replace(/\,/gi,"+"+t+"."),-1===r.indexOf(o),t,r)+'+"';return o})}(e,"data",t);return new Function("data",'var str="'+i+'"; return str;').bind(t)}function Pt(e,t,i,n){return t&&!bt.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}var Et=/^[\n\r.]+\<tr|^\<tr/,Ot=/^[\n\r.]+\<svg|^\<path|^\<g/;var Mt,Tt,At,Lt,Dt,kt,It={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),Ct(e,t)},e}())).compile},Rt=!1;function Nt(e,t,i,n,r){if(Tt=r,Rt=!!n,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),Lt=e.ownerDocument,At=e;return function(e,t,i){switch(Mt=At.getBoundingClientRect(),t+e){case"topcenter":jt(Vt(),i),zt(Ft(),i);break;case"topright":jt(Xt(),i),zt(Ft(),i);break;case"centercenter":jt(Vt(),i),zt(Wt(),i);break;case"centerright":jt(Xt(),i),zt(Wt(),i);break;case"centerleft":jt(Yt(),i),zt(Wt(),i);break;case"bottomcenter":jt(Vt(),i),zt(_t(),i);break;case"bottomright":jt(Xt(),i),zt(_t(),i);break;case"bottomleft":jt(Yt(),i),zt(_t(),i);break;default:case"topleft":jt(Yt(),i),zt(Ft(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function jt(e,t){t.left=e}function zt(e,t){t.top=e}function Ht(){return Lt.documentElement.scrollTop||Lt.body.scrollTop}function Bt(){return Lt.documentElement.scrollLeft||Lt.body.scrollLeft}function _t(){return Rt?Mt.bottom:Mt.bottom+Ht()}function Wt(){return Ft()+Mt.height/2}function Ft(){return Rt?Mt.top:Mt.top+Ht()}function Yt(){return Mt.left+Bt()}function Xt(){return Mt.right+Bt()-(Tt?Tt.width:0)}function Vt(){return Yt()+Mt.width/2}function Ut(e,t,i,n,r,o,a,s,l){if(void 0===a&&(a=null),void 0===s&&(s={X:!0,Y:!0}),t&&e&&r&&o&&(s.X||s.Y)){var c={TL:null,TR:null,BL:null,BR:null},h={TL:null,TR:null,BL:null,BR:null},d=e.getBoundingClientRect(),p={posX:r,posY:o,offsetX:i,offsetY:n,position:{left:0,top:0}};kt=a,Dt=t.ownerDocument,function(e,t,i,n,r){i.position=Nt(e,i.posX,i.posY,n,r),t.TL=Nt(e,"left","top",n,r),t.TR=Nt(e,"right","top",n,r),t.BR=Nt(e,"left","bottom",n,r),t.BL=Nt(e,"right","bottom",n,r)}(t,c,p,l,d),Gt(h,p,d),s.X&&function e(t,i,n,r,o,a){var s=qt(i.TL.left,i.TR.left);n.TL.left-oi()<=ti()&&(s.leftSide=!1);n.TR.left>=ii()&&(s.rightSide=!1);(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&("right"===r.posX?r.posX="left":r.posX="right",r.offsetX=r.offsetX+o.width,r.offsetX=-1*r.offsetX,r.position=Nt(t,r.posX,r.posY,!1),Gt(i,r,o),a&&e(t,i,n,r,o,!1))}(t,h,c,p,d,!0),s.Y&&c.TL.top>-1&&function e(t,i,n,r,o,a){var s=Zt(i.TL.top,i.BL.top);n.TL.top-ri()<=ei()&&(s.topSide=!1);n.BL.top>=ni()&&(s.bottomSide=!1);(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&("top"===r.posY?r.posY="bottom":r.posY="top",r.offsetY=r.offsetY+o.height,r.offsetY=-1*r.offsetY,r.position=Nt(t,r.posX,r.posY,!1,o),Gt(i,r,o),a&&e(t,i,n,r,o,!1))}(t,h,c,p,d,!0),function(e,t,i){var n=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=Nt(e.offsetParent,"left","top",!1,i);n=o.left,r=o.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,p,d)}}function Gt(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function qt(e,t){var i=!1,n=!1;return e-oi()<ti()&&(i=!0),t>ii()&&(n=!0),{leftSide:i,rightSide:n}}function Zt(e,t){var i=!1,n=!1;return e-ri()<ei()&&(i=!0),t>ni()&&(n=!0),{topSide:i,bottomSide:n}}function Qt(){return kt.getBoundingClientRect().width}function Kt(){return kt.getBoundingClientRect().height}function $t(){return kt.getBoundingClientRect().left}function Jt(){return kt.getBoundingClientRect().top}function ei(){return kt?Jt():0}function ti(){return kt?$t():0}function ii(){return kt?oi()+$t()+Qt():oi()+si()}function ni(){return kt?ri()+Jt()+Kt():ri()+ai()}function ri(){return Dt.documentElement.scrollTop||Dt.body.scrollTop}function oi(){return Dt.documentElement.scrollLeft||Dt.body.scrollLeft}function ai(){return window.innerHeight}function si(){var e=window.innerWidth;return e-(e-(p(document.documentElement)?0:document.documentElement.offsetWidth))}var li=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ci=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return li(t,e),ci([ie("left")],t.prototype,"X",void 0),ci([ie("top")],t.prototype,"Y",void 0),t}(be),di="e-popup",pi="e-rtl",ui="e-popup-open",fi="e-popup-close",gi=function(e){function t(t,i){return e.call(this,i,t)||this}return li(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":k(this.element,{width:y(e.width)});break;case"height":k(this.element,{height:y(e.height)});break;case"zIndex":k(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove(di,pi),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(di);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=y(this.width)),"auto"!==this.height&&(e.height=y(this.height)),k(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent(),this.wireEvents()},t.prototype.wireEvents=function(){G.isDevice&&w.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];w.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){G.isDevice&&w.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];w.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||p(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"===typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(p(this.checkGetBoundingClientRect(t))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},o=Nt(e),a={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},s={top:r.bottom-a.top,left:r.right-a.left,bottom:a.bottom-r.top,right:a.right-r.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top)&&!(i.bottom>l.bottom)&&!(i.right>l.right)&&!(i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(pi):this.element.classList.remove(pi)},t.prototype.setContent=function(){p(this.content)||(this.element.innerHTML="","string"===typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,t){p(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"===typeof this.position.X&&"number"===typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"===typeof this.position.X&&"number"===typeof this.position.Y||"number"===typeof this.position.X&&"string"===typeof this.position.Y){var n=this.element.style.display,r=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"===typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(i){n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else e={left:0,top:0};p(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,r){var o=this.checkGetBoundingClientRect(t),a=this.checkGetBoundingClientRect(e);if(p(o)||p(a))return null;var s=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=Nt(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(t=t.parentElement),l=function(e,t){var i=!1,n={left:0,top:0},r=e;if(!e||!t)return n;for(p(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=r;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(s,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=a.width/2-o.width/2:l.left+=a.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=a.width-o.width:l.left+=a.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=a.height/2-o.height/2:l.top+=a.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=a.height-o.height:l.top+=a.height}return l.left+=n,l.top+=r,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();Ut(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==function(e,t,i,n){void 0===t&&(t=null);var r=Nt(e,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];kt=t,Dt=e.ownerDocument;var a=e.getBoundingClientRect(),s=r.top,l=r.left,c=r.left+a.width,h=Zt(s,r.top+a.height),d=qt(l,c);return h.topSide&&o.push("top"),d.rightSide&&o.push("right"),d.leftSide&&o.push("left"),h.bottomSide&&o.push("bottom"),o}(this.element,this.viewPortElement).length)if(p(this.viewPortElement)){var t=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(kt=t,Dt=e.ownerDocument,n||(n=Nt(e,"left","top")),i.X){var o=kt?Qt():si(),a=ti(),s=ii(),l=a-n.left,c=n.left+r.width-s;r.width>o?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?a:l>c?s-r.width:a:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var h=kt?Kt():ai(),d=ei(),p=ni(),u=d-n.top,f=n.top+r.height-p;r.height>h?n.top=u>0&&f<=0?p-r.height:f>0&&u<=0?d:u>f?p-r.height:d:u>0?n.top+=u:f>0&&(n.top-=f)}return n}(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(p(i)||p(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var i=this;if(1e3===this.zIndex||!p(t)){var n=p(t)?this.element:t;this.zIndex=function(e){var t=e.parentElement,i=[];for(;t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),t=t.parentElement}for(var o=[],a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){var n=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&o.push(n)}o.push("999");var s=[];if(!p(e.parentElement)&&"BODY"!==e.parentElement.tagName)for(var l=[].slice.call(e.parentElement.children),a=0;a<l.length;a++){var n=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&s.push(n)}var c=i.concat(o,s),h=Math.max.apply(Math,c)+1;return h>2147483647?2147483647:h}(n),k(this.element,{zIndex:this.zIndex})}e=p(e)||"object"!==typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(P([this.element],fi),C([this.element],ui),this.checkCollision(),P([this.element],ui),C([this.element],fi)),p(e)?(P([this.element],fi),C([this.element],ui),this.trigger("open")):(e.begin=function(){i.isDestroyed||(P([i.element],fi),C([i.element],ui))},e.end=function(){i.isDestroyed||i.trigger("open")},new ce(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=p(e)||"object"!==typeof e?this.hideAnimation:e,p(e)?(P([this.element],ui),C([this.element],fi),this.trigger("close")):(e.end=function(){t.isDestroyed||(P([t.element],ui),C([t.element],fi),t.trigger("close"))},new ce(e).animate(this.element))},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),function(e,t){var i=getComputedStyle(e),n=[],r=/(auto|scroll)/,o=e.parentElement;for(;o&&"HTML"!==o.tagName;){var a=getComputedStyle(o);"absolute"===i.position&&"static"===a.position||!r.test(a.overflow+a.overflowY+a.overflowX)||n.push(o),o=o.parentElement}t||n.push(document);return n}(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,p(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},ci([ie("auto")],t.prototype,"height",void 0),ci([ie("auto")],t.prototype,"width",void 0),ci([ie(null)],t.prototype,"content",void 0),ci([ie("container")],t.prototype,"targetType",void 0),ci([ie(null)],t.prototype,"viewPortElement",void 0),ci([ie({X:"none",Y:"none"})],t.prototype,"collision",void 0),ci([ie("")],t.prototype,"relateTo",void 0),ci([ne({},hi)],t.prototype,"position",void 0),ci([ie(0)],t.prototype,"offsetX",void 0),ci([ie(0)],t.prototype,"offsetY",void 0),ci([ie(1e3)],t.prototype,"zIndex",void 0),ci([ie(!1)],t.prototype,"enableRtl",void 0),ci([ie("reposition")],t.prototype,"actionOnScroll",void 0),ci([ie(null)],t.prototype,"showAnimation",void 0),ci([ie(null)],t.prototype,"hideAnimation",void 0),ci([re()],t.prototype,"open",void 0),ci([re()],t.prototype,"close",void 0),ci([re()],t.prototype,"targetExitViewport",void 0),t=ci([oe],t)}(Ze);function mi(e){for(var t,i=e.childNodes,n=0;n<i.length;n++)if(3===(t=i[n]).nodeType)return t;return null}var yi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},bi="e-rtl",wi="e-btn",xi="e-primary",Si="e-icon-btn",Ci=function(e){function t(t,i){return e.call(this,t,i)||this}return yi(t,e),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize()},t.prototype.initialize=function(){this.cssClass&&C([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add(xi),this.content&&(this.element.innerHTML=this.content),this.setIconCss(),this.enableRtl&&this.element.classList.add(bi),this.disabled?this.controlStatus(this.disabled):this.wireEvents(),this.removeRippleEffect=he(this.element,{selector:"."+wi})},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Si);var t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}},t.prototype.wireEvents=function(){this.isToggle&&w.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&w.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var t,i=[xi,bi,Si,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(i=i.concat(this.cssClass.split(" "))),e.prototype.destroy.call(this),P([this.element],i),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),(t=this.element.querySelector("span.e-btn-icon"))&&M(t),this.unWireEvents(),this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"isPrimary":e.isPrimary?this.element.classList.add(xi):this.element.classList.remove(xi);break;case"disabled":this.controlStatus(e.disabled),this.unWireEvents();break;case"iconCss":var r=this.element.querySelector("span.e-btn-icon");r?e.iconCss?(r.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&("Left"===this.iconPosition?r.classList.add("e-icon-left"):r.classList.add("e-icon-right"))):M(r):this.setIconCss();break;case"iconPosition":P([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(r=this.element.querySelector("span.e-btn-icon"))&&M(r),this.setIconCss();break;case"cssClass":t.cssClass&&P([this.element],t.cssClass.split(" ")),e.cssClass&&C([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(bi):this.element.classList.remove(bi);break;case"content":mi(this.element)||this.element.classList.remove(Si),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?w.add(this.element,"click",this.btnClickHandler,this):(w.remove(this.element,"click",this.btnClickHandler),P([this.element],["e-active"]))}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},vi([ie("Left")],t.prototype,"iconPosition",void 0),vi([ie("")],t.prototype,"iconCss",void 0),vi([ie(!1)],t.prototype,"disabled",void 0),vi([ie(!1)],t.prototype,"isPrimary",void 0),vi([ie("")],t.prototype,"cssClass",void 0),vi([ie("")],t.prototype,"content",void 0),vi([ie(!1)],t.prototype,"isToggle",void 0),vi([ie()],t.prototype,"locale",void 0),vi([re()],t.prototype,"created",void 0),t=vi([oe],t)}(Ze),Pi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ei=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Oi=function(e){function t(t,i){return e.call(this,t,i)||this}return Pi(t,e),t.prototype.preRender=function(){this.browser=G.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=G.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=f("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new ht(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),w.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),(p(this.scrollStep)||this.scrollStep<0)&&(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1)},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var i=L(".e-"+t.id+"_nav.e-scroll-nav",t),n=L(".e-scroll-overlay",t);[].slice.call(n).forEach(function(e){M(e)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var a=o[r];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),M(this.scrollEle),i.length>0&&(M(i[0]),p(i[1])||M(i[1])),w.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=L(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a=this.createElement("div",{id:t.concat("_left"),className:o+" e-overlay"});a.setAttribute("aria-disabled","true");var s=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new ht(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),w.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){t.eleScrolling(10,i,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.scrollEle,r=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(r,"e-rtl")&&this.browserCheck&&(e=-e);n.scrollLeft;!this.contains(r,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.02,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(L(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetWidth});!function i(){var r,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(r=-e,o=-10):(r=e,o=10),r<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(p(e)?t:e).querySelector(".e-nav-arrow");p(e)?I(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):I(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),a=this.element.querySelector(".e-scroll-left-overlay"),s=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(a=this.element.querySelector(".e-scroll-right-overlay"),s=this.element.querySelector(".e-scroll-left-overlay")),a.style.width=l<40?l+"px":"40px",t.scrollWidth-Math.ceil(i+l)<40?s.style.width=t.scrollWidth-Math.ceil(i+l)+"px":s.style.width="40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var c=this.element.querySelector(".e-scroll-nav.e-overlay");c&&(c.classList.remove("e-overlay"),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Ei([ie(null)],t.prototype,"scrollStep",void 0),t=Ei([oe],t)}(Ze),Mi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ti=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ai=function(e){function t(t,i){return e.call(this,t,i)||this}return Mi(t,e),t.prototype.preRender=function(){this.browser=G.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=G.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=f("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new ht(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),w.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),(p(this.scrollStep)||this.scrollStep<0)&&(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1),w.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.initialize=function(){var e=S("div",{className:"e-vscroll-content"}),t=S("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",P([this.element],["e-vscroll","e-scroll-device"]);var i=L(".e-"+t.id+"_nav.e-scroll-nav",t),n=L(".e-scroll-overlay",t);[].slice.call(n).forEach(function(e){M(e)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var a=o[r];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),M(this.scrollEle),i.length>0&&(M(i[0]),p(i[1])||M(i[1])),w.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=L(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=S("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=S("div",{id:t.concat("down"),className:n}),o=S("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=S("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=S("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=S("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),a=S("div",{id:t.concat("_up"),className:o+" e-overlay"});a.setAttribute("aria-disabled","true");var s=S("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new ht(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),w.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){t.eleScrolling(10,i,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){this.element;var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(L(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetHeight});!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(p(e)?t:e).querySelector(".e-nav-arrow");p(e)?I(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):I(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=(this.element,this.element.querySelector(".e-scroll-up-nav")),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),a=this.element.querySelector(".e-scroll-down-overlay"),s=t.scrollTop;if(s<=0&&(s=-s),this.isDevice&&(o.style.height=s<40?s+"px":"40px",t.scrollHeight-Math.ceil(i+s)<40?a.style.height=t.scrollHeight-Math.ceil(i+s)+"px":a.style.height="40px"),0===s)this.arrowDisabling(n,r);else if(Math.ceil(i+s+.1)>=t.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Ti([ie(null)],t.prototype,"scrollStep",void 0),t=Ti([oe],t)}(Ze),Li=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Di=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ki="e-toolbar-items",Ii="e-toolbar-item",Ri="e-toolbar-popup",Ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Li(t,e),Di([ie("")],t.prototype,"id",void 0),Di([ie("")],t.prototype,"text",void 0),Di([ie("auto")],t.prototype,"width",void 0),Di([ie("")],t.prototype,"cssClass",void 0),Di([ie(!1)],t.prototype,"showAlwaysInPopup",void 0),Di([ie("")],t.prototype,"prefixIcon",void 0),Di([ie("")],t.prototype,"suffixIcon",void 0),Di([ie("None")],t.prototype,"overflow",void 0),Di([ie("")],t.prototype,"template",void 0),Di([ie("Button")],t.prototype,"type",void 0),Di([ie("Both")],t.prototype,"showTextOn",void 0),Di([ie(null)],t.prototype,"htmlAttributes",void 0),Di([ie("")],t.prototype,"tooltipText",void 0),Di([ie("Left")],t.prototype,"align",void 0),Di([re()],t.prototype,"click",void 0),t}(be),ji=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}var i,n;return Li(t,e),t.prototype.destroy=function(){var t=this,i=this.element;for(e.prototype.destroy.call(this),this.unwireEvents(),this.tempId.forEach(function(e){p(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")});i.firstChild;)i.removeChild(i.firstChild);this.trgtEle&&i.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),i.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(e){t.element.removeAttribute(e)})},t.prototype.preRender=function(){var e={enableCollision:!0,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.wireEvents=function(){w.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.keyModule=new ot(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),w.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!p(this.popObj)&&O(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){w.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.keyModule.destroy(),window.removeEventListener("resize",this.resizeContext),w.remove(document,"scroll",this.docEvent),w.remove(this.element,"keydown",this.docKeyDown),w.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var t=D(e.target,".e-popup");this.popObj&&O(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){[].slice.call(this.element.querySelectorAll("."+Ii)).forEach(function(e){M(e)});var e=this.element.querySelector("."+ki);this.tbarAlign&&([].slice.call(e.children).forEach(function(e){M(e)}),this.tbarAlign=!1,this.remove(e,"e-tbar-pos")),this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,"e-tbar-extended"),this.remove(this.element,"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,t){return e&&this.popObj&&O(this.popObj.element)?this.popObj.element.querySelector("."+Ii):this.element===t||e?this.element.querySelector("."+Ii+":not(.e-overlay ):not(.e-separator )"):D(t,"."+Ii)},t.prototype.keyHandling=function(e,t,i,n,r){var o=this.popObj,a=this.element,s={name:"FadeOut",duration:100};switch(t.action){case"moveRight":if(this.isVertical)return;a===i?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":var l=void 0,c=void 0;if(e){var h=D(e,".e-popup");h?O(this.popObj.element)&&(c=[].slice.call(h.children),l="home"===t.action?c[0]:c[c.length-1]):(c=this.element.querySelectorAll("."+ki+" ."+Ii),l="home"===t.action?c[0]:c[c.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":var d="moveUp"===t.action?"previous":"next";if(this.isVertical)"moveUp"===t.action?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(o&&D(i,".e-popup")){var p=o.element,u=p.firstElementChild;if("previous"===d&&u===e||"next"===d&&p.lastElementChild===e)return;this.eleFocus(e,d)}else"moveDown"===t.action&&o&&O(o.element)&&this.elementFocus(e);break;case"tab":if(!r&&!n){var f=e.firstElementChild;a===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(f),f.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(s);break;case"popupOpen":if(!n)return;o&&!O(o.element)?(o.element.style.top=a.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(s)}},t.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){var i;e.preventDefault();var n=t.classList.contains("e-hor-nav"),r=t.classList.contains("e-scroll-nav");((i=this.clstElement(n,t))||r)&&this.keyHandling(i,e,t,n,r)}},t.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(O(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleFocus=function(e,t){var i=Object(e)[t+"ElementSibling"],n=function(e){return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!O(e)};if(i){if(n(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){var r,o=Object(e.parentElement)[t+"ElementSibling"];if(p(o)||0!==o.children.length||(o=Object(o)[t+"ElementSibling"]),!p(o)&&o.children.length>0)if("next"===t)n(r=o.querySelector("."+Ii))?this.eleFocus(r,t):(r.firstElementChild.focus(),this.activeEleSwitch(r));else n(r=o.lastElementChild)?this.eleFocus(r,t):this.elementFocus(r)}},t.prototype.clickHandler=function(e){var t,i=e.target,n=i.classList,r=this.element,o=!p(D(i,".e-toolbar-pop")),a=D(i,".e-hor-nav");a||(a=i),r.children[0].classList.contains("e-hscroll")||r.children[0].classList.contains("e-vscroll")||!n.contains("e-hor-nav")||(n=i.querySelector(".e-icons").classList),(n.contains("e-popup-up-icon")||n.contains("e-popup-down-icon"))&&this.popupClickHandler(r,a,"e-rtl");var s=D(e.target,"."+Ii);if(!p(s)&&!s.classList.contains("e-overlay")||a.classList.contains("e-hor-nav")){s&&(t=this.items[this.tbarEle.indexOf(s)]);var l={originalEvent:e,item:t};t&&!p(t.click)&&this.trigger("items["+this.tbarEle.indexOf(s)+"].click",l),l.cancel||this.trigger("clicked",l),p(this.popObj)||!o||l.cancel||"Popup"!==this.overflowMode||this.popObj.hide({name:"FadeOut",duration:100})}},t.prototype.popupClickHandler=function(e,t,i){var n=this.popObj;O(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.separator(),this.wireEvents()},t.prototype.initialize=function(){var e=y(this.width),t=y(this.height);"msie"===G.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||k(this.element,{height:t}),k(this.element,{width:e});var i={role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};T(this.element,i)},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?this.element.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1)},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add("e-vertical"),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),k(this.element,{height:y(this.height),width:y(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+ki+" .e-toolbar-center").removeAttribute("style"),this.isVertical?this.scrollModule=new Ai({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):this.scrollModule=new Oi({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,"e-tbar-pos"),k(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var t,i=this,n=0;return[].slice.call(L("."+Ii,e)).forEach(function(e){O(e)&&(t=window.getComputedStyle(e),n+=i.isVertical?e.offsetHeight:e.offsetWidth,n+=parseFloat(i.isVertical?t.marginTop:t.marginRight),n+=parseFloat(i.isVertical?t.marginBottom:t.marginLeft))}),n},t.prototype.getScrollCntEle=function(e){var t=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},t.prototype.checkOverflow=function(e,t){if(p(e)||p(t)||!O(e))return!1;var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var r=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),a=0;return r?a=this.isVertical?r.offsetHeight:r.offsetWidth:o&&(a=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),n>i-a},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,"e-tbar-pos"),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,t=e.querySelector("."+ki),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===G.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":p(this.scrollModule)&&this.initScroll(e,e.getElementsByClassName(ki));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&(this.createPopupEle(e,[].slice.call(L("."+ki+" ."+Ii,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0")),this.toolbarAlign(t);break;case"MultiRow":this.add(t,"e-toolbar-multirow"),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,"e-multirow-pos")),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==G.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.createPopupEle(e,[].slice.call(L("."+ki+" ."+Ii,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0")),this.toolbarAlign(t)}},t.prototype.separator=function(){var e,t=this.element,i=[].slice.call(t.querySelectorAll(".e-separator")),n=t.querySelector(".e-multirow-separator"),r=t.querySelector(".e-extended-separator");null!==(e="MultiRow"===this.overflowMode?n:r)&&("MultiRow"===this.overflowMode?e.classList.remove("e-multirow-separator"):"Extended"===this.overflowMode&&e.classList.remove("e-extended-separator"));for(var o=0;o<=i.length-1;o++)i[o].offsetLeft<30&&0!==i[o].offsetLeft&&("MultiRow"===this.overflowMode?i[o].classList.add("e-multirow-separator"):"Extended"===this.overflowMode&&i[o].classList.add("e-extended-separator"))},t.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),n=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var r=n?i.offsetHeight:i.offsetWidth,o=(n?e.offsetHeight:e.offsetWidth)-r;this.element.classList.remove("e-rtl"),k(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,t,i,n,r){var o=e.element,a=L(".e-overflow-show",i),s=0,l=[].slice.call(L("."+Ri,o.querySelector("."+ki))),c=0;l.forEach(function(o,l){a=L(".e-overflow-show",i),o.classList.contains("e-overflow-show")&&a.length>0?e.tbResize&&a.length>l?(i.insertBefore(o,a[l]),++c):(i.insertBefore(o,i.children[a.length]),++c):o.classList.contains("e-overflow-show")?(i.insertBefore(o,i.firstChild),++c):e.tbResize&&o.classList.contains("e-overflow-hide")&&i.children.length>0&&0===a.length?(i.insertBefore(o,i.firstChild),++c):o.classList.contains("e-overflow-hide")?t.push(o):e.tbResize?(i.insertBefore(o,i.childNodes[s+c]),++s):i.appendChild(o),o.classList.contains("e-separator")?k(o,{display:"",height:r+"px"}):k(o,{display:"",height:n+"px"})}),t.forEach(function(e){i.appendChild(e)});for(var h=L("."+Ii,o.querySelector("."+ki)),d=h.length-1;d>=0;d--){var p=h[d];if(!p.classList.contains("e-separator")||"Extended"===this.overflowMode)break;k(p,{display:"none"})}},t.prototype.createPopup=function(){var e,t,i,n,r,o=this.element;"Extended"===this.overflowMode&&(n=o.querySelector(".e-separator:not(."+Ri+")"),i="auto"===o.style.height||""===o.style.height?null:n.offsetHeight),t=o.querySelector("."+Ii+":not(.e-separator):not(."+Ri+")"),e="auto"===o.style.height||""===o.style.height?null:t&&t.offsetHeight;if(o.querySelector("#"+o.id+"_popup.e-toolbar-pop"))r=o.querySelector("#"+o.id+"_popup.e-toolbar-pop");else{var a=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),s=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop"});r="Extended"===this.overflowMode?a:s}this.pushingPoppedEle(this,[],r,e,i),this.popupInit(o,r)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;k(i,{maxHeight:"",display:"block"}),k(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),k(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new gi(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});r.appendTo(t),"Extended"===this.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),w.add(document,"scroll",this.docEvent.bind(this)),w.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),r.hide(),this.popObj=r,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,"e-tbar-extended"):this.remove(this.element,"e-tbar-extended"))},t.prototype.popupOpen=function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,r=n.querySelector(".e-hor-nav");k(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+Nt(n).top,a=r.firstElementChild;r.classList.add("e-nav-active"),I(a,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var s=p(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+s<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-s+5);t.height=l+"px";for(var c=0;c<=i.childElementCount;c++){var h=i.children[c];if(h.offsetTop+h.offsetHeight>l){l=h.offsetTop;break}}k(t.element,{maxHeight:l+"px"})}else if(this.isVertical){var d=this.element.getBoundingClientRect();k(t.element,{maxHeight:d.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}},t.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove("e-nav-active"),I(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,t,i,n){for(var r,o=this.popupPriCount>0,a=i,s=0,l=0,c=0,h=function(e,t){var i=!1;return t.forEach(function(t){e.classList.contains(t)&&(i=!0)}),i},d=t.length-1;d>=0;d--){var p=void 0,u=window.getComputedStyle(t[d]);this.isVertical?(p=parseFloat(u.marginTop),p+=parseFloat(u.marginBottom)):(p=parseFloat(u.marginRight),p+=parseFloat(u.marginLeft));var f=t[d]===this.tbarEle[0];f&&(this.tbarEleMrgn=p),r=this.isVertical?t[d].offsetHeight:t[d].offsetWidth;var g=f?r+p:r;if(h(t[d],["e-popup-alone"])&&o&&(t[d].classList.add(Ri),this.isVertical?k(t[d],{display:"none",minHeight:g+"px"}):k(t[d],{display:"none",minWidth:g+"px"}),c++),this.isVertical?t[d].offsetTop+t[d].offsetHeight+p>i:t[d].offsetLeft+t[d].offsetWidth+p>i){if(t[d].classList.contains("e-separator")){if("Extended"===this.overflowMode){if(l===c)h(m=t[d],["e-separator","e-ignore"])&&(t[d].classList.add(Ri),c++);l++}else if("Popup"===this.overflowMode){var m;if(s>0&&l===c)h(m=t[d+l+(s-1)],["e-separator","e-ignore"])&&k(m,{display:"none"});s++,l=0,c=0}}else l++;t[d].classList.contains("e-overflow-show")&&n?i-=(this.isVertical?t[d].offsetHeight:t[d].offsetWidth)+p:h(t[d],["e-separator","e-ignore"])?i-=(this.isVertical?t[d].offsetHeight:t[d].offsetWidth)+p:(t[d].classList.add(Ri),this.isVertical?k(t[d],{display:"none",minHeight:g+"px"}):k(t[d],{display:"none",minWidth:g+"px"}),c++)}}if(n){var y=L("."+Ii+":not(."+Ri+")",this.element);this.checkPriority(e,y,a,!1)}},t.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var n=this.createElement("div",{id:t,className:i});"msie"!==G.info.name&&"edge"!==G.info.name||n.classList.add("e-ie-align");var r=this.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n)},t.prototype.tbarPriRef=function(e,t,i,n,r,o,a,s){var l=s,c=this.popObj.element,h=L("."+Ri+":not(.e-overflow-show)",c).length,d=function(e,t){return e.classList.contains(t)};if(0===L(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var u=e.children[t-(t-i)-1],f=!p(u)&&d(u,"e-ignore");if(!p(u)&&d(u,"e-separator")&&!O(u)||f){u.style.display="inherit";var g=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),m=u.previousElementSibling;o+g<a||r?(e.insertBefore(n,e.children[t+l-(t-i)]),p(m)||(m.style.display="")):m.classList.contains("e-separator")&&(m.style.display="none"),u.style.display=""}else e.insertBefore(n,e.children[t+l-(t-i)])}else e.insertBefore(n,e.children[t+l-h])},t.prototype.popupRefresh=function(e,t){var i=this,n=this.element,r=this.isVertical,o=n.querySelector(".e-hor-nav"),a=n.querySelector("."+ki);if(!p(o)){var s;a.removeAttribute("style"),e.style.display="block",s=r?n.offsetHeight-(o.offsetHeight+a.offsetHeight):n.offsetWidth-(o.offsetWidth+a.offsetWidth);var l=0;[].slice.call(e.children).forEach(function(e){l+=i.popupEleWidth(e),k(e,{position:""})}),s+(r?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(s,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(M(o),o=null,this.popObj.destroy(),M(this.popObj.element),this.popObj=null,n.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],r=0;return i.length>0?(i.forEach(function(e){n.push([].slice.call(t.children).indexOf(e))}),n.forEach(function(t){t<=e&&r++}),r):0},t.prototype.checkPopupRefresh=function(e,t){t.style.display="block";var i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var n=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,r=e.querySelector("."+ki).offsetWidth;return t.style.removeProperty("display"),n>i+r},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var n=e.children[0];!p(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!p(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",p(i)||(i.style.display="")}return t},t.prototype.popupEleRefresh=function(e,t,i){for(var n,r,o=this.popupPriCount>0,a=this.tbarEle,s=this.element.querySelector("."+ki),l=0,c=function(t){if(t.classList.contains("e-popup-alone")&&o&&!i)return"continue";var c=h.popupEleWidth(t);if(t===h.tbarEle[0]&&(c+=h.tbarEleMrgn),t.style.position="",!(c<e||i))return"break";if(k(t,{minWidth:"",height:"",minHeight:""}),t.classList.contains("e-overflow-hide")||t.classList.remove(Ri),r=h.tbarEle.indexOf(t),h.tbarAlign){var d=h.items[r].align;r=h.tbarAlgEle[(d+"s").toLowerCase()].indexOf(t),a=h.tbarAlgEle[(d+"s").toLowerCase()],s=h.element.querySelector("."+ki+" .e-toolbar-"+d.toLowerCase())}var p=0;"Extended"!==h.overflowMode&&a.slice(0,r).forEach(function(t){(t.classList.contains("e-overflow-show")||t.classList.contains("e-separator"))&&(t.classList.contains("e-separator")&&(t.style.display="",e-=t.offsetWidth),p++)}),l=h.ignoreEleFetch(r,s),t.classList.contains("e-overflow-show")?(h.tbarPriRef(s,r,p,t,i,c,e,l),e-=t.offsetWidth):0===r?(s.insertBefore(t,s.firstChild),e-=t.offsetWidth):(n=L(".e-overflow-show",h.popObj.element).length,s.insertBefore(t,s.children[r+l-n]),e-=t.offsetWidth),t.style.height=""},h=this,d=0,p=[].slice.call(t.children);d<p.length;d++){if("break"===c(p[d]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(ki)[0])&&!i&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+ki);if(!p(e)&&e.classList.contains("e-tbar-pos")){this.remove(e,"e-tbar-pos");var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+ki);this.add(e,"e-tbar-pos"),this.itemPositioning()},t.prototype.itemPositioning=function(){var e,t=this.element.querySelector("."+ki);if(!p(t)&&t.classList.contains("e-tbar-pos")){var i,n=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var r=this.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(t.querySelector("."+r).children)}else i=[].slice.call(t.childNodes);e=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var o=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){o-=this.isVertical?n.offsetHeight:n.offsetWidth;var a=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=a:i[2].style.bottom=a:this.enableRtl?i[2].style.left=a:i[2].style.right=a}if(!(o<=e)){var s=(o-e-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+s+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},t.prototype.tbarItemAlign=function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var r=[];if(r.push(this.createElement("div",{className:"e-toolbar-left"})),r.push(this.createElement("div",{className:"e-toolbar-center"})),r.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)r.forEach(function(e){t.appendChild(e)}),this.tbarAlign=!0,this.add(t,"e-tbar-pos");else if("Left"!==e.align){var o=t.childNodes,a=r[0];[].slice.call(o).forEach(function(e){n.tbarAlgEle.lefts.push(e),a.appendChild(e)}),t.appendChild(a),t.appendChild(r[1]),t.appendChild(r[2]),this.tbarAlign=!0,this.add(t,"e-tbar-pos")}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,ki),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(t){"DIV"===t.tagName&&(e.tbarEle.push(t),t.setAttribute("aria-disabled","false"),e.add(t,Ii))})},t.prototype.renderItems=function(){var e,t,i,n=this.element,r=this.items;if(n&&n.children.length>0&&(e=n.querySelector("."+ki)),null!=this.trgtEle)this.ctrlTemplate();else if(n&&r.length>0){e||(e=this.createElement("div",{className:ki}));for(var o=0;o<r.length;o++)t=this.renderSubComponent(r[o],o),-1===this.tbarEle.indexOf(t)&&this.tbarEle.push(t),this.tbarAlign||this.tbarItemAlign(r[o],e,o),(i=e.querySelector(".e-toolbar-"+r[o].align.toLowerCase()))?(r[o].showAlwaysInPopup&&"Show"!==r[o].overflow||this.tbarAlgEle[(r[o].align+"s").toLowerCase()].push(t),i.appendChild(t)):e.appendChild(t);n.appendChild(e)}},t.prototype.setAttr=function(e,t){for(var i,n=Object.keys(e),r=0;r<n.length;r++)"class"===(i=n[r])?this.add(t,e[i]):t.setAttribute(i,e[i])},t.prototype.enableItems=function(e,t){var i=e,n=i.length;p(t)&&(t=!0);var r=function(e,t){e?(t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false")):(t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"))};if(n&&n>1){for(var o=0,a=[].slice.call(i);o<a.length;o++){r(t,a[o])}t?P(i,"e-overlay"):C(i,"e-overlay")}else{r(t,n&&1===n?i[0]:e)}},t.prototype.addItems=function(e,t){var i,n=this.element.querySelector("."+ki);if(p(n))this.itemsRerender(e);else{var r,o="Left";p(t)&&(t=0),e.forEach(function(e){p(e.align)||"Left"===e.align||"Left"!==o||(o=e.align)});for(var a=0,s=e;a<s.length;a++){var l=s[a];if(p(l.type)&&(l.type="Button"),i=L("."+Ii,this.element),l.align=o,r=this.renderSubComponent(l,t),this.tbarEle.length>=t&&i.length>=0){p(this.scrollModule)&&this.destroyMode();var c="L"===l.align[0]?0:"C"===l.align[0]?1:2,h=void 0;this.tbarAlign||"Left"===o?this.tbarAlign?((h=D(i[0],"."+ki).children[c]).insertBefore(r,h.children[t]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(t,0,r),this.refreshPositioning()):0===i.length?(i=L("."+ki,this.element))[0].appendChild(r):i[0].parentNode.insertBefore(r,i[t]):(this.tbarItemAlign(l,n,1),this.tbarAlign=!0,(h=D(i[0],"."+ki).children[c]).appendChild(r),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(r),this.refreshPositioning()),this.items.splice(t,0,l),this.tbarEle.splice(t,0,r),t++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode()}},t.prototype.removeItems=function(e){var t,i=e,n=[].slice.call(L("."+Ii,this.element));if("number"===typeof i)t=parseInt(e.toString(),10),this.removeItemByIndex(t,n);else if(i&&i.length>1)for(var r=0,o=[].slice.call(i);r<o.length;r++){var a=o[r];t=this.tbarEle.indexOf(a),this.removeItemByIndex(t,n),n=L("."+Ii,this.element)}else{a=i&&i.length&&1===i.length?i[0]:e;t=n.indexOf(a),this.removeItemByIndex(t,n)}this.resize()},t.prototype.removeItemByIndex=function(e,t){if(this.tbarEle[e]&&t[e]){var i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){var n;n=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]),this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(n,1)}M(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},t.prototype.templateRender=function(e,t,i,n){var r,o=i.type,a=e;if("object"===typeof e&&(r="function"===typeof a.appendTo),"string"!==typeof e&&r){if("Input"===o){c=this.createElement("input");i.id?c.id=i.id:c.id=f("tbr-ipt"),t.appendChild(c),a.appendTo(c)}}else{var s,l=void 0;s="string"===typeof e?e.trim():e;try{if("object"!==typeof e||p(e.tagName)){if(document.querySelectorAll(s).length){var c,h=(c=document.querySelector(s)).outerHTML.trim();t.appendChild(c),c.style.display="",p(h)||this.tempId.push(s)}}else t.appendChild(e)}catch(u){l=function(e,t){var i=It.compile(e,t);return function(e,t,n){var r=i(e,t,n);return"string"===typeof r?Ot.test(r)?S("svg",{innerHTML:r}).childNodes:S(Et.test(r)?"table":"div",{innerHTML:r}).childNodes:r}}(s)}var d=void 0;p(l)||(d=l({},this,"template")),!p(d)&&d.length>0&&[].slice.call(d).forEach(function(e){p(e.tagName)||(e.style.display=""),t.appendChild(e)})}this.add(t,"e-template"),this.tbarEle.push(t)},t.prototype.buttonRendering=function(e,t){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var n,r,o=e.text;e.id?i.id=e.id:i.id=f("e-tbr-btn");var a=this.createElement("span",{className:"e-tbar-btn-text"});o?(a.innerHTML=o,i.appendChild(a),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",r="Left"):(n=e.suffixIcon+" e-icons",r="Right"));var s=new Ci({iconCss:n,iconPosition:r});return s.createElement=this.createElement,s.appendTo(i),e.width&&k(i,{width:y(e.width)}),i},t.prototype.renderSubComponent=function(e,t){var i,n;if((i=this.createElement("div",{className:Ii})).setAttribute("aria-disabled","false"),this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,i),e.tooltipText){var r=this.createElement("div",{innerHTML:e.tooltipText});i.setAttribute("title",r.textContent)}if(e.cssClass&&(i.className=i.className+" "+e.cssClass),e.template)this.templateRender(e.template,i,e,t);else switch(e.type){case"Button":(n=this.buttonRendering(e,i)).setAttribute("tabindex","-1"),i.appendChild(n),i.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(i,"e-separator")}if(e.showTextOn){var o=e.showTextOn;"Toolbar"===o?(this.add(i,"e-toolbar-text"),this.add(i,"e-tbtn-align")):"Overflow"===o&&this.add(i,"e-popup-text")}if(e.overflow){var a=e.overflow;"Show"===a?this.add(i,"e-overflow-show"):"Hide"===a&&(i.classList.contains("e-separator")||this.add(i,"e-overflow-hide"))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!i.classList.contains("e-separator")&&(this.add(i,"e-popup-alone"),this.popupPriCount++),i},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){p(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,p(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName(ki)[0]);if(!t){this.destroyScroll();var i=e.querySelector("."+ki);p(i)||(this.remove(i,"e-multirow-pos"),this.tbarAlign&&this.add(i,"e-tbar-pos"))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else for(var o=Object.keys(e.items),a=0;a<o.length;a++){var s=parseInt(Object.keys(e.items)[a],10),l=Object.keys(e.items[s])[0],c=(Object(t.items[s])[l],Object(e.items[s])[l]);if(this.tbarAlign||"align"===l){this.refresh(),this.trigger("created");break}var h="showAlwaysInPopup"===l&&!c,d="overflow"===l&&0!==this.popupPriCount;(h||this.items[s].showAlwaysInPopup&&d)&&--this.popupPriCount,p(this.scrollModule)&&this.destroyMode(),M([].slice.call(L("."+ki+" ."+Ii,i))[s]),this.tbarEle.splice(s,1),this.addItems([this.items[s]],s),this.items.splice(s,1),this.items[s].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":var u=i.offsetWidth;k(i,{width:y(e.width)}),this.renderOverflowMode(),this.popObj&&u<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":k(this.element,{height:y(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,"e-rtl"),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl"),p(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),p(this.popObj)||(e.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning()}}},t.prototype.hideItem=function(e,t){var i,n=e;if("object"===typeof e)i=e;else if(this.tbarEle[n]){i=[].slice.call(L("."+Ii,this.element))[n]}i&&(t?i.classList.add("e-hidden"):i.classList.remove("e-hidden"),this.refreshOverflow())},Di([(i=[],n=Ni,function(e,t){var r={set:te(i,t,n),get:ee(i,t,n),enumerable:!0,configurable:!0};Object.defineProperty(e,t,r),ae(e,t,"colProp",i,n)})],t.prototype,"items",void 0),Di([ie("auto")],t.prototype,"width",void 0),Di([ie("auto")],t.prototype,"height",void 0),Di([ie("Scrollable")],t.prototype,"overflowMode",void 0),Di([re()],t.prototype,"clicked",void 0),Di([re()],t.prototype,"created",void 0),Di([re()],t.prototype,"destroyed",void 0),Di([re()],t.prototype,"beforeCreate",void 0),t=Di([oe],t)}(Ze),zi=i(9),Hi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bi=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],_i=["accordion","tab","splitter"],Wi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t}return Hi(t,e),t.prototype.componentWillMount=function(){var e=Object.keys(this.props);this.htmlattributes={},this.attrKeys=Bi.concat(this.controlAttributes||[]);for(var t=0,i=e;t<i.length;t++){var n=i[t];-1===n.indexOf("data-")&&-1===n.indexOf("aria-")&&-1===this.attrKeys.indexOf(n)||(this.htmlattributes[n]=this.props[n])}},t.prototype.componentDidMount=function(){var e=this;this.refreshChild(!0),this.canDelayUpdate=-1!==_i.indexOf(this.getModuleName()),this.props.immediateRender?this.renderComponent():this.cachedTimeOut=setTimeout(function(){e.renderComponent()})},t.prototype.renderComponent=function(){var e=zi.findDOMNode(this);e&&(this.isAppendCalled=!0,this.appendTo(e))},t.prototype.componentWillReceiveProps=function(e){var t=this;this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(zi.findDOMNode(this)));for(var i=d({},e),n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],a="className"===o;a||p(this.htmlattributes[o])||this.htmlattributes[o]===i[o]||(this.htmlattributes[o]=i[o]),this.props[o]===e[o]?delete i[o]:-1!==this.attrKeys.indexOf(o)&&(a?(this.element.classList.remove(this.props[o]),this.element.classList.add(i[o])):"disabled"!==o&&delete i[o])}i.children&&delete i.children,this.canDelayUpdate||this.props.delayUpdate?setTimeout(function(){t.refreshProperties(i,e)}):this.refreshProperties(i,e)},t.prototype.refreshProperties=function(e,t){Object.keys(e).length&&(this.processComplexTemplate(e,this),this.setProperties(e)),this.refreshChild(!1,t)},t.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i)for(var n in i){var r=i[n];e[n]&&s(r,a(n,e),e)}},t.prototype.getDefaultAttributes=function(){return this.htmlattributes},t.prototype.trigger=function(e,t){if(!0!==this.isDestroyed){"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var i=this.isProtectedOnChange;this.isProtectedOnChange=!1,this.modelObserver.notify(e,t),this.isProtectedOnChange=i}},t.prototype.compareObjects=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,r=this.getInjectedServices()||[];n<r.length;n++){var o=r[n];-1===i.indexOf(o)&&i.push(o)}this.injectedModules=i}if(this.directivekeys){var a=this.validateChildren({},this.directivekeys,t||this.props);if(a){if(!e&&this.skipRefresh)for(var s=0,l=this.skipRefresh;s<l.length;s++){delete a[l[s]]}if(this.prevProperties)for(var c=Object.keys(this.prevProperties),h=0;h<c.length;h++){var p=c[h];this.compareObjects(this.prevProperties[p],a[p])?delete a[p]:this.prevProperties=d(this.prevProperties,a)}else this.prevProperties=d({},a,{},!0);this.setProperties(a,e)}}},t.prototype.componentWillUnmount=function(){this.destroy()},t.prototype.validateChildren=function(e,t,i){for(var r=!1,o=0,a=n.Children.toArray(i.children);o<a.length;o++){var s=a[o],l=this.getChildType(s),c=t[l];if(l&&t){var h=this.getChildProps(n.Children.toArray(s.props.children),c);h.length&&(r=!0,e[s.type.propertyName||l]=h)}}return r?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],a=!1,s=void 0;"string"===typeof t?(a=!0,s=t):s=Object.keys(t)[0];var l=o.props;if(this.getChildType(o)===s)if(a||!l.children){var c=d({},l,{},!0);this.processComplexTemplate(c,o.type),i.push(c)}else{var h=this.validateChildren(d({},l),t[s],l)||l;h.children&&delete h.children,this.processComplexTemplate(h,o.type),i.push(h)}}return i},t.prototype.getInjectedServices=function(){for(var e=0,t=n.Children.toArray(this.props.children);e<t.length;e++){var i=t[e];if(i.type.isService)return i.props.services}return[]},t}(n.PureComponent);var Fi,Yi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Yi(t,e),t.prototype.render=function(){return null},t.isDirective=!0}(n.PureComponent),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Vi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Xi(t,e),t.prototype.render=function(){return null},t.isService=!0}(n.PureComponent),It.compile);Fi={compile:function(e,t){return"string"===typeof e?Vi(e,t):function(t){var i=document.createElement("div");document.body.appendChild(i);var n=e,r=t;return"object"===typeof n&&(n=e.template,r=d({},t,e.data||{})),zi.render(n(r),i),M(i),i.children}}},It.compile=Fi.compile,i.d(t,"a",function(){return qi});var Ui,Gi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qi=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={items:"item"},i.immediateRender=!1,i}return Gi(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return n.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(ji);Ui=qi,[Wi,n.PureComponent].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){Ui.prototype[t]=e.prototype[t]})})}]]);
//# sourceMappingURL=2.c088d21a.chunk.js.map